window.Modernizr=function(a,b,c){function d(a){r.cssText=a}function e(a,b){return typeof a===b}function f(a,b){return!!~(""+a).indexOf(b)}function g(a,b){for(var d in a){var e=a[d];if(!f(e,"-")&&r[e]!==c)return"pfx"==b?e:!0}return!1}function h(a,b,d){for(var f in a){var g=b[a[f]];if(g!==c)return d===!1?a[f]:e(g,"function")?g.bind(d||b):g}return!1}function i(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),f=(a+" "+v.join(d+" ")+d).split(" ");return e(b,"string")||e(b,"undefined")?g(f,b):(f=(a+" "+w.join(d+" ")+d).split(" "),h(f,b,c))}function j(){n.input=function(c){for(var d=0,e=c.length;e>d;d++)y[c[d]]=c[d]in s;return y.list&&(y.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),y}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var k,l,m="2.6.2",n={},o=b.documentElement,p="modernizr",q=b.createElement(p),r=q.style,s=b.createElement("input"),t=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),u="Webkit Moz O ms",v=u.split(" "),w=u.toLowerCase().split(" "),x={},y={},z=[],A=z.slice,B=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:p+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',p,'">',a,"</style>"].join(""),j.id=p,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=o.style.overflow,o.style.overflow="hidden",o.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),o.style.overflow=i),!!g},C=function(){function a(a,f){f=f||b.createElement(d[a]||"div"),a="on"+a;var g=a in f;return g||(f.setAttribute||(f=b.createElement("div")),f.setAttribute&&f.removeAttribute&&(f.setAttribute(a,""),g=e(f[a],"function"),e(f[a],"undefined")||(f[a]=c),f.removeAttribute(a))),f=null,g}var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return a}(),D={}.hasOwnProperty;l=e(D,"undefined")||e(D.call,"undefined")?function(a,b){return b in a&&e(a.constructor.prototype[b],"undefined")}:function(a,b){return D.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=A.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(A.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(A.call(arguments)))};return d});for(var E in x)l(x,E)&&(k=E.toLowerCase(),n[k]=x[E](),z.push((n[k]?"":"no-")+k));return n.input||j(),n.addTest=function(a,b){if("object"==typeof a)for(var d in a)l(a,d)&&n.addTest(d,a[d]);else{if(a=a.toLowerCase(),n[a]!==c)return n;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(o.className+=" "+(b?"":"no-")+a),n[a]=b}return n},d(""),q=s=null,n._version=m,n._prefixes=t,n._domPrefixes=w,n._cssomPrefixes=v,n.hasEvent=C,n.testProp=function(a){return g([a])},n.testAllProps=i,n.testStyles=B,n}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==q.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=r.shift();s=1,a?a.t?o(function(){("c"==a.t?m.injectCss:m.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):s=0}function i(a,c,d,e,f,i,j){function k(b){if(!n&&g(l.readyState)&&(t.r=n=1,!s&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&o(function(){v.removeChild(l)},50);for(var d in A[c])A[c].hasOwnProperty(d)&&A[c][d].onload()}}var j=j||m.errorTimeout,l=b.createElement(a),n=0,q=0,t={t:d,s:c,e:f,a:i,x:j};1===A[c]&&(q=1,A[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,q)},r.splice(e,0,t),"img"!=a&&(q||2===A[c]?(v.insertBefore(l,u?null:p),o(k,j)):A[c].push(l))}function j(a,b,c,d,f){return s=0,b=b||"j",e(a)?i("c"==b?x:w,a,b,this.i++,c,d,f):(r.splice(this.i++,0,a),1==r.length&&h()),this}function k(){var a=m;return a.loader={load:j,i:0},a}var l,m,n=b.documentElement,o=a.setTimeout,p=b.getElementsByTagName("script")[0],q={}.toString,r=[],s=0,t="MozAppearance"in n.style,u=t&&!!b.createRange().compareNode,v=u?n:p.parentNode,n=a.opera&&"[object Opera]"==q.call(a.opera),n=!!b.attachEvent&&!n,w=t?"object":n?"script":"img",x=n?"script":w,y=Array.isArray||function(a){return"[object Array]"==q.call(a)},z=[],A={},B={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}};m=function(a){function b(a){var b,c,d,a=a.split("!"),e=z.length,f=a.pop(),g=a.length,f={url:f,origUrl:f,prefixes:a};for(c=0;g>c;c++)d=a[c].split("="),(b=B[d.shift()])&&(f=b(f,d));for(c=0;e>c;c++)f=z[c](f);return f}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(A[i.url]?i.noexec=!0:A[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),A[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}),g(a,l,b,0,j);else if(Object(a)===a)for(i in h=function(){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c}(),a)a.hasOwnProperty(i)&&(!c&&!--h&&(d(l)?l=function(){var a=[].slice.call(arguments);m.apply(this,a),n()}:l[i]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),n()}}(m[i])),g(a[i],l,b,i,j))}else!c&&n()}var h,i,j=!!a.test,k=a.load||a.both,l=a.callback||f,m=l,n=a.complete||f;c(j?a.yep:a.nope,!!k),k&&c(k)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(y(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):y(j)?m(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},m.addPrefix=function(a,b){B[a]=b},m.addFilter=function(a){z.push(a)},m.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",l=function(){b.removeEventListener("DOMContentLoaded",l,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k,l,n=b.createElement("script"),e=e||m.errorTimeout;n.src=a;for(l in d)n.setAttribute(l,d[l]);c=j?h:c||f,n.onreadystatechange=n.onload=function(){!k&&g(n.readyState)&&(k=1,c(),n.onload=n.onreadystatechange=null)},o(function(){k||(k=1,c(1))},e),i?n.onload():p.parentNode.insertBefore(n,p)},a.yepnope.injectCss=function(a,c,d,e,g,i){var j,e=b.createElement("link"),c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(p.parentNode.insertBefore(e,p),o(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};var GSFN;void 0===GSFN&&(GSFN={}),GSFN.initialized||(GSFN.gId=function(a){return document.getElementById(a)},GSFN.hasClassName=function(a,b){var c=a.className;return c.length>0&&(c===b||new RegExp("(^|\\s)"+b+"(\\s|$)").test(c))},GSFN.addClassName=function(a,b){return GSFN.hasClassName(a,b)||(a.className+=(a.className?" ":"")+b),a},GSFN.removeClassName=function(a,b){var c=GSFN.strip(a.className.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," "));return a.className=c,a},GSFN.strip=function(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")},GSFN.add_css=function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css",c.styleSheet?c.styleSheet.cssText=a:(rules=document.createTextNode(a),c.appendChild(rules)),b.appendChild(c)},GSFN.initialized=!0),GSFN.feedback_widget=function(a){this.widget_disabled=!1,this.options=a,this.is_ssl="https:"===document.location.protocol,this.options.display||(this.options.display="overlay"),this.is_ssl?(this.feedback_base_url=this.local_ssl_base_url,this.asset_base_url=this.s3_ssl_base_url):(this.feedback_base_url=this.local_base_url,this.asset_base_url=this.s3_base_url),this.options.local_assets===!0&&(this.asset_base_url=this.feedback_base_url);var b=this.options.auto_tag===!1;this.query=[],b||(this.options.product&&this.query.push("product="+encodeURIComponent(this.options.product)),this.options.tag&&this.query.push("tag="+encodeURIComponent(this.options.tag)),this.options.user_defined_code&&this.query.push("user_defined_code="+encodeURIComponent(this.options.user_defined_code))),this.options.display&&this.query.push("display="+encodeURIComponent(this.options.display)),this.options.style&&this.query.push("style="+encodeURIComponent(this.options.style)),this.options.popular_topics&&this.query.push("popular_topics="+encodeURIComponent(this.options.popular_topics)),this.options.limit&&this.query.push("limit="+encodeURIComponent(this.options.limit)),this.options.problem&&this.query.push("problem="+encodeURIComponent(this.options.problem)),this.options.powered_by&&this.query.push("powered_by="+encodeURIComponent(this.options.powered_by)),this.options.custom_css&&this.query.push("custom_css="+encodeURIComponent(this.options.custom_css)),this.options.custom_ie_css&&this.query.push("custom_ie_css="+encodeURIComponent(this.options.custom_ie_css)),this.options.custom_js&&this.query.push("custom_js="+encodeURIComponent(this.options.custom_js)),this.options.auto_tag===!1&&this.query.push("auto_tag="+encodeURIComponent(this.options.auto_tag)),this.options.interstitial&&this.query.push("interstitial="+encodeURIComponent(this.options.interstitial)),this.options.community_base_url&&this.query.push("community_base_url="+encodeURIComponent(this.options.community_base_url)),this.options.document_domain&&this.query.push("document_domain="+encodeURIComponent(this.options.document_domain));var c=this.get_fastpass_url(this.options);if(c&&this.query.push("fastpass="+encodeURIComponent(c)),this.query_string="?"+this.query.join("&"),this.feedback_url=this.feedback_base_url+"/"+this.options.company+"/feedback/topics/new"+this.query_string,this.options=a?a:{},this.options.placement=this.options.placement?this.options.placement:"left",this.options.color=this.options.color?this.options.color:"#222","overlay"===this.options.display?(this.initial_iframe_url="",this.options.width||(this.options.width="658px"),this.options.height||(this.options.height="100%")):(this.initial_iframe_url=this.feedback_url,this.options.width||(this.options.width="100%"),this.options.height||(this.options.height="500px")),this.iframe_html=this.widget_disabled?'<div id="fdbk_iframe" style="position:relative; top: 20px; margin:20px;background:orange;color:purple;font-size:72px; padding: 20px;">WIDGETS ARE UNAVAILABLE LOL</div>':'<iframe id="fdbk_iframe" title="Feedback box" allowTransparency="true" scrolling="no" frameborder="0" class="loading"'+(""!==this.initial_iframe_url?' src="'+this.initial_iframe_url+'"':"")+' width="'+this.options.width+'" height="'+this.options.height+'" style="width: '+this.options.width+"; height: "+this.options.height+';"></iframe>',this.tab_html='<a href="#tab" id="fdbk_tab" class="fdbk_tab_'+this.options.placement+'" style="background-color:'+this.options.color+'">FEEDBACK</a>',this.overlay_html='<div id="fdbk_overlay" style="display:none"><div id="fdbk_container"><a href="#close" id="fdbk_close" title="Close feedback box"></a>'+this.iframe_html+'</div><div id="fdbk_screen"></div></div>',"overlay"===this.options.display){if(raw_css="#fdbk_overlay {\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  z-index: 1000000;\n  position: absolute; }\n\n#fdbk_screen {\n  top: 0;\n  left: 0;\n  z-index: 1;\n  width: 100%;\n  position: absolute;\n  background-color: black;\n  opacity: 0.45;\n  -moz-opacity: 0.45;\n  filter: alpha(opacity=45); }\n\n#fdbk_container {\n  width: 680px;\n  height: 640px;\n  margin: 0 auto;\n  z-index: 2;\n  position: relative; }\n  #fdbk_container iframe {\n    width: 658px;\n    height: 100%;\n    margin: 20px;\n    background: transparent; }\n  #fdbk_container iframe.loading {\n    background: transparent url(https://s3.amazonaws.com/getsatisfaction.com/images/fb_loading.png) no-repeat; }\n\na#fdbk_tab {\n  top: 30%;\n  left: 0;\n  width: 42px;\n  height: 102px;\n  color: white;\n  cursor: pointer;\n  text-indent: -100000px;\n  overflow: hidden;\n  position: fixed;\n  z-index: 100000;\n  margin-left: -7px;\n  background-image: url(https://s3.amazonaws.com/getsatisfaction.com/images/feedback_trans_tab.png);\n  _position: absolute;\n  _background-image: url(https://s3.amazonaws.com/getsatisfaction.com/images/feedback_tab_ie6.png); }\n  a#fdbk_tab:hover {\n    margin-left: -4px; }\n\na.fdbk_tab_right {\n  right: 0 !important;\n  left: auto !important;\n  margin-right: 0 !important;\n  margin-left: auto !important;\n  width: 35px !important; }\n  a.fdbk_tab_right:hover {\n    width: 38px !important;\n    margin-right: 0 !important;\n    margin-left: auto !important; }\n\na.fdbk_tab_bottom {\n  top: auto !important;\n  bottom: 0 !important;\n  left: 20% !important;\n  height: 38px !important;\n  width: 102px !important;\n  background-position: 0 -102px !important;\n  margin-bottom: -7px !important;\n  margin-left: auto !important; }\n  a.fdbk_tab_bottom:hover {\n    margin-bottom: -4px !important;\n    margin-left: auto !important; }\n\na.fdbk_tab_hidden {\n  display: none !important; }\n\na#fdbk_close {\n  position: absolute;\n  cursor: pointer;\n  outline: none;\n  top: 0;\n  left: 0;\n  z-index: 4;\n  width: 42px;\n  height: 42px;\n  overflow: hidden;\n  background-image: url(https://s3.amazonaws.com/getsatisfaction.com/images/feedback-close.png);\n  _background: none;\n  _filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='https://s3.amazonaws.com/getsatisfaction.com/images/feedback-close.png', sizingMethod='crop'); }\n  a#fdbk_close:hover {\n    background-position: -42px 0; }\n\n.feedback_tab_on embed, .feedback_tab_on select, .feedback_tab_on object {\n  visibility: hidden; }\n",replacer_regex=new RegExp(this.s3_ssl_base_url,"g"),translated_css=raw_css.replace(replacer_regex,this.asset_base_url),GSFN.add_css(translated_css),this.options.container){var d=GSFN.gId(this.options.container);d.innerHTML=this.tab_html+this.overlay_html}else document.write(this.tab_html),document.write(this.overlay_html);var e=this;GSFN.gId("fdbk_tab").onclick=function(){return e.show(),!1},GSFN.gId("fdbk_close").onclick=function(){return e.hide(),!1},GSFN.gId("fdbk_iframe").removeAttribute("src")}else if(this.options.container){var f=GSFN.gId(this.options.container);f.innerHTML=this.iframe_html}else document.write(this.iframe_html)},GSFN.feedback_widget.prototype={local_base_url:"http://getsatisfaction.com",local_ssl_base_url:"https://getsatisfaction.com",s3_base_url:"http://s3.amazonaws.com/getsatisfaction.com",s3_ssl_base_url:"https://s3.amazonaws.com/getsatisfaction.com",asset_url:function(a){return this.asset_base_url+a},set_position:function(){this.scroll_top=document.documentElement.scrollTop||document.body.scrollTop,this.scroll_height=document.documentElement.scrollHeight,this.client_height=window.innerHeight||document.documentElement.clientHeight,GSFN.gId("fdbk_screen").style.height=this.scroll_height+"px",GSFN.gId("fdbk_container").style.top=this.scroll_top+.1*this.client_height+"px"},show:function(){GSFN.gId("fdbk_iframe").setAttribute("src",this.feedback_url),GSFN.gId("fdbk_iframe").addEventListener?GSFN.gId("fdbk_iframe").addEventListener("load",this.loaded,!1):GSFN.gId("fdbk_iframe").attachEvent&&GSFN.gId("fdbk_iframe").attachEvent("onload",this.loaded),this.set_position(),GSFN.addClassName(document.getElementsByTagName("html")[0],"feedback_tab_on"),GSFN.gId("fdbk_overlay").style.display="block"},hide:function(){GSFN.gId("fdbk_iframe").addEventListener?GSFN.gId("fdbk_iframe").removeEventListener("load",this.loaded,!1):GSFN.gId("fdbk_iframe").attachEvent&&GSFN.gId("fdbk_iframe").detachEvent("onload",this.loaded),GSFN.gId("fdbk_overlay").style.display="none",GSFN.gId("fdbk_iframe").removeAttribute("src"),GSFN.gId("fdbk_iframe").className="loading",GSFN.removeClassName(document.getElementsByTagName("html")[0],"feedback_tab_on")},loaded:function(){GSFN.gId("fdbk_iframe").className="loaded"},get_fastpass_url:function(a){if(a.fastpass)return a.fastpass;for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c],e=/\/fastpass/;if(d.src.match(e&&d.src.match(/oauth/)))return d.src}}},function(a,b,c){function d(c,d,e){var f=b.createElement(c);return d&&(f.id=_+d),e&&(f.style.cssText=e),a(f)}function e(){return c.innerHeight?c.innerHeight:a(c).height()}function f(a){var b=y.length,c=(Q+a)%b;return 0>c?b+c:c}function g(a,b){return Math.round((/%/.test(a)?("x"===b?z.width():e())/100:1)*parseInt(a,10))}function h(a,b){return a.photo||a.photoRegex.test(b)}function i(a,b){return a.retinaUrl&&c.devicePixelRatio>1?b.replace(a.photoRegex,a.retinaSuffix):b}function j(a){"contains"in r[0]&&!r[0].contains(a.target)&&(a.stopPropagation(),r.focus())}function k(){var b,c=a.data(P,$);null==c?(K=a.extend({},Z),console&&console.log&&console.log("Error: cboxElement missing settings object")):K=a.extend({},c);for(b in K)a.isFunction(K[b])&&"on"!==b.slice(0,2)&&(K[b]=K[b].call(P));K.rel=K.rel||P.rel||a(P).data("rel")||"nofollow",K.href=K.href||a(P).attr("href"),K.title=K.title||P.title,"string"==typeof K.href&&(K.href=a.trim(K.href))}function l(c,d){a(b).trigger(c),hb.triggerHandler(c),a.isFunction(d)&&d.call(P)}function m(c){U||(P=c,k(),y=a(P),Q=0,"nofollow"!==K.rel&&(y=a("."+ab).filter(function(){var b,c=a.data(this,$);return c&&(b=a(this).data("rel")||c.rel||this.rel),b===K.rel}),Q=y.index(P),-1===Q&&(y=y.add(P),Q=y.length-1)),q.css({opacity:parseFloat(K.opacity),cursor:K.overlayClose?"pointer":"auto",visibility:"visible"}).show(),X&&r.add(q).removeClass(X),K.className&&r.add(q).addClass(K.className),X=K.className,K.closeButton?I.html(K.close).appendTo(t):I.appendTo("<div/>"),S||(S=T=!0,r.css({visibility:"hidden",display:"block"}),A=d(ib,"LoadedContent","width:0; height:0; overflow:hidden"),t.css({width:"",height:""}).append(A),L=u.height()+x.height()+t.outerHeight(!0)-t.height(),M=v.width()+w.width()+t.outerWidth(!0)-t.width(),N=A.outerHeight(!0),O=A.outerWidth(!0),K.w=g(K.initialWidth,"x"),K.h=g(K.initialHeight,"y"),A.css({width:"",height:K.h}),W.position(),l(bb,K.onOpen),J.add(D).hide(),r.focus(),K.trapFocus&&b.addEventListener&&(b.addEventListener("focus",j,!0),hb.one(fb,function(){b.removeEventListener("focus",j,!0)})),K.returnFocus&&hb.one(fb,function(){a(P).focus()})),p())}function n(){!r&&b.body&&(Y=!1,z=a(c),r=d(ib).attr({id:$,"class":a.support.opacity===!1?_+"IE":"",role:"dialog",tabindex:"-1"}).hide(),q=d(ib,"Overlay").hide(),C=a([d(ib,"LoadingOverlay")[0],d(ib,"LoadingGraphic")[0]]),s=d(ib,"Wrapper"),t=d(ib,"Content").append(D=d(ib,"Title"),E=d(ib,"Current"),H=a('<button type="button"/>').attr({id:_+"Previous"}),G=a('<button type="button"/>').attr({id:_+"Next"}),F=d("button","Slideshow"),C),I=a('<button type="button"/>').attr({id:_+"Close"}),s.append(d(ib).append(d(ib,"TopLeft"),u=d(ib,"TopCenter"),d(ib,"TopRight")),d(ib,!1,"clear:left").append(v=d(ib,"MiddleLeft"),t,w=d(ib,"MiddleRight")),d(ib,!1,"clear:left").append(d(ib,"BottomLeft"),x=d(ib,"BottomCenter"),d(ib,"BottomRight"))).find("div div").css({"float":"left"}),B=d(ib,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),J=G.add(H).add(E).add(F),a(b.body).append(q,r.append(s,B)))}function o(){function c(a){a.which>1||a.shiftKey||a.altKey||a.metaKey||a.ctrlKey||(a.preventDefault(),m(this))}return r?(Y||(Y=!0,G.click(function(){W.next()}),H.click(function(){W.prev()}),I.click(function(){W.close()}),q.click(function(){K.overlayClose&&W.close()}),a(b).bind("keydown."+_,function(a){var b=a.keyCode;S&&K.escKey&&27===b&&(a.preventDefault(),W.close()),S&&K.arrowKey&&y[1]&&!a.altKey&&(37===b?(a.preventDefault(),H.click()):39===b&&(a.preventDefault(),G.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+_,"."+ab,c):a("."+ab).live("click."+_,c)),!0):!1}function p(){var e,f,j,m=W.prep,n=++jb;T=!0,R=!1,P=y[Q],k(),l(gb),l(cb,K.onLoad),K.h=K.height?g(K.height,"y")-N-L:K.innerHeight&&g(K.innerHeight,"y"),K.w=K.width?g(K.width,"x")-O-M:K.innerWidth&&g(K.innerWidth,"x"),K.mw=K.w,K.mh=K.h,K.maxWidth&&(K.mw=g(K.maxWidth,"x")-O-M,K.mw=K.w&&K.w<K.mw?K.w:K.mw),K.maxHeight&&(K.mh=g(K.maxHeight,"y")-N-L,K.mh=K.h&&K.h<K.mh?K.h:K.mh),e=K.href,V=setTimeout(function(){C.show()},100),K.inline?(j=d(ib).hide().insertBefore(a(e)[0]),hb.one(gb,function(){j.replaceWith(A.children())}),m(a(e))):K.iframe?m(" "):K.html?m(K.html):h(K,e)?(e=i(K,e),R=b.createElement("img"),a(R).addClass(_+"Photo").bind("error",function(){K.title=!1,m(d(ib,"Error").html(K.imgError))}).one("load",function(){var b;n===jb&&(a.each(["alt","longdesc","aria-describedby"],function(b,c){var d=a(P).attr(c)||a(P).attr("data-"+c);d&&R.setAttribute(c,d)}),K.retinaImage&&c.devicePixelRatio>1&&(R.height=R.height/c.devicePixelRatio,R.width=R.width/c.devicePixelRatio),K.scalePhotos&&(f=function(){R.height-=R.height*b,R.width-=R.width*b},K.mw&&R.width>K.mw&&(b=(R.width-K.mw)/R.width,f()),K.mh&&R.height>K.mh&&(b=(R.height-K.mh)/R.height,f())),K.h&&(R.style.marginTop=Math.max(K.mh-R.height,0)/2+"px"),y[1]&&(K.loop||y[Q+1])&&(R.style.cursor="pointer",R.onclick=function(){W.next()}),R.style.width=R.width+"px",R.style.height=R.height+"px",setTimeout(function(){m(R)},1))}),setTimeout(function(){R.src=e},1)):e&&B.load(e,K.data,function(b,c){n===jb&&m("error"===c?d(ib,"Error").html(K.xhrError):a(this).contents())})}var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1},$="colorbox",_="cbox",ab=_+"Element",bb=_+"_open",cb=_+"_load",db=_+"_complete",eb=_+"_cleanup",fb=_+"_closed",gb=_+"_purge",hb=a("<a/>"),ib="div",jb=0,kb={},lb=function(){function a(){clearTimeout(g)}function b(){(K.loop||y[Q+1])&&(a(),g=setTimeout(W.next,K.slideshowSpeed))}function c(){F.html(K.slideshowStop).unbind(i).one(i,d),hb.bind(db,b).bind(cb,a),r.removeClass(h+"off").addClass(h+"on")}function d(){a(),hb.unbind(db,b).unbind(cb,a),F.html(K.slideshowStart).unbind(i).one(i,function(){W.next(),c()}),r.removeClass(h+"on").addClass(h+"off")}function e(){f=!1,F.hide(),a(),hb.unbind(db,b).unbind(cb,a),r.removeClass(h+"off "+h+"on")}var f,g,h=_+"Slideshow_",i="click."+_;return function(){f?K.slideshow||(hb.unbind(eb,e),e()):K.slideshow&&y[1]&&(f=!0,hb.one(eb,e),K.slideshowAuto?c():d(),F.show())}}();a.colorbox||(a(n),W=a.fn[$]=a[$]=function(b,c){var d=this;if(b=b||{},n(),o()){if(a.isFunction(d))d=a("<a/>"),b.open=!0;else if(!d[0])return d;c&&(b.onComplete=c),d.each(function(){a.data(this,$,a.extend({},a.data(this,$)||Z,b))}).addClass(ab),(a.isFunction(b.open)&&b.open.call(d)||b.open)&&m(d[0])}return d},W.position=function(b,c){function d(){u[0].style.width=x[0].style.width=t[0].style.width=parseInt(r[0].style.width,10)-M+"px",t[0].style.height=v[0].style.height=w[0].style.height=parseInt(r[0].style.height,10)-L+"px"}var f,h,i,j=0,k=0,l=r.offset();if(z.unbind("resize."+_),r.css({top:-9e4,left:-9e4}),h=z.scrollTop(),i=z.scrollLeft(),K.fixed?(l.top-=h,l.left-=i,r.css({position:"fixed"})):(j=h,k=i,r.css({position:"absolute"})),k+=K.right!==!1?Math.max(z.width()-K.w-O-M-g(K.right,"x"),0):K.left!==!1?g(K.left,"x"):Math.round(Math.max(z.width()-K.w-O-M,0)/2),j+=K.bottom!==!1?Math.max(e()-K.h-N-L-g(K.bottom,"y"),0):K.top!==!1?g(K.top,"y"):Math.round(Math.max(e()-K.h-N-L,0)/2),r.css({top:l.top,left:l.left,visibility:"visible"}),s[0].style.width=s[0].style.height="9999px",f={width:K.w+O+M,height:K.h+N+L,top:j,left:k},b){var m=0;a.each(f,function(a){return f[a]!==kb[a]?(m=b,void 0):void 0}),b=m}kb=f,b||r.css(f),r.dequeue().animate(f,{duration:b||0,complete:function(){d(),T=!1,s[0].style.width=K.w+O+M+"px",s[0].style.height=K.h+N+L+"px",K.reposition&&setTimeout(function(){z.bind("resize."+_,W.position)},1),c&&c()},step:d})},W.resize=function(a){var b;S&&(a=a||{},a.width&&(K.w=g(a.width,"x")-O-M),a.innerWidth&&(K.w=g(a.innerWidth,"x")),A.css({width:K.w}),a.height&&(K.h=g(a.height,"y")-N-L),a.innerHeight&&(K.h=g(a.innerHeight,"y")),a.innerHeight||a.height||(b=A.scrollTop(),A.css({height:"auto"}),K.h=A.height()),A.css({height:K.h}),b&&A.scrollTop(b),W.position("none"===K.transition?0:K.speed))},W.prep=function(c){function e(){return K.w=K.w||A.width(),K.w=K.mw&&K.mw<K.w?K.mw:K.w,K.w}function g(){return K.h=K.h||A.height(),K.h=K.mh&&K.mh<K.h?K.mh:K.h,K.h}if(S){var j,k="none"===K.transition?0:K.speed;A.empty().remove(),A=d(ib,"LoadedContent").append(c),A.hide().appendTo(B.show()).css({width:e(),overflow:K.scrolling?"auto":"hidden"}).css({height:g()}).prependTo(t),B.hide(),a(R).css({"float":"none"}),j=function(){function c(){a.support.opacity===!1&&r[0].style.removeAttribute("filter")}var e,g,j=y.length,m="frameBorder",n="allowTransparency";S&&(g=function(){clearTimeout(V),C.hide(),l(db,K.onComplete)},D.html(K.title).add(A).show(),j>1?("string"==typeof K.current&&E.html(K.current.replace("{current}",Q+1).replace("{total}",j)).show(),G[K.loop||j-1>Q?"show":"hide"]().html(K.next),H[K.loop||Q?"show":"hide"]().html(K.previous),lb(),K.preloading&&a.each([f(-1),f(1)],function(){var c,d,e=y[this],f=a.data(e,$);f&&f.href?(c=f.href,a.isFunction(c)&&(c=c.call(e))):c=a(e).attr("href"),c&&h(f,c)&&(c=i(f,c),d=b.createElement("img"),d.src=c)})):J.hide(),K.iframe?(e=d("iframe")[0],m in e&&(e[m]=0),n in e&&(e[n]="true"),K.scrolling||(e.scrolling="no"),a(e).attr({src:K.href,name:(new Date).getTime(),"class":_+"Iframe",allowFullScreen:!0,webkitAllowFullScreen:!0,mozallowfullscreen:!0}).one("load",g).appendTo(A),hb.one(gb,function(){e.src="//about:blank"}),K.fastIframe&&a(e).trigger("load")):g(),"fade"===K.transition?r.fadeTo(k,1,c):c())},"fade"===K.transition?r.fadeTo(k,0,function(){W.position(0,j)}):W.position(k,j)}},W.next=function(){!T&&y[1]&&(K.loop||y[Q+1])&&(Q=f(1),m(y[Q]))},W.prev=function(){!T&&y[1]&&(K.loop||Q)&&(Q=f(-1),m(y[Q]))},W.close=function(){S&&!U&&(U=!0,S=!1,l(eb,K.onCleanup),z.unbind("."+_),q.fadeTo(K.fadeOut||0,0),r.stop().fadeTo(K.fadeOut||0,0,function(){r.add(q).css({opacity:1,cursor:"auto"}).hide(),l(gb),A.empty().remove(),setTimeout(function(){U=!1,l(fb,K.onClosed)},1)}))},W.remove=function(){r&&(r.stop(),a.colorbox.close(),r.stop().remove(),q.remove(),U=!1,r=null,a("."+ab).removeData($).removeClass(ab),a(b).unbind("click."+_))},W.element=function(){return a(P)},W.settings=Z)}(jQuery,document,window),function(a){a.extend(a.fn,{validate:function(b){if(this.length){var c=a.data(this[0],"validator");return c?c:(this.attr("novalidate","novalidate"),c=new a.validator(b,this[0]),a.data(this[0],"validator",c),c.settings.onsubmit&&(b=this.find("input, button"),b.filter(".cancel").click(function(){c.cancelSubmit=!0}),c.settings.submitHandler&&b.filter(":submit").click(function(){c.submitButton=this}),this.submit(function(b){function d(){if(c.settings.submitHandler){if(c.submitButton)var b=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm);return c.settings.submitHandler.call(c,c.currentForm),c.submitButton&&b.remove(),!1}return!0}return c.settings.debug&&b.preventDefault(),c.cancelSubmit?(c.cancelSubmit=!1,d()):c.form()?c.pendingRequest?(c.formSubmitted=!0,!1):d():(c.focusInvalid(),!1)})),c)}b&&b.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")},valid:function(){if(a(this[0]).is("form"))return this.validate().form();var b=!0,c=a(this[0].form).validate();return this.each(function(){b&=c.element(this)}),b},removeAttrs:function(b){var c={},d=this;return a.each(b.split(/\s/),function(a,b){c[b]=d.attr(b),d.removeAttr(b)}),c},rules:function(b,c){var d=this[0];if(b){var e=a.data(d.form,"validator").settings,f=e.rules,g=a.validator.staticRules(d);switch(b){case"add":a.extend(g,a.validator.normalizeRule(c)),f[d.name]=g,c.messages&&(e.messages[d.name]=a.extend(e.messages[d.name],c.messages));break;case"remove":if(!c)return delete f[d.name],g;var h={};return a.each(c.split(/\s/),function(a,b){h[b]=g[b],delete g[b]}),h}}return d=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(d),a.validator.classRules(d),a.validator.attributeRules(d),a.validator.staticRules(d)),d),d.required&&(e=d.required,delete d.required,d=a.extend({required:e},d)),d}}),a.extend(a.expr[":"],{blank:function(b){return!a.trim(""+b.value)},filled:function(b){return!!a.trim(""+b.value)},unchecked:function(a){return!a.checked}}),a.validator=function(b,c){this.settings=a.extend(!0,{},a.validator.defaults,b),this.currentForm=c,this.init()},a.validator.format=function(b,c){return 1==arguments.length?function(){var c=a.makeArray(arguments);return c.unshift(b),a.validator.format.apply(this,c)}:(arguments.length>2&&c.constructor!=Array&&(c=a.makeArray(arguments).slice(1)),c.constructor!=Array&&(c=[c]),a.each(c,function(a,c){b=b.replace(RegExp("\\{"+a+"\\}","g"),c)}),b)},a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(a){this.lastActive=a,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(a)).hide())},onfocusout:function(a){this.checkable(a)||!(a.name in this.submitted)&&this.optional(a)||this.element(a)},onkeyup:function(a){(a.name in this.submitted||a==this.lastElement)&&this.element(a)},onclick:function(a){a.name in this.submitted?this.element(a):a.parentNode.name in this.submitted&&this.element(a.parentNode)},highlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).addClass(c).removeClass(d):a(b).addClass(c).removeClass(d)},unhighlight:function(b,c,d){"radio"===b.type?this.findByName(b.name).removeClass(c).addClass(d):a(b).removeClass(c).addClass(d)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function b(b){var c=a.data(this[0].form,"validator"),d="on"+b.type.replace(/^validate/,"");c.settings[d]&&c.settings[d].call(c,this[0],b)}this.labelContainer=a(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm),this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();
var c=this.groups={};a.each(this.settings.groups,function(b,d){a.each(d.split(/\s/),function(a,d){c[d]=b})});var d=this.settings.rules;a.each(d,function(b,c){d[b]=a.validator.normalizeRule(c)}),a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",b).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",b),this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),a.extend(this.submitted,this.errorMap),this.invalid=a.extend({},this.errorMap),this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var a=0,b=this.currentElements=this.elements();b[a];a++)this.check(b[a]);return this.valid()},element:function(b){this.lastElement=b=this.validationTargetFor(this.clean(b)),this.prepareElement(b),this.currentElements=a(b);var c=this.check(b);return c?delete this.invalid[b.name]:this.invalid[b.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),c},showErrors:function(b){if(b){a.extend(this.errorMap,b),this.errorList=[];for(var c in b)this.errorList.push({message:b[c],element:this.findByName(c)[0]});this.successList=a.grep(this.successList,function(a){return!(a.name in b)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(a){var b,c=0;for(b in a)c++;return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}},findLastActive:function(){var b=this.lastActive;return b&&1==a.grep(this.errorList,function(a){return a.element.name==b.name}).length&&b},elements:function(){var b=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&b.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in c||!b.objectLength(a(this).rules())?!1:c[this.name]=!0})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=a([]),this.toHide=a([]),this.currentElements=a([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset(),this.toHide=this.errorsFor(a)},check:function(b){b=this.validationTargetFor(this.clean(b));var c,d=a(b).rules(),e=!1;for(c in d){var f={method:c,parameters:d[c]};try{var g=a.validator.methods[c].call(this,b.value.replace(/\r/g,""),b,f.parameters);if("dependency-mismatch"==g)e=!0;else{if(e=!1,"pending"==g)return this.toHide=this.toHide.not(this.errorsFor(b)),void 0;if(!g)return this.formatAndAdd(b,f),!1}}catch(h){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+b.id+", check the '"+f.method+"' method",h),h}}return e?void 0:(this.objectLength(d)&&this.successList.push(b),!0)},customMetaMessage:function(b,c){if(a.metadata){var d=this.settings.meta?a(b).metadata()[this.settings.meta]:a(b).metadata();return d&&d.messages&&d.messages[c]}},customMessage:function(a,b){var c=this.settings.messages[a];return c&&(c.constructor==String?c:c[b])},findDefined:function(){for(var a=0;a<arguments.length;a++)if(void 0!==arguments[a])return arguments[a]},defaultMessage:function(b,c){return this.findDefined(this.customMessage(b.name,c),this.customMetaMessage(b,c),!this.settings.ignoreTitle&&b.title||void 0,a.validator.messages[c],"<strong>Warning: No message defined for "+b.name+"</strong>")},formatAndAdd:function(a,b){var c=this.defaultMessage(a,b.method),d=/\$?\{(\d+)\}/g;"function"==typeof c?c=c.call(this,b.parameters,a):d.test(c)&&(c=jQuery.format(c.replace(d,"{$1}"),b.parameters)),this.errorList.push({message:c,element:a}),this.errorMap[a.name]=c,this.submitted[a.name]=c},addWrapper:function(a){return this.settings.wrapper&&(a=a.add(a.parent(this.settings.wrapper))),a},defaultShowErrors:function(){for(var a=0;this.errorList[a];a++){var b=this.errorList[a];this.settings.highlight&&this.settings.highlight.call(this,b.element,this.settings.errorClass,this.settings.validClass),this.showLabel(b.element,b.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(a=0;this.successList[a];a++)this.showLabel(this.successList[a]);if(this.settings.unhighlight)for(a=0,b=this.validElements();b[a];a++)this.settings.unhighlight.call(this,b[a],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(b,c){var d=this.errorsFor(b);d.length?(d.removeClass(this.settings.validClass).addClass(this.settings.errorClass),d.attr("generated")&&d.html(c)):(d=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(b),generated:!0}).addClass(this.settings.errorClass).html(c||""),this.settings.wrapper&&(d=d.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(d).length||(this.settings.errorPlacement?this.settings.errorPlacement(d,a(b)):d.insertAfter(b))),!c&&this.settings.success&&(d.text(""),"string"==typeof this.settings.success?d.addClass(this.settings.success):this.settings.success(d)),this.toShow=this.toShow.add(d)},errorsFor:function(b){var c=this.idOrName(b);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){return this.checkable(a)&&(a=this.findByName(a.name).not(this.settings.ignore)[0]),a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(b){var c=this.currentForm;return a(document.getElementsByName(b)).map(function(a,d){return d.form==c&&d.name==b&&d||null})},getLength:function(b,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c))return this.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return this.dependTypes[typeof a]?this.dependTypes[typeof a](a,b):!0},dependTypes:{"boolean":function(a){return a},string:function(b,c){return!!a(b,c.form).length},"function":function(a,b){return a(b)}},optional:function(b){return!a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(a){this.pending[a.name]||(this.pendingRequest++,this.pending[a.name]=!0)},stopRequest:function(b,c){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[b.name],c&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(a(this.currentForm).submit(),this.formSubmitted=!1):!c&&0==this.pendingRequest&&this.formSubmitted&&(a(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:!0,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(b,c){b.constructor==String?this.classRuleSettings[b]=c:a.extend(this.classRuleSettings,b)},classRules:function(b){var c={};return(b=a(b).attr("class"))&&a.each(b.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])}),c},attributeRules:function(b){var c={};b=a(b);for(var d in a.validator.methods){var e;(e="required"===d&&"function"==typeof a.fn.prop?b.prop(d):b.attr(d))?c[d]=e:b[0].getAttribute("type")===d&&(c[d]=!0)}return c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength,c},metadataRules:function(b){if(!a.metadata)return{};var c=a.data(b.form,"validator").settings.meta;return c?a(b).metadata()[c]:a(b).metadata()},staticRules:function(b){var c={},d=a.data(b.form,"validator");return d.settings.rules&&(c=a.validator.normalizeRule(d.settings.rules[b.name])||{}),c},normalizeRules:function(b,c){return a.each(b,function(d,e){if(e===!1)delete b[d];else if(e.param||e.depends){var f=!0;switch(typeof e.depends){case"string":f=!!a(e.depends,c.form).length;break;case"function":f=e.depends.call(c,c)}f?b[d]=void 0!==e.param?e.param:!0:delete b[d]}}),a.each(b,function(d,e){b[d]=a.isFunction(e)?e(c):e}),a.each(["minlength","maxlength","min","max"],function(){b[this]&&(b[this]=Number(b[this]))}),a.each(["rangelength","range"],function(){b[this]&&(b[this]=[Number(b[this][0]),Number(b[this][1])])}),a.validator.autoCreateRanges&&(b.min&&b.max&&(b.range=[b.min,b.max],delete b.min,delete b.max),b.minlength&&b.maxlength&&(b.rangelength=[b.minlength,b.maxlength],delete b.minlength,delete b.maxlength)),b.messages&&delete b.messages,b},normalizeRule:function(b){if("string"==typeof b){var c={};a.each(b.split(/\s/),function(){c[this]=!0}),b=c}return b},addMethod:function(b,c,d){a.validator.methods[b]=c,a.validator.messages[b]=void 0!=d?d:a.validator.messages[b],c.length<3&&a.validator.addClassRules(b,a.validator.normalizeRule(b))},methods:{required:function(b,c,d){if(!this.depend(d,c))return"dependency-mismatch";switch(c.nodeName.toLowerCase()){case"select":return(b=a(c).val())&&b.length>0;case"input":if(this.checkable(c))return this.getLength(b,c)>0;default:return a.trim(b).length>0}},remote:function(b,c,d){if(this.optional(c))return"dependency-mismatch";var e=this.previousValue(c);if(this.settings.messages[c.name]||(this.settings.messages[c.name]={}),e.originalMessage=this.settings.messages[c.name].remote,this.settings.messages[c.name].remote=e.message,d="string"==typeof d&&{url:d}||d,this.pending[c.name])return"pending";if(e.old===b)return e.valid;e.old=b;var f=this;this.startRequest(c);var g={};return g[c.name]=b,a.ajax(a.extend(!0,{url:d,mode:"abort",port:"validate"+c.name,dataType:"json",data:g,success:function(d){f.settings.messages[c.name].remote=e.originalMessage;var g=d===!0;if(g){var h=f.formSubmitted;f.prepareElement(c),f.formSubmitted=h,f.successList.push(c),f.showErrors()}else h={},d=d||f.defaultMessage(c,"remote"),h[c.name]=e.message=a.isFunction(d)?d(b):d,f.showErrors(h);e.valid=g,f.stopRequest(c,g)}},d)),"pending"},minlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)>=d},maxlength:function(b,c,d){return this.optional(c)||this.getLength(a.trim(b),c)<=d},rangelength:function(b,c,d){return b=this.getLength(a.trim(b),c),this.optional(c)||b>=d[0]&&b<=d[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},email:function(a,b){return this.optional(b)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(a)},url:function(a,b){return this.optional(b)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a))},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},number:function(a,b){return this.optional(b)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},creditcard:function(a,b){if(this.optional(b))return"dependency-mismatch";if(/[^0-9 -]+/.test(a))return!1;var c=0,d=0,e=!1;a=a.replace(/\D/g,"");for(var f=a.length-1;f>=0;f--)d=a.charAt(f),d=parseInt(d,10),e&&(d*=2)>9&&(d-=9),c+=d,e=!e;return c%10==0},accept:function(a,b,c){return c="string"==typeof c?c.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(b)||a.match(RegExp(".("+c+")$","i"))},equalTo:function(b,c,d){return d=a(d).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()}),b==d.val()}}}),a.format=a.validator.format}(jQuery),function(a){var b={};if(a.ajaxPrefilter)a.ajaxPrefilter(function(a,c,d){c=a.port,"abort"==a.mode&&(b[c]&&b[c].abort(),b[c]=d)});else{var c=a.ajax;a.ajax=function(d){var e=("port"in d?d:a.ajaxSettings).port;return"abort"==("mode"in d?d:a.ajaxSettings).mode?(b[e]&&b[e].abort(),b[e]=c.apply(this,arguments)):c.apply(this,arguments)}}}(jQuery),function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(b,c){function d(b){return b=a.event.fix(b),b.type=c,a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(b,d,!0)},teardown:function(){this.removeEventListener(b,d,!0)},handler:function(b){return arguments[0]=a.event.fix(b),arguments[0].type=c,a.event.handle.apply(this,arguments)}}}),a.extend(a.fn,{validateDelegate:function(b,c,d){return this.bind(c,function(c){var e=a(c.target);return e.is(b)?d.apply(e,arguments):void 0})}})}(jQuery),function(a){function b(a,b){return 3===a.nodeType?d(a,b):c(a,b)}function c(c,d){var e,f=a(c),g=f.clone().empty();return f.contents().each(function(){var a=d-g.text().length;0!==a&&(e=b(this,a),e&&g.append(e))}),g}function d(b,c){var d=e(b.data);return h&&(d=d.replace(/^ /,"")),h=!!d.match(/ $/),d=d.slice(0,c),d=a("<div/>").text(d).html()}function e(a){return a.replace(/\s+/g," ")}function f(b){var c=a(b),d=c.children(":last");if(!d)return b;var e=d.css("display");return e&&"inline"!==e?f(d):c}function g(b){var c=a(b),d=c.children(":last");return d&&d.is("p")?d:b}var h=!0;a.fn.truncate=function(c){var d=a.extend({},a.fn.truncate.defaults,c);a(this).each(function(){var c=a.trim(e(a(this).text())).length;if(!(c<=d.max_length)){var h=d.max_length-d.more.length-3,i=b(this,h),j=a(this).hide();i.insertAfter(j),f(i).append(' â€¦ <a href="#more">'+d.more+"</a>"),g(j).append(' <a href="#less">'+d.less+"</a>"),i.find("a:last").click(function(){return i.hide(),j.show(),!1}),j.find("a:last").click(function(){return i.show(),j.hide(),!1})}})},a.fn.truncate.defaults={max_length:100,more:"more",less:"less"}}(jQuery),function(a){a.fn.hoverIntent=function(b,c){var d={sensitivity:7,interval:100,timeout:0};d=a.extend(d,c?{over:b,out:c}:b);var e,f,g,h,i=function(a){e=a.pageX,f=a.pageY},j=function(){};j=function(b,c){return c.hoverIntent_t=clearTimeout(c.hoverIntent_t),Math.abs(g-e)+Math.abs(h-f)<d.sensitivity?(a(c).unbind("mousemove",i),c.hoverIntent_s=1,d.over.apply(c,[b])):(g=e,h=f,c.hoverIntent_t=setTimeout(function(){j(b,c)},d.interval),void 0)};var k=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,d.out.apply(b,[a])},l=function(b){var c=jQuery.extend({},b),e=this;e.hoverIntent_t&&(e.hoverIntent_t=clearTimeout(e.hoverIntent_t)),"mouseenter"===b.type?(g=c.pageX,h=c.pageY,a(e).bind("mousemove",i),1!==e.hoverIntent_s&&(e.hoverIntent_t=setTimeout(function(){j(c,e)},d.interval))):(a(e).unbind("mousemove",i),1===e.hoverIntent_s&&(e.hoverIntent_t=setTimeout(function(){k(c,e)},d.timeout)))};return this.bind("mouseenter",l).bind("mouseleave",l)}}(jQuery),function(a,b){$window=a(b),a.fn.lazyload=function(c){function d(){var b=0;e.each(function(){var c=a(this);if(!(f.skip_invisible&&!c.is(":visible")||a.abovethetop(this,f)||a.leftofbegin(this,f)))if(a.belowthefold(this,f)||a.rightoffold(this,f)){if(++b>f.failure_limit)return!1}else c.trigger("appear")})}var e=this,f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return c&&(void 0!==c.failurelimit&&(c.failure_limit=c.failurelimit,delete c.failurelimit),void 0!==c.effectspeed&&(c.effect_speed=c.effectspeed,delete c.effectspeed),a.extend(f,c)),$container=void 0===f.container||f.container===b?$window:a(f.container),0===f.event.indexOf("scroll")&&$container.bind(f.event,function(){return d()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,c.one("appear",function(){if(!this.loaded){if(f.appear){var d=e.length;f.appear.call(b,d,f)}a("<img />").bind("load",function(){c.hide().attr("src",c.data(f.data_attribute))[f.effect](f.effect_speed),b.loaded=!0;var d=a.grep(e,function(a){return!a.loaded});if(e=a(d),f.load){var g=e.length;f.load.call(b,g,f)}}).attr("src",c.data(f.data_attribute))}}),0!==f.event.indexOf("scroll")&&c.bind(f.event,function(){b.loaded||c.trigger("appear")})}),$window.bind("resize",function(){d()}),d(),this},a.belowthefold=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.height()+$window.scrollTop():$container.offset().top+$container.height(),e<=a(c).offset().top-d.threshold},a.rightoffold=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.width()+$window.scrollLeft():$container.offset().left+$container.width(),e<=a(c).offset().left-d.threshold},a.abovethetop=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.scrollTop():$container.offset().top,e>=a(c).offset().top+d.threshold+a(c).height()},a.leftofbegin=function(c,d){var e;return e=void 0===d.container||d.container===b?$window.scrollLeft():$container.offset().left,e>=a(c).offset().left+d.threshold+a(c).width()},a.inviewport=function(b,c){return!(a.rightofscreen(b,c)||a.leftofscreen(b,c)||a.belowthefold(b,c)||a.abovethetop(b,c))},a.extend(a.expr[":"],{"below-the-fold":function(c){return a.belowthefold(c,{threshold:0,container:b})},"above-the-top":function(c){return!a.belowthefold(c,{threshold:0,container:b})},"right-of-screen":function(c){return a.rightoffold(c,{threshold:0,container:b})},"left-of-screen":function(c){return!a.rightoffold(c,{threshold:0,container:b})},"in-viewport":function(c){return!a.inviewport(c,{threshold:0,container:b})},"above-the-fold":function(c){return!a.belowthefold(c,{threshold:0,container:b})},"right-of-fold":function(c){return a.rightoffold(c,{threshold:0,container:b})},"left-of-fold":function(c){return!a.rightoffold(c,{threshold:0,container:b})}})}(jQuery,window),$.fn.passwordStrength=function(a){function b(a){var b=a.length;b>5&&(b=5);var c=a.replace(/[0-9]/g,""),d=a.length-c.length;d>3&&(d=3);var e=a.replace(/\W/g,""),f=a.length-e.length;f>3&&(f=3);var g=a.replace(/[A-Z]/g,""),h=a.length-g.length;h>3&&(h=3);var i=10*b-20+10*d+15*f+10*h;return 0>i&&(i=0),i>100&&(i=100),i}return this.each(function(){var c=this;c.opts={},c.opts=$.extend({},$.fn.passwordStrength.defaults,a),c.div=$(c.opts.targetDiv),c.defaultClass=c.div.attr("class"),c.percents=c.opts.classes.length?100/c.opts.classes.length:100,v=$(this).keyup(function(){"undefined"==typeof el&&(this.el=$(this));var a=b(this.value),c=this.percents,d=Math.floor(a/c);a>=100&&(d=this.opts.classes.length-1),this.div.removeAttr("class").addClass(this.defaultClass).addClass(this.opts.classes[d])})})},$.fn.passwordStrength.defaults={classes:["is10 bad","is20 bad","is30 weak","is40 weak","is50 weak","is60 good","is70 good","is80 good","is90 good","is100 good"],targetDiv:"#password-strength",cache:{}},function(a){a.cookie=function(b,c,d){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(c))||null===c||void 0===c)){if(d=a.extend({},d),(null===c||void 0===c)&&(d.expires=-1),"number"==typeof d.expires){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}return c=String(c),document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};var g,h,i=d.raw?function(a){return a}:decodeURIComponent,j=document.cookie.split("; ");for(g=0,h;j[g];g++)if(h=j[g].split("="),i(h[0])===b)return i(h[1]||"");return null}}(jQuery),function(a){a.color={},a.color.make=function(b,c,d,e){var f={};return f.r=b||0,f.g=c||0,f.b=d||0,f.a=null!=e?e:1,f.add=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]+=b;return f.normalize()},f.scale=function(a,b){for(var c=0;c<a.length;++c)f[a.charAt(c)]*=b;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function a(a,b,c){return a>b?a:b>c?c:b}return f.r=a(0,parseInt(f.r),255),f.g=a(0,parseInt(f.g),255),f.b=a(0,parseInt(f.b),255),f.a=a(0,f.a,1),f},f.clone=function(){return a.color.make(f.r,f.b,f.g,f.a)},f.normalize()},a.color.extract=function(b,c){var d;do{if(d=b.css(c).toLowerCase(),""!=d&&"transparent"!=d)break;b=b.parent()}while(!a.nodeName(b.get(0),"body"));return"rgba(0, 0, 0, 0)"==d&&(d="transparent"),a.color.parse(d)},a.color.parse=function(c){var d,e=a.color.make;if(d=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10));if(d=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseInt(d[1],10),parseInt(d[2],10),parseInt(d[3],10),parseFloat(d[4]));if(d=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]));if(d=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(2.55*parseFloat(d[1]),2.55*parseFloat(d[2]),2.55*parseFloat(d[3]),parseFloat(d[4]));if(d=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return e(parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16));if(d=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return e(parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16));var f=a.trim(c).toLowerCase();return"transparent"==f?e(255,255,255,0):(d=b[f]||[0,0,0],e(d[0],d[1],d[2]))};var b={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(a){function b(b,d,e,f){function g(a,b){b=[ub].concat(b);for(var c=0;c<a.length;++c)a[c].apply(this,b)}function h(){for(var b=0;b<f.length;++b){var c=f[b];c.init(ub),c.options&&a.extend(!0,gb,c.options)}}function j(b){var c;for(a.extend(!0,gb,b),null==gb.xaxis.color&&(gb.xaxis.color=gb.grid.color),null==gb.yaxis.color&&(gb.yaxis.color=gb.grid.color),null==gb.xaxis.tickColor&&(gb.xaxis.tickColor=gb.grid.tickColor),null==gb.yaxis.tickColor&&(gb.yaxis.tickColor=gb.grid.tickColor),null==gb.grid.borderColor&&(gb.grid.borderColor=gb.grid.color),null==gb.grid.tickColor&&(gb.grid.tickColor=a.color.parse(gb.grid.color).scale("a",.22).toString()),c=0;c<Math.max(1,gb.xaxes.length);++c)gb.xaxes[c]=a.extend(!0,{},gb.xaxis,gb.xaxes[c]);for(c=0;c<Math.max(1,gb.yaxes.length);++c)gb.yaxes[c]=a.extend(!0,{},gb.yaxis,gb.yaxes[c]);for(gb.xaxis.noTicks&&null==gb.xaxis.ticks&&(gb.xaxis.ticks=gb.xaxis.noTicks),gb.yaxis.noTicks&&null==gb.yaxis.ticks&&(gb.yaxis.ticks=gb.yaxis.noTicks),gb.x2axis&&(gb.xaxes[1]=a.extend(!0,{},gb.xaxis,gb.x2axis),gb.xaxes[1].position="top"),gb.y2axis&&(gb.yaxes[1]=a.extend(!0,{},gb.yaxis,gb.y2axis),gb.yaxes[1].position="right"),gb.grid.coloredAreas&&(gb.grid.markings=gb.grid.coloredAreas),gb.grid.coloredAreasColor&&(gb.grid.markingsColor=gb.grid.coloredAreasColor),gb.lines&&a.extend(!0,gb.series.lines,gb.lines),gb.points&&a.extend(!0,gb.series.points,gb.points),gb.bars&&a.extend(!0,gb.series.bars,gb.bars),null!=gb.shadowSize&&(gb.series.shadowSize=gb.shadowSize),c=0;c<gb.xaxes.length;++c)q(mb,c+1).options=gb.xaxes[c];for(c=0;c<gb.yaxes.length;++c)q(nb,c+1).options=gb.yaxes[c];for(var d in tb)gb.hooks[d]&&gb.hooks[d].length&&(tb[d]=tb[d].concat(gb.hooks[d]));g(tb.processOptions,[gb])}function k(a){fb=l(a),r(),s()}function l(b){for(var c=[],d=0;d<b.length;++d){var e=a.extend(!0,{},gb.series);null!=b[d].data?(e.data=b[d].data,delete b[d].data,a.extend(!0,e,b[d]),b[d].data=e.data):e.data=b[d],c.push(e)}return c}function m(a,b){var c=a[b+"axis"];return"object"==typeof c&&(c=c.n),"number"!=typeof c&&(c=1),c}function n(){return a.grep(mb.concat(nb),function(a){return a})}function o(a){var b,c,d={};for(b=0;b<mb.length;++b)c=mb[b],c&&c.used&&(d["x"+c.n]=c.c2p(a.left));for(b=0;b<nb.length;++b)c=nb[b],c&&c.used&&(d["y"+c.n]=c.c2p(a.top));return void 0!==d.x1&&(d.x=d.x1),void 0!==d.y1&&(d.y=d.y1),d}function p(a){var b,c,d,e={};for(b=0;b<mb.length;++b)if(c=mb[b],c&&c.used&&(d="x"+c.n,null==a[d]&&1==c.n&&(d="x"),null!=a[d])){e.left=c.p2c(a[d]);break}for(b=0;b<nb.length;++b)if(c=nb[b],c&&c.used&&(d="y"+c.n,null==a[d]&&1==c.n&&(d="y"),null!=a[d])){e.top=c.p2c(a[d]);break}return e}function q(b,c){return b[c-1]||(b[c-1]={n:c,direction:b==mb?"x":"y",options:a.extend(!0,{},b==mb?gb.xaxis:gb.yaxis)}),b[c-1]}function r(){var b,c=fb.length,d=[],e=[];for(b=0;b<fb.length;++b){var f=fb[b].color;null!=f&&(--c,"number"==typeof f?e.push(f):d.push(a.color.parse(fb[b].color)))}for(b=0;b<e.length;++b)c=Math.max(c,e[b]+1);var g=[],h=0;for(b=0;g.length<c;){var i;i=gb.colors.length==b?a.color.make(100,100,100):a.color.parse(gb.colors[b]);var j=h%2==1?-1:1;i.scale("rgb",1+j*Math.ceil(h/2)*.2),g.push(i),++b,b>=gb.colors.length&&(b=0,++h)}var k,l=0;for(b=0;b<fb.length;++b){if(k=fb[b],null==k.color?(k.color=g[l].toString(),++l):"number"==typeof k.color&&(k.color=g[k.color].toString()),null==k.lines.show){var n,o=!0;for(n in k)if(k[n]&&k[n].show){o=!1;break}o&&(k.lines.show=!0)}k.xaxis=q(mb,m(k,"x")),k.yaxis=q(nb,m(k,"y"))}}function s(){function b(a,b,c){b<a.datamin&&b!=-q&&(a.datamin=b),c>a.datamax&&c!=q&&(a.datamax=c)}var c,d,e,f,h,i,j,k,l,m,o=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,q=Number.MAX_VALUE;for(a.each(n(),function(a,b){b.datamin=o,b.datamax=p,b.used=!1}),c=0;c<fb.length;++c)h=fb[c],h.datapoints={points:[]},g(tb.processRawData,[h,h.data,h.datapoints]);for(c=0;c<fb.length;++c){h=fb[c];var r=h.data,s=h.datapoints.format;if(s||(s=[],s.push({x:!0,number:!0,required:!0}),s.push({y:!0,number:!0,required:!0}),(h.bars.show||h.lines.show&&h.lines.fill)&&(s.push({y:!0,number:!0,required:!1,defaultValue:0}),h.bars.horizontal&&(delete s[s.length-1].y,s[s.length-1].x=!0)),h.datapoints.format=s),null==h.datapoints.pointsize)for(h.datapoints.pointsize=s.length,j=h.datapoints.pointsize,i=h.datapoints.points,insertSteps=h.lines.show&&h.lines.steps,h.xaxis.used=h.yaxis.used=!0,d=e=0;d<r.length;++d,e+=j){m=r[d];var t=null==m;if(!t)for(f=0;j>f;++f)k=m[f],l=s[f],l&&(l.number&&null!=k&&(k=+k,isNaN(k)?k=null:1/0==k?k=q:k==-1/0&&(k=-q)),null==k&&(l.required&&(t=!0),null!=l.defaultValue&&(k=l.defaultValue))),i[e+f]=k;if(t)for(f=0;j>f;++f)k=i[e+f],null!=k&&(l=s[f],l.x&&b(h.xaxis,k,k),l.y&&b(h.yaxis,k,k)),i[e+f]=null;else if(insertSteps&&e>0&&null!=i[e-j]&&i[e-j]!=i[e]&&i[e-j+1]!=i[e+1]){for(f=0;j>f;++f)i[e+j+f]=i[e+f];i[e+1]=i[e-j+1],e+=j}}}for(c=0;c<fb.length;++c)h=fb[c],g(tb.processDatapoints,[h,h.datapoints]);for(c=0;c<fb.length;++c){h=fb[c],i=h.datapoints.points,j=h.datapoints.pointsize;var u=o,v=o,w=p,x=p;for(d=0;d<i.length;d+=j)if(null!=i[d])for(f=0;j>f;++f)k=i[d+f],l=s[f],l&&k!=q&&k!=-q&&(l.x&&(u>k&&(u=k),k>w&&(w=k)),l.y&&(v>k&&(v=k),k>x&&(x=k)));if(h.bars.show){var y="left"==h.bars.align?0:-h.bars.barWidth/2;h.bars.horizontal?(v+=y,x+=y+h.bars.barWidth):(u+=y,w+=y+h.bars.barWidth)}b(h.xaxis,u,w),b(h.yaxis,v,x)}a.each(n(),function(a,b){b.datamin==o&&(b.datamin=null),b.datamax==p&&(b.datamax=null)})}function t(c,d){var e=document.createElement("canvas");return e.className=d,e.width=pb,e.height=qb,c||a(e).css({position:"absolute",left:0,top:0}),a(e).appendTo(b),e.getContext||(e=window.G_vmlCanvasManager.initElement(e)),e.getContext("2d").save(),e}function u(){if(pb=b.width(),qb=b.height(),0>=pb||0>=qb)throw"Invalid dimensions for plot, width = "+pb+", height = "+qb}function v(a){a.width!=pb&&(a.width=pb),a.height!=qb&&(a.height=qb);var b=a.getContext("2d");b.restore(),b.save()}function w(){var c,d=b.children("canvas.base"),e=b.children("canvas.overlay");0==d.length||0==e?(b.html(""),b.css({padding:0}),"static"==b.css("position")&&b.css("position","relative"),u(),hb=t(!0,"base"),ib=t(!1,"overlay"),c=!1):(hb=d.get(0),ib=e.get(0),c=!0),kb=hb.getContext("2d"),lb=ib.getContext("2d"),jb=a([ib,hb]),c&&(b.data("plot").shutdown(),ub.resize(),lb.clearRect(0,0,pb,qb),jb.unbind(),b.children().not([hb,ib]).remove()),b.data("plot",ub)}function x(){gb.grid.hoverable&&(jb.mousemove(V),jb.mouseleave(W)),gb.grid.clickable&&jb.click(X),g(tb.bindEvents,[jb])}function y(){wb&&clearTimeout(wb),jb.unbind("mousemove",V),jb.unbind("mouseleave",W),jb.unbind("click",X),g(tb.shutdown,[jb])
}function z(a){function b(a){return a}var c,d,e=a.options.transform||b,f=a.options.inverseTransform;"x"==a.direction?(c=a.scale=rb/Math.abs(e(a.max)-e(a.min)),d=Math.min(e(a.max),e(a.min))):(c=a.scale=sb/Math.abs(e(a.max)-e(a.min)),c=-c,d=Math.max(e(a.max),e(a.min))),a.p2c=e==b?function(a){return(a-d)*c}:function(a){return(e(a)-d)*c},a.c2p=f?function(a){return f(d+a/c)}:function(a){return d+a/c}}function A(c){function d(d,e){return a('<div style="position:absolute;top:-10000px;'+e+'font-size:smaller"><div class="'+c.direction+"Axis "+c.direction+c.n+'Axis">'+d.join("")+"</div></div>").appendTo(b)}var e,f,g,h=c.options,i=c.ticks||[],j=[],k=h.labelWidth,l=h.labelHeight;if("x"==c.direction){if(null==k&&(k=Math.floor(pb/(i.length>0?i.length:1))),null==l){for(j=[],e=0;e<i.length;++e)f=i[e].label,f&&j.push('<div class="tickLabel" style="float:left;width:'+k+'px">'+f+"</div>");j.length>0&&(j.push('<div style="clear:left"></div>'),g=d(j,"width:10000px;"),l=g.height(),g.remove())}}else if(null==k||null==l){for(e=0;e<i.length;++e)f=i[e].label,f&&j.push('<div class="tickLabel">'+f+"</div>");j.length>0&&(g=d(j,""),null==k&&(k=g.children().width()),null==l&&(l=g.find("div.tickLabel").height()),g.remove())}null==k&&(k=0),null==l&&(l=0),c.labelWidth=k,c.labelHeight=l}function B(b){var c=b.labelWidth,d=b.labelHeight,e=b.options.position,f=b.options.tickLength,g=gb.grid.axisMargin,h=gb.grid.labelMargin,i="x"==b.direction?mb:nb,j=a.grep(i,function(a){return a&&a.options.position==e&&a.reserveSpace});a.inArray(b,j)==j.length-1&&(g=0),null==f&&(f="full");var k=a.grep(i,function(a){return a&&a.reserveSpace}),l=0==a.inArray(b,k);l||"full"!=f||(f=5),isNaN(+f)||(h+=+f),"x"==b.direction?(d+=h,"bottom"==e?(ob.bottom+=d+g,b.box={top:qb-ob.bottom,height:d}):(b.box={top:ob.top+g,height:d},ob.top+=d+g)):(c+=h,"left"==e?(b.box={left:ob.left+g,width:c},ob.left+=c+g):(ob.right+=c+g,b.box={left:pb-ob.right,width:c})),b.position=e,b.tickLength=f,b.box.padding=h,b.innermost=l}function C(a){"x"==a.direction?(a.box.left=ob.left,a.box.width=rb):(a.box.top=ob.top,a.box.height=sb)}function D(){var b,c=n();if(a.each(c,function(a,b){b.show=b.options.show,null==b.show&&(b.show=b.used),b.reserveSpace=b.show||b.options.reserveSpace,E(b)}),allocatedAxes=a.grep(c,function(a){return a.reserveSpace}),ob.left=ob.right=ob.top=ob.bottom=0,gb.grid.show){for(a.each(allocatedAxes,function(a,b){F(b),G(b),H(b,b.ticks),A(b)}),b=allocatedAxes.length-1;b>=0;--b)B(allocatedAxes[b]);var d=gb.grid.minBorderMargin;if(null==d)for(d=0,b=0;b<fb.length;++b)d=Math.max(d,fb[b].points.radius+fb[b].points.lineWidth/2);for(var e in ob)ob[e]+=gb.grid.borderWidth,ob[e]=Math.max(d,ob[e])}rb=pb-ob.left-ob.right,sb=qb-ob.bottom-ob.top,a.each(c,function(a,b){z(b)}),gb.grid.show&&(a.each(allocatedAxes,function(a,b){C(b)}),M()),T()}function E(a){var b=a.options,c=+(null!=b.min?b.min:a.datamin),d=+(null!=b.max?b.max:a.datamax),e=d-c;if(0==e){var f=0==d?1:.01;null==b.min&&(c-=f),(null==b.max||null!=b.min)&&(d+=f)}else{var g=b.autoscaleMargin;null!=g&&(null==b.min&&(c-=e*g,0>c&&null!=a.datamin&&a.datamin>=0&&(c=0)),null==b.max&&(d+=e*g,d>0&&null!=a.datamax&&a.datamax<=0&&(d=0)))}a.min=c,a.max=d}function F(b){var d,e=b.options;d="number"==typeof e.ticks&&e.ticks>0?e.ticks:.3*Math.sqrt("x"==b.direction?pb:qb);var f,g,h,i,j,k,l,m=(b.max-b.min)/d;if("time"==e.mode){var n={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},o=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],p=0;null!=e.minTickSize&&(p="number"==typeof e.tickSize?e.tickSize:e.minTickSize[0]*n[e.minTickSize[1]]);for(var j=0;j<o.length-1&&!(m<(o[j][0]*n[o[j][1]]+o[j+1][0]*n[o[j+1][1]])/2&&o[j][0]*n[o[j][1]]>=p);++j);f=o[j][0],h=o[j][1],"year"==h&&(k=Math.pow(10,Math.floor(Math.log(m/n.year)/Math.LN10)),l=m/n.year/k,f=1.5>l?1:3>l?2:7.5>l?5:10,f*=k),b.tickSize=e.tickSize||[f,h],g=function(a){var b=[],d=a.tickSize[0],e=a.tickSize[1],f=new Date(a.min),g=d*n[e];"second"==e&&f.setUTCSeconds(c(f.getUTCSeconds(),d)),"minute"==e&&f.setUTCMinutes(c(f.getUTCMinutes(),d)),"hour"==e&&f.setUTCHours(c(f.getUTCHours(),d)),"month"==e&&f.setUTCMonth(c(f.getUTCMonth(),d)),"year"==e&&f.setUTCFullYear(c(f.getUTCFullYear(),d)),f.setUTCMilliseconds(0),g>=n.minute&&f.setUTCSeconds(0),g>=n.hour&&f.setUTCMinutes(0),g>=n.day&&f.setUTCHours(0),g>=4*n.day&&f.setUTCDate(1),g>=n.year&&f.setUTCMonth(0);var h,i=0,j=Number.NaN;do if(h=j,j=f.getTime(),b.push(j),"month"==e)if(1>d){f.setUTCDate(1);var k=f.getTime();f.setUTCMonth(f.getUTCMonth()+1);var l=f.getTime();f.setTime(j+i*n.hour+(l-k)*d),i=f.getUTCHours(),f.setUTCHours(0)}else f.setUTCMonth(f.getUTCMonth()+d);else"year"==e?f.setUTCFullYear(f.getUTCFullYear()+d):f.setTime(j+g);while(j<a.max&&j!=h);return b},i=function(b,c){var d=new Date(b);if(null!=e.timeformat)return a.plot.formatDate(d,e.timeformat,e.monthNames);var f=c.tickSize[0]*n[c.tickSize[1]],g=c.max-c.min,h=e.twelveHourClock?" %p":"";return fmt=f<n.minute?"%h:%M:%S"+h:f<n.day?g<2*n.day?"%h:%M"+h:"%b %d %h:%M"+h:f<n.month?"%b %d":f<n.year?g<n.year?"%b":"%b %y":"%y",a.plot.formatDate(d,fmt,e.monthNames)}}else{var q=e.tickDecimals,r=-Math.floor(Math.log(m)/Math.LN10);null!=q&&r>q&&(r=q),k=Math.pow(10,-r),l=m/k,1.5>l?f=1:3>l?(f=2,l>2.25&&(null==q||q>=r+1)&&(f=2.5,++r)):f=7.5>l?5:10,f*=k,null!=e.minTickSize&&f<e.minTickSize&&(f=e.minTickSize),b.tickDecimals=Math.max(0,null!=q?q:r),b.tickSize=e.tickSize||f,g=function(a){var b,d=[],e=c(a.min,a.tickSize),f=0,g=Number.NaN;do b=g,g=e+f*a.tickSize,d.push(g),++f;while(g<a.max&&g!=b);return d},i=function(a,b){return a.toFixed(b.tickDecimals)}}if(null!=e.alignTicksWithAxis){var s=("x"==b.direction?mb:nb)[e.alignTicksWithAxis-1];if(s&&s.used&&s!=b){var t=g(b);if(t.length>0&&(null==e.min&&(b.min=Math.min(b.min,t[0])),null==e.max&&t.length>1&&(b.max=Math.max(b.max,t[t.length-1]))),g=function(a){var b,c,d=[];for(c=0;c<s.ticks.length;++c)b=(s.ticks[c].v-s.min)/(s.max-s.min),b=a.min+b*(a.max-a.min),d.push(b);return d},"time"!=b.mode&&null==e.tickDecimals){var u=Math.max(0,-Math.floor(Math.log(m)/Math.LN10)+1),v=g(b);v.length>1&&/\..*0$/.test((v[1]-v[0]).toFixed(u))||(b.tickDecimals=u)}}}b.tickGenerator=g,b.tickFormatter=a.isFunction(e.tickFormatter)?function(a,b){return""+e.tickFormatter(a,b)}:i}function G(b){var c=b.options.ticks,d=[];null==c||"number"==typeof c&&c>0?d=b.tickGenerator(b):c&&(d=a.isFunction(c)?c({min:b.min,max:b.max}):c);var e,f;for(b.ticks=[],e=0;e<d.length;++e){var g=null,h=d[e];"object"==typeof h?(f=+h[0],h.length>1&&(g=h[1])):f=+h,null==g&&(g=b.tickFormatter(f,b)),isNaN(f)||b.ticks.push({v:f,label:g})}}function H(a,b){a.options.autoscaleMargin&&b.length>0&&(null==a.options.min&&(a.min=Math.min(a.min,b[0].v)),null==a.options.max&&b.length>1&&(a.max=Math.max(a.max,b[b.length-1].v)))}function I(){kb.clearRect(0,0,pb,qb);var a=gb.grid;a.show&&a.backgroundColor&&K(),a.show&&!a.aboveData&&L();for(var b=0;b<fb.length;++b)g(tb.drawSeries,[kb,fb[b]]),N(fb[b]);g(tb.draw,[kb]),a.show&&a.aboveData&&L()}function J(a,b){var c,d,e,f,g=n();for(i=0;i<g.length;++i)if(c=g[i],c.direction==b&&(f=b+c.n+"axis",a[f]||1!=c.n||(f=b+"axis"),a[f])){d=a[f].from,e=a[f].to;break}if(a[f]||(c="x"==b?mb[0]:nb[0],d=a[b+"1"],e=a[b+"2"]),null!=d&&null!=e&&d>e){var h=d;d=e,e=h}return{from:d,to:e,axis:c}}function K(){kb.save(),kb.translate(ob.left,ob.top),kb.fillStyle=eb(gb.grid.backgroundColor,sb,0,"rgba(255, 255, 255, 0)"),kb.fillRect(0,0,rb,sb),kb.restore()}function L(){var b;kb.save(),kb.translate(ob.left,ob.top);var c=gb.grid.markings;if(c){if(a.isFunction(c)){var d=ub.getAxes();d.xmin=d.xaxis.min,d.xmax=d.xaxis.max,d.ymin=d.yaxis.min,d.ymax=d.yaxis.max,c=c(d)}for(b=0;b<c.length;++b){var e=c[b],f=J(e,"x"),g=J(e,"y");null==f.from&&(f.from=f.axis.min),null==f.to&&(f.to=f.axis.max),null==g.from&&(g.from=g.axis.min),null==g.to&&(g.to=g.axis.max),f.to<f.axis.min||f.from>f.axis.max||g.to<g.axis.min||g.from>g.axis.max||(f.from=Math.max(f.from,f.axis.min),f.to=Math.min(f.to,f.axis.max),g.from=Math.max(g.from,g.axis.min),g.to=Math.min(g.to,g.axis.max),(f.from!=f.to||g.from!=g.to)&&(f.from=f.axis.p2c(f.from),f.to=f.axis.p2c(f.to),g.from=g.axis.p2c(g.from),g.to=g.axis.p2c(g.to),f.from==f.to||g.from==g.to?(kb.beginPath(),kb.strokeStyle=e.color||gb.grid.markingsColor,kb.lineWidth=e.lineWidth||gb.grid.markingsLineWidth,kb.moveTo(f.from,g.from),kb.lineTo(f.to,g.to),kb.stroke()):(kb.fillStyle=e.color||gb.grid.markingsColor,kb.fillRect(f.from,g.to,f.to-f.from,g.from-g.to))))}}for(var d=n(),h=gb.grid.borderWidth,i=0;i<d.length;++i){var j,k,l,m,o=d[i],p=o.box,q=o.tickLength;if(o.show&&0!=o.ticks.length){for(kb.strokeStyle=o.options.tickColor||a.color.parse(o.options.color).scale("a",.22).toString(),kb.lineWidth=1,"x"==o.direction?(j=0,k="full"==q?"top"==o.position?0:sb:p.top-ob.top+("top"==o.position?p.height:0)):(k=0,j="full"==q?"left"==o.position?0:rb:p.left-ob.left+("left"==o.position?p.width:0)),o.innermost||(kb.beginPath(),l=m=0,"x"==o.direction?l=rb:m=sb,1==kb.lineWidth&&(j=Math.floor(j)+.5,k=Math.floor(k)+.5),kb.moveTo(j,k),kb.lineTo(j+l,k+m),kb.stroke()),kb.beginPath(),b=0;b<o.ticks.length;++b){var r=o.ticks[b].v;l=m=0,r<o.min||r>o.max||"full"==q&&h>0&&(r==o.min||r==o.max)||("x"==o.direction?(j=o.p2c(r),m="full"==q?-sb:q,"top"==o.position&&(m=-m)):(k=o.p2c(r),l="full"==q?-rb:q,"left"==o.position&&(l=-l)),1==kb.lineWidth&&("x"==o.direction?j=Math.floor(j)+.5:k=Math.floor(k)+.5),kb.moveTo(j,k),kb.lineTo(j+l,k+m))}kb.stroke()}}h&&(kb.lineWidth=h,kb.strokeStyle=gb.grid.borderColor,kb.strokeRect(-h/2,-h/2,rb+h,sb+h)),kb.restore()}function M(){b.find(".tickLabels").remove();for(var a=['<div class="tickLabels" style="font-size:smaller">'],c=n(),d=0;d<c.length;++d){var e=c[d],f=e.box;if(e.show){a.push('<div class="'+e.direction+"Axis "+e.direction+e.n+'Axis" style="color:'+e.options.color+'">');for(var g=0;g<e.ticks.length;++g){var h=e.ticks[g];if(!(!h.label||h.v<e.min||h.v>e.max)){var i,j={};"x"==e.direction?(i="center",j.left=Math.round(ob.left+e.p2c(h.v)-e.labelWidth/2),"bottom"==e.position?j.top=f.top+f.padding:j.bottom=qb-(f.top+f.height-f.padding)):(j.top=Math.round(ob.top+e.p2c(h.v)-e.labelHeight/2),"left"==e.position?(j.right=pb-(f.left+f.width-f.padding),i="right"):(j.left=f.left+f.padding,i="left")),j.width=e.labelWidth;var k=["position:absolute","text-align:"+i];for(var l in j)k.push(l+":"+j[l]+"px");a.push('<div class="tickLabel" style="'+k.join(";")+'">'+h.label+"</div>")}}a.push("</div>")}}a.push("</div>"),b.append(a.join(""))}function N(a){a.lines.show&&O(a),a.bars.show&&R(a),a.points.show&&P(a)}function O(a){function b(a,b,c,d,e){var f=a.points,g=a.pointsize,h=null,i=null;kb.beginPath();for(var j=g;j<f.length;j+=g){var k=f[j-g],l=f[j-g+1],m=f[j],n=f[j+1];if(null!=k&&null!=m){if(n>=l&&l<e.min){if(n<e.min)continue;k=(e.min-l)/(n-l)*(m-k)+k,l=e.min}else if(l>=n&&n<e.min){if(l<e.min)continue;m=(e.min-l)/(n-l)*(m-k)+k,n=e.min}if(l>=n&&l>e.max){if(n>e.max)continue;k=(e.max-l)/(n-l)*(m-k)+k,l=e.max}else if(n>=l&&n>e.max){if(l>e.max)continue;m=(e.max-l)/(n-l)*(m-k)+k,n=e.max}if(m>=k&&k<d.min){if(m<d.min)continue;l=(d.min-k)/(m-k)*(n-l)+l,k=d.min}else if(k>=m&&m<d.min){if(k<d.min)continue;n=(d.min-k)/(m-k)*(n-l)+l,m=d.min}if(k>=m&&k>d.max){if(m>d.max)continue;l=(d.max-k)/(m-k)*(n-l)+l,k=d.max}else if(m>=k&&m>d.max){if(k>d.max)continue;n=(d.max-k)/(m-k)*(n-l)+l,m=d.max}(k!=h||l!=i)&&kb.moveTo(d.p2c(k)+b,e.p2c(l)+c),h=m,i=n,kb.lineTo(d.p2c(m)+b,e.p2c(n)+c)}}kb.stroke()}function c(a,b,c){for(var d=a.points,e=a.pointsize,f=Math.min(Math.max(0,c.min),c.max),g=0,h=!1,i=1,j=0,k=0;;){if(e>0&&g>d.length+e)break;g+=e;var l=d[g-e],m=d[g-e+i],n=d[g],o=d[g+i];if(h){if(e>0&&null!=l&&null==n){k=g,e=-e,i=2;continue}if(0>e&&g==j+e){kb.fill(),h=!1,e=-e,i=1,g=j=k+e;continue}}if(null!=l&&null!=n){if(n>=l&&l<b.min){if(n<b.min)continue;m=(b.min-l)/(n-l)*(o-m)+m,l=b.min}else if(l>=n&&n<b.min){if(l<b.min)continue;o=(b.min-l)/(n-l)*(o-m)+m,n=b.min}if(l>=n&&l>b.max){if(n>b.max)continue;m=(b.max-l)/(n-l)*(o-m)+m,l=b.max}else if(n>=l&&n>b.max){if(l>b.max)continue;o=(b.max-l)/(n-l)*(o-m)+m,n=b.max}if(h||(kb.beginPath(),kb.moveTo(b.p2c(l),c.p2c(f)),h=!0),m>=c.max&&o>=c.max)kb.lineTo(b.p2c(l),c.p2c(c.max)),kb.lineTo(b.p2c(n),c.p2c(c.max));else if(m<=c.min&&o<=c.min)kb.lineTo(b.p2c(l),c.p2c(c.min)),kb.lineTo(b.p2c(n),c.p2c(c.min));else{var p=l,q=n;o>=m&&m<c.min&&o>=c.min?(l=(c.min-m)/(o-m)*(n-l)+l,m=c.min):m>=o&&o<c.min&&m>=c.min&&(n=(c.min-m)/(o-m)*(n-l)+l,o=c.min),m>=o&&m>c.max&&o<=c.max?(l=(c.max-m)/(o-m)*(n-l)+l,m=c.max):o>=m&&o>c.max&&m<=c.max&&(n=(c.max-m)/(o-m)*(n-l)+l,o=c.max),l!=p&&kb.lineTo(b.p2c(p),c.p2c(m)),kb.lineTo(b.p2c(l),c.p2c(m)),kb.lineTo(b.p2c(n),c.p2c(o)),n!=q&&(kb.lineTo(b.p2c(n),c.p2c(o)),kb.lineTo(b.p2c(q),c.p2c(o)))}}}}kb.save(),kb.translate(ob.left,ob.top),kb.lineJoin="round";var d=a.lines.lineWidth,e=a.shadowSize;if(d>0&&e>0){kb.lineWidth=e,kb.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;b(a.datapoints,Math.sin(f)*(d/2+e/2),Math.cos(f)*(d/2+e/2),a.xaxis,a.yaxis),kb.lineWidth=e/2,b(a.datapoints,Math.sin(f)*(d/2+e/4),Math.cos(f)*(d/2+e/4),a.xaxis,a.yaxis)}kb.lineWidth=d,kb.strokeStyle=a.color;var g=S(a.lines,a.color,0,sb);g&&(kb.fillStyle=g,c(a.datapoints,a.xaxis,a.yaxis)),d>0&&b(a.datapoints,0,0,a.xaxis,a.yaxis),kb.restore()}function P(a){function b(a,b,c,d,e,f,g,h){for(var i=a.points,j=a.pointsize,k=0;k<i.length;k+=j){var l=i[k],m=i[k+1];null==l||l<f.min||l>f.max||m<g.min||m>g.max||(kb.beginPath(),l=f.p2c(l),m=g.p2c(m)+d,"circle"==h?kb.arc(l,m,b,0,e?Math.PI:2*Math.PI,!1):h(kb,l,m,b,e),kb.closePath(),c&&(kb.fillStyle=c,kb.fill()),kb.stroke())}}kb.save(),kb.translate(ob.left,ob.top);var c=a.points.lineWidth,d=a.shadowSize,e=a.points.radius,f=a.points.symbol;if(c>0&&d>0){var g=d/2;kb.lineWidth=g,kb.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,e,null,g+g/2,!0,a.xaxis,a.yaxis,f),kb.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,e,null,g/2,!0,a.xaxis,a.yaxis,f)}kb.lineWidth=c,kb.strokeStyle=a.color,b(a.datapoints,e,S(a.points,a.color),0,!1,a.xaxis,a.yaxis,f),kb.restore()}function Q(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p,q,r,s,t,u;k?(t=r=s=!0,q=!1,m=c,n=a,p=b+d,o=b+e,m>n&&(u=n,n=m,m=u,q=!0,r=!1)):(q=r=s=!0,t=!1,m=a+d,n=a+e,o=c,p=b,o>p&&(u=p,p=o,o=u,t=!0,s=!1)),n<h.min||m>h.max||p<i.min||o>i.max||(m<h.min&&(m=h.min,q=!1),n>h.max&&(n=h.max,r=!1),o<i.min&&(o=i.min,t=!1),p>i.max&&(p=i.max,s=!1),m=h.p2c(m),o=i.p2c(o),n=h.p2c(n),p=i.p2c(p),g&&(j.beginPath(),j.moveTo(m,o),j.lineTo(m,p),j.lineTo(n,p),j.lineTo(n,o),j.fillStyle=g(o,p),j.fill()),l>0&&(q||r||s||t)&&(j.beginPath(),j.moveTo(m,o+f),q?j.lineTo(m,p+f):j.moveTo(m,p+f),s?j.lineTo(n,p+f):j.moveTo(n,p+f),r?j.lineTo(n,o+f):j.moveTo(n,o+f),t?j.lineTo(m,o+f):j.moveTo(m,o+f),j.stroke()))}function R(a){function b(b,c,d,e,f,g,h){for(var i=b.points,j=b.pointsize,k=0;k<i.length;k+=j)null!=i[k]&&Q(i[k],i[k+1],i[k+2],c,d,e,f,g,h,kb,a.bars.horizontal,a.bars.lineWidth)}kb.save(),kb.translate(ob.left,ob.top),kb.lineWidth=a.bars.lineWidth,kb.strokeStyle=a.color;var c="left"==a.bars.align?0:-a.bars.barWidth/2,d=a.bars.fill?function(b,c){return S(a.bars,a.color,b,c)}:null;b(a.datapoints,c,c+a.bars.barWidth,0,d,a.xaxis,a.yaxis),kb.restore()}function S(b,c,d,e){var f=b.fill;if(!f)return null;if(b.fillColor)return eb(b.fillColor,d,e,c);var g=a.color.parse(c);return g.a="number"==typeof f?f:.4,g.normalize(),g.toString()}function T(){if(b.find(".legend").remove(),gb.legend.show){for(var c,d,e=[],f=!1,g=gb.legend.labelFormatter,h=0;h<fb.length;++h)c=fb[h],d=c.label,d&&(h%gb.legend.noColumns==0&&(f&&e.push("</tr>"),e.push("<tr>"),f=!0),g&&(d=g(d,c)),e.push('<td class="legendColorBox"><div style="border:1px solid '+gb.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+d+"</td>"));if(f&&e.push("</tr>"),0!=e.length){var i='<table style="font-size:smaller;color:'+gb.grid.color+'">'+e.join("")+"</table>";if(null!=gb.legend.container)a(gb.legend.container).html(i);else{var j="",k=gb.legend.position,l=gb.legend.margin;null==l[0]&&(l=[l,l]),"n"==k.charAt(0)?j+="top:"+(l[1]+ob.top)+"px;":"s"==k.charAt(0)&&(j+="bottom:"+(l[1]+ob.bottom)+"px;"),"e"==k.charAt(1)?j+="right:"+(l[0]+ob.right)+"px;":"w"==k.charAt(1)&&(j+="left:"+(l[0]+ob.left)+"px;");var m=a('<div class="legend">'+i.replace('style="','style="position:absolute;'+j+";")+"</div>").appendTo(b);if(0!=gb.legend.backgroundOpacity){var n=gb.legend.backgroundColor;null==n&&(n=gb.grid.backgroundColor,n=n&&"string"==typeof n?a.color.parse(n):a.color.extract(m,"background-color"),n.a=1,n=n.toString());var o=m.children();a('<div style="position:absolute;width:'+o.width()+"px;height:"+o.height()+"px;"+j+"background-color:"+n+';"> </div>').prependTo(m).css("opacity",gb.legend.backgroundOpacity)}}}}}function U(a,b,c){var d,e,f=gb.grid.mouseActiveRadius,g=f*f+1,h=null;for(d=fb.length-1;d>=0;--d)if(c(fb[d])){var i=fb[d],j=i.xaxis,k=i.yaxis,l=i.datapoints.points,m=i.datapoints.pointsize,n=j.c2p(a),o=k.c2p(b),p=f/j.scale,q=f/k.scale;if(j.options.inverseTransform&&(p=Number.MAX_VALUE),k.options.inverseTransform&&(q=Number.MAX_VALUE),i.lines.show||i.points.show)for(e=0;e<l.length;e+=m){var r=l[e],s=l[e+1];if(null!=r&&!(r-n>p||-p>r-n||s-o>q||-q>s-o)){var t=Math.abs(j.p2c(r)-a),u=Math.abs(k.p2c(s)-b),v=t*t+u*u;g>v&&(g=v,h=[d,e/m])}}if(i.bars.show&&!h){var w="left"==i.bars.align?0:-i.bars.barWidth/2,x=w+i.bars.barWidth;for(e=0;e<l.length;e+=m){var r=l[e],s=l[e+1],y=l[e+2];null!=r&&(fb[d].bars.horizontal?n<=Math.max(y,r)&&n>=Math.min(y,r)&&o>=s+w&&s+x>=o:n>=r+w&&r+x>=n&&o>=Math.min(y,s)&&o<=Math.max(y,s))&&(h=[d,e/m])}}}return h?(d=h[0],e=h[1],m=fb[d].datapoints.pointsize,{datapoint:fb[d].datapoints.points.slice(e*m,(e+1)*m),dataIndex:e,series:fb[d],seriesIndex:d}):null}function V(a){gb.grid.hoverable&&Y("plothover",a,function(a){return 0!=a.hoverable})}function W(a){gb.grid.hoverable&&Y("plothover",a,function(){return!1})}function X(a){Y("plotclick",a,function(a){return 0!=a.clickable})}function Y(a,c,d){var e=jb.offset(),f=c.pageX-e.left-ob.left,g=c.pageY-e.top-ob.top,h=o({left:f,top:g});h.pageX=c.pageX,h.pageY=c.pageY;var i=U(f,g,d);if(i&&(i.pageX=parseInt(i.series.xaxis.p2c(i.datapoint[0])+e.left+ob.left),i.pageY=parseInt(i.series.yaxis.p2c(i.datapoint[1])+e.top+ob.top)),gb.grid.autoHighlight){for(var j=0;j<vb.length;++j){var k=vb[j];k.auto!=a||i&&k.series==i.series&&k.point[0]==i.datapoint[0]&&k.point[1]==i.datapoint[1]||ab(k.series,k.point)}i&&_(i.series,i.datapoint,a)}b.trigger(a,[h,i])}function Z(){wb||(wb=setTimeout($,30))}function $(){wb=null,lb.save(),lb.clearRect(0,0,pb,qb),lb.translate(ob.left,ob.top);var a,b;for(a=0;a<vb.length;++a)b=vb[a],b.series.bars.show?db(b.series,b.point):cb(b.series,b.point);lb.restore(),g(tb.drawOverlay,[lb])}function _(a,b,c){if("number"==typeof a&&(a=fb[a]),"number"==typeof b){var d=a.datapoints.pointsize;b=a.datapoints.points.slice(d*b,d*(b+1))}var e=bb(a,b);-1==e?(vb.push({series:a,point:b,auto:c}),Z()):c||(vb[e].auto=!1)}function ab(a,b){null==a&&null==b&&(vb=[],Z()),"number"==typeof a&&(a=fb[a]),"number"==typeof b&&(b=a.data[b]);var c=bb(a,b);-1!=c&&(vb.splice(c,1),Z())}function bb(a,b){for(var c=0;c<vb.length;++c){var d=vb[c];if(d.series==a&&d.point[0]==b[0]&&d.point[1]==b[1])return c}return-1}function cb(b,c){var d=c[0],e=c[1],f=b.xaxis,g=b.yaxis;if(!(d<f.min||d>f.max||e<g.min||e>g.max)){var h=b.points.radius+b.points.lineWidth/2;lb.lineWidth=h,lb.strokeStyle=a.color.parse(b.color).scale("a",.5).toString();var i=1.5*h,d=f.p2c(d),e=g.p2c(e);lb.beginPath(),"circle"==b.points.symbol?lb.arc(d,e,i,0,2*Math.PI,!1):b.points.symbol(lb,d,e,i,!1),lb.closePath(),lb.stroke()}}function db(b,c){lb.lineWidth=b.bars.lineWidth,lb.strokeStyle=a.color.parse(b.color).scale("a",.5).toString();var d=a.color.parse(b.color).scale("a",.5).toString(),e="left"==b.bars.align?0:-b.bars.barWidth/2;Q(c[0],c[1],c[2]||0,e,e+b.bars.barWidth,0,function(){return d},b.xaxis,b.yaxis,lb,b.bars.horizontal,b.bars.lineWidth)}function eb(b,c,d,e){if("string"==typeof b)return b;for(var f=kb.createLinearGradient(0,d,0,c),g=0,h=b.colors.length;h>g;++g){var i=b.colors[g];if("string"!=typeof i){var j=a.color.parse(e);null!=i.brightness&&(j=j.scale("rgb",i.brightness)),null!=i.opacity&&(j.a*=i.opacity),i=j.toString()}f.addColorStop(g/(h-1),i)}return f}var fb=[],gb={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},hb=null,ib=null,jb=null,kb=null,lb=null,mb=[],nb=[],ob={left:0,right:0,top:0,bottom:0},pb=0,qb=0,rb=0,sb=0,tb={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},ub=this;ub.setData=k,ub.setupGrid=D,ub.draw=I,ub.getPlaceholder=function(){return b},ub.getCanvas=function(){return hb},ub.getPlotOffset=function(){return ob},ub.width=function(){return rb},ub.height=function(){return sb},ub.offset=function(){var a=jb.offset();return a.left+=ob.left,a.top+=ob.top,a},ub.getData=function(){return fb},ub.getAxes=function(){var b={};return a.each(mb.concat(nb),function(a,c){c&&(b[c.direction+(1!=c.n?c.n:"")+"axis"]=c)}),b},ub.getXAxes=function(){return mb},ub.getYAxes=function(){return nb},ub.c2p=o,ub.p2c=p,ub.getOptions=function(){return gb},ub.highlight=_,ub.unhighlight=ab,ub.triggerRedrawOverlay=Z,ub.pointOffset=function(a){return{left:parseInt(mb[m(a,"x")-1].p2c(+a.x)+ob.left),top:parseInt(nb[m(a,"y")-1].p2c(+a.y)+ob.top)}},ub.shutdown=y,ub.resize=function(){u(),v(hb),v(ib)},ub.hooks=tb,h(ub),j(e),w(),k(d),D(),I(),x();var vb=[],wb=null}function c(a,b){return b*Math.floor(a/b)}a.plot=function(c,d,e){var f=new b(a(c),d,e,a.plot.plugins);return f},a.plot.version="0.7",a.plot.plugins=[],a.plot.formatDate=function(a,b,c){var d=function(a){return a=""+a,1==a.length?"0"+a:a},e=[],f=!1,g=!1,h=a.getUTCHours(),i=12>h;null==c&&(c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),-1!=b.search(/%p|%P/)&&(h>12?h-=12:0==h&&(h=12));for(var j=0;j<b.length;++j){var k=b.charAt(j);if(f){switch(k){case"h":k=""+h;break;case"H":k=d(h);break;case"M":k=d(a.getUTCMinutes());break;case"S":k=d(a.getUTCSeconds());break;case"d":k=""+a.getUTCDate();break;case"m":k=""+(a.getUTCMonth()+1);break;case"y":k=""+a.getUTCFullYear();break;case"b":k=""+c[a.getUTCMonth()];break;case"p":k=i?"am":"pm";break;case"P":k=i?"AM":"PM";break;case"0":k="",g=!0}k&&g&&(k=d(k),g=!1),e.push(k),g||(f=!1)}else"%"==k?f=!0:e.push(k)}return e.join("")}}(jQuery),"undefined"==typeof Mendeley&&(Mendeley={}),"undefined"==typeof Mendeley.PDF&&(Mendeley.PDF={}),Mendeley.PDF.Preview={constants:{idLookupUri:"/lookinside/lookup/id/%ID",getDetailsUri:"/lookinside/details/id/%ID",hashPrefix:"page-"},isOpen:!1,isDepositInterrupt:!1,close:function(){return Mendeley.PDF.Preview.isOpen?(Mendeley.PDF.Preview.isOpen=!1,$("html").removeClass("reader"),$("body").removeClass("reader"),$("#reader-overlay").fadeOut(150),"function"==typeof window.history.replaceState?history.replaceState({},"",self.location.href.split("#")[0]):window.location.hash="",Mendeley.PDF.Preview.reset(),!1):!1},open:function(a){return Mendeley.PDF.Preview.isOpen?!1:($("html").addClass("reader"),$("body").addClass("reader"),$("#reader-overlay").fadeIn(250,function(){Mendeley.PDF.Preview.isOpen||(Mendeley.PDF.Preview.isOpen=!0,Mendeley.PDF.Preview.redrawReaderUI(),a=a&&!isNaN(a)?parseInt(a,10):1,Mendeley.PDF.Preview.jumpToPage(a))}),!1)},jumpToPage:function(a){a||(a=window.location.hash,a=a.replace("#"+Mendeley.PDF.Preview.constants.hashPrefix,"")),"function"==typeof window.history.replaceState?history.replaceState({},"",self.location.href.split("#")[0]+"#"+Mendeley.PDF.Preview.constants.hashPrefix+a):(window.location.hash="",window.location.hash="#"+Mendeley.PDF.Preview.constants.hashPrefix+a)},setSize:function(a,b,c){var d=$(a);d.height(b),d.width(c),d.length>0&&d[0].nodeName&&"img"===d[0].nodeName.toLowerCase()&&(d.attr("height",b),d.attr("width",c))},reset:function(){$("#scroller").empty(),Mendeley.PDF.Preview.pageImages={},Mendeley.PDF.Preview.pagesTotal=0},setup:function(a,b){Mendeley.PDF.Preview.reset(),Mendeley.PDF.Preview.isDepositInterrupt=b,$.getJSON(Mendeley.PDF.Preview.constants.idLookupUri.replace("%ID",a),null,function(b,c){null!==b&&"success"===c&&b.id&&b.id===a&&b.pages>=0&&Mendeley.PDF.Preview.setupThumbnailAndPages(a,b)})},setupThumbnailAndPages:function(a,b){var c=b.pages;$.getJSON(Mendeley.PDF.Preview.constants.getDetailsUri.replace("%ID",a),null,function(b,d){if("success"===d&&b.id&&b.id===a&&b.pages&&b.pages.length>0&&b.pages.length===c){var e=Mendeley.PDF.Preview.setupPages(a,b.pages);e&&Mendeley.PDF.Preview.initialiseReader()}}),$("#pdf-hover").css({opacity:"0"}),$("#pdf-hover").children().css({opacity:"0"})},makeCallbackForNextPage:function(a){return function(){Mendeley.PDF.Preview.jumpToPage(a)}},setupPages:function(a,b){var c,d,e=!0,f=$("#reader-page-template").html(),g=$("#scroller");for(c=0;c<b.length;c++){var h=b[c];if(!(h.url&&h.width&&h.height&&f))return!1;var i=parseInt(c,10)+1,j=f.replace(/%ID/g,c).replace(/%W/g,h.width).replace(/%H/g,h.height).replace(/%P/g,i),k=$(j),l=k.find("#page-img-container-"+c),m=i===b.length?1:i+1;if(l.click(Mendeley.PDF.Preview.makeCallbackForNextPage(m)),h.truncate&&(h.title||h.body)&&l.prepend('<div class="truncate" />'),h.title){var n=$("<h1 />");n.html(h.title),l.append(n),h.body||n.css("padding-bottom","50px"),e=!1}h.body?(d=$('<div class="plaintext" />'),d.html(h.body),l.append(d),e=!1):h.title||(d=$('<div class="notext">No Body Text -- translate me!</div>'),l.append(d)),e&&$("#toggletext").hide(),g.append(k),Mendeley.PDF.Preview.addPageImage(c,h.url)}return $(".pdf-image").data("loaded",!1),!0},initialiseReader:function(){$("#pdf-close").click(Mendeley.PDF.Preview.close),$("#reader-overlay").click(Mendeley.PDF.Preview.close),$("#reader").click(function(a){a.stopPropagation()});var a=$("#viewer");if($("#toggletext").toggle(function(){a.addClass("show-text"),a.removeClass("show-pdf")},function(){a.addClass("show-pdf"),a.removeClass("show-text")}),$("#viewer").scroll(Mendeley.PDF.Preview.onScroll),$.each(Mendeley.PDF.Preview.pageImages,function(a){$("#pdf-page-image-"+a).one("inview",function(a,b){b&&(pageId=$(this).attr("id"),pageId=pageId.replace("pdf-page-image-",""),Mendeley.PDF.Preview.showPage(pageId))})}),Mendeley.PDF.Preview.showPage(0),Mendeley.PDF.Preview.isDepositInterrupt&&($("#scroller > div").css("display","none"),$("#scroller #page-1, #scroller #page-2").css("display","block"),$(".look-inside-interrupt").clone().appendTo($("#scroller"))),0===window.location.hash.indexOf("#"+Mendeley.PDF.Preview.constants.hashPrefix)){var b=window.location.hash.replace("#"+Mendeley.PDF.Preview.constants.hashPrefix,"");b=parseInt(b,10),(1>b||b>Mendeley.PDF.Preview.pagesTotal)&&(b=1),Mendeley.PDF.Preview.open(b)}},onScroll:function(){var a=$("#viewer"),b=a.height(),c=[],d=$.expando;$.each($.cache,function(a,b){var e=b.events;e||(b=this[d],e=b&&b.events),e&&e.inview&&c.push(b.handle.elem)}),c.length&&$(c).each(function(){var c=$(this),d=a.offset().top,e=c.offset().top-d,f=c.height();inview=c.data("inview")||!1,0>e+f||e>b?inview&&c.data("inview",!1):inview||(c.trigger("inview",[!0]),c.data("inview",!0))})},redrawReaderUI:function(){readerSize=$("#reader").width(),$("#reader-overlay .top-shadow").width(readerSize),$("#reader-overlay .bottom-shadow").width(readerSize)},pageImages:{},pagesTotal:0,addPageImage:function(a,b){Mendeley.PDF.Preview.pageImages[a]=b,Mendeley.PDF.Preview.pagesTotal++},showPage:function(a){var b=$("img#pdf-page-image-"+a);b.data("loaded")||(b.data("loaded",!0),b.attr("alt",""),b.attr("src",Mendeley.PDF.Preview.pageImages[a]).hide().fadeIn())}},resizeReader=function(){readerSize=$("#reader").width(),$("#reader-overlay .top-shadow").width(readerSize),$("#reader-overlay .bottom-shadow").width(readerSize)},$(window).resize(function(){resizeReader()}),function(){var a;a=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},a}(),a.select_to_array=function(b){var c,d,e,f,g;for(d=new a,g=b.childNodes,e=0,f=g.length;f>e;e++)c=g[e],d.add_node(c);return d.parsed},this.SelectParser=a}.call(this),function(){var a,b;b=this,a=function(){function a(a,b){this.form_field=a,this.options=null!=b?b:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.max_selected_options=this.options.max_selected_options||1/0},a.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(){var a=this;return this.active_field?void 0:setTimeout(function(){return a.container_mousedown()},50)},a.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return a.blur_test()
},100))},a.prototype.result_add_option=function(a){var b,c;return a.disabled?"":(a.dom_id=this.container_id+"_o_"+a.array_index,b=a.selected&&this.is_multiple?[]:["active-result"],a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=""!==a.style.cssText?' style="'+a.style+'"':"",'<li id="'+a.dom_id+'" class="'+b.join(" ")+'"'+c+">"+a.html+"</li>")},a.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.generate_field_id=function(){var a;return a=this.generate_random_id(),this.form_field.id=a,a},a.prototype.generate_random_char=function(){var a,b,c;return a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=Math.floor(Math.random()*a.length),b=a.substring(c,c+1)},a}(),b.AbstractChosen=a}.call(this),function(){var a,b,c,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=this,a=jQuery,a.fn.extend({chosen:function(c){return!a.browser.msie||"6.0"!==a.browser.version&&"7.0"!==a.browser.version?this.each(function(){var d;return d=a(this),d.hasClass("chzn-done")?void 0:d.data("chosen",new b(this,c))}):this}}),b=function(b){function e(){e.__super__.constructor.apply(this,arguments)}return f(e,b),e.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},e.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},e.prototype.set_up_html=function(){var b,d,e,f;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth(),b=a("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):b.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(b),this.container=a("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),d=this.container.height(),e=this.f_width-c(this.dropdown),this.dropdown.css({width:e+"px",top:d+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),f=e-c(this.search_container)-c(this.search_field),this.search_field.css({width:f+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},e.prototype.register_observers=function(){var a=this;return this.container.mousedown(function(b){return a.container_mousedown(b)}),this.container.mouseup(function(b){return a.container_mouseup(b)}),this.container.mouseenter(function(b){return a.mouse_enter(b)}),this.container.mouseleave(function(b){return a.mouse_leave(b)}),this.search_results.mouseup(function(b){return a.search_results_mouseup(b)}),this.search_results.mouseover(function(b){return a.search_results_mouseover(b)}),this.search_results.mouseout(function(b){return a.search_results_mouseout(b)}),this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)}),this.search_field.blur(function(b){return a.input_blur(b)}),this.search_field.keyup(function(b){return a.keyup_checker(b)}),this.search_field.keydown(function(b){return a.keydown_checker(b)}),this.is_multiple?(this.search_choices.click(function(b){return a.choices_click(b)}),this.search_field.focus(function(b){return a.input_focus(b)})):this.container.click(function(a){return a.preventDefault()})},e.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field()):(this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus",this.activate_action))},e.prototype.container_mousedown=function(b){var c;return this.is_disabled?void 0:(c=null!=b?a(b.target).hasClass("search-choice-close"):!1,b&&"mousedown"===b.type&&!this.results_showing&&b.stopPropagation(),this.pending_destroy_click||c?this.pending_destroy_click=!1:(this.active_field?!this.is_multiple&&b&&(a(b.target)[0]===this.selected_item[0]||a(b.target).parents("a.chzn-single").length)&&(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show()),this.activate_field()))},e.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},e.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chzn-container-active")?this.close_field():void 0},e.prototype.close_field=function(){return a(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},e.prototype.activate_field=function(){return!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},e.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},e.prototype.results_build=function(){var a,b,c,e,f;for(this.parsing=!0,this.results_data=d.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),a="",f=this.results_data,c=0,e=f.length;e>c;c++)b=f[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(a),this.parsing=!1},e.prototype.result_add_group=function(b){return b.disabled?"":(b.dom_id=this.container_id+"_g_"+b.array_index,'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>")},e.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},e.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},e.prototype.results_show=function(){var a;if(this.is_multiple){if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1}else this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);return a=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:a+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},e.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},e.prototype.set_tab_index=function(){var a;return this.form_field_jq.attr("tabindex")?(a=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",a):(this.selected_item.attr("tabindex",a),this.search_field.attr("tabindex",-1))):void 0},e.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},e.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b)):void 0},e.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},e.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},e.prototype.choices_click=function(b){return b.preventDefault(),!this.active_field||a(b.target).hasClass("search-choice")||this.results_showing?void 0:this.results_show()},e.prototype.choice_build=function(b){var c,d,e=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(c=this.container_id+"_c_"+b.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+c+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+b.array_index+'"></a></li>'),d=a("#"+c).find("a").first(),d.click(function(a){return e.choice_destroy_link_click(a)}))},e.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),this.is_disabled?b.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(a(b.target)))},e.prototype.choice_destroy=function(a){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(a.attr("rel")),a.parents("li").first().remove()},e.prototype.results_reset=function(){return this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},e.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()},e.prototype.result_select=function(a){var b,c,d,e;return this.result_highlight?(b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),e=c.substr(c.lastIndexOf("_")+1),d=this.results_data[e],d.selected=!0,this.form_field.options[d.options_index].selected=!0,this.is_multiple?this.choice_build(d):(this.selected_item.find("span").first().text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!a.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),this.form_field_jq.trigger("change",{selected:this.form_field.options[d.options_index].value}),this.search_field_scale()):void 0},e.prototype.result_activate=function(a){return a.addClass("active-result")},e.prototype.result_deactivate=function(a){return a.removeClass("active-result")},e.prototype.result_deselect=function(b){var c,d;return d=this.results_data[b],d.selected=!1,this.form_field.options[d.options_index].selected=!1,c=a("#"+this.container_id+"_o_"+b),c.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[d.options_index].value}),this.search_field_scale()},e.prototype.single_deselect_control_build=function(){return this.allow_single_deselect&&this.selected_item.find("abbr").length<1?this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'):void 0},e.prototype.winnow_results=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(this.no_results_clear(),j=0,k=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html(),g=this.search_contains?"":"^",f=new RegExp(g+k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),n=new RegExp(k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),s=this.results_data,o=0,q=s.length;q>o;o++)if(c=s[o],!c.disabled&&!c.empty)if(c.group)a("#"+c.dom_id).css("display","none");else if(!this.is_multiple||!c.selected){if(b=!1,i=c.dom_id,h=a("#"+i),f.test(c.html))b=!0,j+=1;else if((c.html.indexOf(" ")>=0||0===c.html.indexOf("["))&&(e=c.html.replace(/\[|\]/g,"").split(" "),e.length))for(p=0,r=e.length;r>p;p++)d=e[p],f.test(d)&&(b=!0,j+=1);b?(k.length?(l=c.html.search(n),m=c.html.substr(0,l+k.length)+"</em>"+c.html.substr(l+k.length),m=m.substr(0,l)+"<em>"+m.substr(l)):m=c.html,h.html(m),this.result_activate(h),null!=c.group_array_index&&a("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&i===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}return 1>j&&k.length?this.no_results(k):this.winnow_results_set_highlight()},e.prototype.winnow_results_clear=function(){var b,c,d,e,f;for(this.search_field.val(""),c=this.search_results.find("li"),f=[],d=0,e=c.length;e>d;d++)b=c[d],b=a(b),b.hasClass("group-result")?f.push(b.css("display","auto")):this.is_multiple&&b.hasClass("result-selected")?f.push(void 0):f.push(this.result_activate(b));return f},e.prototype.winnow_results_set_highlight=function(){var a,b;return this.result_highlight||(b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null==a)?void 0:this.result_do_highlight(a)},e.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},e.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},e.prototype.keydown_arrow=function(){var b,c;return this.result_highlight?this.results_showing&&(c=this.result_highlight.nextAll("li.active-result").first(),c&&this.result_do_highlight(c)):(b=this.search_results.find("li.active-result").first(),b&&this.result_do_highlight(a(b))),this.results_showing?void 0:this.results_show()},e.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},e.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.pending_backstroke.addClass("search-choice-focus"))},e.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},e.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},e.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return c=a("<div />",{style:f}),c.text(this.search_field.val()),a("body").append(c),h=c.width()+25,c.remove(),h>this.f_width-10&&(h=this.f_width-10),this.search_field.css({width:h+"px"}),b=this.container.height(),this.dropdown.css({top:b+"px"})}},e.prototype.generate_random_id=function(){var b;for(b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();a("#"+b).length>0;)b+=this.generate_random_char();return b},e}(AbstractChosen),c=function(a){var b;return b=a.outerWidth()-a.width()},d.get_side_border_padding=c}.call(this),jQuery.validator.addMethod("containsDigitAndLetter",function(a,b){return this.optional(b)||/\d+/.test(a)&&/[a-zA-Z]+/.test(a)},"Please include at least one digit and one letter"),Modernizr.load({test:Modernizr.input.placeholder,nope:["/static/js/internal/lib/jquery.placeholder.min.js"],complete:function(){Modernizr.input.placeholder||$("input[placeholder], textarea[placeholder]").placeholder()}}),function(a,b){if("object"==typeof exports&&exports)b(exports);else{var c={};b(c),"function"==typeof define&&define.amd?define(c):a.Mustache=c}}(this,function(a){function b(a,b){return t.call(a,b)}function c(a){return!b(p,a)}function d(a){return"function"==typeof a}function e(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function f(a){return String(a).replace(/[&<>"'\/]/g,function(a){return w[a]})}function g(a){if(!v(a)||2!==a.length)throw new Error("Invalid tags: "+a);return[new RegExp(e(a[0])+"\\s*"),new RegExp("\\s*"+e(a[1]))]}function h(b,d){function f(){if(A&&!B)for(;z.length;)delete y[z.pop()];else z=[];A=!1,B=!1}d=d||a.tags,b=b||"","string"==typeof d&&(d=d.split(o));for(var h,l,m,p,t,u,v=g(d),w=new k(b),x=[],y=[],z=[],A=!1,B=!1;!w.eos();){if(h=w.pos,m=w.scanUntil(v[0]))for(var C=0,D=m.length;D>C;++C)p=m.charAt(C),c(p)?z.push(y.length):B=!0,y.push(["text",p,h,h+1]),h+=1,"\n"===p&&f();if(!w.scan(v[0]))break;if(A=!0,l=w.scan(s)||"name",w.scan(n),"="===l?(m=w.scanUntil(q),w.scan(q),w.scanUntil(v[1])):"{"===l?(m=w.scanUntil(new RegExp("\\s*"+e("}"+d[1]))),w.scan(r),w.scanUntil(v[1]),l="&"):m=w.scanUntil(v[1]),!w.scan(v[1]))throw new Error("Unclosed tag at "+w.pos);if(t=[l,m,h,w.pos],y.push(t),"#"===l||"^"===l)x.push(t);else if("/"===l){if(u=x.pop(),!u)throw new Error('Unopened section "'+m+'" at '+h);if(u[1]!==m)throw new Error('Unclosed section "'+u[1]+'" at '+h)}else"name"===l||"{"===l||"&"===l?B=!0:"="===l&&(v=g(d=m.split(o)))}if(u=x.pop())throw new Error('Unclosed section "'+u[1]+'" at '+w.pos);return j(i(y))}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function j(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;h>g;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}return d}function k(a){this.string=a,this.tail=a,this.pos=0}function l(a,b){this.view=null==a?{}:a,this.cache={".":this.view},this.parent=b}function m(){this.cache={}}var n=/\s*/,o=/\s+/,p=/\S/,q=/\s*=/,r=/\s*\}/,s=/#|\^|\/|>|\{|&|=|!/,t=RegExp.prototype.test,u=Object.prototype.toString,v=Array.isArray||function(a){return"[object Array]"===u.call(a)},w={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};k.prototype.eos=function(){return""===this.tail},k.prototype.scan=function(a){var b=this.tail.match(a);if(b&&0===b.index){var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c}return""},k.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c)}return this.pos+=b.length,b},l.prototype.push=function(a){return new l(a,this)},l.prototype.lookup=function(a){var b;if(a in this.cache)b=this.cache[a];else{for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var e=a.split("."),f=0;null!=b&&f<e.length;)b=b[e[f++]]}else b=c.view[a];if(null!=b)break;c=c.parent}this.cache[a]=b}return d(b)&&(b=b.call(this.view)),b},m.prototype.clearCache=function(){this.cache={}},m.prototype.parse=function(a,b){var c=this.cache,d=c[a];return null==d&&(d=c[a]=h(a,b)),d},m.prototype.render=function(a,b,c){var d=this.parse(a),e=b instanceof l?b:new l(b);return this.renderTokens(d,e,c,a)},m.prototype.renderTokens=function(b,c,e,f){function g(a){return k.render(a,c,e)}for(var h,i,j="",k=this,l=0,m=b.length;m>l;++l)switch(h=b[l],h[0]){case"#":if(i=c.lookup(h[1]),!i)continue;if(v(i))for(var n=0,o=i.length;o>n;++n)j+=this.renderTokens(h[4],c.push(i[n]),e,f);else if("object"==typeof i||"string"==typeof i)j+=this.renderTokens(h[4],c.push(i),e,f);else if(d(i)){if("string"!=typeof f)throw new Error("Cannot use higher-order sections without the original template");i=i.call(c.view,f.slice(h[3],h[5]),g),null!=i&&(j+=i)}else j+=this.renderTokens(h[4],c,e,f);break;case"^":i=c.lookup(h[1]),(!i||v(i)&&0===i.length)&&(j+=this.renderTokens(h[4],c,e,f));break;case">":if(!e)continue;i=d(e)?e(h[1]):e[h[1]],null!=i&&(j+=this.renderTokens(this.parse(i),c,e,i));break;case"&":i=c.lookup(h[1]),null!=i&&(j+=i);break;case"name":i=c.lookup(h[1]),null!=i&&(j+=a.escape(i));break;case"text":j+=h[1]}return j},a.name="mustache.js",a.version="0.8.1",a.tags=["{{","}}"];var x=new m;a.clearCache=function(){return x.clearCache()},a.parse=function(a,b){return x.parse(a,b)},a.render=function(a,b,c){return x.render(a,b,c)},a.to_html=function(b,c,e,f){var g=a.render(b,c,e);return d(f)?(f(g),void 0):g},a.escape=f,a.Scanner=k,a.Context=l,a.Writer=m});var requirejs,require,define;!function(Z){function H(a){return"[object Function]"===L.call(a)}function I(a){return"[object Array]"===L.call(a)}function y(a,b){if(a){var c;for(c=0;c<a.length&&(!a[c]||!b(a[c],c,a));c+=1);}}function M(a,b){if(a){var c;for(c=a.length-1;c>-1&&(!a[c]||!b(a[c],c,a));c-=1);}}function t(a,b){return ga.call(a,b)}function l(a,b){return t(a,b)&&a[b]}function F(a,b){for(var c in a)if(t(a,c)&&b(a[c],c))break}function Q(a,b,c,d){return b&&F(b,function(b,e){(c||!t(a,e))&&(d&&"string"!=typeof b?(a[e]||(a[e]={}),Q(a[e],b,c,d)):a[e]=b)}),a}function u(a,b){return function(){return b.apply(a,arguments)}}function aa(a){throw a}function ba(a){if(!a)return a;var b=Z;return y(a.split("."),function(a){b=b[a]}),b}function A(a,b,c,d){return b=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a),b.requireType=a,b.requireModules=d,c&&(b.originalError=c),b}function ha(a){function b(a,b,c){var d,e,f,g,h,i,j,k=b&&b.split("/");d=k;var m=C.map,n=m&&m["*"];if(a&&"."===a.charAt(0))if(b){for(d=l(C.pkgs,b)?k=[b]:k.slice(0,k.length-1),b=a=d.concat(a.split("/")),d=0;b[d];d+=1)if(e=b[d],"."===e)b.splice(d,1),d-=1;else if(".."===e){if(1===d&&(".."===b[2]||".."===b[0]))break;d>0&&(b.splice(d-1,2),d-=2)}d=l(C.pkgs,b=a[0]),a=a.join("/"),d&&a===b+"/"+d.main&&(a=b)}else 0===a.indexOf("./")&&(a=a.substring(2));if(c&&m&&(k||n)){for(b=a.split("/"),d=b.length;d>0;d-=1){if(f=b.slice(0,d).join("/"),k)for(e=k.length;e>0;e-=1)if((c=l(m,k.slice(0,e).join("/")))&&(c=l(c,f))){g=c,h=d;break}if(g)break;!i&&n&&l(n,f)&&(i=l(n,f),j=d)}!g&&i&&(g=i,h=j),g&&(b.splice(0,h,g),a=b.join("/"))}return a}function c(a){z&&y(document.getElementsByTagName("script"),function(b){return b.getAttribute("data-requiremodule")===a&&b.getAttribute("data-requirecontext")===w.contextName?(b.parentNode.removeChild(b),!0):void 0})}function d(a){var b=l(C.paths,a);return b&&I(b)&&1<b.length?(b.shift(),w.require.undef(a),w.require([a]),!0):void 0}function e(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function f(a,c,d,f){var g,h,i=null,j=c?c.name:null,k=a,m=!0,n="";return a||(m=!1,a="_@r"+(M+=1)),a=e(a),i=a[0],a=a[1],i&&(i=b(i,j,f),h=l(K,i)),a&&(i?n=h&&h.normalize?h.normalize(a,function(a){return b(a,j,f)}):b(a,j,f):(n=b(a,j,f),a=e(n),i=a[0],n=a[1],d=!0,g=w.nameToUrl(n))),d=!i||h||d?"":"_unnormalized"+(N+=1),{prefix:i,name:n,parentMap:c,unnormalized:!!d,url:g,originalName:k,isDefine:m,id:(i?i+"!"+n:n)+d}}function g(a){var b=a.id,c=l(D,b);return c||(c=D[b]=new w.Module(a)),c}function h(a,b,c){var d=a.id,e=l(D,d);!t(K,d)||e&&!e.defineEmitComplete?(e=g(a),e.error&&"error"===b?c(e.error):e.on(b,c)):"defined"===b&&c(K[d])}function i(a,b){var c=a.requireModules,d=!1;b?b(a):(y(c,function(b){(b=l(D,b))&&(b.error=a,b.events.error&&(d=!0,b.emit("error",a)))}),d||j.onError(a))}function k(){R.length&&(ia.apply(J,[J.length-1,0].concat(R)),R=[])}function m(a){delete D[a],delete E[a]}function n(a,b,c){var d=a.map.id;a.error?a.emit("error",a.error):(b[d]=!0,y(a.depMaps,function(d,e){var f=d.id,g=l(D,f);g&&!a.depMatched[e]&&!c[f]&&(l(b,f)?(a.defineDep(e,K[f]),a.check()):n(g,b,c))}),c[d]=!0)}function o(){var a,b,e,f,g=(e=1e3*C.waitSeconds)&&w.startTime+e<(new Date).getTime(),h=[],j=[],k=!1,l=!0;if(!s){if(s=!0,F(E,function(e){if(a=e.map,b=a.id,e.enabled&&(a.isDefine||j.push(e),!e.error))if(!e.inited&&g)d(b)?k=f=!0:(h.push(b),c(b));else if(!e.inited&&e.fetched&&a.isDefine&&(k=!0,!a.prefix))return l=!1}),g&&h.length)return e=A("timeout","Load timeout for modules: "+h,null,h),e.contextName=w.contextName,i(e);l&&y(j,function(a){n(a,{},{})}),g&&!f||!k||!z&&!da||B||(B=setTimeout(function(){B=0,o()},50)),s=!1}}function p(a){t(K,a[0])||g(f(a[0],null,!0)).init(a[1],a[2])}function q(a){var a=a.currentTarget||a.srcElement,b=w.onScriptLoad;return a.detachEvent&&!W?a.detachEvent("onreadystatechange",b):a.removeEventListener("load",b,!1),b=w.onScriptError,(!a.detachEvent||W)&&a.removeEventListener("error",b,!1),{node:a,id:a&&a.getAttribute("data-requiremodule")}}function r(){var a;for(k();J.length;){if(a=J.shift(),null===a[0])return i(A("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));p(a)}}var s,v,w,x,B,C={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},D={},E={},G={},J=[],K={},L={},M=1,N=1;return x={require:function(a){return a.require?a.require:a.require=w.makeRequire(a.map)},exports:function(a){return a.usingExports=!0,a.map.isDefine?a.exports?a.exports:a.exports=K[a.map.id]={}:void 0},module:function(a){return a.module?a.module:a.module={id:a.map.id,uri:a.map.url,config:function(){var b=l(C.pkgs,a.map.id);return(b?l(C.config,a.map.id+"/"+b.main):l(C.config,a.map.id))||{}},exports:K[a.map.id]}}},v=function(a){this.events=l(G,a.id)||{},this.map=a,this.shim=l(C.shim,a.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},v.prototype={init:function(a,b,c,d){d=d||{},this.inited||(this.factory=b,c?this.on("error",c):this.events.error&&(c=u(this,function(a){this.emit("error",a)})),this.depMaps=a&&a.slice(0),this.errback=c,this.inited=!0,this.ignore=d.ignore,d.enabled||this.enabled?this.enable():this.check())},defineDep:function(a,b){this.depMatched[a]||(this.depMatched[a]=!0,this.depCount-=1,this.depExports[a]=b)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var a=this.map;if(!this.shim)return a.prefix?this.callPlugin():this.load();w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return a.prefix?this.callPlugin():this.load()}))}},load:function(){var a=this.map.url;L[a]||(L[a]=!0,w.load(this.map.id,a))},check:function(){if(this.enabled&&!this.enabling){var a,b,c=this.map.id;b=this.depExports;var d=this.exports,e=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(H(e)){if(this.events.error&&this.map.isDefine||j.onError!==aa)try{d=w.execCb(c,e,b,d)}catch(f){a=f}else d=w.execCb(c,e,b,d);if(this.map.isDefine&&((b=this.module)&&void 0!==b.exports&&b.exports!==this.exports?d=b.exports:void 0===d&&this.usingExports&&(d=this.exports)),a)return a.requireMap=this.map,a.requireModules=this.map.isDefine?[this.map.id]:null,a.requireType=this.map.isDefine?"define":"require",i(this.error=a)}else d=e;this.exports=d,this.map.isDefine&&!this.ignore&&(K[c]=d,j.onResourceLoad)&&j.onResourceLoad(w,this.map,this.depMaps),m(c),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var a=this.map,c=a.id,d=f(a.prefix);this.depMaps.push(d),h(d,"defined",u(this,function(d){var e,k;k=this.map.name;var n=this.map.parentMap?this.map.parentMap.name:null,o=w.makeRequire(a.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(d.normalize&&(k=d.normalize(k,function(a){return b(a,n,!0)})||""),d=f(a.prefix+"!"+k,this.map.parentMap),h(d,"defined",u(this,function(a){this.init([],function(){return a},null,{enabled:!0,ignore:!0})})),(k=l(D,d.id))&&(this.depMaps.push(d),this.events.error&&k.on("error",u(this,function(a){this.emit("error",a)})),k.enable())):(e=u(this,function(a){this.init([],function(){return a},null,{enabled:!0})}),e.error=u(this,function(a){this.inited=!0,this.error=a,a.requireModules=[c],F(D,function(a){0===a.map.id.indexOf(c+"_unnormalized")&&m(a.map.id)}),i(a)}),e.fromText=u(this,function(b,d){var h=a.name,k=f(h),l=O;d&&(b=d),l&&(O=!1),g(k),t(C.config,c)&&(C.config[h]=C.config[c]);try{j.exec(b)}catch(m){return i(A("fromtexteval","fromText eval for "+c+" failed: "+m,m,[c]))}l&&(O=!0),this.depMaps.push(k),w.completeLoad(h),o([h],e)
}),d.load(a.name,o,e,C))})),w.enable(d,this),this.pluginMaps[d.id]=d},enable:function(){E[this.map.id]=this,this.enabling=this.enabled=!0,y(this.depMaps,u(this,function(a,b){var c,d;if("string"==typeof a){if(a=f(a,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[b]=a,c=l(x,a.id))return this.depExports[b]=c(this),void 0;this.depCount+=1,h(a,"defined",u(this,function(a){this.defineDep(b,a),this.check()})),this.errback&&h(a,"error",u(this,this.errback))}c=a.id,d=D[c],!t(x,c)&&d&&!d.enabled&&w.enable(a,this)})),F(this.pluginMaps,u(this,function(a){var b=l(D,a.id);b&&!b.enabled&&w.enable(a,this)})),this.enabling=!1,this.check()},on:function(a,b){var c=this.events[a];c||(c=this.events[a]=[]),c.push(b)},emit:function(a,b){y(this.events[a],function(a){a(b)}),"error"===a&&delete this.events[a]}},w={config:C,contextName:a,registry:D,defined:K,urlFetched:L,defQueue:J,Module:v,makeModuleMap:f,nextTick:j.nextTick,onError:i,configure:function(a){a.baseUrl&&"/"!==a.baseUrl.charAt(a.baseUrl.length-1)&&(a.baseUrl+="/");var b=C.pkgs,c=C.shim,d={paths:!0,config:!0,map:!0};F(a,function(a,b){d[b]?"map"===b?(C.map||(C.map={}),Q(C[b],a,!0,!0)):Q(C[b],a,!0):C[b]=a}),a.shim&&(F(a.shim,function(a,b){I(a)&&(a={deps:a}),!a.exports&&!a.init||a.exportsFn||(a.exportsFn=w.makeShimExports(a)),c[b]=a}),C.shim=c),a.packages&&(y(a.packages,function(a){a="string"==typeof a?{name:a}:a,b[a.name]={name:a.name,location:a.location||a.name,main:(a.main||"main").replace(ja,"").replace(ea,"")}}),C.pkgs=b),F(D,function(a,b){!a.inited&&!a.map.unnormalized&&(a.map=f(b))}),(a.deps||a.callback)&&w.require(a.deps||[],a.callback)},makeShimExports:function(a){return function(){var b;return a.init&&(b=a.init.apply(Z,arguments)),b||a.exports&&ba(a.exports)}},makeRequire:function(d,e){function h(b,c,k){var l,m;return e.enableBuildCallback&&c&&H(c)&&(c.__requireJsBuild=!0),"string"==typeof b?H(c)?i(A("requireargs","Invalid require call"),k):d&&t(x,b)?x[b](D[d.id]):j.get?j.get(w,b,d,h):(l=f(b,d,!1,!0),l=l.id,t(K,l)?K[l]:i(A("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+a+(d?"":". Use require([])")))):(r(),w.nextTick(function(){r(),m=g(f(null,d)),m.skipMap=e.skipMap,m.init(b,c,k,{enabled:!0}),o()}),h)}return e=e||{},Q(h,{isBrowser:z,toUrl:function(a){var c,e=a.lastIndexOf("."),f=a.split("/")[0];return-1!==e&&("."!==f&&".."!==f||e>1)&&(c=a.substring(e,a.length),a=a.substring(0,e)),w.nameToUrl(b(a,d&&d.id,!0),c,!0)},defined:function(a){return t(K,f(a,d,!1,!0).id)},specified:function(a){return a=f(a,d,!1,!0).id,t(K,a)||t(D,a)}}),d||(h.undef=function(a){k();var b=f(a,d,!0),e=l(D,a);c(a),delete K[a],delete L[b.url],delete G[a],e&&(e.events.defined&&(G[a]=e.events),m(a))}),h},enable:function(a){l(D,a.id)&&g(a).enable()},completeLoad:function(a){var b,c,e=l(C.shim,a)||{},f=e.exports;for(k();J.length;){if(c=J.shift(),null===c[0]){if(c[0]=a,b)break;b=!0}else c[0]===a&&(b=!0);p(c)}if(c=l(D,a),!b&&!t(K,a)&&c&&!c.inited){if(C.enforceDefine&&(!f||!ba(f)))return d(a)?void 0:i(A("nodefine","No define call for "+a,null,[a]));p([a,e.deps||[],e.exportsFn])}o()},nameToUrl:function(a,b,c){var d,e,f,g,h,i;if(j.jsExtRegExp.test(a))g=a+(b||"");else{for(d=C.paths,e=C.pkgs,g=a.split("/"),h=g.length;h>0;h-=1){if(i=g.slice(0,h).join("/"),f=l(e,i),i=l(d,i)){I(i)&&(i=i[0]),g.splice(0,h,i);break}if(f){a=a===f.name?f.location+"/"+f.main:f.location,g.splice(0,h,a);break}}g=g.join("/"),g+=b||(/^data\:|\?/.test(g)||c?"":".js"),g=("/"===g.charAt(0)||g.match(/^[\w\+\.\-]+:/)?"":C.baseUrl)+g}return C.urlArgs?g+((-1===g.indexOf("?")?"?":"&")+C.urlArgs):g},load:function(a,b){j.load(w,a,b)},execCb:function(a,b,c,d){return b.apply(d,c)},onScriptLoad:function(a){("load"===a.type||ka.test((a.currentTarget||a.srcElement).readyState))&&(P=null,a=q(a),w.completeLoad(a.id))},onScriptError:function(a){var b=q(a);return d(b.id)?void 0:i(A("scripterror","Script error for: "+b.id,a,[b.id]))}},w.require=w.makeRequire(),w}var j,w,x,C,J,D,P,K,q,fa,la=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,ma=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/\.js$/,ja=/^\.\//;w=Object.prototype;var L=w.toString,ga=w.hasOwnProperty,ia=Array.prototype.splice,z=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),da=!z&&"undefined"!=typeof importScripts,ka=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,W="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),E={},s={},R=[],O=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(H(requirejs))return;s=requirejs,requirejs=void 0}"undefined"!=typeof require&&!H(require)&&(s=require,require=void 0),j=requirejs=function(a,b,c,d){var e,f="_";return!I(a)&&"string"!=typeof a&&(e=a,I(b)?(a=b,b=c,c=d):a=[]),e&&e.context&&(f=e.context),(d=l(E,f))||(d=E[f]=j.s.newContext(f)),e&&d.configure(e),d.require(a,b,c)},j.config=function(a){return j(a)},j.nextTick="undefined"!=typeof setTimeout?function(a){setTimeout(a,4)}:function(a){a()},require||(require=j),j.version="2.1.9",j.jsExtRegExp=/^\/|:|\?|\.js$/,j.isBrowser=z,w=j.s={contexts:E,newContext:ha},j({}),y(["toUrl","undef","defined","specified"],function(a){j[a]=function(){var b=E._;return b.require[a].apply(b,arguments)}}),z&&(x=w.head=document.getElementsByTagName("head")[0],C=document.getElementsByTagName("base")[0])&&(x=w.head=C.parentNode),j.onError=aa,j.createNode=function(a){var b=a.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return b.type=a.scriptType||"text/javascript",b.charset="utf-8",b.async=!0,b},j.load=function(a,b,c){var d=a&&a.config||{};if(z)return d=j.createNode(d,b,c),d.setAttribute("data-requirecontext",a.contextName),d.setAttribute("data-requiremodule",b),!d.attachEvent||d.attachEvent.toString&&0>d.attachEvent.toString().indexOf("[native code")||W?(d.addEventListener("load",a.onScriptLoad,!1),d.addEventListener("error",a.onScriptError,!1)):(O=!0,d.attachEvent("onreadystatechange",a.onScriptLoad)),d.src=c,K=d,C?x.insertBefore(d,C):x.appendChild(d),K=null,d;if(da)try{importScripts(c),a.completeLoad(b)}catch(e){a.onError(A("importscripts","importScripts failed for "+b+" at "+c,e,[b]))}},z&&!s.skipDataMain&&M(document.getElementsByTagName("script"),function(a){return x||(x=a.parentNode),(J=a.getAttribute("data-main"))?(q=J,s.baseUrl||(D=q.split("/"),q=D.pop(),fa=D.length?D.join("/")+"/":"./",s.baseUrl=fa),q=q.replace(ea,""),j.jsExtRegExp.test(q)&&(q=J),s.deps=s.deps?s.deps.concat(q):[q],!0):void 0}),define=function(a,b,c){var d,e;"string"!=typeof a&&(c=b,b=a,a=null),I(b)||(c=b,b=null),!b&&H(c)&&(b=[],c.length&&(c.toString().replace(la,"").replace(ma,function(a,c){b.push(c)}),b=(1===c.length?["require"]:["require","exports","module"]).concat(b))),O&&((d=K)||(P&&"interactive"===P.readyState||M(document.getElementsByTagName("script"),function(a){return"interactive"===a.readyState?P=a:void 0}),d=P),d&&(a||(a=d.getAttribute("data-requiremodule")),e=E[d.getAttribute("data-requirecontext")])),(e?e.defQueue:R).push([a,b,c])},define.amd={jQuery:!0},j.exec=function(b){return eval(b)},j(s)}}(this),!function(a,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():a[b]=c()}(this,"verge",function(){function a(){return{width:l(),height:m()}}function b(a,b){var c={};return b=+b||0,c.width=(c.right=a.right+b)-(c.left=a.left-b),c.height=(c.bottom=a.bottom+b)-(c.top=a.top-b),c}function c(a,c){return a=a&&!a.nodeType?a[0]:a,a&&1===a.nodeType?b(a.getBoundingClientRect(),c):!1}function d(b){b=null==b?a():1===b.nodeType?c(b):b;var d=b.height,e=b.width;return d="function"==typeof d?d.call(b):d,e="function"==typeof e?e.call(b):e,e/d}var e={},f="undefined"!=typeof window&&window,g="undefined"!=typeof document&&document,h=g&&g.documentElement,i=f.Modernizr,j=f.matchMedia||f.msMatchMedia,k=j?function(a){return!!j.call(f,a).matches}:function(){return!1},l=h.clientWidth<f.innerWidth?function(){return f.innerWidth}:function(){return h.clientWidth},m=h.clientHeight<f.innerHeight?function(){return f.innerHeight}:function(){return h.clientHeight};return e.mq=!j&&i&&i.mq||k,e.matchMedia=j?function(){return j.apply(f,arguments)}:function(){return{}},e.viewportW=l,e.viewportH=m,e.viewport=a,e.scrollX=function(){return f.pageXOffset||h.scrollLeft},e.scrollY=function(){return f.pageYOffset||h.scrollTop},e.rectangle=c,e.aspect=d,e.inX=function(a,b){var d=c(a,b);return!!d&&d.right>=0&&d.left<=l()},e.inY=function(a,b){var d=c(a,b);return!!d&&d.bottom>=0&&d.top<=m()},e.inViewport=function(a,b){var d=c(a,b);return!!d&&d.bottom>=0&&d.right>=0&&d.top<=m()&&d.left<=l()},e}),define("depositInterruption/DepositInterruptionController",[],function(){function a(a,b,c){var d=function(b){var c=b.getContentType(),d=b.getDoi(),g=b.getHref();a.isDepositInterruptible(c,d)?f(g):e(g)},e=function(a){c.redirectTo(a)},f=function(a){b.showPopup(a)};b.onClick(d)}return a}),define("depositInterruption/DepositInterruptionService",[],function(){function a(a){var b=this;b.isDepositInterruptible=function(b,c){var d="/deposit-interrupt/shouldinterrupt?contentType="+b+"&contentId="+c,e=!1;return a.getJSONNoAsync(d).done(function(a){e=a.displayPopup}),e}}return a}),define("depositInterruption/DepositInterruptionView",[],function(){function a(a){var b=this,c=a;return b.getHref=function(){return c.attr("href")},b.getContentType=function(){return c.attr("contentType")},b.getDoi=function(){return c.attr("doi")},b}function b(){var b=this;b.onClick=function(b){$(document).delegate(".deposit-interrupt","click",function(c){c.preventDefault(),b(new a($(this)))}),$("#reader").delegate(".deposit-interrupt","click",function(c){c.preventDefault(),b(new a($(this)))})},b.showPopup=function(a){$.colorbox({href:"/interruption .mod",trapFocus:!0,opacity:.75,width:300,overlayClose:!1,onComplete:function(){$("#cost-code").focus(),$("#colorbox .btn-monster").click(function(){var b=$("#cost-code").val();document.location.href=a+"?costCode="+b+"&ic=1"}),$("#colorbox .cancel").click(function(a){a.preventDefault(),$.colorbox.close()})},onOpen:function(){$("#cboxOverlay, #colorbox").css("z-index","9999"),window.returnFocusTo=document.activeElement},onClosed:function(){window.returnFocusTo.focus()}})}}return b}),define("utils/DocumentHelper",[],function(){function a(){this.queryString=function(){return document.location.search},this.currentUri=function(){return document.location.href},this.redirectTo=function(a){document.location=a},this.redirectAfterDelay=function(a){setTimeout(function(){document.location.href=a},100)},this.reloadPageWithQuery=function(a){document.location=document.location.pathname+"?"+a},this.getHashParameter=function(){return window.location.hash.substring(1)}}return a}),define("utils/Requests",[],function(){function a(){var a=this;a.post=function(a,b){return $.post(a,b)},a.get=function(a){return $.get(a)},a.getJSON=function(a){return $.getJSON(a)},a.getJSONWithHeaders=function(a){return $.ajax({headers:{Accept:"application/json"},url:a})},a.getJSONNoAsync=function(a){return $.ajax({dataType:"json",url:a,async:!1})}}return a}),define("depositInterruption/start",["./DepositInterruptionController","./DepositInterruptionService","./DepositInterruptionView","utils/DocumentHelper","utils/Requests"],function(a,b,c,d,e){return{init:function(){var f=new c,g=new b(new e);new a(g,f,new d)}}}),define("abstractPage/DeepDyveController",[],function(){function a(a,b){var c=function(){var c=a.getUrl()+"?docId="+a.getDoi()+"&fieldName=journal_doi&journal="+a.getPrintIssn()+"&affiliateId=springer&format=jsonp&callback=?";b.getJSON(c).done(function(b){"ok"===b.status?(a.setUrl(b.url),a.show()):a.setUrl("#")}).fail(function(){a.setUrl("#")})};a.isOnPage()&&c()}return a}),define("abstractPage/DeepDyve",[],function(){function a(){this.getUrl=function(){return $("#deepdyve-link").attr("href")},this.setUrl=function(a){$("#deepdyve-link").attr("href",a)},this.getDoi=function(){return $("#abstract-about-doi").text()},this.getPrintIssn=function(){return $("#abstract-about-issn").text()},this.isOnPage=function(){return $(".deepdyve-content").length>0},this.show=function(){$(".deepdyve-content").show()}}return a}),define("abstractPage/ExpanderElement",[],function(){function a(a){var b=a,c=b.children(".expander-content"),d=c.children().children(),e=b.find(".expander-title");this.onClick=function(a){e.click(a)},this.onKbEnter=function(a){e.keypress(a)},this.isEmpty=function(){b.not(".expander-open")},this.getId=function(){return b.attr("id")},this.showLoader=function(){b.addClass("expander-loading")},this.hideLoader=function(){b.removeClass("expander-loading")},this.show=function(){b.removeClass("hidden")},this.hideContent=function(){d.addClass("hidden")},this.showContent=function(){d.removeClass("hidden")},this.setContent=function(a){d.html(a)},this.slideDown=function(){c.slideDown(function(){b.addClass("expander-open")})},this.close=function(){c.slideUp(function(){b.removeClass("expander-open")})},this.isOpen=function(){return c.is(":visible")},this.hasContent=function(){return""!==$.trim(d.html())}}return a}),define("abstractPage/Expander",["abstractPage/ExpanderElement"],function(a){function b(){this.onClick=function(b){$(".expander .expander-title").click(function(){b(new a($(this).parent()))})},this.getAllElements=function(){return $(".expander").map(function(b,c){return new a($(c))})}}return b}),define("abstractPage/ExpanderController",[],function(){function a(a,b){var c=function(b){var c,d=a.getAllElements();for(c=0;c<d.length;c++){var e=d[c];e.isOpen()&&e.getId()!==b?e.close():e.isOpen()||e.getId()!==b||e.slideDown()}};this.toggle=function(a){a.isOpen()?a.close():a.slideDown()},this.openFromHashParameter=function(){var a=b.getHashParameter();""!==a&&c(a)},a.onClick(this.toggle)}return a}),define("abstractPage/LookInside",[],function(){function a(a){var b=this,c=a;return b.hasInterruptPreviewClass=function(){return c.hasClass("interrupt-preview")},b.hasDepositInterruptPreviewClass=function(){return c.hasClass("deposit-interrupt-preview")},b.getHref=function(){return c.attr("href")},b.getContentType=function(){return c.attr("contentType")},b.getDoi=function(){return c.attr("doi")},b.parentHasNoAccessClass=function(){return c.parents("li,.document").hasClass("no-access")},b}function b(){var b=this,c=$(".lookinside-href");return b.onClick=function(b){c.click(function(c){c.preventDefault(),b(new a($(this)))})},b}return b}),define("abstractPage/LookInsideController",[],function(){function a(a,b,c){var d=this,e=function(b){if(b.hasInterruptPreviewClass())return!0;if(b.hasDepositInterruptPreviewClass()){var c=b.getContentType(),d=b.getDoi();return a.isDepositInterruptible(c,d)}return!1},f=function(a){return a.replace(/^\/(?:article|chapter|protocol|referenceworkentry)\/(.*)\/lookinside\/000.png$/m,"$1")},g=function(a){a.parentHasNoAccessClass()||c.hasUnlockIcon()?(j(),$("#reader-overlay").addClass("no-access")):i()},h=function(a){var b=f(a.getHref());Mendeley.PDF.Preview.setup(b,e(a)),Mendeley.PDF.Preview.open(0),g(a)};this.init=function(){b.onClick(h)},this.maybeAutoOpenLookInside=function(){d.shouldAutoShowLookInside()&&($(".lookinside-href:first").click(),$(".lookinside-href:first").mousedown())},this.shouldAutoShowLookInside=function(){return"true"===$("#autoShowLookInside").val()};var i=function(){!$("#reader .bar-dock").length&&$("span.action:not(:has(.access-link)):first").length&&$("#reader .top-shadow").after('<div class="bar-dock"><div class="bar-wrapper"><div class="bar-actions"><span class="action icon-download-alt help">'+$("a.pdf-link:first").parent().html()+"</span></div></div></div>")},j=function(){$("#reader .bar-dock").remove()}}return a}),define("abstractPage/ActionBarView",[],function(){function a(){var a=this,b=$(".bar-wrapper");0===b.length&&(b=$(".bar-actions"));var c=$(".bar-dock"),d=$(".bar-access-restr");d.css("margin-top","-24px"),a.openAccessRestr=function(){d.animate({marginTop:"0px"},"fast")},a.closeAccessRestr=function(){d.delay(1200).animate({marginTop:"-24px"},"fast")},a.onGetAccessButtonHover=function(a,b){$(".bar-actions .icon-unlock a").hoverIntent({over:a,out:b})},a.hasUnlockIcon=function(){return $(".bar-actions .icon-unlock a").length>0},a.onGetAccessButtonClick=function(a){$("a.access-link").click(function(b){b.preventDefault(),a($(this).attr("href"))})},a.onWindowResize=function(a){$(window).resize(a)},a.onScroll=function(a){$(window).scroll(a)},a.scrollActionBar=function(){b.length>0&&($(document).scrollTop()>c.offset().top?b.addClass("bar-scrolled").css({left:c.offset().left-$(document).scrollLeft(),width:c.width()}):(b.removeClass("bar-scrolled").css("left",0),b.width("100%")))},a.fixPosition=function(){b.length>0&&$(document).scrollTop()>c.offset().top&&b.css({left:c.offset().left-$(document).scrollLeft(),width:c.width()})}}return a}),define("abstractPage/RelatedContentView",[],function(){function a(a){var b=a;this.getId=function(){return b.attr("id")},this.getHref=function(){return b.attr("href")}}function b(){var b=$("#abstract-related");this.onRelatedItemClick=function(c){b.delegate("#related-list a","click",function(b){b.preventDefault(),c(new a($(this)))})},this.isOnThePage=function(){return $("#content:has(#abstract-related)").length>0},this.getDoi=function(){return $(".doi").text()}}return b}),define("abstractPage/RelatedContentController",[],function(){function a(a,b,c,d,e,f){var g=function(){return b.isOpen()&&!b.hasContent()},h=function(a){d.trackEvent("Related articles","Opened section"),b.showContent(),b.hideLoader(),b.setContent(a),f.process("abstract-related")},i=function(){setTimeout(function(){b.hideLoader(),b.close(),b.hideContent()},1e3)},j=function(a){d.trackEvent("Related articles","Followed link",a.getId())},k=function(a){e.redirectAfterDelay(a.getHref())};a.isOnThePage()&&(b.show(),b.onClick(function(){g()&&(b.hideContent(),b.showLoader(),c.get("/related-items/"+a.getDoi()).done(h).fail(i),b.slideDown())}),a.onRelatedItemClick(function(a){j(a),k(a)}))}return a}),define("abstractPage/JournalView",[],function(){function a(){var a=this,b=$(".browse form");a.onBrowseFormSummit=function(a){b.submit(a)},a.validateVolumeIssue=function(a){var b=a.currentTarget,c=$(b).find("#volume"),d=$(b).find("#issue");return""===c.val()?($(b).find(".volume .error-message").removeClass("hidden"),c.addClass("error"),""===d.val()&&d.addClass("error"),!1):!0},a.getVolume=function(){return b.find("#volume").val()},a.getIssue=function(){return b.find("#issue").val()},a.displayErrorMessage=function(){b.find(".volume .error-message").removeClass("hidden")},a.setVolumeError=function(){b.find("#volume").addClass("error")},a.setIssueError=function(){b.find("#issue").addClass("error")},a.clearErrors=function(){b.find(".volume .error-message").addClass("hidden"),$("#volume").removeClass("error"),b.find(".issue .error-message").addClass("hidden"),$("#issue").removeClass("error")}}return a}),define("abstractPage/JournalController",[],function(){function a(a){var b=function(){return a.clearErrors(),""===a.getVolume()?(a.displayErrorMessage(),a.setVolumeError(),""===a.getIssue()&&a.setIssueError(),!1):!0};a.onBrowseFormSummit(b)}return a}),define("abstractPage/ArticleCitations",[],function(){function a(){this.getUrl=function(){return $("#citation-link").attr("href")},this.setUrl=function(a){$("#citation-link").attr("href",a)},this.getDoi=function(){return $("#abstract-about-doi").text()},this.setCount=function(a){$("#citation-link .citation-count").text(a)},this.setSingularLabel=function(){$("#citation-link .citation-label").text("Citation")},this.isOnPage=function(){return $(".article-citation").length>0},this.show=function(){$(".article-citation").removeClass("invisible")},this.hide=function(){$(".article-citation").addClass("invisible")}}return a}),define("abstractPage/ArticleCitationsController",[],function(){function a(a,b){var c=function(){var c=a.getUrl()+"?doi="+a.getDoi()+"&callback=?";b.getJSONWithHeaders(c).done(function(b){if(b&&"0"!==b["citation-count-result"]["citation-count"]){var c=b["citation-count-result"]["citation-count"];a.setCount(c),"1"===c&&a.setSingularLabel(),a.setUrl("http://citations.springer.com/item?doi="+a.getDoi()),a.show()}else a.hide(),a.setUrl("#")}).fail(function(){a.hide(),a.setUrl("#")})};a.isOnPage()&&c()}return a}),define("abstractPage/ActionBarController",[],function(){function a(a){a.onWindowResize(a.fixPosition),a.onScroll(a.scrollActionBar),$(window).width()>=600&&a.onGetAccessButtonHover(a.openAccessRestr,a.closeAccessRestr)}return a}),define("abstractPage/SocialLinksView",[],function(){function a(){var a=function(a,b){var c=window.screen.width/2-(a/2+10),d=window.screen.height/2-(b/2+50);return"status=no,height="+b+",width="+a+",resizable=yes,left="+c+",top="+d+",screenX="+c+",screenY="+d+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no"};this.getTitle=function(){var a=$("h1#title").text();return a.replace(/(\r\n|\n|\r)\s{2,}/gm," ")},this.onFacebookClick=function(a){$("#facebook").click(a)},this.onLinkedInClick=function(a){$("#linkedin").click(a)},this.onTwitterClick=function(a){$("#twitter").click(a)},this.openFacebookPopup=function(b,c){return window.open("http://www.facebook.com/sharer.php?s=100&p[title]="+encodeURIComponent(b)+"&p[url]="+encodeURIComponent(c),"sharer",a(550,520)),!1},this.openLinkedInPopup=function(b,c,d){return window.open("http://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(d)+"&title="+encodeURIComponent(b)+"&summary="+encodeURIComponent(c),"sharer",a(550,520)),!1},this.openTwitterPopup=function(b,c,d){return window.open("https://twitter.com/intent/tweet?hashtags="+encodeURIComponent(b)+"&url="+encodeURIComponent(d)+"&text="+encodeURIComponent(c),"sharer",a(550,520)),!1}}return a}),define("abstractPage/SocialLinksController",[],function(){function a(a,b){a.onFacebookClick(function(){var c="I'm reading "+a.getTitle();a.openFacebookPopup(c,b.currentUri())}),a.onLinkedInClick(function(){a.openLinkedInPopup(a.getTitle(),"I'm reading this article",b.currentUri())}),a.onTwitterClick(function(){var c="I'm reading "+a.getTitle();a.openTwitterPopup(c,b.currentUri())})}return a}),define("analytics/GoogleAnalytics",[],function(){function a(){this.trackEvent=function(){_gaq.push(["_trackEvent"].concat(Array.prototype.slice.call(arguments)))},this.hasAccess=function(a){_gaq.push(["_setCustomVar",1,"HAS_ACCESS",a,3])}}return a}),define("utils/MathJaxService",[],function(){function a(){this.process=function(a){MathJax.Hub.Queue(["Typeset",MathJax.Hub,a])}}return a}),define("abstractPage/SpringerImages",[],function(){function a(a,b,c){this.getUrl=function(){return"http://api.springer.com/images/jsonp"},this.shouldSearchSpringerImages=function(){var b=a.getSearch().substr(1),c=b.split("&");if(1===c.length){var d=c[0].split("=");return"query"===d[0]&&""!==d[1]}return!1},this.getQuery=function(){return $("input#query").attr("value")},this.getApiKey=function(){return"etv43rf4uwwr62wrmmkx2vp9"},this.setResults=function(a){var c=this.getQuery();b.render("ImagesSearchResults",{totalCount:this.numberWithCommas(a.totalCount),springerImagesSearchUrl:"http://www.springerimages.com/search.aspx?q="+encodeURIComponent(c),query:c,records:this.processRecords(a.records)},this.insertRenderedResults)},this.processRecords=function(a){for(var b=[],d=0;d<a.length;d++){var e=a[d];b.push({caption:this.truncateText(c.searchImagesCaptionLength,e.caption),thumbnailUrl:e.thumbnailUrl,location:e.location})}return b},this.truncateText=function(a,b){if(b.length<=a)return b;for(var c=b.split(" "),d=c[0],e=1;e<c.length&&(d+c[e]).length<=a;e++)d=d+" "+c[e];return d+"..."},this.insertRenderedResults=function(a){var b=$("#results-list > li").size()-1;$("#results-list > li:eq("+Math.min(b,c.searchResultListIndex)+")").after(a)},this.numberWithCommas=function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},this.getNumberOfImagesToRequest=function(){var a=verge.viewportW();return 320>a?2:1024>a?3:5}}return a}),define("abstractPage/SpringerImagesController",[],function(){function a(a,b){var c=function(){var c=a.getUrl()+"?q="+a.getQuery()+"&api_key="+a.getApiKey()+"&callback=?&p="+a.getNumberOfImagesToRequest();b.getJSON(c).done(function(b){for(var c=[],d=function(a){return $.grep(a.File,function(a){return"thumb"===a.Type})[0].Path},e=0;e<b.records.length;++e){var f=b.records[e],g=d(f);c.push({caption:f.Caption,thumbnailUrl:g,location:f.Location})}a.setResults({totalCount:b.result[0].total,records:c})}).fail(function(){a.setResults({totalCount:"0",records:[]})})};a.shouldSearchSpringerImages()&&c()}return a}),define("utils/WindowLocation",[],function(){function a(){this.getSearch=function(){return window.location.search}}return a}),define("utils/MustacheRenderer",[],function(){function a(a){this.render=function(b,c,d){$.get("static/js/app/templates/"+b+".mustache",function(b){d(a.render(b,c))},"text")}}return a}),define("abstractPage/start",["./DeepDyveController","./DeepDyve","./Expander","./ExpanderElement","./ExpanderController","./LookInside","./LookInsideController","./ActionBarView","./RelatedContentView","./RelatedContentController","./JournalView","./JournalController","./ArticleCitations","./ArticleCitationsController","./ActionBarController","./SocialLinksView","./SocialLinksController","depositInterruption/DepositInterruptionService","utils/Requests","analytics/GoogleAnalytics","utils/DocumentHelper","utils/MathJaxService","./SpringerImages","./SpringerImagesController","utils/WindowLocation","utils/MustacheRenderer"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){return{init:function(){var w="undefined"!=typeof window.ontouchstart,x=new s;new a(new b,x);var y=new u,z=new e(new c,y);z.openFromHashParameter();var A=new h,B=new g(new r(x),new f,A);w!==!0&&B.init(),B.maybeAutoOpenLookInside();var C=new t;new o(A);var D=new d($("#abstract-related")),E=new v;new j(new i,D,x,C,y,E),new l(new k),new q(new p,y),new n(new m,x)}}}),define("search/FacetSection",[],function(){function a(){}return a.prototype.onShowAll=function(a){$("a.colorbox-enabled,.facet-header .all").click(function(b){b.preventDefault(),a({url:$(this).attr("href")})})},a}),define("search/ExpandedFacetSection",[],function(){function a(){$(".facet .highlight").each(function(){var a=$(".facet-title",this).css("color");$(".facet-title",this).css("color","#FFF"),$(".facet-title",this).animate({color:a},1500,"easeOutCirc"),$("a",this).append('<span class="highlight-area">'),$(".highlight-area",this).animate({opacity:0},1500,"easeOutCirc")})}var b=function(a){var b=[];return $.each($(a).find('input[type="hidden"]'),function(a,c){b.push($(c).attr("name")+"="+$(c).val())}),b.push("page="+$(a).find('input[name="page"]').val()),b.join("&")};return a.prototype.onPagination=function(a){$("body").delegate("#cboxLoadedContent .next, #cboxLoadedContent .prev","click",function(b){b.preventDefault();var c=$(this).attr("href");a({url:c})}),$("body").delegate("#cboxLoadedContent form:not(#filtering-options)","submit",function(c){c.preventDefault();var d=b(this),e=$(this).attr("action")+"?"+d;a({url:e})})},a.prototype.show=function(a){$.colorbox({href:a+" .mod.lb",fixed:!0,opacity:.75,width:555,trapFocus:!0,initialHeight:"332px",initialWidth:"555px",scrolling:!1,onComplete:function(){$(".lb .btn-close").click(function(){$.colorbox.close()})},onOpen:function(){window.returnFocusTo=document.activeElement},onClosed:function(){window.returnFocusTo.focus()}})},a.prototype.repopulate=function(a){$(a).find(".facet-expanded .functions-bar-top").replaceAll(".facet-expanded .functions-bar-top"),$(a).find(".facet-expanded ol").replaceAll("#cboxLoadedContent ol"),$(a).find(".facet-expanded .functions-bar-bottom").replaceAll(".facet-expanded .functions-bar-bottom"),$.colorbox.resize()},a}),define("search/FacetController",[],function(){function a(a,b){var c=this;return c.expandedFacetSection=a,c.requests=b,c.showExpandedSection=function(a){c.expandedFacetSection.show(a.url)},c.reloadSection=function(a){c.requests.get(a.url).done(function(a){c.expandedFacetSection.repopulate(a)})},c}return a}),define("search/SearchResults",[],function(){function a(){var a=this;this.getPublicationData=function(){return $("#results-per-date").text()},this.getSortOrderUrl=function(){var a=$("#sort-results")[0];return a.options[a.selectedIndex].value},this.getNumberOfPages=function(){return parseInt($(".pagination .number-of-pages:eq(0)").text().replace(/[^0-9]/g,""),10)},this.getPreviouslySelectedPage=function(){return parseInt($(".pagination .previous-page").val(),10)},this.isInSingleYearMode=function(){return $('#date-facet-mode  option:[value="in"]').prop("selected")},this.getSelectedStartDate=function(){return $(".start-year").val()},this.getSelectedEndDate=function(){return $(".end-year").val()},this.getAvailableStartDate=function(){return $("#available-start-year").text()},this.getAvailableEndDate=function(){return $("#available-end-year").text()},this.getPreviousStartDate=function(){return $(".previous-start-year").val()},this.getPreviousEndDate=function(){return $(".previous-end-year").val()},this.getToggleShowAllUri=function(){return $("#results-only-access .results-only-access-toggle").attr("href")},this.setStartDateWithError=function(a){$(".start-year").addClass("error"),$(".start-year").val(a)},this.setEndDateWithError=function(a){$(".end-year").addClass("error"),$(".end-year").val(a)},this.setEndDate=function(a){$(".end-year").val(a)},this.clearDateRangeErrors=function(){$("#start-year-error").addClass("hidden"),$("#start-year-error-single-year").addClass("hidden"),$(".start-year").removeClass("error"),$("#end-year-error").addClass("hidden"),$(".end-year").removeClass("error")},this.hideEndYearField=function(){$(".date-between-sep").hide(),$(".date-between-end").hide()},this.showEndYearField=function(){$(".date-between-sep").show(),$(".date-between-end").show();var a=$(".previous-end-year").val();$(".end-year").val(a)},this.singleYearMode=function(){return $('#date-facet-mode  option:[value="in"]').prop("selected")},this.setSingleYearMode=function(){$('#date-facet-mode  option:[value="in"]').prop("selected",!0)},this.setMultiYearMode=function(){$('#date-facet-mode  option:[value="between"]').prop("selected",!0)},this.setRemoveFaceLinkText=function(a){$("#date-facet-remove a").text(a)},this.setDateRangeStartError=function(b,c){a.isInSingleYearMode()?($("#start-year-error-single-year .invalid-range-year").text(b),$("#start-year-error-single-year").removeClass("hidden")):($("#start-year-error .invalid-range-year").text(b+" - "+c),$("#start-year-error").removeClass("hidden")),$(".start-year").addClass("error"),$(".publication-date-range .start-year").val($(".previous-start-year").val())},this.setDateRangeEndError=function(b,c){a.isInSingleYearMode()?($("#start-year-error-single-year .invalid-range-year").text(b),$("#start-year-error-single-year").removeClass("hidden"),$(".start-year").addClass("error")):($("#end-year-error .invalid-range-year").text(b+" - "+c),$("#end-year-error").removeClass("hidden")),$(".end-year").addClass("error"),$(".publication-date-range .end-year").val($(".previous-end-year").val())},this.displayPaginationError=function(a,b){$(".pagination-error").removeClass("hidden"),$(".pagination .invalid-page-number").text(a),$(".pagination .page-number").addClass("error"),$(".pagination .page-number").val(b)},this.enablePublicationDateFacet=function(){$("#date-facet-mode").removeAttr("disabled")},this.addFocusToSearchForm=function(){$(".big-search").addClass("has-focus")},this.removeFocusFromSearchForm=function(){$(".big-search").removeClass("has-focus")},this.onDateFacetModeChange=function(a){$("#date-facet-mode").change(a)},this.onSearchFieldFocus=function(a){$(".search-field .text").focus(a)},this.onSearchFieldBlur=function(a){$(".search-field .text").blur(a)},this.onIncludePreviewOnlyChange=function(a){$("#results-only-access-checkbox").change(a)},this.onPageNumberKeypress=function(a){$(".pagination .page-number").live("keypress",a)},this.onDateRangeKeypress=function(a){$("#date-facet-fields .start-year, #date-facet-fields .end-year").keypress(a)
},this.onSortOrderChange=function(a){$("#sort-results").change(a)},this.onPublicationDateRangeSubmit=function(a){$(".publication-date-range").submit(a)},this.onPaginationFormSubmit=function(a){$(".pagination").submit(function(b){var c=$(b.currentTarget).find(".page-number").val();return a(parseInt(c,10))})},this.renderGraph=function(a){$.plot($("#pub-date-graph"),[a],{lines:{show:!0,color:"red",fill:!0,fillColor:"#c2c2c2",lineWidth:1},yaxis:{show:!1},xaxis:{mode:"time",color:"#555"},colors:["#a7a7a7"],grid:{color:"silver",borderColor:"silver",borderWidth:1},shadowSize:0})}}return a}),define("search/SearchController",[],function(){function a(a,b,c,d){var e=this,f=function(){c.redirectTo(a.getSortOrderUrl())},g=function(b){return 1>b||b>a.getNumberOfPages()?(a.displayPaginationError(b,a.getPreviouslySelectedPage()),!1):!0},h=function(){var b=a.getSelectedStartDate(),c=a.getSelectedEndDate();if(isNaN(b))return a.setDateRangeStartError(b,c),a.setStartDateWithError(a.getPreviousStartDate()),!1;if(isNaN(c))return a.setDateRangeEndError(b,c),a.setEndDateWithError(a.getPreviousEndDate()),!1;var d=parseInt(b,10),e=parseInt(c,10);return d>e?(a.setDateRangeStartError(b,c),a.setStartDateWithError(a.getPreviousStartDate()),a.setEndDateWithError(a.getPreviousEndDate()),!1):d<parseInt(a.getAvailableStartDate(),10)?(a.setDateRangeStartError(b,c),a.setStartDateWithError(a.getPreviousStartDate()),!1):e>parseInt(a.getAvailableEndDate(),10)?(a.setDateRangeEndError(b,c),a.setEndDateWithError(a.getPreviousEndDate()),!1):!0},i=function(){a.addFocusToSearchForm()},j=function(){a.removeFocusFromSearchForm()},k=function(){c.redirectTo(a.getToggleShowAllUri())};e.changeDateFacetMode=function(){a.clearDateRangeErrors(),a.singleYearMode()?a.hideEndYearField():a.showEndYearField()},a.onSortOrderChange(f),a.onPaginationFormSubmit(g),a.onPublicationDateRangeSubmit(h),a.onSearchFieldFocus(i),a.onSearchFieldBlur(j),a.onIncludePreviewOnlyChange(k),a.onDateFacetModeChange(e.changeDateFacetMode),a.onPageNumberKeypress(d.applyLimitKeystrokes),a.onDateRangeKeypress(d.applyLimitKeystrokes),b.onSubmit(function(){a.singleYearMode()&&a.setEndDate(a.getSelectedStartDate())}),e.setDateFacetMode=function(){-1!==c.queryString().indexOf("date-facet-mode=in")?(a.setSingleYearMode(),a.setRemoveFaceLinkText(a.getSelectedStartDate())):-1!==c.queryString().indexOf("date-facet-mode=between")&&(a.setMultiYearMode(),a.setRemoveFaceLinkText(a.getSelectedStartDate()+" - "+a.getSelectedEndDate()))},e.enablePublicationDateFacet=function(){a.enablePublicationDateFacet()},e.renderExpanderContent=function(){var b=a.getPublicationData();b&&a.renderGraph(JSON.parse(b))}}return a}),define("search/AdvancedSearch",[],function(){function a(){this.onSubmit=function(a){$("#advanced-search-form").submit(a)}}return a}),define("search/AutoSuggestController",[],function(){function a(a){a.onSelect(function(b){a.setValue(b),a.submitForm()}),a.onKeyUp(function(b){13===b.keyCode&&a.submitForm()}),a.onWindowResize(a.hideSuggestions)}return a}),define("search/SearchFieldView",[],function(){function a(a){var b=this;b.onSelect=function(a){$("#query").bind("autocompleteselect",function(b,c){a(c.item.label)})},b.onKeyUp=function(a){$("#query").keyup(a)},b.onWindowResize=function(a){$(window).resize(a)},b.setValue=function(a){$("#query").val(a)},b.submitForm=function(){$("#query").closest("form").trigger("submit")},b.hideSuggestions=function(){$(".ui-autocomplete").hide()};var c=function(a,b){var c=$.trim(a).split(" ").join("|"),d=new RegExp("("+c+")","gi");return b.replace(d,"<strong>$1</strong>")};$("#query").length>0&&($.ui.autocomplete.prototype._renderItem=function(a,b){var d=c(this.term,b.label);return $("<li></li>").data("item.autocomplete",b).append("<a>"+d+"</a>").appendTo(a)},$("#query").autocomplete({source:a,appendTo:".search-field",minLength:2,open:function(){return $(this).autocomplete("widget").css({width:$(".search-field").innerWidth()-53,"z-index":"999999"}),!1}}))}return a}),define("search/SearchWithinView",[],function(){function a(){function a(a,b){$(".search-within").focus(a),$(".search-within").blur(b)}function b(a){$(a).val()===d&&$(a).val("")}function c(a){""===$(a).val()&&$(a).val(d)}var d=$(".search-within").val(),e={registerSearchWithinFocus:a,clear:b,description:c};return e}return a}),define("search/SearchWithinController",[],function(){function a(a){var b=function(b){a.clear(b.currentTarget)},c=function(b){a.description(b.currentTarget)};a.registerSearchWithinFocus(b,c)}return a}),define("utils/NumberField",[],function(){function a(){var a,b=this,c=function(){return a.which||a.charCode},d=function(){return c()<=31},e=function(){var a=c();return a>=48&&57>=a},f=function(){var b=/max-length-(\d)/,c=a.currentTarget.className.match(b),d=a.currentTarget.value.length;return c?parseInt(c[1],10)>d:!0},g=function(){var b=a.currentTarget;return b.selectionStart!==b.selectionEnd};b.applyLimitKeystrokes=function(b){return a=b,d()||e()&&(f()||g())}}return a}),define("search/start",["./FacetSection","./ExpandedFacetSection","./FacetController","./SearchResults","./SearchController","./AdvancedSearch","./AutoSuggestController","./SearchFieldView","./SearchWithinView","./SearchWithinController","utils/NumberField","utils/Requests","utils/DocumentHelper"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){return{init:function(){var n="undefined"!=typeof window.ontouchstart,o=new a,p=new b,q=new c(p,new l);n!==!0&&(o.onShowAll(q.showExpandedSection),p.onPagination(q.reloadSection)),new g(new h("/search/suggest")),new j(new i);var r=new e(new d,new f,new m,new k);r.renderExpanderContent(),r.setDateFacetMode(),r.enablePublicationDateFacet(),r.changeDateFacetMode()}}}),define("account/AccountDetails",[],function(){function a(a){var b={};this.init=function(){b.setupCancelButton(),b.setupFormSubmit(),$(".organisation-section ul li a.action").click(this.clickFunction)},this.clickFunction=function(a){var c=$(this).attr("data-bpid");a.preventDefault(),b.changeDetailsPressed(c)},b.changeDetailsPressed=function(a){var b=$("li.bpid-"+a).parents(".organisation-section"),c=$("li.bpid-"+a).find("a").attr("href");$(".form-container",b).length||b.append('<div class="form-container" style="display:none"></div>'),$("li.bpid-"+a).parent().slideUp(500,"easeInOutQuad",function(){b.find(".form-container").load(c+" form.add-organisation-details",function(){b.find(".form-container").slideDown(500,"easeInOutQuad")})})},b.setupCancelButton=function(){$(".association-cancel").live("click",function(a){a.preventDefault(),b.cancel($(this).attr("data-bpid"))})},b.cancel=function(a){$("form.bp-"+a).parent().slideUp(500,"easeInOutQuad",function(){$("li.bpid-"+a).parent().slideDown(500,"easeInOutQuad")})},b.setupFormSubmit=function(){$("form.add-organisation-details").live("submit",function(){return b.postForm($(this)),!1})},b.postForm=function(c){a.post("/account/save-associate-details",c.serialize()).done(function(){b.updateFields(c)}).fail(function(a){var b=a.responseText,d=$(b).find("#error p");if(d){var e=d.addClass("error-message").css("margin-top","7px");c.children(".form-section").append(e)}})},b.updateFields=function(a){var c=a.attr("data-bpid"),d=$("#department-"+c),e=$("#costcode-"+c),f=$(".bpid-"+c+" a.action");b.showHideUpdateLabels(a.find(".department"),d),b.showHideUpdateLabels(a.find(".cost-code"),e),d.text().length>0||e.text().length>0?f.text($("#details-label.hidden").text()):f.text($("#cost-label.hidden").text()),b.cancel(c)},b.showHideUpdateLabels=function(a,b){a.val().length>0?b.parent().removeClass("hidden"):b.parent().addClass("hidden"),b.text(a.val())}}return a}),define("webshop/GetAccessPopup",[],function(){function a(){var a=this,b=function(){var a=$(".requested-access");$(".btn-back").remove(),$(".btn-close").show().click(function(){return $.colorbox.close(),!1}),$("#web-shop-get-access").click(function(){var a=$("form#getaccess-webshop").addClass("lb-form");a.appendTo("body"),$.colorbox.close()});var b=$("#getaccess-request");b.click(function(){var c=$("#getaccess-from-admin");return $.post(c.prop("action"),c.serialize(),function(){b.hide(),a.fadeIn("slow"),$("#colorbox,#cboxWrapper,#cboxContent,#cboxLoadedContent").height("450px")}),!1})};return a.onWebShopGetAccessMouseDown=function(a){$("#cboxContent").delegate("#web-shop-get-access","mousedown",a)},a.onAggregateWebShopLinkMouseDown=function(a){$("#cboxContent").delegate("#aggregate-webshop-link","mousedown",a)},a.show=function(a){$.colorbox({href:a+" .get-access",opacity:.75,trapFocus:!0,fixed:!0,width:555,initialHeight:"332px",initialWidth:"555px",scrolling:!1,onComplete:b,onOpen:function(){window.returnFocusTo=document.activeElement},onClosed:function(){window.returnFocusTo.focus()}})},a}return a}),define("account/start",["./AccountDetails","webshop/GetAccessPopup","utils/Requests"],function(a,b,c){return{init:function(){var b=new a(new c),d=$("html.ie6").length,e=$("html.ie7").length;0===d&&0===e&&b.init()}}}),define("admin/AdminDashboardView",[],function(){function a(){var a=this;a.onOrganizationSelectionChange=function(a){$("#change-institution").change(a)},a.onArchiveYearSelectionChange=function(a){$("#archive-year").change(a)},a.onForceLoginToggleClick=function(a){$(".enforced-toggle a.toggled-off").click(function(){return a(),!1})},a.onAutoAssociateToggleClick=function(a){$(".access-toggle a.toggled-off").click(function(){return a(),!1})},a.onDepositInterruptionToggleClick=function(a){$(".deposit-interruption-toggle a.toggled-off").click(function(){return a(),!1})},a.onRemoveLogoClick=function(a){$(".remove-logo").click(function(){return a(),!1})},a.onDownloadReportButtonClick=function(a){$("#download-report-button").click(a)},a.getOrganization=function(){return $("#change-institution option:selected").val()},a.getArchiveYear=function(){return $("#archive-year option:selected").val()},a.showForceLoginSettings=function(){$.colorbox({href:".mod-force-login",fixed:!0,inline:!0,opacity:.75,scrolling:!1,width:300,onOpen:function(){$("#toggle-force-login-cancel").focus().click(function(){return $.colorbox.close(),!1}),$("#toggle-force-login-confirm").attr("href",$(".enforced-toggle a.toggled-off").attr("href"))}})},a.showAutoAssociateSettings=function(){$.colorbox({href:".mod-auto-associate",fixed:!0,inline:!0,opacity:.75,scrolling:!1,width:300,onOpen:function(){$("#toggle-auto-associate-cancel").focus().click(function(){return $.colorbox.close(),!1}),$("#toggle-auto-associate-confirm").attr("href",$(".access-toggle a.toggled-off").attr("href"))}})},a.showDepositInterruptionSettings=function(){$.colorbox({href:".mod-deposit-interruption",fixed:!0,inline:!0,opacity:.75,scrolling:!1,width:300,onOpen:function(){$("#toggle-deposit-interruption-cancel").focus().click(function(){return $.colorbox.close(),!1}),$("#toggle-deposit-interruption-confirm").attr("href",$(".deposit-interruption-toggle a.toggled-off").attr("href"))}})},a.showRemoveLogoPopup=function(){$.colorbox({href:".modlogo",inline:!0,fixed:!0,opacity:.75,scrolling:!1,width:300,onOpen:function(){$("#deletelogo-cancel").focus().click(function(){return $.colorbox.close(),!1}),$("#deletelogo-confirm").click(function(){".remove-logo".parent().submit()})}})},a.hideErrorMessage=function(){$(".counter-reports .error-message").hide()}}return a}),define("admin/AdminDashboardController",[],function(){function a(a,b){var c=function(){b.reloadPageWithQuery("bp="+a.getOrganization())},d=function(){b.reloadPageWithQuery("bp="+a.getOrganization()+"&archive-year="+a.getArchiveYear()+"#reports-archive")};a.onOrganizationSelectionChange(c),a.onArchiveYearSelectionChange(d),a.onForceLoginToggleClick(a.showForceLoginSettings),a.onAutoAssociateToggleClick(a.showAutoAssociateSettings),a.onDepositInterruptionToggleClick(a.showDepositInterruptionSettings),a.onRemoveLogoClick(a.showRemoveLogoPopup),a.onDownloadReportButtonClick(a.hideErrorMessage)}return a}),define("admin/start",["./AdminDashboardView","./AdminDashboardController","utils/DocumentHelper"],function(a,b,c){return{init:function(){new b(new a,new c)}}}),define("webshop/WebshopTracker",[],function(){function a(a,b,c,d){var e=function(){d.isLoggedIn()?c.trackEvent("Webshop","Click_Through","Logged_In"):c.trackEvent("Webshop","Click_Through","Not_Logged_In")};a.onBuyButtonMouseOver(e),b.onWebShopGetAccessMouseDown(e),b.onAggregateWebShopLinkMouseDown(e)}return a}),define("webshop/AccessController",[],function(){function a(a,b,c){if($(".icon-unlock a").length>0&&window.location.search.indexOf("no-access=true")>-1){var d=$(".icon-unlock a").attr("href");a.show(d)}c.onGetAccessButtonClick(function(b){a.show(b)}),b.onGetAccessButtonClick(function(b){a.show(b)})}return a}),define("abstractPage/AbstractActions",[],function(){function a(){this.onBuyButtonMouseOver=function(a){$("#leaf-pricing-buy-now").mousedown(a)},this.onGetAccessButtonClick=function(a){$("#request-access-link").click(function(b){b.preventDefault(),a($(this).attr("href"))})}}return a}),define("account/LoginStatus",[],function(){function a(){this.isLoggedIn=function(){return $("#account-details").length>0}}return a}),define("webshop/start",["./WebshopTracker","./GetAccessPopup","./AccessController","abstractPage/AbstractActions","abstractPage/ActionBarView","account/LoginStatus","analytics/GoogleAnalytics"],function(a,b,c,d,e,f,g){return{init:function(){var h=$(window).width(),i=new b,j=new d;h>=600&&new c(i,j,new e),new a(j,i,new g,new f)}}}),define("analytics/TrackableLinkController",[],function(){function a(a,b,c){var d=function(){return $(".document .no-access").length};c.onMouseDown(function(c){a.trackEvent(c.parentContentType,c.viewType,c.publication),b.sendInfo(c.doi,c.contentType,c.publication,c.viewType,c.pageType)}),d()&&a.hasAccess("no")}return a}),define("analytics/TrackableLink",[],function(){function a(){var a=function(a){return function(){var b=$(this);a({doi:b.attr("doi"),parentContentType:b.attr("parentContentType"),contentType:b.attr("contentType"),publication:b.attr("publication"),viewType:b.attr("viewType"),pageType:b.attr("pageType")})}};this.onMouseDown=function(b){$("body").delegate(".webtrekk-track","mousedown",a(b)),$("#reader").delegate(".webtrekk-track","mousedown",a(b))}}return a}),define("analytics/WebTrekk",[],function(){function a(a){this.init=function(){if("undefined"!=typeof webtrekkV3)if($("#web-trekk-abstract").length){var a=$("#web-trekk-abstract"),b=a.attr("doi"),c=a.attr("contentType"),d=a.attr("publication"),e=a.attr("viewType"),f=a.attr("pageType");this.sendInfo(b,c,d,e,f)}else this.sendInfo()};var b=function(){var b={trackDomain:a.trackDomain,trackId:a.trackId,linkTrack:"link",heatmap:"1",form:"1",contentId:a.pageType},d=c(b);return a.userDetails&&(d.customSessionParameter=a.userDetails),d},c=function(a){var b={};try{b=new webtrekkV3(a)}catch(c){}return b},d=function(a,c,d,e,f){var g=b();return f&&(g.contentId=f),g.product=a,g.productStatus="view",c&&(g.productCategory={1:c.toLowerCase(),2:d}),e&&(g.customEcommerceParameter={1:e.toLowerCase()}),g};this.sendInfo=function(a,b,c,e,f){try{d(a,b,c,e,f).sendinfo()}catch(g){}}}return a}),define("analytics/start",["./TrackableLinkController","./GoogleAnalytics","./TrackableLink","./WebTrekk"],function(a,b,c,d){return{init:function(){var e;"undefined"!=typeof webtrekkProperties&&(e=new d(webtrekkProperties),e.init()),new a(new b,e,new c)}}}),define("utils/toolTips",[],function(){var a=function(){0===$(".tooltip-clone:hover").length&&$(".tooltip-clone").remove()},b=function(a,b,c){return a.clone().css({left:b,top:c}).addClass("tooltip-clone")},c=function(a,c){if(!$("body").hasClass("reader")&&$(this).hasClass("action")){var d=$(window).width();600>d?b(a,c.left+80,c.top+60).appendTo("body").show():b(a,c.left+12,c.top+40).appendTo("body").show()}else $("body").hasClass("reader")?b(a,c.left-8,c.top+15).appendTo(".reader-position").show():b(a,c.left+15,c.top+30).appendTo("body").show()};return{init:function(){$("body").delegate(".help","mouseover",function(){var a=$(".tooltip",this);c(a,$(this).offset())}),$("body").delegate(".help, .tooltip-clone","mouseleave",function(){setTimeout(function(){a()},100)})}}}),define("utils/BackButton",[],function(){function a(){$(".btn-back").click(function(){return history.back(),!1})}return a}),define("old/PageController",[],function(){function a(a){this.init=function(){a.focus(),a.truncateShowLabel()}}return a}),define("old/PageView",[],function(){function a(){this.focus=function(){var a=$(".focus").first();a.focus(),a.val(a.val())},this.truncateShowLabel=function(){0!==$(".show-label").size()&&$(".abstract-content").truncate({max_length:440,more:$(".show-label").html(),less:$(".hide-label").html()})}}return a}),define("old/PersonsController",[],function(){function a(a){var b={};return b.init=function(){a.addLinks(),a.firstShorten()},b}return a}),define("old/PersonsView",[],function(){function a(a){var b={},c=a+"s",d=10,e=$(".document-main ul."+c);return b.addLinks=function(){e.each(function(e,f){var g=$("li."+a,f).size(),h=$("li."+a+":gt("+(d-1)+")",f);if(d>=g)$(".show-all-hide-"+c,f).hide();else{$(".show-all-hide-"+c,f).css("display","inline"),$(".more-"+c,f).css("display","inline");var i=$(".show-all-hide-"+c+" .show-all-"+c,f),j="";h.each(function(){0!==j.length&&(j+=" "),j+=$.trim($(this).text())}),i.attr("title",j),i.click(function(){b.showAll(f)});var k=$(".show-all-hide-"+c+" .hide-"+c,f);k.click(function(){b.shorten(f)})}})},b.shorten=function(b){var e=$("li."+a,b).size(),f=$("li."+a+":gt("+(d-1)+")",b);d>e||(f.hide(),$(".show-all-"+c,b).show(),$(".more-"+c,b).show(),$(".hide-"+c,b).hide())},b.firstShorten=function(){var a=$(".document-main ul."+c);a.each(function(a,c){b.shorten(c)})},b.showAll=function(a){$("li:hidden",a).fadeIn("normal",function(){}),$(".show-all-"+c,a).hide(),$(".more-"+c,a).hide(),$(".hide-"+c,a).show()},b}return a}),define("old/HomeTabs",[],function(){function a(){function a(a){a.addClass("disabled").siblings(".tabMenu-tabLabel").removeClass("disabled"),$(a.prop("hash")).removeClass("hidden").siblings(".tabMenu-tabContent").addClass("hidden")}this.init=function(){$(".tabMenu").each(function(){var b=$(this),c=b.children(".tabMenu-tabLabel"),d=null,e="<a/>";c.each(function(){var b=$(this);b.replaceWith($(e).attr({href:"#"+b.text(),"data-tabset_name":b.data("tabset_name"),text:b.text(),"class":b.attr("class")}).text(b.text()).click(function(b){b.preventDefault(),$.cookie("tabSet",$(this).data("tabset_name")),a($(this)),$(this).focus()}))}),d=b.children(".tabMenu-tabLabel"),$(".multi-level").delegate("h3","click",function(){$(this).toggleClass("is-open").next().slideToggle("normal")});var f=$.cookie("tabSet")||"industries";a(d.filter('[data-tabset_name="'+f+'"]'))})}}return a}),define("old/BookPpvOption",[],function(){function a(){var a=".aggregate-pricing",b=$("#display-book-ppv a").attr("href");$("#display-book-ppv").load(b+" "+a,"",function(a,b){"success"!==b&&$("#display-book-ppv").hide()})}return a}),define("old/ExportCitation",[],function(){function a(){var a="slow",b=null;this.init=function(){b=this,$.colorbox&&$("#export-citation").colorbox({href:function(){return $(this).attr("href")+" .mod.lb"},opacity:.75,fixed:!0,scrolling:!1,height:444,width:555,onComplete:function(){$(".btn-close").click(function(){$.colorbox.close()}),b.addDropDown()}}),this.addDropDown()},this.addDropDown=function(){var b=$(".btn-dd");b.click(function(b){$(this).toggleClass("act").find(".menu").slideToggle(a),$(this).parents(".mod.lb").length&&b.stopPropagation()}),$(".mod.lb").parent().click(function(){b.removeClass("act").find(".menu").hide(a)})}}return a}),define("old/GetSatisfaction",[],function(){function a(){this.init=function(){if("undefined"!=typeof GSFN){var a={};if($("#contact-us-get-satisfaction-container").length){var b=window.location.protocol+"//"+window.location.host;a.display="inline",a.company="springer_rd",a.height="580px",a.style="idea",a.custom_css=b+"/static/css/get_satisfaction.css",a.limit="5",a.container="contact-us-get-satisfaction-container"}else{if(!$("#gimme-satisfaction").length)return;a.display="overlay",a.company="springer_rd",a.placement="left",a.color="#666",a.style="idea",a.container="gimme-satisfaction"}GSFN.feedback_widget.prototype.local_base_url="http://feedback.rd.springer.com",GSFN.feedback_widget.prototype.local_ssl_base_url="http://feedback.rd.springer.com",new GSFN.feedback_widget(a)}}}return a}),define("old/ActivateOrResetPasswordController",[],function(){function a(a){var b={};return b.init=function(){a.registerValidation()},b}return a}),define("old/ActivateOrResetPasswordView",[],function(){function a(){var a=$("#invalid-password-message").html(),b=$("#mismatch-password-message").html(),c={};return c.registerValidation=function(){$("#set-password-form").validate({groups:{anypassword:"password password-retype"},errorClass:"error-message",errorElement:"div",rules:{password:{required:!0,minlength:6,containsDigitAndLetter:!0},"password-retype":{minlength:6,containsDigitAndLetter:!0,equalTo:"#password"}},messages:{password:{required:a,minlength:a,containsDigitAndLetter:a},"password-retype":{minlength:a,containsDigitAndLetter:a,equalTo:b}}})},c}return a}),define("old/ForgottenPasswordController",[],function(){function a(){this.init=function(){$("#forgotForm").validate({errorClass:"error-message",errorElement:"div"})}}return a}),define("old/LoadingAnimationController",[],function(){function a(){var a={},b=$("body").attr("data-name")||"link";return a.init=function(){$("body").delegate(".facet-link","click",function(){$(this).addClass("loading").append('<img class="loading" src="../static/sites/'+b+'/images/loading.gif" alt="" />')}),$(".search-filter input.search-submit, #date-facet-submit").after('<img class="loading js-hidden" src="/static/sites/'+b+'/images/loading.gif" alt="" />'),$("#search, .bar-actions input.search-submit").after('<img class="loading js-hidden" src="/static/sites/'+b+'/images/loading_search.gif" alt="" />'),$("body").delegate("#date-facet-submit,.search-submit","click",function(){$(this).addClass("loading").next("img.loading").show()})},a}return a}),define("old/CoverImageAnimation",[],function(){function a(){var a={},b=$(".look-inside.cover-image-animate a"),c=b.find(".look-inside-cover"),d=b.find(".look-inside-page"),e=b.find(".look-inside-badge");return a.init=function(){var c={over:a.lIEnter,out:a.lILeave,timeout:500,interval:250};b.hoverIntent(c)},a.lIEnter=function(){c.animate({left:"-30px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).animate({left:"0",boxShadow:"0px 0px 0px rgba(0, 0, 0, 0.3)"},400)}),d.animate({right:"-110px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).css({zIndex:"3"}).animate({right:"0",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.3)"},400)}),e.animate({right:"-110px"},300,function(){$(this).animate({right:"1px"},400)})},a.lILeave=function(){c.animate({left:"-30px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).animate({left:"0",boxShadow:"2px 2px 4px rgba(0, 0, 0, 0.3)"},400)}),d.animate({right:"-110px",boxShadow:"1px 1px 2px rgba(0, 0, 0, 0.3)"},300,function(){$(this).css({zIndex:"1"}).animate({right:"0",boxShadow:"0px 0px 0px rgba(0, 0, 0, 0.3)"},400)}),e.animate({right:"-110px"},300,function(){$(this).animate({right:"1px"},400)})},a}return a}),define("old/Registration",[],function(){function a(){this.init=function(){if($("#registration-form").length&&($("#login-box .form-field input:first").focus(),$.validator.addMethod("check-email-required",$.validator.methods.required,all_messages.provideEmail_message),$.validator.addMethod("check-email-valid",$.validator.methods.email,all_messages.invalidEmail_message),$.validator.addMethod("check-email-remote",$.validator.methods.remote,all_messages.uniqueEmail_message),$.validator.addMethod("check-password-min",function(a,b){var c=this.optional(b)||a.length>=6&&/\d/.test(a)&&/[a-z]/i.test(a);return c},all_messages.password_invalid_message),$.validator.addMethod("check-password-required",$.validator.methods.required,all_messages.password_required_message),$.validator.addClassRules({required:{required:!0,minlength:1},"email-address":{"check-email-required":!0,"check-email-valid":!0},"email-address-test":{"check-email-remote":{url:"/email/available",beforeSend:function(){var a=$(".email-address-test").parents("form").outerWidth(),b=$(".email-address-test").position();$(".email-address-test").after('<img alt="" src="../core/src/main/webapp/static/images/loading.gif" class="loading">'),$(".email-address-test").siblings("img.loading").css({left:a-30,top:b.top+4})},complete:function(){$(".form-row img.loading").fadeOut("fast")}}},password:{"check-password-required":!0,"check-password-min":{}},"password-confirm":{required:!0,minlength:6,equalTo:"#password"}}),!$("html.ie6").length)){if($("html.js").length&&$("#registration-form").addClass("js-validation"),$("#registration-form").length){var a=$("input#password").position(),b=$("input#password").outerWidth();$("input#password").after('<div id="password-strength" class="progress-bar is0" style="display:none"><span class="progress"></span></div>').passwordStrength(),$("#password-strength").css({left:b-64,top:a.top+8}).fadeIn()}var c={messages:{"first-name":all_messages.firstName_message,"last-name":all_messages.lastName_message,"password-confirm":{required:all_messages.password_confirm_message,minlength:all_messages.password_invalid_message,equalTo:all_messages.password_match_message},"email-address":{remote:all_messages.uniqueEmail_message}},success:function(a){a.addClass("tick");var b=a.siblings("input").position(),c=a.siblings("input").outerWidth();a.css({left:b.left+c+10,top:b.top+3})},showErrors:function(a,b){var c;for(c=0;b[c];c++){var d=this.errorList[c].element;this.errorsFor(d).remove()}this.defaultShowErrors()},errorPlacement:function(a,b){var c=b.parents("form").outerWidth(),d=b.position();a.insertBefore(b);var e=b.outerHeight(),f=a.outerHeight(),g=(f-e)/2;b.siblings(".error").removeClass("tick"),a.css({left:c-30,top:d.top-g})}};$("#registration-form").validate(c)}$(".edit-field").parents(".editing-form").length||$(".form-row-editable").click(function(){window.location.href=$("a",this).attr("href")})}}return a}),define("old/DisciplinesExpander",[],function(){function a(){this.init=function(){$.extend($.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),$(".show-nav").click(function(){return $(this).hide(),$(".collapse-nav").css("display","block"),$(".hide-nav").slideDown("slow").find("a:first").focus(),!1}),$(".collapse-nav").click(function(){return $(this).hide(),$(".hide-nav").hide(),$("html,body").animate({scrollTop:0},1400,"easeOutQuad",function(){}),$(".show-nav").css("display","block").focus(),!1})}}return a}),define("old/FlyOut",[],function(){function a(){function a(a){$("body").removeClass("show-footer-menu"),a.removeClass("is-open").find(".pillow-btn-active").removeClass("pillow-btn-active")}var b="undefined"!=typeof window.ontouchstart,c=100,d=500,e={over:function(){},timeout:d,out:function(){$("input:focus",this).length<=0&&b!==!0&&(a($(this)),$(".flyout-caption",this).blur())}};this.init=function(){$(".flyout").each(function(){var b=$(this),d=null;b.click(function(a){$(this).hasClass("is-open")?$("form",this).length||$(this).removeClass("is-open"):$(this).addClass("is-open"),a.stopPropagation()}).hoverIntent(e),b.find("input,a,button").blur(function(){d=setTimeout(function(){a(b)},c)}).focus(function(){clearTimeout(d)})}),$(document).click(function(){b!==!0&&a($(".flyout"))})}}return a}),define("old/EntitlementsExpander",[],function(){function a(){this.init=function(){$(".entitlements").length>1&&($(".default-table caption").addClass("closed"),$(".default-table thead,.default-table tbody").hide()),$(".entitlements caption").click(function(){$(this).toggleClass("closed");var a=$(this).parent();return a.find("thead,tbody").toggle(),!1})}}return a}),define("old/KeyboardController",[],function(){function a(){var a=this;this.init=function(){a.registerKeyPressListeners()},this.registerKeyPressListeners=function(){$(document).keypress(function(a){var b=a.which,c=String.fromCharCode(b),d=/[A-Za-z0-9Ã„Ã¤Ã–Ã¶ÃœÃ¼ÃŸ\[;']/,e=a.ctrlKey,f=a.altKey,g=a.metaKey,h=$(".ki_text textarea");$.browser.mozilla?!d.test(c)||$("input,select").is(":focus")||e||f||g||h.is(":focus")||$("#global-search input#query").focus().val(c):!d.test(c)||$("input,select").is(":focus")||e||f||g||h.is(":focus")||$("#global-search input#query").focus().val("")}),$(document).keydown(function(a){27===a.which&&$("#global-search input#query").is(":focus")&&($("#global-search input#query").focus().val(""),$("#global-search input#query").blur())})}}return a}),define("old/CompanyLogos",[],function(){function a(){this.changeLogo=function(){var a=$("#logo-company"),b=a.find("img:visible"),c=b.next("img");0===c.length&&(c=a.find("img:first")),b.fadeOut(500,function(){c.fadeIn(500)})},this.init=function(){$("#logo-company img").length>1&&setInterval(this.changeLogo,6e3)}}return a}),define("old/InstitutionalLogin",[],function(){function a(){this.init=function(){($("select.chosen option").length>1||1===$("select.chosen option").length&&""!==$("select.chosen option:first").val())&&$("select.chosen").chosen({no_results_text:"No results matched"}),$(".institutional-login-page .chzn-search input").attr("placeholder","Start typing to find your institution")}}return a}),define("old/MobileJS",[],function(){function a(){var a=$(window).width(),b=function(){var a=$("body");$(".pillow-btn").click(function(){$(this).toggleClass("pillow-btn-active")}),$(".open-search").click(function(){a.toggleClass("show-search")}),$(".open-menu").click(function(){a.toggleClass("show-menu")}),$(".open-search-options").click(function(){a.toggleClass("show-search-options")}),$(".open-legal").click(function(){a.toggleClass("show-legal")}),$("#footer-verticals .pillow-btn").click(function(){a.toggleClass("show-footer-menu")})},c=function(){600>a&&$(".expander").removeClass("expander-open")};this.init=function(){b(),c()}}return a}),define("old/LazyLoader",[],function(){function a(){var a=$(window).width(),b=!1;this.init=function(){a>=600&&$("img.lazy").show().lazyload(),$(window).resize(function(){a=$(window).width(),b===!1&&a>=600&&($("img.lazy").show().lazyload(),b=!0)})}}return a}),define("old/Grid",[],function(){function a(){var a=940;this.init=function(){function b(){a=$("#content").width(),$("#grid").css("max-width",a)}$.shift=function(a,b,c){$(document).keydown(function(d){return c||(c=[]),d.keyCode===a.charCodeAt(0)&&d.shiftKey?(b.apply(this,c),!1):void 0})};var c=function(){a=$("#content").width(),$(".gridToggle").removeClass("gridOff"),$("#content").append('<div id="grid"></div>');for(var b=$("#content").outerHeight(),c=0;47>c;c++)$("#grid").append('<div class="slice"></div>');$("#grid").css({height:b+165,maxWidth:a})};$(window).resize(function(){$("#grid").length&&(b(),clearTimeout(this.id),this.id=setTimeout(b,200))});var d;$.shift("6",function(){$("#grid, .gridToggle").remove(),c(),$(".layout-1").length&&($("#grid").addClass("layout1"),d="layout1"),$(".layout-2").length&&($("#grid").addClass("layout2"),d="layout2"),$(".layout-3").length&&($("#grid").addClass("layout3"),d="layout3"),$(".layout-3b").length&&($("#grid").addClass("layout3b"),d="layout3b"),$(".layout-4").length&&($("#grid").addClass("layout4"),d="layout4"),$(".layout-5").length&&($("#grid").addClass("layout5"),d="layout5"),$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')}),$.shift("7",function(){d=3,$("#grid, .gridToggle").remove(),c(),$("#grid").addClass("grid3"),$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')}),$.shift("8",function(){d=6,$("#grid, .gridToggle").remove(),c(),$("#grid").addClass("grid6"),$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')}),$.shift("9",function(){d=12,$("#grid, .gridToggle").remove(),c(),$("#grid").addClass("grid12"),$("#header").append('<a href="#" class="btn btn-primary gridToggle gridOn">Grid</a>')
}),$.shift("0",function(){$("#grid, .gridToggle").remove()}),$("body").delegate(".gridToggle","click",function(){$(this).hasClass("gridOff")?(c(),3===d&&$("#grid").addClass("grid3"),6===d&&$("#grid").addClass("grid6"),12===d&&$("#grid").addClass("grid12"),"layout1"===d&&$("#grid").addClass("layout1"),"layout2"===d&&$("#grid").addClass("layout2"),"layout3"===d&&$("#grid").addClass("layout3"),"layout3b"===d&&$("#grid").addClass("layout3b"),"layout4"===d&&$("#grid").addClass("layout4"),"layout5"===d&&$("#grid").addClass("layout5")):($("#grid").remove(),$(".gridToggle").addClass("gridOff"))})}}return a}),define("old/start",["./PageController","./PageView","./PersonsController","./PersonsView","./HomeTabs","./BookPpvOption","./ExportCitation","./GetSatisfaction","./ActivateOrResetPasswordController","./ActivateOrResetPasswordView","./ForgottenPasswordController","./LoadingAnimationController","./CoverImageAnimation","./Registration","./DisciplinesExpander","./FlyOut","./EntitlementsExpander","./KeyboardController","./CompanyLogos","./InstitutionalLogin","./MobileJS","./LazyLoader","./Grid"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){return{init:function(){var x=new a(new b),y=new c(new d("author")),z=new c(new d("editor")),A=new e,B=new g,C=new h,D=new i(new j),E=new k,F=new l,G=new m,H=new n,I=new o,J=new p,K=new q,L=new r,M=new s,N=new t,O=new u,P=new v;new f,new w,x.init(),y.init(),z.init(),B.init(),A.init(),C.init(),D.init(),E.init(),F.init(),G.init(),H.init(),I.init(),J.init(),K.init(),L.init(),M.init(),N.init(),O.init(),P.init()}}}),define("utils/KeyboardNavigation",[],function(){return{init:function(){var a=9;$().ready(function(){var b=$(document.body),c=!1,d=$("#skip-navigation"),e=!1;b.click(function(){c&&(b.removeClass("kb_user"),c=!1,e=!0,setTimeout(function(){e=!1},200))}).keyup(function(d){c||(d.keyCode===a||e)&&(b.addClass("kb_user"),c=!0)}),d.find("a").focus(function(){d.addClass("focus"),this.selectedIndex=0,location.hash=""}).blur(function(){d.removeClass("focus")}).click(function(a){a.preventDefault(),$(this.hash).attr("tabindex",-1).focus()})})}}}),require.config({baseUrl:"/static/js/app"}),require(["depositInterruption/start","abstractPage/start","search/start","account/start","admin/start","webshop/start","analytics/start","utils/toolTips","utils/BackButton","old/start","utils/KeyboardNavigation"],function(a,b,c,d,e,f,g,h,i,j,k){a.init(),b.init(),c.init(),d.init(),e.init(),f.init(),g.init(),h.init(),new i,j.init(),k.init()}),define("main",function(){});