function invenioSearchConfiguration(e){e.html5Mode({enabled:!0,requireBase:!1,rewriteLinks:!1})}function invenioSearchCtrl(e,n,t){function i(){return n.get()}function r(){function n(){p.invenioSearchLoading=!1,e.$broadcast("invenio.search.finished")}function i(n){e.$broadcast("invenio.search.success",n)}function r(n){e.$broadcast("invenio.search.error",n)}e.$broadcast("invenio.search.requested"),p.invenioSearchLoading=!0,p.invenioSearchError={},p.invenioSearchErrorsResults={},t.search(p.invenioSearchCurrentArgs,p.invenioSearchHiddenParams).then(i,r)["finally"](n)}function o(e){for(var n=(e.split("?")[1]||"").split("&"),t={},i=0;i<n.length;i+=1){var r=(n[i]||"").split("="),o=decodeURIComponent(r[0]||"");o&&(t[o]=decodeURIComponent(r[1]||""))}return t}function a(e,n){p.invenioSearchErrorResults=n.data,p.invenioSearchError=e}function s(e,n){if(p.invenioSearchResults=n.data,p.invenioSearchErrorResults={},n.data.links){var t=o(n.data.links.self);t.page&&(t.page=parseInt(t.page)),t.size&&(t.size=parseInt(t.size)),delete t.q,angular.equals(p.invenioSearchCurrentArgs,t)||(p.invenioSearchSortArgs=t)}}function l(t,i){p.invenioSearchCurrentArgs=angular.merge({},p.invenioSearchCurrentArgs,i),p.invenioSearchArgs=angular.merge({},p.invenioSearchCurrentArgs.params),p.disableUrlHandler||(n.set(p.invenioSearchArgs),n.replace()),p.userQuery=p.invenioSearchArgs.q,p.invenioSearchInitialized=!0,p.invenioDoSearch(),e.$broadcast("invenio.search.initialiazed")}function c(e,t,i){void 0!==i&&i===!0?p.invenioSearchCurrentArgs.params=angular.copy(t):(p.invenioSearchCurrentArgs.params.page===t.page&&(t.page=1),angular.forEach(t,function(e,n){p.invenioSearchCurrentArgs.params[n]=e})),p.invenioSearchArgs=angular.copy(p.invenioSearchCurrentArgs.params),p.disableUrlHandler||n.set(p.invenioSearchCurrentArgs.params),p.userQuery=p.invenioSearchArgs.q,p.invenioDoSearch()}function u(t,i,r){if(!p.disableUrlHandler){var o=n.get();angular.equals(o,p.invenioSearchCurrentArgs.params)||e.$broadcast("invenio.search.request",o,!0)}}function d(n,t){var i=angular.copy(p.invenioSearchCurrentArgs.params);angular.forEach(t,function(e,n){i[n]=angular.copy(t[n])}),angular.equals(p.invenioSearchCurrentArgs.params,i)||e.$broadcast("invenio.search.request",i)}function h(n,t){angular.equals(n,p.invenioSearchCurrentArgs.params)||e.$broadcast("invenio.search.request",n)}var p=this;p.invenioSearchResults={},p.invenioSearchErrorResults={},p.invenioSearchLoading=!0,p.invenioSearchError={},p.invenioSearchInitialized=!1,p.invenioSearchArgs={},p.invenioSearchSortArgs={},p.invenioSearchCurrentArgs={method:"GET",params:{page:1,size:20}},p.invenioSearchGetUrlArgs=i,p.invenioDoSearch=r,p.parseURLQueryString=o,e.$on("invenio.search.initialization",l),e.$on("invenio.search.request",c),e.$on("invenio.search.success",s),e.$on("invenio.search.error",a),e.$on("invenio.search.params.change",d),e.$on("$locationChangeStart",u),e.$watch("vm.invenioSearchArgs",h,!0)}function invenioSearch(){function e(e,n,t,i){var r={url:t.searchEndpoint,method:t.searchMethod||"GET",headers:JSON.parse(t.searchHeaders||"{}")},o={params:JSON.parse(t.searchExtraParams||"{}")},a={params:i.invenioSearchGetUrlArgs()};i.disableUrlHandler=t.disableUrlHandler?!0:!1,i.invenioSearchHiddenParams=JSON.parse(t.searchHiddenParams||"{}");var s=angular.merge({},r,o,a);e.$broadcast("invenio.search.initialization",s)}return{restrict:"AE",scope:!1,controller:"invenioSearchCtrl",controllerAs:"vm",link:e}}function invenioSearchBar(){function e(e,n,t,i){function r(){i.invenioSearchArgs.q=i.userQuery}e.placeholder=t.placeholder,e.updateQuery=r}function n(e,n){return n.template}return{restrict:"AE",require:"^invenioSearch",scope:!1,templateUrl:n,link:e}}function invenioSearchCount(){function e(e,n){return n.template}return{restrict:"AE",scope:!1,require:"^invenioSearch",templateUrl:e}}function invenioSearchError(){function e(e,n,t,i){e.errorMessage=t.message}function n(e,n){return n.template}return{restrict:"AE",scope:!1,require:"^invenioSearch",templateUrl:n,link:e}}function invenioSearchFacets(){function e(e,n,t,i){function r(n,t){e.handler[n]=void 0===e.handler[n]?[]:e.handler[n],"string"==typeof e.handler[n]&&(e.handler[n]=[e.handler[n]]);var i=e.handler[n].indexOf(t);-1===i?e.handler[n].push(t):"string"==typeof e.handler[n]?e.handler[n]=[]:e.handler[n].splice(i,1);var r={};r[n]=angular.copy(e.handler[n]),e.$broadcast("invenio.search.params.change",r)}function o(n){return"string"==typeof e.handler[n]?[e.handler[n]]:e.handler[n]}function a(n){var t={};e.handler[n]=[],t[n]=angular.copy(e.handler[n]),e.$broadcast("invenio.search.params.change",t)}function s(n){return void 0!==e.handler[n]&&0!==e.handler[n].length?!0:!1}function l(n){if(n){var t=e.aggOrder||Object.keys(n);e.orderedAggs=t.map(function(e){return{key:e,value:n[e]}})}}e.handler=angular.copy(i.invenioSearchCurrentArgs.params),t.order&&(e.aggOrder=t.order.split(",")),l(i.invenioSearchResults.aggregations),e.$on("invenio.search.finished",function(n){e.handler=angular.copy(i.invenioSearchCurrentArgs.params)}),e.$watch("vm.invenioSearchResults.aggregations",l),e.handleClick=r,e.getValues=o,e.resetSelection=a,e.isFacetSelected=s}function n(e,n){return n.template}return{restrict:"AE",scope:!1,require:"^invenioSearch",templateUrl:n,link:e}}function invenioSearchLoading(){function e(e,n,t,i){e.loadingMessage=t.message}function n(e,n){return n.template}return{restrict:"AE",require:"^invenioSearch",templateUrl:n,link:e}}function invenioSearchPagination(){function e(e,n,t,i){function r(n,t){for(var i=(s(),function(e){return{value:e,title:"Go to page "+e}}),r=n;t>=r;r++){var o=i(r);e.paginatePages.push(o)}}function o(){e.paginatePages=[];var n,t,i=e.adjacentSize,o=a(),l=s(),c=2*i;c+2>=o?(n=1,r(n,o)):2>=l-i?(n=1,t=1+c,r(n,t)):o-(i+2)>l?(n=l-i,t=l+i,r(n,t)):(n=o-c,t=o,r(n,t))}function a(){var e;try{e=i.invenioSearchResults.hits.total}catch(n){e=0}return Math.ceil(e/i.invenioSearchArgs.size)}function s(){return parseInt(i.invenioSearchArgs.page)||1}function l(){var e=s(),n=a();return n>e&&(e+=1),e}function c(){var e=s();a();return e>1&&(e-=1),e}function u(e){return e===s()?"active":""}function d(){return s()<a()?"":"disabled"}function h(){return s()>1?"":"disabled"}function p(){return 1!==s()?"":"disabled"}function f(){return s()!==a()?"":"disabled"}function g(e){e>a()?i.invenioSearchArgs.page=a():1>e?i.invenioSearchArgs.page=1:i.invenioSearchArgs.page=e}e.paginatePages=[],e.adjacentSize=t.adjacentSize||4,e.showGoToFirstLast=t.showGoToFirstLast||!1,e.$watch("vm.invenioSearchArgs.page",function(e,n){e!==n&&o()}),e.$watch("vm.invenioSearchResults",function(e,n){o()}),e.paginationHelper={changePage:g,current:s,getFirstClass:p,getLastClass:f,getNextClass:d,getPageClass:u,getPrevClass:h,next:l,pages:o,previous:c,total:a}}function n(e,n){return n.template}return{restrict:"AE",scope:!1,require:"^invenioSearch",templateUrl:n,link:e}}function invenioSearchRange(e,n){function t(t,i,r,o){function a(e,n){if(!isNaN(e)&&!isNaN(n)){var i={},r={from:e,to:n},o=r.from+"--"+r.to;i[u.name]=o,t.$broadcast("invenio.search.params.change",i)}}function s(){var e={};delete u.selectionRange,e[u.name]=[],t.$broadcast("invenio.search.params.change",e)}function l(){return void 0===u.selectionRange?!1:!0}function c(){if(h&&(u.width=d()||p),o.invenioSearchResults.aggregations){var n=o.invenioSearchResults.aggregations[u.name].buckets;if(n.length>0){if(o.invenioSearchArgs[u.name]&&o.invenioSearchArgs[u.name].length>0){var t=o.invenioSearchArgs[u.name].split("--"),i=+t[0],r=2===t.length?+t[1]:i;isNaN(i)||isNaN(r)||(u.selectionRange={min:i,max:r})}e(u.histogramId,u.selectionId,n,u,a)}}}var u={height:70,name:"years",histogramId:"#hist",selectionId:"#select",margins:{left:10,right:10,top:10,bottom:0},barColor:"#2c3e50",selectColor:"#3498db",lineColor:"#ccc",circleColor:"white",padding:2},d=function(){var e=d3.select(u.histogramId).node();return e.getBoundingClientRect().width};angular.merge(u,angular.fromJson(r.options));var h=!u.width;if(h)var p=d();t.$on("invenio.search.finished",c),h&&angular.element(n).bind("resize",c),t.resetRangeSelection=s,t.isRangeSelected=l}function i(e,n){return n.template}return{restrict:"AE",require:"^invenioSearch",templateUrl:i,link:t}}function invenioSearchResults(){function e(e,n,t,i){e.recordTemplate=t.recordTemplate}function n(e,n){return n.template}return{restrict:"AE",scope:!1,require:"^invenioSearch",templateUrl:n,link:e}}function invenioSearchSelectBox(){function e(e,n,t,i){function r(n){var t=i.invenioSearchArgs[e.data.sortKey]||i.invenioSearchSortArgs[e.data.sortKey]||e.data.defaultSortBy||"";return"-"===t.charAt(0)&&(t=t.slice(1,t.length)),"-"===n.charAt(0)&&(n=n.slice(1,n.length)),t===n}function o(){i.invenioSearchArgs[e.data.sortKey]=e.data.selectedOption}function a(n,t){if(n){var i=null;i="-"===n.charAt(0)?n.slice(1,n.length):n,i.length&&(e.data.selectedOption=i)}}e.data={availableOptions:JSON.parse(t.availableOptions||"{}"),selectedOption:i.invenioSearchArgs[t.sortKey]||null,sortKey:t.sortKey||"sort",defaultSortBy:t.defaultSortBy},null===e.data.selectedOption&&(e.data.selectedOption=e.data.availableOptions.options[0].value),e.isSelected=r,e.handleFieldChange=o,e.$watchCollection("vm.invenioSearchSortArgs."+e.data.sortKey,a),e.$watchCollection("vm.invenioSearchArgs."+e.data.sortKey,a)}function n(e,n){return n.template}return{restrict:"AE",require:"^invenioSearch",templateUrl:n,link:e}}function invenioSearchSortOrder(){function e(e,n,t,i){function r(n,t){var r={};r[n]=t||null,i.invenioSearchArgs=angular.merge(i.invenioSearchArgs,r),e.whichOrder="-"!==(t||"").charAt(0)?"asc":"desc"}function o(){var n=i.invenioSearchArgs[e.sortKey]||i.invenioSearchCurrentArgs[e.sortKey]||this.data.selectedOption||"";"-"===n.charAt(0)&&(n=n.slice(1,n.length)),"asc"===e.whichOrder?r(e.sortKey,n):"desc"===e.whichOrder&&r(e.sortKey,"-"+n)}function a(n,t){n&&(e.whichOrder="-"!==n.charAt(0)?"asc":"desc")}e.sortKey=t.sortKey,e.handleOrderChange=o,e.whichOrder="asc",e.$watchCollection("vm.invenioSearchSortArgs."+e.sortKey,a),e.$watchCollection("vm.invenioSearchArgs."+e.sortKey,a)}function n(e,n){return n.template}return{restrict:"AE",require:"^invenioSearch",templateUrl:n,link:e}}function invenioSearchRangeFactory(){function e(e,t,o,c,u){a=angular.merge(c,a),n&&n.remove(),n=d3.select(e).append("svg").attr({width:a.width,height:a.height});var g=n.append("g").style("pointer-events","all"),v=d3.select("body").append("div").attr("class","range_tooltip").style({position:"absolute","text-align":"center",width:"40px",height:"18px",padding:"2px",font:"12px sans-serif",background:"lightblue",border:"0px","border-radius":"8px","pointer-events":"none",opacity:0});h(o);var m=d3.extent(o,function(e){return e.key});m[0]=m[0]-.1*o.length,m[1]=m[1]+.1*o.length,i=d3.scale.linear().domain(m).range([a.margins.left,a.width-a.margins.left-a.margins.right]);var S=Math.min(10,(a.width-a.margins.left-a.margins.right-o.length*a.padding)/(l-s));S=Math.max(1,S);var y=d3.max(o,function(e){return e.doc_count});r=d3.scale.linear().domain([0,y]).range([0,a.height-a.margins.bottom]);var $=g.selectAll(".bar").data(o).enter().append("g").attr("class","bar");$.append("rect").attr("height",function(e){return r(e.doc_count)}).attr("width",S).attr("x",function(e){return i(e.key)-S/2}).attr("y",function(e){return r.range()[1]-r(e.doc_count)}).style("fill",function(e){return e.selected?a.selectColor:a.barColor}),$.on("mouseenter",function(e){e.doc_count!==d&&(d3.select(this).style("cursor","pointer"),d3.select(this).style("opacity",.8),d3.select(this).select("rect").style("fill",d3.rgb(e.selected?a.selectColor:a.barColor).brighter()),v.transition().duration(200).style("opacity",.9),v.html(e.doc_count).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px"))}).on("mouseout",function(e){e.doc_count!==d&&(d3.select(this).style("cursor","default"),d3.select(this).style("opacity",1),d3.select(this).select("rect").style("fill",e.selected?a.selectColor:a.barColor),v.transition().duration(500).style("opacity",0))}).on("click",function(e){e.doc_count!==d&&(v.transition().style("opacity",0),p([e.key,e.key],!0),d3.select(".resize.e").style("display","inline"))}),f(e,t,u)}var n,t,i,r,o,a,s,l,c=[],u=[],d=.01,h=function(e){u=[],e.forEach(function(e){e.key=+e.key_as_string,a.showBarOnEmpty&&0===e.doc_count&&(e.doc_count=d),a.selectionRange?e.selected=e.key>=a.selectionRange.min&&e.key<=a.selectionRange.max:e.selected=!0});var n=e.map(function(e){return e.key});s=Math.min.apply(void 0,n),l=Math.max.apply(void 0,n)},p=function(e,n){e=angular.copy(e),e.length&&e[0]===e[1]&&(e[1]+=1e-5),o.extent(e),o(d3.select(".brush").transition()),n&&o.event(d3.select(".brush").transition())},f=function(e,n,r){t&&t.remove(),t=d3.select(n).append("svg").attr({width:a.width,height:35}).style("fill",a.selectColor).style("overflow","visible"),t.append("line").attr({x1:0,x2:a.width,y1:5.5,y2:5.5}).style({stroke:a.lineColor,"stroke-width":3});var d=function(){var e=o.extent().map(Math.round);e.some(isNaN)&&(e=[s,l]),d3.select(".brush-range.min").text(e[0]),d3.select(".brush-range.max").text(e[1]),c=[],d3.selectAll("g.bar").select("rect").style("fill",function(n){return n.selected=n.key>=e[0]&&n.key<=e[1],n.selected&&c.push(n.key),n.selected?a.selectColor:a.barColor})},h=[s,l];if(a.selectionRange){var f=parseInt(i.domain()[0]),g=parseInt(i.domain()[1]),v=a.selectionRange.min<f||a.selectionRange.min>g?f:a.selectionRange.min,m=a.selectionRange.max>g||a.selectionRange.max<f?g:a.selectionRange.max;h=[v,m]}o=d3.svg.brush().x(i).extent(h).on("brush",d).on("brushend",function(){var e;0===c.length?e=[s,l]:(e=o.extent().map(Math.round),e[0]=Math.max(e[0],s),e[1]=Math.min(e[1],l));var n=angular.equals(u,e),t=!n;p(e,t),n||(angular.equals(h,e)||r.apply(void 0,e),u=angular.copy(e))}),t.append("g").attr("class","brush").call(o).selectAll("rect").attr("y",4).attr("height",3);var S=t.selectAll(".resize").append("g");S.append("circle").attr("r",5).attr("cx",0).attr("cy",6).style({"stroke-width":2,stroke:a.selectColor,fill:a.circleColor}),S.append("text").attr("text-anchor","middle").style("transform","rotate(-45deg) translateX(-15px)").text(function(e,n){return parseInt(o.extent()[0===n?1:0])}).attr("class",function(e,n){return"brush-range "+(0===n?"max":"min")}).attr("y",31),parseInt(h[0])===parseInt(h[1])&&d3.select(".resize.e").style("display","inline")};return e}function invenioSearchAPI(e,n,t){function i(i,r){function o(e){s.resolve(e)}function a(e){s.reject(e)}var s=n.defer(),l=angular.copy(i);return l.params=angular.merge(l.params,r||{}),l.paramSerializer=function(e){var n=[];return angular.forEach(e,function(e,n){if(angular.isArray(e)){var i=this;e.filter(function(e){i.push(t.encodeURIComponent(n)+"="+t.encodeURIComponent(e))})}else this.push(t.encodeURIComponent(n)+"="+t.encodeURIComponent(e))},n),n.join("&")},e(l).then(o,a),s.promise}return{search:i}}function invenioSearchHandler(e){function n(){return e.search()}function t(n){e.search(n)}function i(){e.replace()}return{get:n,replace:i,set:t}}function bsCompilerService(e,n,t,i,r,o){function a(e,n){return angular.element((n||document).querySelectorAll(e))}function s(e){return l[e]?l[e]:l[e]=n.get(e,{cache:o}).then(function(e){return e.data})}this.compile=function(n){n.template&&/\.html$/.test(n.template)&&(n.templateUrl=n.template,n.template="");var o=n.templateUrl,l=n.template||"",c=n.controller,u=n.controllerAs,d=n.resolve||{},h=n.locals||{},p=n.transformTemplate||angular.identity,f=n.bindToController;if(angular.forEach(d,function(e,n){angular.isString(e)?d[n]=t.get(e):d[n]=t.invoke(e)}),angular.extend(d,h),l)d.$template=e.when(l);else{if(!o)throw new Error("Missing `template` / `templateUrl` option.");d.$template=s(o)}return n.titleTemplate&&(d.$template=e.all([d.$template,s(n.titleTemplate)]).then(function(e){var n=angular.element(e[0]);return a('[ng-bind="title"]',n[0]).removeAttr("ng-bind").html(e[1]),n[0].outerHTML})),n.contentTemplate&&(d.$template=e.all([d.$template,s(n.contentTemplate)]).then(function(e){var t=angular.element(e[0]),i=a('[ng-bind="content"]',t[0]).removeAttr("ng-bind").html(e[1]);return n.templateUrl||i.next().remove(),t[0].outerHTML})),e.all(d).then(function(e){var t=p(e.$template);n.html&&(t=t.replace(/ng-bind="/gi,'ng-bind-html="'));var o=angular.element("<div>").html(t.trim()).contents(),a=i(o);return{locals:e,element:o,link:function(n){if(e.$scope=n,c){var t=r(c,e,!0);f&&angular.extend(t.instance,e);var i=angular.isObject(t)?t:t();o.data("$ngControllerController",i),o.children().data("$ngControllerController",i),u&&(n[u]=i)}return a.apply(null,arguments)}}})};var l={}}invenioSearchConfiguration.$inject=["$locationProvider"],angular.module("invenioSearch.configuration",[]).config(invenioSearchConfiguration),angular.module("invenioSearch.services",[]),angular.module("invenioSearch.factories",[]),angular.module("invenioSearch.controllers",[]),angular.module("invenioSearch.directives",[]),angular.module("invenioSearch",["invenioSearch.configuration","invenioSearch.services","invenioSearch.factories","invenioSearch.controllers","invenioSearch.directives"]),invenioSearchCtrl.$inject=["$scope","invenioSearchHandler","invenioSearchAPI"],angular.module("invenioSearch.controllers").controller("invenioSearchCtrl",invenioSearchCtrl),angular.module("invenioSearch.directives").directive("invenioSearch",invenioSearch),angular.module("invenioSearch.directives").directive("invenioSearchBar",invenioSearchBar),angular.module("invenioSearch.directives").directive("invenioSearchCount",invenioSearchCount),angular.module("invenioSearch.directives").directive("invenioSearchError",invenioSearchError),angular.module("invenioSearch.directives").directive("invenioSearchFacets",invenioSearchFacets),angular.module("invenioSearch.directives").directive("invenioSearchLoading",invenioSearchLoading),angular.module("invenioSearch.directives").directive("invenioSearchPagination",invenioSearchPagination),invenioSearchRange.$inject=["invenioSearchRangeFactory","$window"],angular.module("invenioSearch.directives").directive("invenioSearchRange",invenioSearchRange),angular.module("invenioSearch.directives").directive("invenioSearchResults",invenioSearchResults),angular.module("invenioSearch.directives").directive("invenioSearchSelectBox",invenioSearchSelectBox),angular.module("invenioSearch.directives").directive("invenioSearchSortOrder",invenioSearchSortOrder),angular.module("invenioSearch.factories").factory("invenioSearchRangeFactory",invenioSearchRangeFactory),invenioSearchAPI.$inject=["$http","$q","$window"],angular.module("invenioSearch.services").service("invenioSearchAPI",invenioSearchAPI),invenioSearchHandler.$inject=["$location"],angular.module("invenioSearch.services").service("invenioSearchHandler",invenioSearchHandler),define("node_modules/invenio-search-js/dist/invenio-search-js",function(){}),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",function(){function e(e){var i=e.ownerDocument,r=e.offsetParent||i;if(t(r,"#document"))return i.documentElement;for(;r&&!t(r,"html")&&"static"===n.css(r,"position");)r=r.offsetParent;return r||i.documentElement}var n={},t=n.nodeName=function(e,n){return e.nodeName&&e.nodeName.toLowerCase()===n.toLowerCase()};return n.css=function(e,n,t){var i;return i=e.currentStyle?e.currentStyle[n]:window.getComputedStyle?window.getComputedStyle(e)[n]:e.style[n],t===!0?parseFloat(i)||0:i},n.offset=function(e){var n=e.getBoundingClientRect(),t=e.ownerDocument;return{width:n.width||e.offsetWidth,height:n.height||e.offsetHeight,top:n.top+(window.pageYOffset||t.documentElement.scrollTop)-(t.documentElement.clientTop||0),left:n.left+(window.pageXOffset||t.documentElement.scrollLeft)-(t.documentElement.clientLeft||0)}},n.setOffset=function(e,t,i){var r,o,a,s,l,c,u,d=n.css(e,"position"),h=angular.element(e),p={};"static"===d&&(e.style.position="relative"),l=n.offset(e),a=n.css(e,"top"),c=n.css(e,"left"),u=("absolute"===d||"fixed"===d)&&(a+c).indexOf("auto")>-1,u?(r=n.position(e),s=r.top,o=r.left):(s=parseFloat(a)||0,o=parseFloat(c)||0),angular.isFunction(t)&&(t=t.call(e,i,l)),null!==t.top&&(p.top=t.top-l.top+s),null!==t.left&&(p.left=t.left-l.left+o),"using"in t?t.using.call(h,p):h.css({top:p.top+"px",left:p.left+"px"})},n.position=function(i){var r,o,a={top:0,left:0};return"fixed"===n.css(i,"position")?o=i.getBoundingClientRect():(r=e(i),o=n.offset(i),t(r,"html")||(a=n.offset(r)),a.top+=n.css(r,"borderTopWidth",!0),a.left+=n.css(r,"borderLeftWidth",!0)),{width:i.offsetWidth,height:i.offsetHeight,top:o.top-a.top-n.css(i,"marginTop",!0),left:o.left-a.left-n.css(i,"marginLeft",!0)}},n.height=function(e,t){var i=e.offsetHeight;return t?i+=n.css(e,"marginTop",!0)+n.css(e,"marginBottom",!0):i-=n.css(e,"paddingTop",!0)+n.css(e,"paddingBottom",!0)+n.css(e,"borderTopWidth",!0)+n.css(e,"borderBottomWidth",!0),i},n.width=function(e,t){var i=e.offsetWidth;return t?i+=n.css(e,"marginLeft",!0)+n.css(e,"marginRight",!0):i-=n.css(e,"paddingLeft",!0)+n.css(e,"paddingRight",!0)+n.css(e,"borderLeftWidth",!0)+n.css(e,"borderRightWidth",!0),i},n}),define("node_modules/angular-strap/dist/modules/dimensions",function(){}),bsCompilerService.$inject=["$q","$http","$injector","$compile","$controller","$templateCache"],angular.module("mgcrea.ngStrap.core",[]).service("$bsCompiler",bsCompilerService),define("node_modules/angular-strap/dist/modules/compiler",function(){}),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.core","mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var e=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",templateUrl:"tooltip/tooltip.tpl.html",template:"",titleTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0,mouseDownPreventDefault:!0,mouseDownStopPropagation:!0,viewport:{selector:"body",padding:0}};this.$get=["$window","$rootScope","$bsCompiler","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(n,t,i,r,o,a,s,l,c,u,d){function h(r,o){function a(){D.$emit(U.prefixEvent+".show",O),angular.isDefined(U.onShow)&&angular.isFunction(U.onShow)&&U.onShow(O)}function h(){if(D.$emit(U.prefixEvent+".hide",O),angular.isDefined(U.onHide)&&angular.isFunction(U.onHide)&&U.onHide(O),_===K){if(L&&"focus"===U.trigger)return r[0].blur();T()}}function g(){var e=U.trigger.split(" ");angular.forEach(e,function(e){"click"===e||"contextmenu"===e?r.on(e,O.toggle):"manual"!==e&&(r.on("hover"===e?"mouseenter":"focus",O.enter),r.on("hover"===e?"mouseleave":"blur",O.leave),"button"===H&&"hover"!==e&&r.on(v?"touchstart":"mousedown",O.$onFocusElementMouseDown))})}function S(){for(var e=U.trigger.split(" "),n=e.length;n--;){var t=e[n];"click"===t||"contextmenu"===t?r.off(t,O.toggle):"manual"!==t&&(r.off("hover"===t?"mouseenter":"focus",O.enter),r.off("hover"===t?"mouseleave":"blur",O.leave),"button"===H&&"hover"!==t&&r.off(v?"touchstart":"mousedown",O.$onFocusElementMouseDown))}}function y(){"focus"!==U.trigger?_.on("keyup",O.$onKeyUp):r.on("keyup",O.$onFocusKeyUp)}function $(){"focus"!==U.trigger?_.off("keyup",O.$onKeyUp):r.off("keyup",O.$onFocusKeyUp)}function w(){d(function(){_.on("click",C),m.on("click",O.hide),M=!0},0,!1)}function b(){M&&(_.off("click",C),m.off("click",O.hide),M=!1)}function C(e){e.stopPropagation()}function A(e){e=e||U.target||r;var t=e[0],i="BODY"===t.tagName,o=t.getBoundingClientRect(),a={};for(var s in o)a[s]=o[s];null===a.width&&(a=angular.extend({},a,{width:o.right-o.left,height:o.bottom-o.top}));var l=i?{top:0,left:0}:c.offset(t),u={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.prop("scrollTop")||0},d=i?{width:document.documentElement.clientWidth,height:n.innerHeight}:null;return angular.extend({},a,u,d,l)}function x(e,n,t,i){var r,o=e.split("-");switch(o[0]){case"right":r={top:n.top+n.height/2-i/2,left:n.left+n.width};break;case"bottom":r={top:n.top+n.height,left:n.left+n.width/2-t/2};break;case"left":r={top:n.top+n.height/2-i/2,left:n.left-t};break;default:r={top:n.top-i,left:n.left+n.width/2-t/2}}if(!o[1])return r;if("top"===o[0]||"bottom"===o[0])switch(o[1]){case"left":r.left=n.left;break;case"right":r.left=n.left+n.width-t}else if("left"===o[0]||"right"===o[0])switch(o[1]){case"top":r.top=n.top-i+n.height;break;case"bottom":r.top=n.top}return r}function E(e,n){var t=_[0],i=t.offsetWidth,r=t.offsetHeight,o=parseInt(c.css(t,"margin-top"),10),a=parseInt(c.css(t,"margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),e.top=e.top+o,e.left=e.left+a,c.setOffset(t,angular.extend({using:function(e){_.css({top:Math.round(e.top)+"px",left:Math.round(e.left)+"px",right:""})}},e),0);var s=t.offsetWidth,l=t.offsetHeight;if("top"===n&&l!==r&&(e.top=e.top+r-l),!/top-left|top-right|bottom-left|bottom-right/.test(n)){var u=k(n,e,s,l);if(u.left?e.left+=u.left:e.top+=u.top,c.setOffset(t,e),/top|right|bottom|left/.test(n)){var d=/top|bottom/.test(n),h=d?2*u.left-i+s:2*u.top-r+l,p=d?"offsetWidth":"offsetHeight";R(h,t[p],d)}}}function k(e,n,t,i){var r={top:0,left:0};if(!O.$viewport)return r;var o=U.viewport&&U.viewport.padding||0,a=A(O.$viewport);if(/right|left/.test(e)){var s=n.top-o-a.scroll,l=n.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var c=n.left-o,u=n.left+o+t;c<a.left?r.left=a.left-c:u>a.right&&(r.left=a.left+a.width-u)}return r}function R(e,n,t){var i=f(".tooltip-arrow, .arrow",_[0]);i.css(t?"left":"top",50*(1-e/n)+"%").css(t?"top":"left","")}function T(){clearTimeout(j),O.$isShown&&null!==_&&(U.autoClose&&b(),U.keyboard&&$()),N&&(N.$destroy(),N=null),_&&(_.remove(),_=O.$element=null)}var O={},U=O.$options=angular.extend({},e,o),P=O.$promise=i.compile(U),D=O.$scope=U.scope&&U.scope.$new()||t.$new(),H=r[0].nodeName.toLowerCase();if(U.delay&&angular.isString(U.delay)){var q=U.delay.split(",").map(parseFloat);U.delay=q.length>1?{show:q[0],hide:q[1]}:q[0]}O.$id=U.id||r.attr("id")||"",U.title&&(D.title=l.trustAsHtml(U.title)),D.$setEnabled=function(e){D.$$postDigest(function(){O.setEnabled(e)})},D.$hide=function(){D.$$postDigest(function(){O.hide()})},D.$show=function(){D.$$postDigest(function(){O.show()})},D.$toggle=function(){D.$$postDigest(function(){O.toggle()})},O.$isShown=D.$isShown=!1;var j,F,I,_,B,N;P.then(function(e){I=e,O.init()}),O.init=function(){U.delay&&angular.isNumber(U.delay)&&(U.delay={show:U.delay,hide:U.delay}),"self"===U.container?B=r:angular.isElement(U.container)?B=U.container:U.container&&(B=f(U.container)),g(),U.target&&(U.target=angular.isElement(U.target)?U.target:f(U.target)),U.show&&D.$$postDigest(function(){"focus"===U.trigger?r[0].focus():O.show()})},O.destroy=function(){S(),T(),D.$destroy()},O.enter=function(){return clearTimeout(j),F="in",U.delay&&U.delay.show?void(j=setTimeout(function(){"in"===F&&O.show()},U.delay.show)):O.show()},O.show=function(){if(U.bsEnabled&&!O.$isShown){D.$emit(U.prefixEvent+".show.before",O),angular.isDefined(U.onBeforeShow)&&angular.isFunction(U.onBeforeShow)&&U.onBeforeShow(O);var e,n;U.container?(e=B,n=B[0].lastChild?angular.element(B[0].lastChild):null):(e=null,n=r),_&&T(),N=O.$scope.$new(),_=O.$element=I.link(N,function(e,n){}),_.css({top:"-9999px",left:"-9999px",right:"auto",display:"block",visibility:"hidden"}),U.animation&&_.addClass(U.animation),U.type&&_.addClass(U.prefixClass+"-"+U.type),U.customClass&&_.addClass(U.customClass),n?n.after(_):e.prepend(_),O.$isShown=D.$isShown=!0,p(D),O.$applyPlacement(),angular.version.minor<=2?s.enter(_,e,n,a):s.enter(_,e,n).then(a),p(D),u(function(){_&&_.css({visibility:"visible"}),U.keyboard&&("focus"!==U.trigger&&O.focus(),y())}),U.autoClose&&w()}},O.leave=function(){return clearTimeout(j),F="out",U.delay&&U.delay.hide?void(j=setTimeout(function(){"out"===F&&O.hide()},U.delay.hide)):O.hide()};var L,K;O.hide=function(e){O.$isShown&&(D.$emit(U.prefixEvent+".hide.before",O),angular.isDefined(U.onBeforeHide)&&angular.isFunction(U.onBeforeHide)&&U.onBeforeHide(O),L=e,K=_,null!==_&&(angular.version.minor<=2?s.leave(_,h):s.leave(_).then(h)),O.$isShown=D.$isShown=!1,p(D),U.keyboard&&null!==_&&$(),U.autoClose&&null!==_&&b())},O.toggle=function(e){e&&e.preventDefault(),O.$isShown?O.leave():O.enter()},O.focus=function(){_[0].focus()},O.setEnabled=function(e){U.bsEnabled=e},O.setViewport=function(e){U.viewport=e},O.$applyPlacement=function(){if(_){var n=U.placement,t=/\s?auto?\s?/i,i=t.test(n);i&&(n=n.replace(t,"")||e.placement),_.addClass(U.placement);var r=A(),o=_.prop("offsetWidth"),a=_.prop("offsetHeight");if(O.$viewport=U.viewport&&f(U.viewport.selector||U.viewport),i){var s=n,l=A(O.$viewport);/bottom/.test(s)&&r.bottom+a>l.bottom?n=s.replace("bottom","top"):/top/.test(s)&&r.top-a<l.top&&(n=s.replace("top","bottom")),/left/.test(s)&&r.left-o<l.left?n=n.replace("left","right"):/right/.test(s)&&r.right+o>l.width&&(n=n.replace("right","left")),_.removeClass(s).addClass(n)}var c=x(n,r,o,a);E(c,n)}},O.$onKeyUp=function(e){27===e.which&&O.$isShown&&(O.hide(),e.stopPropagation())},O.$onFocusKeyUp=function(e){27===e.which&&(r[0].blur(),e.stopPropagation())},O.$onFocusElementMouseDown=function(e){U.mouseDownPreventDefault&&e.preventDefault(),U.mouseDownStopPropagation&&e.stopPropagation(),O.$isShown?r[0].blur():r[0].focus()};var M=!1;return O}function p(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}function f(e,n){return angular.element((n||document).querySelectorAll(e))}var g=/(ip[ao]d|iphone|android)/gi.test(n.navigator.userAgent),v="createTouch"in n.document&&g,m=angular.element(n.document);return h}]}).directive("bsTooltip",["$window","$location","$sce","$parse","$tooltip","$$rAF",function(e,n,t,i,r,o){return{restrict:"EAC",scope:!0,link:function(e,n,i,a){var s,l={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","titleTemplate","placement","container","delay","trigger","html","animation","backdropAnimation","type","customClass","id"],function(e){angular.isDefined(i[e])&&(l[e]=i[e])});var c=/^(false|0|)$/i;angular.forEach(["html","container"],function(e){angular.isDefined(i[e])&&c.test(i[e])&&(l[e]=!1)}),angular.forEach(["onBeforeShow","onShow","onBeforeHide","onHide"],function(n){var t="bs"+n.charAt(0).toUpperCase()+n.slice(1);angular.isDefined(i[t])&&(l[n]=e.$eval(i[t]))});var u=n.attr("data-target");angular.isDefined(u)&&(c.test(u)?l.target=!1:l.target=u),e.hasOwnProperty("title")||(e.title=""),i.$observe("title",function(n){if(angular.isDefined(n)||!e.hasOwnProperty("title")){var i=e.title;e.title=t.trustAsHtml(n),angular.isDefined(i)&&o(function(){s&&s.$applyPlacement()})}}),i.$observe("disabled",function(e){e&&s.$isShown&&s.hide()}),i.bsTooltip&&e.$watch(i.bsTooltip,function(n,t){angular.isObject(n)?angular.extend(e,n):e.title=n,angular.isDefined(t)&&o(function(){s&&s.$applyPlacement()})},!0),i.bsShow&&e.$watch(i.bsShow,function(e,n){s&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(tooltip),?/i)),e===!0?s.show():s.hide())}),i.bsEnabled&&e.$watch(i.bsEnabled,function(e,n){s&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|1|,?(tooltip),?/i)),e===!1?s.setEnabled(!1):s.setEnabled(!0))}),i.viewport&&e.$watch(i.viewport,function(e){s&&angular.isDefined(e)&&s.setViewport(e)}),s=r(n,l),e.$on("$destroy",function(){s&&s.destroy(),l=null,s=null})}}}]),define("node_modules/angular-strap/dist/modules/tooltip",function(){}),angular.module("mgcrea.ngStrap.tooltip").run(["$templateCache",function(e){e.put("tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}]),define("node_modules/angular-strap/dist/modules/tooltip.tpl",function(){}),define("js/invenio_communities/directives/provisional",[],function(){function e(e,n){function t(n,t,i,r){n.communityCurationEndpoint=i.communityCurationEndpoint,n.recordTemplate=i.recordTemplate,n.handleCommunityClick=function(t,i){n.communitiesCurationResults||(n.communitiesCurationResults={}),e({method:"POST",url:n.communityCurationEndpoint,data:{recid:i,action:t},headers:{"Content-Type":"application/json"}}).then(function(e){var r;"accept"==t?r="The record was successfully accepted.":"reject"==t&&(r="The record was successfully rejected."),n.communitiesCurationResults[i]={success:r}},function(e){n.communitiesCurationResults[i]={error:"An error occurred while processing your request."}})}}function i(e,n){return n.template}return{restrict:"AE",scope:!1,templateUrl:i,link:t}}return e.$inject=["$http","$q"],e}),define("js/invenio_communities/directives/module",["js/invenio_communities/directives/provisional"],function(e){var n=angular.module("invenioCommunities.directives",[]).directive("invenioSearchResultsProvisional",e);return n}),define("js/invenio_communities/module",["js/invenio_communities/directives/module"],function(e){var n=angular.module("invenioCommunities",["invenioCommunities.directives"]);return n}),require(["node_modules/invenio-search-js/dist/invenio-search-js","node_modules/angular-strap/dist/modules/dimensions","node_modules/angular-strap/dist/modules/compiler","node_modules/angular-strap/dist/modules/tooltip","node_modules/angular-strap/dist/modules/tooltip.tpl","js/invenio_communities/module"],function(){}),define("js/zenodo.search",function(){});