!function t(e,n,i){function a(s,o){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};e[s][0].call(d.exports,function(t){var n=e[s][1][t];return a(n||t)},d,d.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t){(function(n){function i(){function e(){v.windowLoaded=!0}n.addEventListener?n.addEventListener("load",e):n.attachEvent&&n.attachEvent("onload",e),v.codeLoadEnd=(new Date).getTime()}
/** @license ============== DO NOT ALTER ANYTHING BELOW THIS LINE ! ============

Adobe Visitor API for JavaScript version: 3.1.2
Copyright 1996-2015 Adobe, Inc. All Rights Reserved
More info available at https://marketing.adobe.com/resources/help/en_US/mcvid/
*/var a=e("./child/ChildVisitor"),r=e("./child/Message"),s=e("./child/makeChildMessageListener"),o=e("./utils/asyncParallelApply"),l=e("./utils/enums"),c=e("./utils/utils"),d=e("./utils/getDomain"),u=e("./units/version"),m=e("./units/crossDomain"),p=e("@adobe-mcid/visitor-js-shared/lib/ids/generateRandomID"),g=e("./units/makeCorsRequest"),f=e("./units/makeDestinationPublishing"),h=e("./utils/constants"),v=function(e,t,i){function a(e){var t=e;return function(e){var n=e||C.location.href;try{var i=k._extractParamFromUri(n,t);if(i)return U.parsePipeDelimetedKeyValues(i)}catch(e){}}}function v(e){function t(e,t){e&&e.match(h.VALID_VISITOR_ID_REGEX)&&t(e)}t(e[T],k.setMarketingCloudVisitorID),k._setFieldExpire(O,-1),t(e[x],k.setAnalyticsVisitorID)}function b(e){e=e||{},k._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",k._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},k._supplementalDataIDLast=e.supplementalDataIDLast||"",k._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function y(e){function t(e,t,n){return(n=n?n+="|":n)+(e+"=")+encodeURIComponent(t)}function n(e){return(e=e?e+="|":e)+"TS="+U.getTimestampInSeconds()}function i(e,n){var i=n[0],a=n[1];return null!=a&&a!==R&&(e=t(i,a,e)),e}return n(e.reduce(i,""))}function _(e){var t=20160,n=e.minutesToLive,i="";return(k.idSyncDisableSyncs||k.disableIdSyncs)&&(i=i||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(i=i||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(i=i||"Error: config.url is empty"),void 0===n?n=t:(n=parseInt(n,10),(isNaN(n)||n<=0)&&(i=i||"Error: config.minutesToLive needs to be a positive number")),{error:i,ttl:n}}if(!i||i.split("").reverse().join("")!==e)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var k=this;k.version="3.1.2";var C=n,w=C.Visitor;w.version=k.version,w.AuthState=l.AUTH_STATE,w.OptOut=l.OPT_OUT,C.s_c_in||(C.s_c_il=[],C.s_c_in=0),k._c="Visitor",k._il=C.s_c_il,k._in=C.s_c_in,k._il[k._in]=k,C.s_c_in++,k._log={requests:[]},k.marketingCloudOrgID=e,k.cookieName="AMCV_"+e,k.sessionCookieName="AMCVS_"+e,k.cookieDomain=d(),k.cookieDomain===C.location.hostname&&(k.cookieDomain=""),k.loadSSL=C.location.protocol.toLowerCase().indexOf("https")>=0,k.loadTimeout=3e4,k.CORSErrors=[],k.marketingCloudServer=k.audienceManagerServer="dpm.demdex.net",k.sdidParamExpiry=30;var S=C.document,D=null,I="MC",T="MCMID",E="MCORGID",V="MCCIDH",A="MCSYNCSOP",L="MCIDTS",P="MCOPTOUT",M="A",x="MCAID",j="AAM",F="MCAAMLH",O="MCAAMB",R="NONE",N=function(e){return!Object.prototype[e]},H=g(k,q);k.FIELDS=l.FIELDS,k.cookieRead=function(e){e=encodeURIComponent(e);var t=(";"+S.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),i=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,i<0?t.length:i))},k.cookieWrite=function(e,t,n){var i,a=k.cookieLifetime;if(t=""+t,a=a?(""+a).toUpperCase():"",n&&"SESSION"!==a&&"NONE"!==a){if(i=""!==t?parseInt(a||0,10):-60)(n=new Date).setTime(n.getTime()+1e3*i);else if(1===n){var r=(n=new Date).getYear();n.setYear(r+2+(r<1900?1900:0))}}else n=0;return e&&"NONE"!==a?(S.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(n?" expires="+n.toGMTString()+";":"")+(k.cookieDomain?" domain="+k.cookieDomain+";":""),k.cookieRead(e)===t):0},k.resetState=function(e){e?k._mergeServerState(e):b()},k._isAllowedDone=!1,k._isAllowedFlag=!1,k.isAllowed=function(){return k._isAllowedDone||(k._isAllowedDone=!0,(k.cookieRead(k.cookieName)||k.cookieWrite(k.cookieName,"T",1))&&(k._isAllowedFlag=!0)),k._isAllowedFlag},k.setMarketingCloudVisitorID=function(e){k._setMarketingCloudFields(e)},k._use1stPartyMarketingCloudServer=!1,k.getMarketingCloudVisitorID=function(e,t){if(k.isAllowed()){k.marketingCloudServer&&k.marketingCloudServer.indexOf(".demdex.net")<0&&(k._use1stPartyMarketingCloudServer=!0);var n=k._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;return k._getRemoteField(T,i,e,t,n)}return""},k.getVisitorValues=function(e,t){var n={MCMID:{fn:k.getMarketingCloudVisitorID,args:[!0],context:k},MCOPTOUT:{fn:k.isOptedOut,args:[void 0,!0],context:k},MCAID:{fn:k.getAnalyticsVisitorID,args:[!0],context:k},MCAAMLH:{fn:k.getAudienceManagerLocationHint,args:[!0],context:k},MCAAMB:{fn:k.getAudienceManagerBlob,args:[!0],context:k}},i=t&&t.length?U.pluck(n,t):n;o(i,e)},k._currentCustomerIDs={},k._customerIDsHashChanged=!1,k._newCustomerIDsHash="",k.setCustomerIDs=function(e){function t(){k._customerIDsHashChanged=!1}if(k.isAllowed()&&e){var n,i;for(n in k._readVisitor(),e)if(N(n)&&(i=e[n]))if("object"==typeof i){var a={};i.id&&(a.id=i.id),null!=i.authState&&(a.authState=i.authState),k._currentCustomerIDs[n]=a}else k._currentCustomerIDs[n]={id:i};var r=k.getCustomerIDs(),s=k._getField(V),o="";for(n in s||(s=0),r)N(n)&&(o+=(o?"|":"")+n+"|"+((i=r[n]).id?i.id:"")+(i.authState?i.authState:""));k._newCustomerIDsHash=k._hash(o),k._newCustomerIDsHash!==s&&(k._customerIDsHashChanged=!0,k._mapCustomerIDs(t))}},k.getCustomerIDs=function(){k._readVisitor();var e,t,n={};for(e in k._currentCustomerIDs)N(e)&&(t=k._currentCustomerIDs[e],n[e]||(n[e]={}),t.id&&(n[e].id=t.id),null!=t.authState?n[e].authState=t.authState:n[e].authState=w.AuthState.UNKNOWN);return n},k.setAnalyticsVisitorID=function(e){k._setAnalyticsFields(e)},k.getAnalyticsVisitorID=function(e,t,n){if(!U.isTrackingServerPopulated()&&!n)return k._callCallback(e,[""]),"";if(k.isAllowed()){var i="";if(n||(i=k.getMarketingCloudVisitorID(function(){k.getAnalyticsVisitorID(e,!0)})),i||n){var a=n?k.marketingCloudServer:k.trackingServer,r="";k.loadSSL&&(n?k.marketingCloudServerSecure&&(a=k.marketingCloudServerSecure):k.trackingServerSecure&&(a=k.trackingServerSecure));var s={};if(a){var o="http"+(k.loadSSL?"s":"")+"://"+a+"/id",l="d_visid_ver="+k.version+"&mcorgid="+encodeURIComponent(k.marketingCloudOrgID)+(i?"&mid="+encodeURIComponent(i):"")+(k.idSyncDisable3rdPartySyncing||k.disableThirdPartyCookies?"&d_coppa=true":""),c=["s_c_il",k._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];r=o+"?"+l+"&callback=s_c_il%5B"+k._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",s.corsUrl=o+"?"+l,s.callback=c}return s.url=r,k._getRemoteField(n?T:x,r,e,t,s)}}return""},k.getAudienceManagerLocationHint=function(e,t){if(k.isAllowed()&&k.getMarketingCloudVisitorID(function(){k.getAudienceManagerLocationHint(e,!0)})){var n=k._getField(x);if(!n&&U.isTrackingServerPopulated()&&(n=k.getAnalyticsVisitorID(function(){k.getAudienceManagerLocationHint(e,!0)})),n||!U.isTrackingServerPopulated()){var i=k._getAudienceManagerURLData(),a=i.url;return k._getRemoteField(F,a,e,t,i)}}return""},k.getLocationHint=k.getAudienceManagerLocationHint,k.getAudienceManagerBlob=function(e,t){if(k.isAllowed()&&k.getMarketingCloudVisitorID(function(){k.getAudienceManagerBlob(e,!0)})){var n=k._getField(x);if(!n&&U.isTrackingServerPopulated()&&(n=k.getAnalyticsVisitorID(function(){k.getAudienceManagerBlob(e,!0)})),n||!U.isTrackingServerPopulated()){var i=k._getAudienceManagerURLData(),a=i.url;return k._customerIDsHashChanged&&k._setFieldExpire(O,-1),k._getRemoteField(O,a,e,t,i)}}return""},k._supplementalDataIDCurrent="",k._supplementalDataIDCurrentConsumed={},k._supplementalDataIDLast="",k._supplementalDataIDLastConsumed={},k.getSupplementalDataID=function(e,t){k._supplementalDataIDCurrent||t||(k._supplementalDataIDCurrent=k._generateID(1));var n=k._supplementalDataIDCurrent;return k._supplementalDataIDLast&&!k._supplementalDataIDLastConsumed[e]?(n=k._supplementalDataIDLast,k._supplementalDataIDLastConsumed[e]=!0):n&&(k._supplementalDataIDCurrentConsumed[e]&&(k._supplementalDataIDLast=k._supplementalDataIDCurrent,k._supplementalDataIDLastConsumed=k._supplementalDataIDCurrentConsumed,k._supplementalDataIDCurrent=n=t?"":k._generateID(1),k._supplementalDataIDCurrentConsumed={}),n&&(k._supplementalDataIDCurrentConsumed[e]=!0)),n},k.getOptOut=function(e,t){if(k.isAllowed()){var n=k._getAudienceManagerURLData("_setMarketingCloudFields"),i=n.url;return k._getRemoteField(P,i,e,t,n)}return""},k.isOptedOut=function(e,t,n){if(k.isAllowed()){t||(t=w.OptOut.GLOBAL);var i=k.getOptOut(function(n){var i=n===w.OptOut.GLOBAL||n.indexOf(t)>=0;k._callCallback(e,[i])},n);return i?i===w.OptOut.GLOBAL||i.indexOf(t)>=0:null}return!1},k._fields=null,k._fieldsExpired=null,k._hash=function(e){var t,n=0;if(e)for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n&=n;return n},k._generateID=p,k._generateLocalMID=function(){var e=k._generateID(0);return $.isClientSideMarketingCloudVisitorID=!0,e},k._callbackList=null,k._callCallback=function(e,t){try{"function"==typeof e?e.apply(C,t):e[1].apply(e[0],t)}catch(e){}},k._registerCallback=function(e,t){t&&(null==k._callbackList&&(k._callbackList={}),null==k._callbackList[e]&&(k._callbackList[e]=[]),k._callbackList[e].push(t))},k._callAllCallbacks=function(e,t){if(null!=k._callbackList){var n=k._callbackList[e];if(n)for(;n.length>0;)k._callCallback(n.shift(),t)}},k._addQuerystringParam=function(e,t,n,i){var a=encodeURIComponent(t)+"="+encodeURIComponent(n),r=U.parseHash(e),s=U.hashlessUrl(e);if(-1===s.indexOf("?"))return s+"?"+a+r;var o=s.split("?"),l=o[0]+"?",c=o[1];return l+U.addQueryParamAtLocation(c,a,i)+r},k._extractParamFromUri=function(e,t){var n=new RegExp("[\\?&#]"+t+"=([^&#]*)").exec(e);if(n&&n.length)return decodeURIComponent(n[1])},k._parseAdobeMcFromUrl=a(h.ADOBE_MC),k._parseAdobeMcSdidFromUrl=a(h.ADOBE_MC_SDID),k._attemptToPopulateSdidFromUrl=function(t){var n=k._parseAdobeMcSdidFromUrl(t),i=1e9;n&&n.TS&&(i=U.getTimestampInSeconds()-n.TS),n&&n.SDID&&n[E]===e&&i<k.sdidParamExpiry&&(k._supplementalDataIDCurrent=n.SDID,k._supplementalDataIDCurrentConsumed.SDID_URL_PARAM=!0)},k._attemptToPopulateIdsFromUrl=function(){var t=k._parseAdobeMcFromUrl();if(t&&t.TS){var n=U.getTimestampInSeconds()-t.TS;if(Math.floor(n/60)>h.ADOBE_MC_TTL_IN_MIN||t[E]!==e)return;v(t)}},k._mergeServerState=function(e){function t(e){U.isObject(e)&&k.setCustomerIDs(e)}function n(e){return U.isObject(e)?e:JSON.parse(e)}if(e)try{if((e=n(e))[k.marketingCloudOrgID]){var i=e[k.marketingCloudOrgID];t(i.customerIDs),b(i.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},k._timeout=null,k._loadData=function(e,t,n,i){var a="d_fieldgroup";t=k._addQuerystringParam(t,a,e,1),i.url=k._addQuerystringParam(i.url,a,e,1),i.corsUrl=k._addQuerystringParam(i.corsUrl,a,e,1),$.fieldGroupObj[e]=!0,i===Object(i)&&i.corsUrl&&"XMLHttpRequest"===H.corsMetadata.corsType&&H.fireCORS(i,n,e)},k._clearTimeout=function(e){null!=k._timeout&&k._timeout[e]&&(clearTimeout(k._timeout[e]),k._timeout[e]=0)},k._settingsDigest=0,k._getSettingsDigest=function(){if(!k._settingsDigest){var e=k.version;k.audienceManagerServer&&(e+="|"+k.audienceManagerServer),k.audienceManagerServerSecure&&(e+="|"+k.audienceManagerServerSecure),k._settingsDigest=k._hash(e)}return k._settingsDigest},k._readVisitorDone=!1,k._readVisitor=function(){if(!k._readVisitorDone){k._readVisitorDone=!0;var e,t,n,i,a,r,s=k._getSettingsDigest(),o=!1,l=k.cookieRead(k.cookieName),c=new Date;if(null==k._fields&&(k._fields={}),l&&"T"!==l)for((l=l.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(l[0],10)!==s&&(o=!0),l.shift()),l.length%2==1&&l.pop(),e=0;e<l.length;e+=2)n=(t=l[e].split("-"))[0],i=l[e+1],t.length>1?(a=parseInt(t[1],10),r=t[1].indexOf("s")>0):(a=0,r=!1),o&&(n===V&&(i=""),a>0&&(a=c.getTime()/1e3-60)),n&&i&&(k._setField(n,i,1),a>0&&(k._fields["expire"+n]=a+(r?"s":""),(c.getTime()>=1e3*a||r&&!k.cookieRead(k.sessionCookieName))&&(k._fieldsExpired||(k._fieldsExpired={}),k._fieldsExpired[n]=!0)));!k._getField(x)&&U.isTrackingServerPopulated()&&((l=k.cookieRead("s_vi"))&&((l=l.split("|")).length>1&&l[0].indexOf("v1")>=0&&((e=(i=l[1]).indexOf("["))>=0&&(i=i.substring(0,e)),i&&i.match(h.VALID_VISITOR_ID_REGEX)&&k._setField(x,i))))}},k._appendVersionTo=function(e){var t="vVersion|"+k.version,n=e?k._getCookieVersion(e):null;return n?u.areVersionsDifferent(n,k.version)&&(e=e.replace(h.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},k._writeVisitor=function(){var e,t,n=k._getSettingsDigest();for(e in k._fields)N(e)&&k._fields[e]&&"expire"!==e.substring(0,6)&&(t=k._fields[e],n+=(n?"|":"")+e+(k._fields["expire"+e]?"-"+k._fields["expire"+e]:"")+"|"+t);n=k._appendVersionTo(n),k.cookieWrite(k.cookieName,n,1)},k._getField=function(e,t){return null==k._fields||!t&&k._fieldsExpired&&k._fieldsExpired[e]?null:k._fields[e]},k._setField=function(e,t,n){null==k._fields&&(k._fields={}),k._fields[e]=t,n||k._writeVisitor()},k._getFieldList=function(e,t){var n=k._getField(e,t);return n?n.split("*"):null},k._setFieldList=function(e,t,n){k._setField(e,t?t.join("*"):"",n)},k._getFieldMap=function(e,t){var n=k._getFieldList(e,t);if(n){var i,a={};for(i=0;i<n.length;i+=2)a[n[i]]=n[i+1];return a}return null},k._setFieldMap=function(e,t,n){var i,a=null;if(t)for(i in a=[],t)N(i)&&(a.push(i),a.push(t[i]));k._setFieldList(e,a,n)},k._setFieldExpire=function(e,t,n){var i=new Date;i.setTime(i.getTime()+1e3*t),null==k._fields&&(k._fields={}),k._fields["expire"+e]=Math.floor(i.getTime()/1e3)+(n?"s":""),t<0?(k._fieldsExpired||(k._fieldsExpired={}),k._fieldsExpired[e]=!0):k._fieldsExpired&&(k._fieldsExpired[e]=!1),n&&(k.cookieRead(k.sessionCookieName)||k.cookieWrite(k.sessionCookieName,"1"))},k._findVisitorID=function(e){return e&&("object"==typeof e&&(e=e.d_mid?e.d_mid:e.visitorID?e.visitorID:e.id?e.id:e.uuid?e.uuid:""+e),e&&("NOTARGET"===(e=e.toUpperCase())&&(e=R)),e&&(e===R||e.match(h.VALID_VISITOR_ID_REGEX))||(e="")),e},k._setFields=function(e,t){if(k._clearTimeout(e),null!=k._loading&&(k._loading[e]=!1),$.fieldGroupObj[e]&&$.setState(e,!1),e===I){!0!==$.isClientSideMarketingCloudVisitorID&&($.isClientSideMarketingCloudVisitorID=!1);var n=k._getField(T);if(!n||k.overwriteCrossDomainMCIDAndAID){if(!(n="object"==typeof t&&t.mid?t.mid:k._findVisitorID(t))){if(k._use1stPartyMarketingCloudServer&&!k.tried1stPartyMarketingCloudServer)return k.tried1stPartyMarketingCloudServer=!0,void k.getAnalyticsVisitorID(null,!1,!0);n=k._generateLocalMID()}k._setField(T,n)}n&&n!==R||(n=""),"object"==typeof t&&((t.d_region||t.dcs_region||t.d_blob||t.blob)&&k._setFields(j,t),k._use1stPartyMarketingCloudServer&&t.mid&&k._setFields(M,{id:t.id})),k._callAllCallbacks(T,[n])}if(e===j&&"object"==typeof t){var i=604800;null!=t.id_sync_ttl&&t.id_sync_ttl&&(i=parseInt(t.id_sync_ttl,10));var a=B.getRegionAndCheckIfChanged(t,i);k._callAllCallbacks(F,[a]);var r=k._getField(O);(t.d_blob||t.blob)&&((r=t.d_blob)||(r=t.blob),k._setFieldExpire(O,i),k._setField(O,r)),r||(r=""),k._callAllCallbacks(O,[r]),!t.error_msg&&k._newCustomerIDsHash&&k._setField(V,k._newCustomerIDsHash)}if(e===M){var s=k._getField(x);s&&!k.overwriteCrossDomainMCIDAndAID||((s=k._findVisitorID(t))?s!==R&&k._setFieldExpire(O,-1):s=R,k._setField(x,s)),s&&s!==R||(s=""),k._callAllCallbacks(x,[s])}if(k.idSyncDisableSyncs||k.disableIdSyncs)B.idCallNotProcesssed=!0;else{B.idCallNotProcesssed=!1;var o={};o.ibs=t.ibs,o.subdomain=t.subdomain,B.processIDCallData(o)}var l,c;t===Object(t)&&(k.isAllowed()&&(l=k._getField(P)),l||(l=R,t.d_optout&&t.d_optout instanceof Array&&(l=t.d_optout.join(",")),c=parseInt(t.d_ottl,10),isNaN(c)&&(c=7200),k._setFieldExpire(P,c,!0),k._setField(P,l)),k._callAllCallbacks(P,[l]))},k._loading=null,k._getRemoteField=function(e,t,n,i,a){var r,s="",o=U.isFirstPartyAnalyticsVisitorIDCall(e),l={MCAAMLH:!0,MCAAMB:!0};if(k.isAllowed())if(k._readVisitor(),s=k._getField(e,!0===l[e]),function(){return(!s||k._fieldsExpired&&k._fieldsExpired[e])&&(!k.disableThirdPartyCalls||o)}()){if(e===T||e===P?r=I:e===F||e===O?r=j:e===x&&(r=M),r)return!t||null!=k._loading&&k._loading[r]||(null==k._loading&&(k._loading={}),k._loading[r]=!0,k._loadData(r,t,function(t){if(!k._getField(e)){t&&$.setState(r,!0);var n="";e===T?n=k._generateLocalMID():r===j&&(n={error_msg:"timeout"}),k._setFields(r,n)}},a)),k._registerCallback(e,n),s||(t||k._setFields(r,{id:R}),"")}else s||(e===T?(k._registerCallback(e,n),s=k._generateLocalMID(),k.setMarketingCloudVisitorID(s)):e===x?(k._registerCallback(e,n),s="",k.setAnalyticsVisitorID(s)):(s="",i=!0));return e!==T&&e!==x||s!==R||(s="",i=!0),n&&i&&k._callCallback(n,[s]),s},k._setMarketingCloudFields=function(e){k._readVisitor(),k._setFields(I,e)},k._mapCustomerIDs=function(e){k.getAudienceManagerBlob(e,!0)},k._setAnalyticsFields=function(e){k._readVisitor(),k._setFields(M,e)},k._setAudienceManagerFields=function(e){k._readVisitor(),k._setFields(j,e)},k._getAudienceManagerURLData=function(e){var t=k.audienceManagerServer,n="",i=k._getField(T),a=k._getField(O,!0),r=k._getField(x),s=r&&r!==R?"&d_cid_ic=AVID%01"+encodeURIComponent(r):"";if(k.loadSSL&&k.audienceManagerServerSecure&&(t=k.audienceManagerServerSecure),t){var o,l,c=k.getCustomerIDs();if(c)for(o in c)N(o)&&(l=c[o],s+="&d_cid_ic="+encodeURIComponent(o)+"%01"+encodeURIComponent(l.id?l.id:"")+(l.authState?"%01"+l.authState:""));e||(e="_setAudienceManagerFields");var d="http"+(k.loadSSL?"s":"")+"://"+t+"/id",u="d_visid_ver="+k.version+"&d_rtbd=json&d_ver=2"+(!i&&k._use1stPartyMarketingCloudServer?"&d_verify=1":"")+"&d_orgid="+encodeURIComponent(k.marketingCloudOrgID)+"&d_nsid="+(k.idSyncContainerID||0)+(i?"&d_mid="+encodeURIComponent(i):"")+(k.idSyncDisable3rdPartySyncing||k.disableThirdPartyCookies?"&d_coppa=true":"")+(!0===D?"&d_coop_safe=1":!1===D?"&d_coop_unsafe=1":"")+(a?"&d_blob="+encodeURIComponent(a):"")+s,m=["s_c_il",k._in,e];return{url:n=d+"?"+u+"&d_cb=s_c_il%5B"+k._in+"%5D."+e,corsUrl:d+"?"+u,callback:m}}return{url:n}},k.appendVisitorIDsTo=function(e){try{var t=[[T,k._getField(T)],[x,k._getField(x)],[E,k.marketingCloudOrgID]];return k._addQuerystringParam(e,h.ADOBE_MC,y(t))}catch(t){return e}},k.appendSupplementalDataIDTo=function(e,t){if(!(t=t||k.getSupplementalDataID(U.generateRandomString(),!0)))return e;try{var n=y([["SDID",t],[E,k.marketingCloudOrgID]]);return k._addQuerystringParam(e,h.ADOBE_MC_SDID,n)}catch(t){return e}};var U={parseHash:function(e){var t=e.indexOf("#");return t>0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){var i=e.split("&");return n=null!=n?n:i.length,i.splice(n,0,t),i.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){return e===x&&(t||(t=k.trackingServer),n||(n=k.trackingServerSecure),!("string"!=typeof(i=k.loadSSL?n:t)||!i.length)&&i.indexOf("2o7.net")<0&&i.indexOf("omtrdc.net")<0);var i},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+(k.cookieDomain?" domain="+k.cookieDomain+";":"")},isTrackingServerPopulated:function(){return!!k.trackingServer||!!k.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e},{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(Math.random()*n.length)];return t},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e},pluck:function(e,t){return t.reduce(function(t,n){return e[n]&&(t[n]=e[n]),t},Object.create(null))}};k._helpers=U;var B=f(k,w);k._destinationPublishing=B,k.timeoutMetricsLog=[];var q,$={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case I:!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case M:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case j:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};k.isClientSideMarketingCloudVisitorID=function(){return $.isClientSideMarketingCloudVisitorID},k.MCIDCallTimedOut=function(){return $.MCIDCallTimedOut},k.AnalyticsIDCallTimedOut=function(){return $.AnalyticsIDCallTimedOut},k.AAMIDCallTimedOut=function(){return $.AAMIDCallTimedOut},k.idSyncGetOnPageSyncInfo=function(){return k._readVisitor(),k._getField(A)},k.idSyncByURL=function(e){var t=_(e||{});if(t.error)return t.error;var n,i,a=e.url,r=encodeURIComponent,s=B;return a=a.replace(/^https:/,"").replace(/^http:/,""),n=c.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),i=["ibs",r(e.dpid),"img",r(a),t.ttl,"",n],s.addMessage(i.join("|")),s.requestToProcess(),"Successfully queued"},k.idSyncByDataSource=function(e){return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,k.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},k._getCookieVersion=function(e){e=e||k.cookieRead(k.cookieName);var t=h.VERSION_REGEX.exec(e);return t&&t.length>1?t[1]:null},k._resetAmcvCookie=function(e){var t=k._getCookieVersion();t&&!u.isLessThan(t,e)||U.removeCookie(k.cookieName)},k.setAsCoopSafe=function(){D=!0},k.setAsCoopUnsafe=function(){D=!1},k.init=function(){function n(){if(t&&"object"==typeof t){for(var e in k.configs=Object.create(null),t)N(e)&&(k[e]=t[e],k.configs[e]=t[e]);k.idSyncContainerID=k.idSyncContainerID||0,D="boolean"==typeof k.isCoopSafe?k.isCoopSafe:U.parseBoolean(k.isCoopSafe),k.resetBeforeVersion&&k._resetAmcvCookie(k.resetBeforeVersion),k._attemptToPopulateIdsFromUrl(),k._attemptToPopulateSdidFromUrl(),k._readVisitor();var n=k._getField(L),i=Math.ceil((new Date).getTime()/h.MILLIS_PER_DAY);k.idSyncDisableSyncs||k.disableIdSyncs||!B.canMakeSyncIDCall(n,i)||(k._setFieldExpire(O,-1),k._setField(L,i)),k.getMarketingCloudVisitorID(),k.getAudienceManagerLocationHint(),k.getAudienceManagerBlob(),k._mergeServerState(k.serverState)}else k._attemptToPopulateIdsFromUrl(),k._attemptToPopulateSdidFromUrl()}function i(){if(!k.idSyncDisableSyncs&&!k.disableIdSyncs){B.checkDPIframeSrc();var e=function(){var e=B;e.readyToAttachIframe()&&e.attachIframe()};C.addEventListener("load",function(){w.windowLoaded=!0,e()});try{m.receiveMessage(function(e){B.receiveMessage(e.data)},B.iframeHost)}catch(e){}}}function a(){k.whitelistIframeDomains&&h.POST_MESSAGE_ENABLED&&(k.whitelistIframeDomains=k.whitelistIframeDomains instanceof Array?k.whitelistIframeDomains:[k.whitelistIframeDomains],k.whitelistIframeDomains.forEach(function(t){var n=new r(e,t),i=s(k,n);m.receiveMessage(i,t)}))}n(),i(),a()}};v.getInstance=function(e,t){function i(){var t=n.s_c_il;if(t)for(var i=0;i<t.length;i++){var a=t[i];if(a&&"Visitor"===a._c&&a.marketingCloudOrgID===e)return a}}function r(){try{return n.self!==n.parent}catch(e){return!0}}function s(){n.s_c_il.splice(--n.s_c_in,1)}function o(e){var t="TEST_AMCV_COOKIE";return e.cookieWrite(t,"T",1),"T"===e.cookieRead(t)&&(e._helpers.removeCookie(t),!0)}if(!e)throw new Error("Visitor requires Adobe Marketing Cloud Org ID.");e.indexOf("@")<0&&(e+="@AdobeOrg");var l=i();if(l)return l;var d=e.split("").reverse().join(""),u=new v(e,null,d);s();var m=c.getIeVersion();if("number"==typeof m&&m<10)return u._helpers.replaceMethodsWithFunction(u,function(){});var p=r()&&!o(u)&&n.parent?new a(e,t,u,n.parent):new v(e,t,d);return u=null,p.init(),p},i(),n.Visitor=v,t.exports=v}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./child/ChildVisitor":2,"./child/Message":3,"./child/makeChildMessageListener":4,"./units/crossDomain":8,"./units/makeCorsRequest":9,"./units/makeDestinationPublishing":10,"./units/version":11,"./utils/asyncParallelApply":12,"./utils/constants":14,"./utils/enums":15,"./utils/getDomain":16,"./utils/utils":18,"@adobe-mcid/visitor-js-shared/lib/ids/generateRandomID":19}],2:[function(e,t){(function(n){e("../utils/polyfills");var i=e("./strategies/LocalVisitor"),a=e("./strategies/ProxyVisitor"),r=e("./strategies/PlaceholderVisitor"),s=e("../utils/callbackRegistryFactory"),o=e("./Message"),l=e("../utils/enums").MESSAGES;t.exports=function(e,t,c,d){function u(e){Object.assign(_,e)}function m(e){Object.assign(_.state,e),_.callbackRegistry.executeAll(_.state)}function p(e){if(!w.isInvalid(e)){C=!1;var t=w.parse(e);_.setStateAndPublish(t.state)}}function g(e){!C&&k&&(C=!0,w.send(d,e))}function f(){var e=!0;u(new i(c._generateID)),_.getMarketingCloudVisitorID(),_.callbackRegistry.executeAll(_.state,e),n.removeEventListener("message",h)}function h(e){if(!w.isInvalid(e)){var t=w.parse(e);C=!1,n.clearTimeout(this.timeout),n.removeEventListener("message",h),u(new a(_)),n.addEventListener("message",p),_.setStateAndPublish(t.state),_.callbackRegistry.hasCallbacks()&&g(l.GETSTATE)}}function v(){var e=250;k&&postMessage?(n.addEventListener("message",h),g(l.HANDSHAKE),this.timeout=setTimeout(f,e)):f()}function b(){n.s_c_in||(n.s_c_il=[],n.s_c_in=0),_._c="Visitor",_._il=n.s_c_il,_._in=n.s_c_in,_._il[_._in]=_,n.s_c_in++}function y(){function e(e){0!==e.indexOf("_")&&"function"==typeof c[e]&&(_[e]=function(){})}Object.keys(c).forEach(e),_.getSupplementalDataID=c.getSupplementalDataID}var _=this,k=t.whitelistParentDomain;_.state={},_.version=c.version,_.marketingCloudOrgID=e;var C=!1,w=new o(e,k);_.callbackRegistry=s(),_.init=function(){b(),y(),u(new r(_)),v()},_.findField=function(e,t){if(_.state[e])return t(_.state[e]),_.state[e]},_.messageParent=g,_.setStateAndPublish=m}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/callbackRegistryFactory":13,"../utils/enums":15,"../utils/polyfills":17,"./Message":3,"./strategies/LocalVisitor":5,"./strategies/PlaceholderVisitor":6,"./strategies/ProxyVisitor":7}],3:[function(e,t){var n=e("../utils/enums").MESSAGES,i={0:"prefix",1:"orgID",2:"state"};t.exports=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach(function(e,n){if(void 0!==e){var a=i[n];t[a]=2!==n?e:JSON.parse(e)}}),t}catch(e){}},this.isInvalid=function(i){var a=this.parse(i);if(!a||Object.keys(a).length<2)return!0;var r=e!==a.orgID,s=!t||i.origin!==t,o=-1===Object.keys(n).indexOf(a.prefix);return r||s||o},this.send=function(n,i,a){var r=i+"|"+e;a&&a===Object(a)&&(r+="|"+JSON.stringify(a));try{n.postMessage(r,t)}catch(e){}}}},{"../utils/enums":15}],4:[function(e,t){var n=e("../utils/enums"),i=e("../utils/utils"),a=n.MESSAGES,r=n.ALL_APIS,s=n.ASYNC_API_MAP,o=n.FIELDGROUP_TO_FIELD;t.exports=function(e,t){function n(){var t={};return Object.keys(r).forEach(function(n){var a=r[n],s=e[a]();i.isValueEmpty(s)||(t[n]=s)}),t}function l(){var t=[];return e._loading&&Object.keys(e._loading).forEach(function(n){if(e._loading[n]){var i=o[n];t.push(i)}}),t.length?t:null}function c(t){return function n(){var i=l();if(i){var a=s[i[0]];e[a](n,!0)}else t()}}function d(e,i){var a=n();t.send(e,i,a)}function u(e){p(e),d(e,a.HANDSHAKE)}function m(e){c(function(){d(e,a.PARENTSTATE)})()}function p(n){function i(i){r.call(e,i),t.send(n,a.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}var r=e.setCustomerIDs;e.setCustomerIDs=i}return function(e){t.isInvalid(e)||(t.parse(e).prefix===a.HANDSHAKE?u:m)(e.source)}}},{"../utils/enums":15,"../utils/utils":18}],5:[function(e,t){var n=e("../../utils/enums").STATE_KEYS_MAP;t.exports=function(e){function t(){}function i(t,i){var a=this;return function(){var t=e(0,n.MCMID),r={};return r[n.MCMID]=t,a.setStateAndPublish(r),i(t),t}}this.getMarketingCloudVisitorID=function(e){e=e||t;var a=this.findField(n.MCMID,e),r=i.call(this,n.MCMID,e);return void 0!==a?a:r()}}},{"../../utils/enums":15}],6:[function(e,t){var n=e("../../utils/enums").ASYNC_API_MAP;t.exports=function(){Object.keys(n).forEach(function(e){this[n[e]]=function(t){this.callbackRegistry.add(e,t)}},this)}},{"../../utils/enums":15}],7:[function(e,t){var n=e("../../utils/enums"),i=n.MESSAGES,a=n.ASYNC_API_MAP,r=n.SYNC_API_MAP;t.exports=function(){function e(){}function t(e,t){var n=this;return function(){return n.callbackRegistry.add(e,t),n.messageParent(i.GETSTATE),""}}function n(n){this[a[n]]=function(i){i=i||e;var a=this.findField(n,i),r=t.call(this,n,i);return void 0!==a?a:r()}}function s(t){this[r[t]]=function(){return this.findField(t,e)||{}}}Object.keys(a).forEach(n,this),Object.keys(r).forEach(s,this)}},{"../../utils/enums":15}],8:[function(e,t){(function(e){var n=!!e.postMessage;t.exports={postMessage:function(e,t,i){var a=1;t&&(n?i.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(i.location=t.replace(/#.*$/,"")+"#"+ +new Date+a+++"&"+e))},receiveMessage:function(t,i){var a;try{n&&(t&&(a=function(e){return!("string"==typeof i&&e.origin!==i||"[object Function]"===Object.prototype.toString.call(i)&&!1===i(e.origin))&&void t(e)}),e.addEventListener?e[t?"addEventListener":"removeEventListener"]("message",a):e[t?"attachEvent":"detachEvent"]("onmessage",a))}catch(e){}}}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t){(function(e){t.exports=function(t){return{corsMetadata:(n="none",i=!0,"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?n="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(i=!1),Object.prototype.toString.call(e.HTMLElement).indexOf("Constructor")>0&&(i=!1)),{corsType:n,corsCookiesEnabled:i}),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new e[this.corsMetadata.corsType]},fireCORS:function(n,i){function a(t){var i;try{if((i=JSON.parse(t))!==Object(i))return void r.handleCORSError(n,null,"Response is not JSON")}catch(e){return void r.handleCORSError(n,e,"Error parsing response as JSON")}try{for(var a=n.callback,s=e,o=0;o<a.length;o++)s=s[a[o]];s(i)}catch(e){r.handleCORSError(n,e,"Error forming callback function")}}var r=this;i&&(n.loadErrorHandler=i);try{var s=this.getCORSInstance();s.open("get",n.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(s.withCredentials=!0,s.timeout=t.loadTimeout,s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onreadystatechange=function(){4===this.readyState&&200===this.status&&a(this.responseText)}),s.onerror=function(e){r.handleCORSError(n,e,"onerror")},s.ontimeout=function(e){r.handleCORSError(n,e,"ontimeout")},s.send(),t._log.requests.push(n.corsUrl)}catch(e){this.handleCORSError(n,e,"try-catch")}},handleCORSError:function(e,n,i){t.CORSErrors.push({corsData:e,error:n,description:i}),e.loadErrorHandler&&("ontimeout"===i?e.loadErrorHandler(!0):e.loadErrorHandler(!1))}};var n,i}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t){(function(n){var i=e("../utils/constants"),a=e("./crossDomain"),r=e("../utils/utils"),s="MCSYNCSOP",o="MCSYNCS",l="MCAAMLH";t.exports=function(e,t){var c=n.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,n="http://fast.",i="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(c.location.href);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(n=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=n+this.subdomain+".demdex.net/dest5.html"+i,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(c.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:i.POST_MESSAGE_ENABLED?null:100,jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,
readyToAttachIframe:function(){return!e.idSyncDisable3rdPartySyncing&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(i=c.createElement("iframe")).sandbox="allow-scripts allow-same-origin",i.title="Adobe ID Syncing iFrame",i.id=n.id,i.name=n.id+"_name",i.style.cssText="display: none; width: 0; height: 0;",i.src=n.url,n.newIframeCreated=!0,t(),c.body.appendChild(i)}function t(){i.addEventListener("load",function(){i.className="aamIframeLoaded",n.iframeHasLoaded=!0,n.requestToProcess()})}this.startedAttachingIframe=!0;var n=this,i=c.getElementById(this.id);i?"IFRAME"!==i.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==i.className?(this.originalIframeHasLoadedAlready=!1,t()):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=i,this.requestToProcess())):e(),this.iframe=i},requestToProcess:function(t){function n(){r.jsonForComparison.push(t),r.jsonWaiting.push(t),r.processSyncOnPage(t)}var a,r=this;if(t===Object(t)&&t.ibs)if(a=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var s,o,l,c=!1;for(s=0,o=this.jsonForComparison.length;s<o;s++)if(l=this.jsonForComparison[s],a===JSON.stringify(l.ibs||[])){c=!0;break}c?this.jsonDuplicates.push(t):n()}else n();if((this.receivedThirdPartyCookiesNotification||!i.POST_MESSAGE_ENABLED||this.iframeHasLoaded)&&this.jsonWaiting.length){var d=this.jsonWaiting.shift();this.process(d),this.requestToProcess()}!e.idSyncDisableSyncs&&this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){r.messageSendingInterval=i.POST_MESSAGE_ENABLED?null:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},getRegionAndCheckIfChanged:function(t,n){var i=e._getField(l),a=t.d_region||t.dcs_region;return i?a&&(e._setFieldExpire(l,n),e._setField(l,a),parseInt(i,10)!==a&&(this.regionChanged=!0,this.timesRegionChanged++,e._setField(s,""),e._setField(o,""),i=a)):(i=a)&&(e._setFieldExpire(l,n),e._setField(l,i)),i||(i=""),i},processSyncOnPage:function(e){var t,n,i,a;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(i=0;i<n;i++)(a=t[i]).syncOnPage&&this.checkFirstPartyCookie(a,"","syncOnPage")},process:function(e){var t,n,i,a,s,o=encodeURIComponent,l="",c=!1;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(c=!0,i=0;i<n;i++)a=t[i],s=[o("ibs"),o(a.id||""),o(a.tag||""),r.encodeAndBuildRequest(a.url||[],","),o(a.ttl||""),"",l,a.fireURLSync?"true":"false"],a.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(s.join("|")):a.fireURLSync&&this.checkFirstPartyCookie(a,s.join("|")));c&&this.jsonProcessed.push(e)},checkFirstPartyCookie:function(t,n,a){var r="syncOnPage"===a,l=r?s:o;e._readVisitor();var c,d,u=e._getField(l),m=!1,p=!1,g=Math.ceil((new Date).getTime()/i.MILLIS_PER_DAY);u?(c=u.split("*"),m=(d=this.pruneSyncData(c,t.id,g)).dataPresent,p=d.dataValid,m&&p||this.fireSync(r,t,n,c,l,g)):(c=[],this.fireSync(r,t,n,c,l,g))},pruneSyncData:function(e,t,n){var i,a,r,s=!1,o=!1;for(a=0;a<e.length;a++)i=e[a],r=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(s=!0,n<r?o=!0:(e.splice(a,1),a--)):n>=r&&(e.splice(a,1),a--);return{dataPresent:s,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,n,i,a,r,s){var o=this;if(t){if("img"===n.tag){var l,c,d,u,m=n.url,p=e.loadSSL?"https:":"http:";for(l=0,c=m.length;l<c;l++){d=m[l],u=/^\/\//.test(d);var g=new Image;g.addEventListener("load",function(t,n,i,a){return function(){o.onPagePixels[t]=null,e._readVisitor();var s,l,c,d,u=e._getField(r),m=[];if(u)for(l=0,c=(s=u.split("*")).length;l<c;l++)(d=s[l]).match("^"+n.id+"-")||m.push(d);o.setSyncTrackingData(m,n,i,a)}}(this.onPagePixels.length,n,r,s)),g.src=(u?p:"")+d,this.onPagePixels.push(g)}}}else this.addMessage(i),this.setSyncTrackingData(a,n,r,s)},addMessage:function(t){var n=encodeURIComponent(e._enableErrorReporting?"---destpub-debug---":"---destpub---");this.messages.push((i.POST_MESSAGE_ENABLED?"":n)+t)},setSyncTrackingData:function(t,n,i,a){t.push(n.id+"-"+(a+Math.ceil(n.ttl/60/24))),this.manageSyncsSize(t),e._setField(i,t.join("*"))},sendMessages:function(){var e,t=this,n="",a=encodeURIComponent;this.regionChanged&&(n=a("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length?i.POST_MESSAGE_ENABLED?(e=n+a("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[],this.sendingMessages=!1):(e=this.messages.shift(),this.postMessage(n+e),setTimeout(function(){t.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1},postMessage:function(e){a.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t,n=/^---destpub-to-parent---/;"string"==typeof e&&n.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(n,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))},processIDCallData:function(n){(null==this.url||n.subdomain&&"nosubdomainreturned"===this.subdomain)&&("string"==typeof e._subdomain&&e._subdomain.length?this.subdomain=e._subdomain:this.subdomain=n.subdomain||"",this.url=this.getUrl()),n.ibs instanceof Array&&n.ibs.length&&(this.doAttachIframe=!0),this.readyToAttachIframe()&&(e.idSyncAttachIframeOnWindowLoad?(t.windowLoaded||"complete"===c.readyState||"loaded"===c.readyState)&&this.attachIframe():this.attachIframeASAP()),"function"==typeof e.idSyncIDCallResult?e.idSyncIDCallResult(n):this.requestToProcess(n),"function"==typeof e.idSyncAfterIDCallResult&&e.idSyncAfterIDCallResult(n)},canMakeSyncIDCall:function(t,n){return e._forceSyncIDCall||!t||n-t>i.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){function e(){t.startedAttachingIframe||(c.body?t.attachIframe():setTimeout(e,30))}var t=this;e()}}}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../utils/constants":14,"../utils/utils":18,"./crossDomain":8}],11:[function(e,t){function n(e){for(var t=/^\d+$/,n=0,i=e.length;n<i;n++)if(!t.test(e[n]))return!1;return!0}function i(e,t){for(;e.length<t.length;)e.push("0");for(;t.length<e.length;)t.push("0")}function a(e,t){for(var n=0;n<e.length;n++){var i=parseInt(e[n],10),a=parseInt(t[n],10);if(i>a)return 1;if(a>i)return-1}return 0}function r(e,t){if(e===t)return 0;var r=e.toString().split("."),s=t.toString().split(".");return n(r.concat(s))?(i(r,s),a(r,s)):NaN}t.exports={compare:r,isLessThan:function(e,t){return r(e,t)<0},areVersionsDifferent:function(e,t){return 0!==r(e,t)},isGreaterThan:function(e,t){return r(e,t)>0},isEqual:function(e,t){return 0===r(e,t)}}},{}],12:[function(e,t){t.exports=function(e,t){function n(e){return function(n){i[e]=n,++a===r&&t(i)}}var i={},a=0,r=Object.keys(e).length;Object.keys(e).forEach(function(t){var i=e[t];if(i.fn){var a=i.args||[];a.unshift(n(t)),i.fn.apply(i.context||null,a)}})}},{}],13:[function(e,t){function n(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1;return function(){this.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!i.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach(function(t){var n=void 0!==e[t]?e[t]:"";this.execute(t,n)},this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}var i=e("./utils");t.exports=n},{"./utils":18}],14:[function(e,t){(function(e){t.exports={POST_MESSAGE_ENABLED:!!e.postMessage,DAYS_BETWEEN_SYNC_ID_CALLS:1,MILLIS_PER_DAY:864e5,ADOBE_MC:"adobe_mc",ADOBE_MC_SDID:"adobe_mc_sdid",VALID_VISITOR_ID_REGEX:/^[0-9a-fA-F\-]+$/,ADOBE_MC_TTL_IN_MIN:5,VERSION_REGEX:/vVersion\|((\d+\.)?(\d+\.)?(\*|\d+))(?=$|\|)/}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){n.MESSAGES={HANDSHAKE:"HANDSHAKE",GETSTATE:"GETSTATE",PARENTSTATE:"PARENTSTATE"},n.STATE_KEYS_MAP={MCMID:"MCMID",MCAID:"MCAID",MCAAMB:"MCAAMB",MCAAMLH:"MCAAMLH",MCOPTOUT:"MCOPTOUT",CUSTOMERIDS:"CUSTOMERIDS"},n.ASYNC_API_MAP={MCMID:"getMarketingCloudVisitorID",MCAID:"getAnalyticsVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut"},n.SYNC_API_MAP={CUSTOMERIDS:"getCustomerIDs"},n.ALL_APIS={MCMID:"getMarketingCloudVisitorID",MCAAMB:"getAudienceManagerBlob",MCAAMLH:"getAudienceManagerLocationHint",MCOPTOUT:"getOptOut",MCAID:"getAnalyticsVisitorID",CUSTOMERIDS:"getCustomerIDs"},n.FIELDGROUP_TO_FIELD={MC:"MCMID",A:"MCAID",AAM:"MCAAMB"},n.FIELDS={MCMID:"MCMID",MCOPTOUT:"MCOPTOUT",MCAID:"MCAID",MCAAMLH:"MCAAMLH",MCAAMB:"MCAAMB"},n.AUTH_STATE={UNKNOWN:0,AUTHENTICATED:1,LOGGED_OUT:2},n.OPT_OUT={GLOBAL:"global"}},{}],16:[function(e,t){(function(e){t.exports=function(t){var n;if(!t&&e.location&&(t=e.location.hostname),n=t)if(/^[0-9.]+$/.test(n))n="";else{var i=",ac,ad,ae,af,ag,ai,al,am,an,ao,aq,ar,as,at,au,aw,ax,az,ba,bb,be,bf,bg,bh,bi,bj,bm,bo,br,bs,bt,bv,bw,by,bz,ca,cc,cd,cf,cg,ch,ci,cl,cm,cn,co,cr,cu,cv,cw,cx,cz,de,dj,dk,dm,do,dz,ec,ee,eg,es,et,eu,fi,fm,fo,fr,ga,gb,gd,ge,gf,gg,gh,gi,gl,gm,gn,gp,gq,gr,gs,gt,gw,gy,hk,hm,hn,hr,ht,hu,id,ie,im,in,io,iq,ir,is,it,je,jo,jp,kg,ki,km,kn,kp,kr,ky,kz,la,lb,lc,li,lk,lr,ls,lt,lu,lv,ly,ma,mc,md,me,mg,mh,mk,ml,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,na,nc,ne,nf,ng,nl,no,nr,nu,nz,om,pa,pe,pf,ph,pk,pl,pm,pn,pr,ps,pt,pw,py,qa,re,ro,rs,ru,rw,sa,sb,sc,sd,se,sg,sh,si,sj,sk,sl,sm,sn,so,sr,st,su,sv,sx,sy,sz,tc,td,tf,tg,th,tj,tk,tl,tm,tn,to,tp,tr,tt,tv,tw,tz,ua,ug,uk,us,uy,uz,va,vc,ve,vg,vi,vn,vu,wf,ws,yt,",a=n.split("."),r=a.length-1,s=r-1;if(r>1&&a[r].length<=2&&(2===a[r-1].length||i.indexOf(","+a[r]+",")<0)&&s--,s>0)for(n="";r>=s;)n=a[r]+(n?".":"")+n,r--}return n}}).call(this,"undefined"!=typeof window&&"undefined"!=typeof global&&window.global===global?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(){Object.assign=Object.assign||function(e){for(var t,n,i=1;i<arguments.length;++i)for(t in n=arguments[i])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e}},{}],18:[function(e,t,n){n.isObjectEmpty=function(e){return e===Object(e)&&0===Object.keys(e).length},n.isValueEmpty=function(e){return""===e||n.isObjectEmpty(e)},n.getIeVersion=function(){if(document.documentMode)return document.documentMode;for(var e=7;e>4;e--){var t=document.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e;t=null}return null},n.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)}},{}],19:[function(e,t){t.exports=function(e){var t,n,i="0123456789",a="",r="",s=8,o=10,l=10;if(1==e){for(i+="ABCDEF",t=0;16>t;t++)n=Math.floor(Math.random()*s),a+=i.substring(n,n+1),n=Math.floor(Math.random()*s),r+=i.substring(n,n+1),s=16;return a+"-"+r}for(t=0;19>t;t++)n=Math.floor(Math.random()*o),a+=i.substring(n,n+1),0===t&&9==n?o=3:(1==t||2==t)&&10!=o&&2>n?o=10:2<t&&(o=10),n=Math.floor(Math.random()*l),r+=i.substring(n,n+1),0===t&&9==n?l=3:(1==t||2==t)&&10!=l&&2>n?l=10:2<t&&(l=10);return a+r}},{}]},{},[1]),
// All code and conventions are protected by copyright
function(t,n,r){function s(){var e=P.filter(P.rules,function(e){return 0===e.event.indexOf("dataelementchange")});this.dataElementsNames=P.map(e,function(e){return e.event.match(/dataelementchange\((.*)\)/i)[1]},this),this.initPolling()}function o(){P.addEventHandler(t,"orientationchange",o.orientationChange)}function l(){this.defineEvents(),this.visibilityApiHasPriority=!0,n.addEventListener?this.setVisibilityApiPriority(!1):this.attachDetachOlderEventListeners(!0,n,"focusout");P.bindEvent("aftertoolinit",function(){P.fireEvent(P.visibility.isHidden()?"tabblur":"tabfocus")})}function c(){this.rules=P.filter(P.rules,function(e){return"elementexists"===e.event})}function d(){this.rules=P.filter(P.rules,function(e){return"videoplayed"===e.event.substring(0,11)}),this.eventHandler=P.bind(this.onUpdateTime,this)}function u(e){e=e||P.rules,this.rules=P.filter(e,function(e){return"inview"===e.event}),this.elements=[],this.eventHandler=P.bind(this.track,this),P.addEventHandler(t,"scroll",this.eventHandler),P.addEventHandler(t,"load",this.eventHandler)}function m(){P.getToolsByType("nielsen").length>0&&P.domReady(P.bind(this.initialize,this))}function p(){var e=this.eventRegex=/^hover\(([0-9]+)\)$/,t=this.rules=[];P.each(P.rules,function(n){n.event.match(e)&&t.push([Number(n.event.match(e)[1]),n.selector])})}function f(e){this.delay=250,this.FB=e,P.domReady(P.bind(function(){P.poll(P.bind(this.initialize,this),this.delay,8)},this))}function h(e){P.domReady(P.bind(function(){this.twttr=e||t.twttr,this.initialize()},this))}function v(){this.lastURL=P.URL(),this._fireIfURIChanged=P.bind(this.fireIfURIChanged,this),this._onPopState=P.bind(this.onPopState,this),this._onHashChange=P.bind(this.onHashChange,this),this._pushState=P.bind(this.pushState,this),this._replaceState=P.bind(this.replaceState,this),this.initialize()}function b(e){P.BaseTool.call(this,e),this.defineListeners(),this.beaconMethod="plainBeacon",this.adapt=new b.DataAdapters,this.dataProvider=new b.DataProvider.Aggregate}function y(e){P.BaseTool.call(this,e),this.name=e.name||"VisitorID",this.initialize()}function _(e){P.BaseTool.call(this,e),this.varBindings={},this.events=[],this.products=[],this.customSetupFuns=[]}function C(){P.BaseTool.call(this),this.asyncScriptCallbackQueue=[],this.argsForBlockingScripts=[]}function w(e){P.BaseTool.call(this,e),this.styleElements={},this.targetPageParamsStore={}}function S(e){P.BaseTool.call(this,e),this.name=e.name||"Basic"}function D(e){P.BaseTool.call(this,e)}function I(e){P.BaseTool.call(this,e)}var T,E,V,A=Object.prototype.toString,L=t._satellite&&t._satellite.override,P={initialized:!1,$data:function(e,t,n){if(e){var i="__satellite__",a=P.dataCache,s=e[i];s||(s=e[i]=P.uuid++);var o=a[s];if(o||(o=a[s]={}),n===r)return o[t];o[t]=n}},uuid:1,dataCache:{},keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},values:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},isArray:Array.isArray||function(e){return"[object Array]"===A.apply(e)},isObject:function(e){return null!=e&&!P.isArray(e)&&"object"==typeof e},isString:function(e){return"string"==typeof e},isNumber:function(e){return"[object Number]"===A.apply(e)&&!P.isNaN(e)},isNaN:function(e){return e!=e},isRegex:function(e){return e instanceof RegExp},isLinkTag:function(e){return!(!e||!e.nodeName||"a"!==e.nodeName.toLowerCase())},each:function(e,t,n){for(var i=0,a=e.length;i<a;i++)t.call(n,e[i],i,e)},map:function(e,t,n){for(var i=[],a=0,r=e.length;a<r;a++)i.push(t.call(n,e[a],a,e));return i},filter:function(e,t,n){for(var i=[],a=0,r=e.length;a<r;a++){var s=e[a];t.call(n,s,a,e)&&i.push(s)}return i},any:function(e,t,n){for(var i=0,a=e.length;i<a;i++){var r=e[i];if(t.call(n,r,i,e))return!0}return!1},every:function(e,t,n){for(var i=!0,a=0,r=e.length;a<r;a++){var s=e[a];i=i&&t.call(n,s,a,e)}return i},contains:function(e,t){return-1!==P.indexOf(e,t)},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=e.length;n--;)if(t===e[n])return n;return-1},find:function(e,t,n){if(!e)return null;for(var i=0,a=e.length;i<a;i++){var r=e[i];if(t.call(n,r,i,e))return r}return null},textMatch:function(e,t){if(null==t)throw new Error("Illegal Argument: Pattern is not present");return null!=e&&("string"==typeof t?e===t:t instanceof RegExp&&t.test(e))},stringify:function(e,t){if(t=t||[],P.isObject(e)){if(P.contains(t,e))return"<Cycle>";t.push(e)}if(P.isArray(e))return"["+P.map(e,function(e){return P.stringify(e,t)}).join(",")+"]";if(P.isString(e))return'"'+String(e)+'"';if(P.isObject(e)){var n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i+": "+P.stringify(e[i],t));return"{"+n.join(", ")+"}"}return String(e)},trim:function(e){return null==e?null:e.trim?e.trim():e.replace(/^ */,"").replace(/ *$/,"")},bind:function(e,t){return function(){return e.apply(t,arguments)}},throttle:function(e,t){var n=null;return function(){var i=this,a=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,a)},t)}},domReady:function(t){function i(e){for(p=1;e=r.shift();)e()}var a,r=[],s=!1,o=n,l=o.documentElement,c=l.doScroll,d="DOMContentLoaded",u="addEventListener",m="onreadystatechange",p=/^loade|^c/.test(o.readyState);return o[u]&&o[u](d,a=function(){o.removeEventListener(d,a,s),i()},s),c&&o.attachEvent(m,a=function(){/^c/.test(o.readyState)&&(o.detachEvent(m,a),i())}),t=c?function(n){self!=top?p?n():r.push(n):function(){try{l.doScroll("left")}catch(e){return setTimeout(function(){t(n)},50)}n()}()}:function(e){p?e():r.push(e)}}(),loadScript:function(e,t){var i=n.createElement("script");P.scriptOnLoad(e,i,t),i.src=e,n.getElementsByTagName("head")[0].appendChild(i)},scriptOnLoad:function(e,t,n){function i(e){e&&P.logError(e),n&&n(e)}"onload"in t?(t.onload=function(){i()},t.onerror=function(){i(new Error("Failed to load script "+e))}):"readyState"in t&&(t.onreadystatechange=function(){var e=t.readyState;"loaded"!==e&&"complete"!==e||(t.onreadystatechange=null,i())})},loadScriptOnce:function(e,t){P.loadedScriptRegistry[e]||P.loadScript(e,function(n){n||(P.loadedScriptRegistry[e]=!0),t&&t(n)})},loadedScriptRegistry:{},loadScriptSync:function(e){n.write?P.domReadyFired?P.notify('Cannot load sync the "'+e+'" script after DOM Ready.',1):(e.indexOf('"')>-1&&(e=encodeURI(e)),n.write('<script src="'+e+'"></script>')):P.notify('Cannot load sync the "'+e+'" script because "document.write" is not available',1)},pushAsyncScript:function(e){P.tools["default"].pushAsyncScript(e)},pushBlockingScript:function(e){P.tools["default"].pushBlockingScript(e)},addEventHandler:t.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)},removeEventHandler:t.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)},preventDefault:t.addEventListener?function(e){e.preventDefault()}:function(e){e.returnValue=!1},stopPropagation:function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},containsElement:function(e,t){return e.contains?e.contains(t):!!(16&e.compareDocumentPosition(t))},matchesCss:function(i){function a(e,t){var n=t.tagName;return!!n&&e.toLowerCase()===n.toLowerCase()}var r=i.matchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;return r?function(i,a){if(a===n||a===t)return!1;try{return r.call(a,i)}catch(e){return!1}}:i.querySelectorAll?function(t,n){if(!n.parentNode)return!1;if(t.match(/^[a-z]+$/i))return a(t,n);try{for(var i=n.parentNode.querySelectorAll(t),r=i.length;r--;)if(i[r]===n)return!0}catch(e){}return!1}:function(t,n){if(t.match(/^[a-z]+$/i))return a(t,n);try{return P.Sizzle.matches(t,[n]).length>0}catch(e){return!1}}}(n.documentElement),cssQuery:(T=n,T.querySelectorAll?function(t,n){var i;try{i=T.querySelectorAll(t)}catch(e){i=[]}n(i)}:function(t,n){if(P.Sizzle){var i;try{i=P.Sizzle(t)}catch(e){i=[]}n(i)}else P.sizzleQueue.push([t,n])}),hasAttr:function(e,t){return e.hasAttribute?e.hasAttribute(t):e[t]!==r},inherit:function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},toArray:function(){try{var t=Array.prototype.slice;return t.call(n.documentElement.childNodes,0)[0].nodeType,function(e){return t.call(e,0)}}catch(e){return function(e){for(var t=[],n=0,i=e.length;n<i;n++)t.push(e[n]);return t}}}(),equalsIgnoreCase:function(e,t){return null==e?null==t:null!=t&&String(e).toLowerCase()===String(t).toLowerCase()},poll:function(e,t,n){function i(){P.isNumber(n)&&a++>=n||e()||setTimeout(i,t)}var a=0;t=t||1e3,i()},escapeForHtml:function(e){return e?String(e).replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#x27;").replace(/\//g,"&#x2F;"):e}};P.availableTools={},P.availableEventEmitters=[],P.fireOnceEvents=["condition","elementexists"],P.initEventEmitters=function(){P.eventEmitters=P.map(P.availableEventEmitters,function(e){return new e})},P.eventEmitterBackgroundTasks=function(){P.each(P.eventEmitters,function(e){"backgroundTasks"in e&&e.backgroundTasks()})},P.initTools=function(e){var t={"default":new C},n=P.settings.euCookieName||"sat_track";for(var i in e)if(e.hasOwnProperty(i)){var a,r,s;if((a=e[i]).euCookie)if("true"!==P.readCookie(n))continue;if(!(r=P.availableTools[a.engine])){var o=[];for(var l in P.availableTools)P.availableTools.hasOwnProperty(l)&&o.push(l);throw new Error("No tool engine named "+a.engine+", available: "+o.join(",")+".")}(s=new r(a)).id=i,t[i]=s}return t},P.preprocessArguments=function(e,t,n,i,a){function r(e){return i&&P.isString(e)?e.toLowerCase():e}function s(e){var l={};for(var c in e)if(e.hasOwnProperty(c)){var d=e[c];P.isObject(d)?l[c]=s(d):P.isArray(d)?l[c]=o(d,i):l[c]=r(P.replace(d,t,n,a))}return l}function o(e){for(var i=[],a=0,o=e.length;a<o;a++){var l=e[a];P.isString(l)?l=r(P.replace(l,t,n)):l&&l.constructor===Object&&(l=s(l)),i.push(l)}return i}return e?o(e,i):e},P.execute=function(t,n,i,a){function r(r){var s=a[r||"default"];if(s)try{s.triggerCommand(t,n,i)}catch(e){P.logError(e)}}if(!_satellite.settings.hideActivity)if(a=a||P.tools,t.engine){var s=t.engine;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];l.settings&&l.settings.engine===s&&r(o)}}else t.tool instanceof Array?P.each(t.tool,function(e){r(e)}):r(t.tool)},P.Logger={outputEnabled:!1,messages:[],keepLimit:100,flushed:!1,LEVELS:[null,null,"log","info","warn","error"],message:function(e,t){var n=this.LEVELS[t]||"log";this.messages.push([n,e]),this.messages.length>this.keepLimit&&this.messages.shift(),this.outputEnabled&&this.echo(n,e)},getHistory:function(){return this.messages},clearHistory:function(){this.messages=[]},setOutputState:function(e){this.outputEnabled!=e&&(this.outputEnabled=e,e?this.flush():this.flushed=!1)},echo:function(e,n){t.console&&t.console[e]("SATELLITE: "+n)},flush:function(){this.flushed||(P.each(this.messages,function(e){!0!==e[2]&&(this.echo(e[0],e[1]),e[2]=!0)},this),this.flushed=!0)}},P.notify=P.bind(P.Logger.message,P.Logger),P.cleanText=function(e){return null==e?null:P.trim(e).replace(/\s+/g," ")},P.cleanText.legacy=function(e){return null==e?null:P.trim(e).replace(/\s{2,}/g," ").replace(/[^\000-\177]*/g,"")},P.text=function(e){return e.textContent||e.innerText},P.specialProperties={text:P.text,cleanText:function(e){return P.cleanText(P.text(e))}},P.getObjectProperty=function(e,t,n){for(var i,a=t.split("."),s=e,o=P.specialProperties,l=0,c=a.length;l<c;l++){if(null==s)return r;var d=a[l];if(n&&"@"===d.charAt(0))s=o[d.slice(1)](s);else if(s.getAttribute&&(i=d.match(/^getAttribute\((.+)\)$/))){var u=i[1];s=s.getAttribute(u)}else s=s[d]}return s},P.getToolsByType=function(e){if(!e)throw new Error("Tool type is missing");var t=[];for(var n in P.tools)if(P.tools.hasOwnProperty(n)){var i=P.tools[n];i.settings&&i.settings.engine===e&&t.push(i)}return t},P.setVar=function(){var e=P.data.customVars;if(null==e&&(P.data.customVars={},e=P.data.customVars),"string"==typeof arguments[0])e[arguments[0]]=arguments[1];else if(arguments[0]){var t=arguments[0];for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}},P.dataElementSafe=function(e,t){if(arguments.length>2){var n=arguments[2];"pageview"===t?P.dataElementSafe.pageviewCache[e]=n:"session"===t?P.setCookie("_sdsat_"+e,n):"visitor"===t&&P.setCookie("_sdsat_"+e,n,730)}else{if("pageview"===t)return P.dataElementSafe.pageviewCache[e];if("session"===t||"visitor"===t)return P.readCookie("_sdsat_"+e)}},P.dataElementSafe.pageviewCache={},P.realGetDataElement=function(e){var n;return e.selector?P.hasSelector&&P.cssQuery(e.selector,function(t){if(t.length>0){var i=t[0];"text"===e.property?n=i.innerText||i.textContent:e.property in i?n=i[e.property]:P.hasAttr(i,e.property)&&(n=i.getAttribute(e.property))}}):e.queryParam?n=e.ignoreCase?P.getQueryParamCaseInsensitive(e.queryParam):P.getQueryParam(e.queryParam):e.cookie?n=P.readCookie(e.cookie):e.jsVariable?n=P.getObjectProperty(t,e.jsVariable):e.customJS?n=e.customJS():e.contextHub&&(n=e.contextHub()),P.isString(n)&&e.cleanText&&(n=P.cleanText(n)),n},P.getDataElement=function(e,t,n){if(null==(n=n||P.dataElements[e]))return P.settings.undefinedVarsReturnEmpty?"":null;var i=P.realGetDataElement(n);return i===r&&n.storeLength?i=P.dataElementSafe(e,n.storeLength):i!==r&&n.storeLength&&P.dataElementSafe(e,n.storeLength,i),i||t||(i=n["default"]||""),P.isString(i)&&n.forceLowerCase&&(i=i.toLowerCase()),i},P.getVar=function(e,i,a){var s,o,l=P.data.customVars,c=a?a.target||a.srcElement:null,d={uri:P.URI(),protocol:n.location.protocol,hostname:n.location.hostname};if(P.dataElements&&e in P.dataElements)return P.getDataElement(e);if((o=d[e.toLowerCase()])===r)if("this."===e.substring(0,5))e=e.slice(5),o=P.getObjectProperty(i,e,!0);else if("event."===e.substring(0,6))e=e.slice(6),o=P.getObjectProperty(a,e);else if("target."===e.substring(0,7))e=e.slice(7),o=P.getObjectProperty(c,e);else if("window."===e.substring(0,7))e=e.slice(7),o=P.getObjectProperty(t,e);else if("param."===e.substring(0,6))e=e.slice(6),o=P.getQueryParam(e);else if(s=e.match(/^rand([0-9]+)$/)){var u=Number(s[1]),m=(Math.random()*(Math.pow(10,u)-1)).toFixed(0);o=Array(u-m.length+1).join("0")+m}else o=P.getObjectProperty(l,e);return o},P.getVars=function(e,t,n){var i={};return P.each(e,function(e){i[e]=P.getVar(e,t,n)}),i},P.replace=function(e,t,n,i){return"string"!=typeof e?e:e.replace(/%(.*?)%/g,function(e,a){var r=P.getVar(a,t,n);return null==r?P.settings.undefinedVarsReturnEmpty?"":e:i?P.escapeForHtml(r):r})},P.escapeHtmlParams=function(e){return e.escapeHtml=!0,e},P.searchVariables=function(e,t,n){if(!e||0===e.length)return"";for(var i=[],a=0,r=e.length;a<r;a++){var s=e[a],o=P.getVar(s,t,n);i.push(s+"="+escape(o))}return"?"+i.join("&")},P.fireRule=function(e,t,n){var i=e.trigger;if(i){for(var a=0,r=i.length;a<r;a++){var s=i[a];P.execute(s,t,n)}P.contains(P.fireOnceEvents,e.event)&&(e.expired=!0)}},P.isLinked=function(e){for(var t=e;t;t=t.parentNode)if(P.isLinkTag(t))return!0;return!1},P.firePageLoadEvent=function(e){for(var t=n.location,i={type:e,target:t},a=P.pageLoadRules,r=P.evtHandlers[i.type],s=a.length;s--;){var o=a[s];P.ruleMatches(o,i,t)&&(P.notify('Rule "'+o.name+'" fired.',1),P.fireRule(o,t,i))}for(var l in P.tools)if(P.tools.hasOwnProperty(l)){var c=P.tools[l];c.endPLPhase&&c.endPLPhase(e)}r&&P.each(r,function(e){e(i)})},P.track=function(e){e=e.replace(/^\s*/,"").replace(/\s*$/,"");for(var t=0;t<P.directCallRules.length;t++){var n=P.directCallRules[t];if(n.name===e)return P.notify('Direct call Rule "'+e+'" fired.',1),void P.fireRule(n,location,{type:e})}P.notify('Direct call Rule "'+e+'" not found.',1)},P.basePath=function(){return P.data.host?("https:"===n.location.protocol?"https://"+P.data.host.https:"http://"+P.data.host.http)+"/":this.settings.basePath},P.setLocation=function(e){t.location=e},P.parseQueryParams=function(e){var t=function(e){var t=e;try{t=decodeURIComponent(e)}catch(n){}return t};if(""===e||!1===P.isString(e))return{};0===e.indexOf("?")&&(e=e.substring(1));var n={},i=e.split("&");return P.each(i,function(e){(e=e.split("="))[1]&&(n[t(e[0])]=t(e[1]))}),n},P.getCaseSensitivityQueryParamsMap=function(e){var t=P.parseQueryParams(e),n={};for(var i in t)t.hasOwnProperty(i)&&(n[i.toLowerCase()]=t[i]);return{normal:t,caseInsensitive:n}},P.updateQueryParams=function(){P.QueryParams=P.getCaseSensitivityQueryParamsMap(t.location.search)},P.updateQueryParams(),P.getQueryParam=function(e){return P.QueryParams.normal[e]},P.getQueryParamCaseInsensitive=function(e){return P.QueryParams.caseInsensitive[e.toLowerCase()]},P.encodeObjectToURI=function(e){if(!1===P.isObject(e))return"";var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},P.readCookie=function(e){for(var t=e+"=",i=n.cookie.split(";"),a=0;a<i.length;a++){for(var s=i[a];" "==s.charAt(0);)s=s.substring(1,s.length);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return r},P.setCookie=function(e,t,i){var a;if(i){var r=new Date;r.setTime(r.getTime()+24*i*60*60*1e3),a="; expires="+r.toGMTString()}else a="";n.cookie=e+"="+t+a+"; path=/"},P.removeCookie=function(e){P.setCookie(e,"",-1)},P.getElementProperty=function(e,t){if("@"===t.charAt(0)){var n=P.specialProperties[t.substring(1)];if(n)return n(e)}return"innerText"===t?P.text(e):t in e?e[t]:e.getAttribute?e.getAttribute(t):r},P.propertiesMatch=function(e,t){if(e)for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],a=P.getElementProperty(t,n);if("string"==typeof i&&i!==a)return!1;if(i instanceof RegExp&&!i.test(a))return!1}return!0},P.isRightClick=function(e){var t;return e.which?t=3==e.which:e.button&&(t=2==e.button),t},P.ruleMatches=function(t,n,i,a){var r=t.condition,s=t.conditions,o=t.property,l=n.type,c=t.value,d=n.target||n.srcElement,u=i===d;if(t.event!==l&&("custom"!==t.event||t.customEvent!==l))return!1;if(!P.ruleInScope(t))return!1;if("click"===t.event&&P.isRightClick(n))return!1;if(t.isDefault&&a>0)return!1;if(t.expired)return!1;if("inview"===l&&n.inviewDelay!==t.inviewDelay)return!1;if(!u&&(!1===t.bubbleFireIfParent||0!==a&&!1===t.bubbleFireIfChildFired))return!1;if(t.selector&&!P.matchesCss(t.selector,i))return!1;if(!P.propertiesMatch(o,i))return!1;if(null!=c)if("string"==typeof c){if(c!==i.value)return!1}else if(!c.test(i.value))return!1;if(r)try{if(!r.call(i,n,d))return P.notify('Condition for rule "'+t.name+'" not met.',1),!1}catch(e){return P.notify('Condition for rule "'+t.name+'" not met. Error: '+e.message,1),!1}if(s){var m=P.find(s,function(a){try{return!a.call(i,n,d)}catch(e){return P.notify('Condition for rule "'+t.name+'" not met. Error: '+e.message,1),!0}});if(m)return P.notify("Condition "+m.toString()+' for rule "'+t.name+'" not met.',1),!1}return!0},P.evtHandlers={},P.bindEvent=function(e,t){var n=P.evtHandlers;n[e]||(n[e]=[]),n[e].push(t)},P.whenEvent=P.bindEvent,P.unbindEvent=function(e,t){var n=P.evtHandlers;if(n[e]){var i=P.indexOf(n[e],t);n[e].splice(i,1)}},P.bindEventOnce=function(e,t){var n=function(){P.unbindEvent(e,n),t.apply(null,arguments)};P.bindEvent(e,n)},P.isVMLPoisoned=function(t){if(!t)return!1;try{t.nodeName}catch(e){if("Attribute only valid on v:image"===e.message)return!0}return!1},P.handleEvent=function(e){if(!P.$data(e,"eventProcessed")){var t=e.type.toLowerCase(),n=e.target||e.srcElement,i=0,a=P.rules,r=(P.tools,P.evtHandlers[e.type]);if(P.isVMLPoisoned(n))P.notify("detected "+t+" on poisoned VML element, skipping.",1);else{r&&P.each(r,function(t){t(e)}),n&&n.nodeName?P.notify("detected "+t+" on "+n.nodeName,1):P.notify("detected "+t,1);for(var s=n;s;s=s.parentNode){var o=!1;if(P.each(a,function(t){P.ruleMatches(t,e,s,i)&&(P.notify('Rule "'+t.name+'" fired.',1),P.fireRule(t,s,e),i++,t.bubbleStop&&(o=!0))}),o)break}P.$data(e,"eventProcessed",!0)}}},P.onEvent=n.querySelectorAll?function(e){P.handleEvent(e)}:(E=[],(V=function(e){e.selector?E.push(e):P.handleEvent(e)}).pendingEvents=E,V),P.fireEvent=function(e,t){P.onEvent({type:e,target:t})},P.registerEvents=function(e,t){for(var n=t.length-1;n>=0;n--){var i=t[n];P.$data(e,i+".tracked")||(P.addEventHandler(e,i,P.onEvent),P.$data(e,i+".tracked",!0))}},P.registerEventsForTags=function(e,t){for(var i=e.length-1;i>=0;i--)for(var a=e[i],r=n.getElementsByTagName(a),s=r.length-1;s>=0;s--)P.registerEvents(r[s],t)},P.setListeners=function(){var e=["click","submit"];P.each(P.rules,function(t){"custom"===t.event&&t.hasOwnProperty("customEvent")&&!P.contains(e,t.customEvent)&&e.push(t.customEvent)}),P.registerEvents(n,e)},P.getUniqueRuleEvents=function(){return P._uniqueRuleEvents||(P._uniqueRuleEvents=[],P.each(P.rules,function(e){-1===P.indexOf(P._uniqueRuleEvents,e.event)&&P._uniqueRuleEvents.push(e.event)})),P._uniqueRuleEvents},P.setFormListeners=function(){if(!P._relevantFormEvents){var e=["change","focus","blur","keypress"];P._relevantFormEvents=P.filter(P.getUniqueRuleEvents(),function(t){return-1!==P.indexOf(e,t)})}P._relevantFormEvents.length&&P.registerEventsForTags(["input","select","textarea","button"],P._relevantFormEvents)},P.setVideoListeners=function(){if(!P._relevantVideoEvents){var e=["play","pause","ended","volumechange","stalled","loadeddata"];P._relevantVideoEvents=P.filter(P.getUniqueRuleEvents(),function(t){return-1!==P.indexOf(e,t)})}P._relevantVideoEvents.length&&P.registerEventsForTags(["video"],P._relevantVideoEvents)},P.readStoredSetting=function(n){try{return n="sdsat_"+n,t.localStorage.getItem(n)}catch(e){return P.notify("Cannot read stored setting from localStorage: "+e.message,2),null}},P.loadStoredSettings=function(){var e=P.readStoredSetting("debug"),t=P.readStoredSetting("hide_activity");e&&(P.settings.notifications="true"===e),t&&(P.settings.hideActivity="true"===t)},P.isRuleActive=function(e,t){function n(e,t){return t=a(t,{hour:e[p](),minute:e[g]()}),Math.floor(Math.abs((e.getTime()-t.getTime())/864e5))}function i(e,t){function n(e){return 12*e[u]()+e[m]()}return Math.abs(n(e)-n(t))}function a(e,t){var n=new Date(e.getTime());for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];switch(i){case"hour":n[f](a);break;case"minute":n[h](a);break;case"date":n[v](a)}}return n}function r(e,t){return 60*e[p]()+e[g]()>60*t[p]()+t[g]()}function s(e,t){return 60*e[p]()+e[g]()<60*t[p]()+t[g]()}var o=e.schedule;if(!o)return!0;var l=o.utc,c=l?"getUTCDate":"getDate",d=l?"getUTCDay":"getDay",u=l?"getUTCFullYear":"getFullYear",m=l?"getUTCMonth":"getMonth",p=l?"getUTCHours":"getHours",g=l?"getUTCMinutes":"getMinutes",f=l?"setUTCHours":"setHours",h=l?"setUTCMinutes":"setMinutes",v=l?"setUTCDate":"setDate";if(t=t||new Date,o.repeat){if(r(o.start,t))return!1;if(s(o.end,t))return!1;if(t<o.start)return!1;if(o.endRepeat&&t>=o.endRepeat)return!1;if("daily"===o.repeat){if(o.repeatEvery)if(n(o.start,t)%o.repeatEvery!=0)return!1}else if("weekly"===o.repeat){if(o.days){if(!P.contains(o.days,t[d]()))return!1}else if(o.start[d]()!==t[d]())return!1;if(o.repeatEvery)if(n(o.start,t)%(7*o.repeatEvery)!=0)return!1}else if("monthly"===o.repeat){if(o.repeatEvery)if(i(o.start,t)%o.repeatEvery!=0)return!1;if(o.nthWeek&&o.mthDay){if(o.mthDay!==t[d]())return!1;var b=Math.floor((t[c]()-t[d]()+1)/7);if(o.nthWeek!==b)return!1}else if(o.start[c]()!==t[c]())return!1}else if("yearly"===o.repeat){if(o.start[m]()!==t[m]())return!1;if(o.start[c]()!==t[c]())return!1;if(o.repeatEvery)if(Math.abs(o.start[u]()-t[u]())%o.repeatEvery!=0)return!1}}else{if(o.start>t)return!1;if(o.end<t)return!1}return!0},P.isOutboundLink=function(e){if(!e.getAttribute("href"))return!1;var t=e.hostname,n=(e.href,e.protocol);return("http:"===n||"https:"===n)&&(!P.any(P.settings.domainList,function(e){return P.isSubdomainOf(t,e)})&&t!==location.hostname)},P.isLinkerLink=function(e){return!(!e.getAttribute||!e.getAttribute("href"))&&(P.hasMultipleDomains()&&e.hostname!=location.hostname&&!e.href.match(/^javascript/i)&&!P.isOutboundLink(e))},P.isSubdomainOf=function(e,t){if(e===t)return!0;var n=e.length-t.length;return n>0&&P.equalsIgnoreCase(e.substring(n),t)},P.getVisitorId=function(){var e=P.getToolsByType("visitor_id");return 0===e.length?null:e[0].getInstance()},P.URI=function(){var e=n.location.pathname+n.location.search;return P.settings.forceLowerCase&&(e=e.toLowerCase()),e},P.URL=function(){var e=n.location.href;return P.settings.forceLowerCase&&(e=e.toLowerCase()),e},P.filterRules=function(){function e(e){return!!P.isRuleActive(e)}P.rules=P.filter(P.rules,e),P.pageLoadRules=P.filter(P.pageLoadRules,e)},P.ruleInScope=function(e,t){function i(e,t){function n(e){return t.match(e)}var i=e.include,r=e.exclude;if(i&&a(i,t))return!0;if(r){if(P.isString(r)&&r===t)return!0;if(P.isArray(r)&&P.any(r,n))return!0;if(P.isRegex(r)&&n(r))return!0}return!1}function a(e,t){function n(e){return t.match(e)}return!(!P.isString(e)||e===t)||(!(!P.isArray(e)||P.any(e,n))||!(!P.isRegex(e)||n(e)))}t=t||n.location;var r=e.scope;if(!r)return!0;var s=r.URI,o=r.subdomains,l=r.domains,c=r.protocols,d=r.hashes;return(!s||!i(s,t.pathname+t.search))&&((!o||!i(o,t.hostname))&&((!l||!a(l,t.hostname))&&((!c||!a(c,t.protocol))&&(!d||!i(d,t.hash)))))},P.backgroundTasks=function(){new Date;P.setFormListeners(),P.setVideoListeners(),P.loadStoredSettings(),P.registerNewElementsForDynamicRules(),P.eventEmitterBackgroundTasks();new Date},P.registerNewElementsForDynamicRules=function(){function e(t,n){var i=e.cache[t];if(i)return n(i);P.cssQuery(t,function(i){e.cache[t]=i,n(i)})}e.cache={},P.each(P.dynamicRules,function(t){e(t.selector,function(e){P.each(e,function(e){var n="custom"===t.event?t.customEvent:t.event;P.$data(e,"dynamicRules.seen."+n)||(P.$data(e,"dynamicRules.seen."+n,!0),P.propertiesMatch(t.property,e)&&P.registerEvents(e,[n]))})})})},P.ensureCSSSelector=function(){n.querySelectorAll?P.hasSelector=!0:(P.loadingSizzle=!0,P.sizzleQueue=[],P.loadScript(P.basePath()+"selector.js",function(){if(P.Sizzle){var e=P.onEvent.pendingEvents;P.each(e,function(e){P.handleEvent(e)},this),P.onEvent=P.handleEvent,P.hasSelector=!0,delete P.loadingSizzle,P.each(P.sizzleQueue,function(e){P.cssQuery(e[0],e[1])}),delete P.sizzleQueue}else P.logError(new Error("Failed to load selector.js"))}))},P.errors=[],P.logError=function(e){P.errors.push(e),P.notify(e.name+" - "+e.message,5)},P.pageBottom=function(){P.initialized&&(P.pageBottomFired=!0,P.firePageLoadEvent("pagebottom"))},P.stagingLibraryOverride=function(){if("true"===P.readStoredSetting("stagingLibrary")){for(var e,t,i,a=n.getElementsByTagName("script"),r=/^(.*)satelliteLib-([a-f0-9]{40})\.js$/,s=/^(.*)satelliteLib-([a-f0-9]{40})-staging\.js$/,o=0,l=a.length;o<l&&(!(i=a[o].getAttribute("src"))||(e||(e=i.match(r)),t||(t=i.match(s)),!t));o++);if(e&&!t){var c=e[1]+"satelliteLib-"+e[2]+"-staging.js";if(n.write)n.write('<script src="'+c+'"></script>');else{var d=n.createElement("script");d.src=c,n.head.appendChild(d)}return!0}}return!1},P.checkAsyncInclude=function(){t.satellite_asyncLoad&&P.notify('You may be using the async installation of Satellite. In-page HTML and the "pagebottom" event will not work. Please update your Satellite installation for these features.',5)},P.hasMultipleDomains=function(){return!!P.settings.domainList&&P.settings.domainList.length>1},P.handleOverrides=function(){if(L)for(var e in L)L.hasOwnProperty(e)&&(P.data[e]=L[e])},P.privacyManagerParams=function(){var e={};P.extend(e,P.settings.privacyManagement);var t=[];for(var n in P.tools)if(P.tools.hasOwnProperty(n)){var i=P.tools[n],a=i.settings;if(!a)continue;"sc"===a.engine&&t.push(i)}var r=P.filter(P.map(t,function(e){return e.getTrackingServer()}),function(e){return null!=e});e.adobeAnalyticsTrackingServers=r;for(var s=["bannerText","headline","introductoryText","customCSS"],o=0;o<s.length;o++){var l=s[o],c=e[l];if(c)if("text"===c.type)e[l]=c.value;else{if("data"!==c.type)throw new Error("Invalid type: "+c.type);e[l]=P.getVar(c.value)}}return e},P.prepareLoadPrivacyManager=function(){function e(e){function t(){++r===a.length&&(n(),clearTimeout(s),e())}function n(){P.each(a,function(e){P.unbindEvent(e.id+".load",t)})}function i(){n(),e()}var a=P.filter(P.values(P.tools),function(e){return e.settings&&"sc"===e.settings.engine});if(0===a.length)return e();var r=0;P.each(a,function(e){P.bindEvent(e.id+".load",t)});var s=setTimeout(i,5e3)}P.addEventHandler(t,"load",function(){e(P.loadPrivacyManager)})},P.loadPrivacyManager=function(){var e=P.basePath()+"privacy_manager.js";P.loadScript(e,function(){var e=P.privacyManager;e.configure(P.privacyManagerParams()),e.openIfRequired()})},P.init=function(e){if(!P.stagingLibraryOverride()){P.configurationSettings=e;var n=e.tools;for(var i in delete e.tools,e)e.hasOwnProperty(i)&&(P[i]=e[i]);P.data.customVars===r&&(P.data.customVars={}),P.data.queryParams=P.QueryParams.normal,P.handleOverrides(),P.detectBrowserInfo(),P.trackVisitorInfo&&P.trackVisitorInfo(),P.loadStoredSettings(),P.Logger.setOutputState(P.settings.notifications),P.checkAsyncInclude(),P.ensureCSSSelector(),P.filterRules(),P.dynamicRules=P.filter(P.rules,function(e){return e.eventHandlerOnElement}),P.tools=P.initTools(n),P.initEventEmitters(),P.firePageLoadEvent("aftertoolinit"),P.settings.privacyManagement&&P.prepareLoadPrivacyManager(),P.hasSelector&&P.domReady(P.eventEmitterBackgroundTasks),P.setListeners(),P.domReady(function(){P.poll(function(){P.backgroundTasks()},P.settings.recheckEvery||3e3)}),P.domReady(function(){P.domReadyFired=!0,P.pageBottomFired||P.pageBottom(),P.firePageLoadEvent("domready")}),P.addEventHandler(t,"load",function(){P.firePageLoadEvent("windowload")}),P.firePageLoadEvent("pagetop"),P.initialized=!0}},P.pageLoadPhases=["aftertoolinit","pagetop","pagebottom","domready","windowload"],P.loadEventBefore=function(e,t){return P.indexOf(P.pageLoadPhases,e)<=P.indexOf(P.pageLoadPhases,t)},P.flushPendingCalls=function(e){e.pending&&(P.each(e.pending,function(t){var n=t[0],i=t[1],a=t[2],r=t[3];n in e?e[n].apply(e,[i,a].concat(r)):e.emit?e.emit(n,i,a,r):P.notify("Failed to trigger "+n+" for tool "+e.id,1)}),delete e.pending)},P.setDebug=function(n){try{t.localStorage.setItem("sdsat_debug",n)}catch(e){P.notify("Cannot set debug mode: "+e.message,2)}},P.getUserAgent=function(){return navigator.userAgent},P.detectBrowserInfo=function(){function e(e){return function(t){for(var n in e){if(e.hasOwnProperty(n))if(e[n].test(t))return n}return"Unknown"}}var t=e({"IE Edge Mobile":/Windows Phone.*Edge/,"IE Edge":/Edge/,OmniWeb:/OmniWeb/,"Opera Mini":/Opera Mini/,"Opera Mobile":/Opera Mobi/,Opera:/Opera/,Chrome:/Chrome|CriOS|CrMo/,Firefox:/Firefox|FxiOS/,"IE Mobile":/IEMobile/,IE:/MSIE|Trident/,"Mobile Safari":/Mobile(\/[0-9A-z]+)? Safari/,Safari:/Safari/}),n=e({Blackberry:/BlackBerry|BB10/,"Symbian OS":/Symbian|SymbOS/,Maemo:/Maemo/,Android:/Android/,Linux:/ Linux /,Unix:/FreeBSD|OpenBSD|CrOS/,Windows:/[\( ]Windows /,iOS:/iPhone|iPad|iPod/,MacOS:/Macintosh;/}),i=e({Nokia:/Symbian|SymbOS|Maemo/,"Windows Phone":/Windows Phone/,Blackberry:/BlackBerry|BB10/,Android:/Android/,iPad:/iPad/,iPod:/iPod/,iPhone:/iPhone/,Desktop:/.*/}),a=P.getUserAgent();P.browserInfo={browser:t(a),os:n(a),deviceType:i(a)}},P.isHttps=function(){return"https:"==n.location.protocol},P.BaseTool=function(e){this.settings=e||{},this.forceLowerCase=P.settings.forceLowerCase,"forceLowerCase"in this.settings&&(this.forceLowerCase=this.settings.forceLowerCase)},P.BaseTool.prototype={triggerCommand:function(e,t,n){var i=this.settings||{};if(this.initialize&&this.isQueueAvailable()&&this.isQueueable(e)&&n&&P.loadEventBefore(n.type,i.loadOn))this.queueCommand(e,t,n);else{var a=e.command,r=this["$"+a],s=!!r&&r.escapeHtml,o=P.preprocessArguments(e.arguments,t,n,this.forceLowerCase,s);r?r.apply(this,[t,n].concat(o)):this.$missing$?this.$missing$(a,t,n,o):P.notify("Failed to trigger "+a+" for tool "+this.id,1)}},endPLPhase:function(){},isQueueable:function(e){return"cancelToolInit"!==e.command},isQueueAvailable:function(){return!this.initialized&&!this.initializing},flushQueue:function(){this.pending&&(P.each(this.pending,function(e){this.triggerCommand.apply(this,e)},this),this.pending=[])},queueCommand:function(e,t,n){this.pending||(this.pending=[]),this.pending.push([e,t,n])},$cancelToolInit:function(){this._cancelToolInit=!0}},t._satellite=P,s.prototype.getStringifiedValue=t.JSON&&t.JSON.stringify||P.stringify,s.prototype.initPolling=function(){0!==this.dataElementsNames.length&&(this.dataElementsStore=this.getDataElementsValues(),P.poll(P.bind(this.checkDataElementValues,this),1e3))},s.prototype.getDataElementsValues=function(){var e={};return P.each(this.dataElementsNames,function(t){var n=P.getVar(t);e[t]=this.getStringifiedValue(n)},this),e},s.prototype.checkDataElementValues=function(){P.each(this.dataElementsNames,P.bind(function(e){var t=this.getStringifiedValue(P.getVar(e))
;t!==this.dataElementsStore[e]&&(this.dataElementsStore[e]=t,P.onEvent({type:"dataelementchange("+e+")",target:n}))},this))},P.availableEventEmitters.push(s),o.orientationChange=function(e){var n=0===t.orientation?"portrait":"landscape";e.orientation=n,P.onEvent(e)},P.availableEventEmitters.push(o),l.prototype={defineEvents:function(){this.oldBlurClosure=function(){P.fireEvent("tabblur",n)},this.oldFocusClosure=P.bind(function(){this.visibilityApiHasPriority?P.fireEvent("tabfocus",n):null!=P.visibility.getHiddenProperty()&&P.visibility.isHidden()||P.fireEvent("tabfocus",n)},this)},attachDetachModernEventListeners:function(e){P[0==e?"removeEventHandler":"addEventHandler"](n,P.visibility.getVisibilityEvent(),this.handleVisibilityChange)},attachDetachOlderEventListeners:function(e,n,i){var a=0==e?"removeEventHandler":"addEventHandler";P[a](n,i,this.oldBlurClosure),P[a](t,"focus",this.oldFocusClosure)},handleVisibilityChange:function(){P.visibility.isHidden()?P.fireEvent("tabblur",n):P.fireEvent("tabfocus",n)},setVisibilityApiPriority:function(e){this.visibilityApiHasPriority=e,this.attachDetachOlderEventListeners(!1,t,"blur"),this.attachDetachModernEventListeners(!1),e?null!=P.visibility.getHiddenProperty()?this.attachDetachModernEventListeners(!0):this.attachDetachOlderEventListeners(!0,t,"blur"):(this.attachDetachOlderEventListeners(!0,t,"blur"),null!=P.visibility.getHiddenProperty()&&this.attachDetachModernEventListeners(!0))},oldBlurClosure:null,oldFocusClosure:null,visibilityApiHasPriority:!0},P.availableEventEmitters.push(l),c.prototype.backgroundTasks=function(){P.each(this.rules,function(e){P.cssQuery(e.selector,function(e){if(e.length>0){var t=e[0];if(P.$data(t,"elementexists.seen"))return;P.$data(t,"elementexists.seen",!0),P.onEvent({type:"elementexists",target:t})}})})},P.availableEventEmitters.push(c),d.prototype={backgroundTasks:function(){var e=this.eventHandler;P.each(this.rules,function(t){P.cssQuery(t.selector||"video",function(t){P.each(t,function(t){P.$data(t,"videoplayed.tracked")||(P.addEventHandler(t,"timeupdate",P.throttle(e,100)),P.$data(t,"videoplayed.tracked",!0))})})})},evalRule:function(e,t){var n=t.event,i=e.seekable,a=i.start(0),r=i.end(0),s=e.currentTime,o=t.event.match(/^videoplayed\(([0-9]+)([s%])\)$/);if(o){var l=o[2],c=Number(o[1]),d="%"===l?function(){return c<=100*(s-a)/(r-a)}:function(){return c<=s-a};!P.$data(e,n)&&d()&&(P.$data(e,n,!0),P.onEvent({type:n,target:e}))}},onUpdateTime:function(e){var t=this.rules,n=e.target;if(n.seekable&&0!==n.seekable.length)for(var i=0,a=t.length;i<a;i++)this.evalRule(n,t[i])}},P.availableEventEmitters.push(d),u.offset=function(i){var a=null,r=null;try{var s=i.getBoundingClientRect(),o=n,l=o.documentElement,c=o.body,d=t,u=l.clientTop||c.clientTop||0,m=l.clientLeft||c.clientLeft||0,p=d.pageYOffset||l.scrollTop||c.scrollTop,g=d.pageXOffset||l.scrollLeft||c.scrollLeft;a=s.top+p-u,r=s.left+g-m}catch(e){}return{top:a,left:r}},u.getViewportHeight=function(){var e=t.innerHeight,i=n.compatMode;return i&&(e="CSS1Compat"==i?n.documentElement.clientHeight:n.body.clientHeight),e},u.getScrollTop=function(){return n.documentElement.scrollTop?n.documentElement.scrollTop:n.body.scrollTop},u.isElementInDocument=function(e){return n.body.contains(e)},u.isElementInView=function(e){if(!u.isElementInDocument(e))return!1;var t=u.getViewportHeight(),n=u.getScrollTop(),i=u.offset(e).top,a=e.offsetHeight;return null!==i&&!(n>i+a||n+t<i)},u.prototype={backgroundTasks:function(){var e=this.elements;P.each(this.rules,function(t){P.cssQuery(t.selector,function(n){var i=0;P.each(n,function(t){P.contains(e,t)||(e.push(t),i++)}),i&&P.notify(t.selector+" added "+i+" elements.",1)})}),this.track()},checkInView:function(e,t,n){var i=P.$data(e,"inview");if(u.isElementInView(e)){i||P.$data(e,"inview",!0);var a=this;this.processRules(e,function(n,i,r){if(t||!n.inviewDelay)P.$data(e,i,!0),P.onEvent({type:"inview",target:e,inviewDelay:n.inviewDelay});else if(n.inviewDelay){var s=P.$data(e,r);s||(s=setTimeout(function(){a.checkInView(e,!0,n.inviewDelay)},n.inviewDelay),P.$data(e,r,s))}},n)}else{if(!u.isElementInDocument(e)){var r=P.indexOf(this.elements,e);this.elements.splice(r,1)}i&&P.$data(e,"inview",!1),this.processRules(e,function(t,n,i){var a=P.$data(e,i);a&&clearTimeout(a)},n)}},track:function(){for(var e=this.elements.length-1;e>=0;e--)this.checkInView(this.elements[e])},processRules:function(e,t,n){var i=this.rules;n&&(i=P.filter(this.rules,function(e){return e.inviewDelay==n})),P.each(i,function(n,i){var a=n.inviewDelay?"viewed_"+n.inviewDelay:"viewed",r="inview_timeout_id_"+i;P.$data(e,a)||P.matchesCss(n.selector,e)&&t(n,a,r)})}},P.availableEventEmitters.push(u),m.prototype={obue:!1,initialize:function(){this.attachCloseListeners()},obuePrevUnload:function(){},obuePrevBeforeUnload:function(){},newObueListener:function(){this.obue||(this.obue=!0,this.triggerBeacons())},attachCloseListeners:function(){this.prevUnload=t.onunload,this.prevBeforeUnload=t.onbeforeunload,t.onunload=P.bind(function(e){this.prevUnload&&setTimeout(P.bind(function(){this.prevUnload.call(t,e)},this),1),this.newObueListener()},this),t.onbeforeunload=P.bind(function(e){this.prevBeforeUnload&&setTimeout(P.bind(function(){this.prevBeforeUnload.call(t,e)},this),1),this.newObueListener()},this)},triggerBeacons:function(){P.fireEvent("leave",n)}},P.availableEventEmitters.push(m),p.prototype={backgroundTasks:function(){var e=this;P.each(this.rules,function(t){var n=t[1],i=t[0];P.cssQuery(n,function(t){P.each(t,function(t){e.trackElement(t,i)})})},this)},trackElement:function(e,t){var n=this,i=P.$data(e,"hover.delays");i?P.contains(i,t)||i.push(t):(P.addEventHandler(e,"mouseover",function(t){n.onMouseOver(t,e)}),P.addEventHandler(e,"mouseout",function(t){n.onMouseOut(t,e)}),P.$data(e,"hover.delays",[t]))},onMouseOver:function(e,t){var n=e.target||e.srcElement,i=e.relatedTarget||e.fromElement;(t===n||P.containsElement(t,n))&&!P.containsElement(t,i)&&this.onMouseEnter(t)},onMouseEnter:function(e){var t=P.$data(e,"hover.delays"),n=P.map(t,function(t){return setTimeout(function(){P.onEvent({type:"hover("+t+")",target:e})},t)});P.$data(e,"hover.delayTimers",n)},onMouseOut:function(e,t){var n=e.target||e.srcElement,i=e.relatedTarget||e.toElement;(t===n||P.containsElement(t,n))&&!P.containsElement(t,i)&&this.onMouseLeave(t)},onMouseLeave:function(e){var t=P.$data(e,"hover.delayTimers");t&&P.each(t,function(e){clearTimeout(e)})}},P.availableEventEmitters.push(p),f.prototype={initialize:function(){if(this.FB=this.FB||t.FB,this.FB&&this.FB.Event&&this.FB.Event.subscribe)return this.bind(),!0},bind:function(){this.FB.Event.subscribe("edge.create",function(){P.notify("tracking a facebook like",1),P.onEvent({type:"facebook.like",target:n})}),this.FB.Event.subscribe("edge.remove",function(){P.notify("tracking a facebook unlike",1),P.onEvent({type:"facebook.unlike",target:n})}),this.FB.Event.subscribe("message.send",function(){P.notify("tracking a facebook share",1),P.onEvent({type:"facebook.send",target:n})})}},P.availableEventEmitters.push(f),h.prototype={initialize:function(){var e=this.twttr;e&&"function"==typeof e.ready&&e.ready(P.bind(this.bind,this))},bind:function(){this.twttr.events.bind("tweet",function(e){e&&(P.notify("tracking a tweet button",1),P.onEvent({type:"twitter.tweet",target:n}))})}},P.availableEventEmitters.push(h),v.prototype={initialize:function(){this.setupHistoryAPI(),this.setupHashChange()},fireIfURIChanged:function(){var e=P.URL();this.lastURL!==e&&(this.fireEvent(),this.lastURL=e)},fireEvent:function(){P.updateQueryParams(),P.onEvent({type:"locationchange",target:n})},setupSPASupport:function(){this.setupHistoryAPI(),this.setupHashChange()},setupHistoryAPI:function(){var e=t.history;e&&(e.pushState&&(this.originalPushState=e.pushState,e.pushState=this._pushState),e.replaceState&&(this.originalReplaceState=e.replaceState,e.replaceState=this._replaceState)),P.addEventHandler(t,"popstate",this._onPopState)},pushState:function(){var e=this.originalPushState.apply(history,arguments);return this.onPushState(),e},replaceState:function(){var e=this.originalReplaceState.apply(history,arguments);return this.onReplaceState(),e},setupHashChange:function(){P.addEventHandler(t,"hashchange",this._onHashChange)},onReplaceState:function(){setTimeout(this._fireIfURIChanged,0)},onPushState:function(){setTimeout(this._fireIfURIChanged,0)},onPopState:function(){setTimeout(this._fireIfURIChanged,0)},onHashChange:function(){setTimeout(this._fireIfURIChanged,0)},uninitialize:function(){this.cleanUpHistoryAPI(),this.cleanUpHashChange()},cleanUpHistoryAPI:function(){history.pushState===this._pushState&&(history.pushState=this.originalPushState),history.replaceState===this._replaceState&&(history.replaceState=this.originalReplaceState),P.removeEventHandler(t,"popstate",this._onPopState)},cleanUpHashChange:function(){P.removeEventHandler(t,"hashchange",this._onHashChange)}},P.availableEventEmitters.push(v),P.ecommerce={addItem:function(){var e=[].slice.call(arguments);P.onEvent({type:"ecommerce.additem",target:e})},addTrans:function(){var e=[].slice.call(arguments);P.data.saleData.sale={orderId:e[0],revenue:e[2]},P.onEvent({type:"ecommerce.addtrans",target:e})},trackTrans:function(){P.onEvent({type:"ecommerce.tracktrans",target:[]})}},P.visibility={isHidden:function(){var e=this.getHiddenProperty();return!!e&&n[e]},isVisible:function(){return!this.isHidden()},getHiddenProperty:function(){var e=["webkit","moz","ms","o"];if("hidden"in n)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in n)return e[t]+"Hidden";return null},getVisibilityEvent:function(){var e=this.getHiddenProperty();return e?e.replace(/[H|h]idden/,"")+"visibilitychange":null}},P.inherit(b,P.BaseTool),P.extend(b.prototype,{name:"Nielsen",endPLPhase:function(e){switch(e){case"pagetop":this.initialize();break;case"pagebottom":this.enableTracking&&(this.queueCommand({command:"sendFirstBeacon",arguments:[]}),this.flushQueueWhenReady())}},defineListeners:function(){this.onTabFocus=P.bind(function(){this.notify("Tab visible, sending view beacon when ready",1),this.tabEverVisible=!0,this.flushQueueWhenReady()},this),this.onPageLeave=P.bind(function(){this.notify("isHuman? : "+this.isHuman(),1),this.isHuman()&&this.sendDurationBeacon()},this),this.onHumanDetectionChange=P.bind(function(e){this==e.target.target&&(this.human=e.target.isHuman)},this)},initialize:function(){this.initializeTracking(),this.initializeDataProviders(),this.initializeNonHumanDetection(),this.tabEverVisible=P.visibility.isVisible(),this.tabEverVisible?this.notify("Tab visible, sending view beacon when ready",1):P.bindEventOnce("tabfocus",this.onTabFocus),this.initialized=!0},initializeTracking:function(){this.initialized||(this.notify("Initializing tracking",1),this.addRemovePageLeaveEvent(this.enableTracking),this.addRemoveHumanDetectionChangeEvent(this.enableTracking),this.initialized=!0)},initializeDataProviders:function(){var e,t=this.getAnalyticsTool();this.dataProvider.register(new b.DataProvider.VisitorID(P.getVisitorId())),t?(e=new b.DataProvider.Generic("rsid",function(){return t.settings.account}),this.dataProvider.register(e)):this.notify("Missing integration with Analytics: rsid will not be sent.")},initializeNonHumanDetection:function(){P.nonhumandetection?(P.nonhumandetection.init(),this.setEnableNonHumanDetection(0!=this.settings.enableNonHumanDetection),this.settings.nonHumanDetectionDelay>0&&this.setNonHumanDetectionDelay(1e3*parseInt(this.settings.nonHumanDetectionDelay))):this.notify("NHDM is not available.")},getAnalyticsTool:function(){if(this.settings.integratesWith)return P.tools[this.settings.integratesWith]},flushQueueWhenReady:function(){this.enableTracking&&this.tabEverVisible&&P.poll(P.bind(function(){if(this.isReadyToTrack())return this.flushQueue(),!0},this),100,20)},isReadyToTrack:function(){return this.tabEverVisible&&this.dataProvider.isReady()},$setVars:function(e,t,n){for(var i in n){var a=n[i];"function"==typeof a&&(a=a()),this.settings[i]=a}this.notify("Set variables done",2),this.prepareContextData()},$setEnableTracking:function(e,t,n){this.notify("Will"+(n?"":" not")+" track time on page",1),this.enableTracking!=n&&(this.addRemovePageLeaveEvent(n),this.addRemoveHumanDetectionChangeEvent(n),this.enableTracking=n)},$sendFirstBeacon:function(){this.sendViewBeacon()},setEnableNonHumanDetection:function(e){e?P.nonhumandetection.register(this):P.nonhumandetection.unregister(this)},setNonHumanDetectionDelay:function(e){P.nonhumandetection.register(this,e)},addRemovePageLeaveEvent:function(e){this.notify((e?"Attach onto":"Detach from")+" page leave event",1),P[0==e?"unbindEvent":"bindEvent"]("leave",this.onPageLeave)},addRemoveHumanDetectionChangeEvent:function(e){this.notify((e?"Attach onto":"Detach from")+" human detection change event",1),P[0==e?"unbindEvent":"bindEvent"]("humandetection.change",this.onHumanDetectionChange)},sendViewBeacon:function(){this.notify("Tracked page view.",1),this.sendBeaconWith()},sendDurationBeacon:function(){if(P.timetracking&&"function"==typeof P.timetracking.timeOnPage&&null!=P.timetracking.timeOnPage()){this.notify("Tracked close",1),this.sendBeaconWith({timeOnPage:Math.round(P.timetracking.timeOnPage()/1e3),duration:"D",timer:"timer"});var e;for(e=0;e<this.magicConst;e++)"0"}else this.notify("Could not track close due missing time on page",5)},sendBeaconWith:function(e){this.enableTracking&&this[this.beaconMethod].call(this,this.prepareUrl(e))},plainBeacon:function(e){var t=new Image;t.src=e,t.width=1,t.height=1,t.alt=""},navigatorSendBeacon:function(e){navigator.sendBeacon(e)},prepareUrl:function(e){var t=this.settings;return P.extend(t,this.dataProvider.provide()),P.extend(t,e),this.preparePrefix(this.settings.collectionServer)+this.adapt.convertToURI(this.adapt.toNielsen(this.substituteVariables(t)))},preparePrefix:function(e){return"//"+encodeURIComponent(e)+".imrworldwide.com/cgi-bin/gn?"},substituteVariables:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=P.replace(e[n]));return t},prepareContextData:function(){if(this.getAnalyticsTool()){var e=this.settings;e.sdkVersion=_satellite.publishDate,this.getAnalyticsTool().$setVars(null,null,{contextData:this.adapt.toAnalytics(this.substituteVariables(e))})}else this.notify("Adobe Analytics missing.")},isHuman:function(){return this.human},onTabFocus:function(){},onPageLeave:function(){},onHumanDetectionChange:function(){},notify:function(e,t){P.notify(this.logPrefix+e,t)},beaconMethod:"plainBeacon",adapt:null,enableTracking:!1,logPrefix:"Nielsen: ",tabEverVisible:!1,human:!0,magicConst:2e6}),b.DataProvider={},b.DataProvider.Generic=function(e,t){this.key=e,this.valueFn=t},P.extend(b.DataProvider.Generic.prototype,{isReady:function(){return!0},getValue:function(){return this.valueFn()},provide:function(){this.isReady()||b.prototype.notify("Not yet ready to provide value for: "+this.key,5);var e={};return e[this.key]=this.getValue(),e}}),b.DataProvider.VisitorID=function(e,t,n){this.key=t||"uuid",this.visitorInstance=e,this.visitorInstance&&(this.visitorId=e.getMarketingCloudVisitorID([this,this._visitorIdCallback])),this.fallbackProvider=n||new b.UUID},P.inherit(b.DataProvider.VisitorID,b.DataProvider.Generic),P.extend(b.DataProvider.VisitorID.prototype,{isReady:function(){return null===this.visitorInstance||!!this.visitorId},getValue:function(){return this.visitorId||this.fallbackProvider.get()},_visitorIdCallback:function(e){this.visitorId=e}}),b.DataProvider.Aggregate=function(){this.providers=[];for(var e=0;e<arguments.length;e++)this.register(arguments[e])},P.extend(b.DataProvider.Aggregate.prototype,{register:function(e){this.providers.push(e)},isReady:function(){return P.every(this.providers,function(e){return e.isReady()})},provide:function(){var e={};return P.each(this.providers,function(t){P.extend(e,t.provide())}),e}}),b.UUID=function(){},P.extend(b.UUID.prototype,{generate:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},get:function(){var e=P.readCookie(this.key("uuid"));return e||(e=this.generate(),P.setCookie(this.key("uuid"),e),e)},key:function(e){return"_dtm_nielsen_"+e}}),b.DataAdapters=function(){},P.extend(b.DataAdapters.prototype,{toNielsen:function(e){var t=(new Date).getTime(),n={c6:"vc,",c13:"asid,",c15:"apn,",c27:"cln,",c32:"segA,",c33:"segB,",c34:"segC,",c35:"adrsid,",c29:"plid,",c30:"bldv,",c40:"adbid,"},i={ci:e.clientId,c6:e.vcid,c13:e.appId,c15:e.appName,prv:1,forward:0,ad:0,cr:e.duration||"V",rt:"text",st:"dcr",prd:"dcr",r:t,at:e.timer||"view",c16:e.sdkVersion,c27:e.timeOnPage||0,c40:e.uuid,c35:e.rsid,ti:t,sup:0,c32:e.segmentA,c33:e.segmentB,c34:e.segmentC,asn:e.assetName,c29:e.playerID,c30:e.buildVersion};for(key in i)if(i[key]!==r&&null!=i[key]&&i[key]!==r&&null!=i&&""!=i){var a=encodeURIComponent(i[key]);n.hasOwnProperty(key)&&a&&(a=n[key]+a),i[key]=a}return this.filterObject(i)},toAnalytics:function(e){return this.filterObject({"a.nielsen.clientid":e.clientId,"a.nielsen.vcid":e.vcid,"a.nielsen.appid":e.appId,"a.nielsen.appname":e.appName,"a.nielsen.accmethod":"0","a.nielsen.ctype":"text","a.nielsen.sega":e.segmentA,"a.nielsen.segb":e.segmentB,"a.nielsen.segc":e.segmentC,"a.nielsen.asset":e.assetName})},convertToURI:function(e){if(!1===P.isObject(e))return"";var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+e[n]);return t.join("&")},filterObject:function(e){for(var t in e)!e.hasOwnProperty(t)||null!=e[t]&&e[t]!==r||delete e[t];return e}}),P.availableTools.nielsen=b,P.extend(y.prototype,{getInstance:function(){return this.instance},initialize:function(){var e,t=this.settings;P.notify("Visitor ID: Initializing tool",1),null!==(e=this.createInstance(t.mcOrgId,t.initVars))&&(t.customerIDs&&this.applyCustomerIDs(e,t.customerIDs),t.autoRequest&&e.getMarketingCloudVisitorID(),this.instance=e)},createInstance:function(e,t){if(!P.isString(e))return P.notify('Visitor ID: Cannot create instance using mcOrgId: "'+e+'"',4),null;e=P.replace(e),P.notify('Visitor ID: Create instance using mcOrgId: "'+e+'"',1),t=this.parseValues(t);var n=Visitor.getInstance(e,t);return P.notify("Visitor ID: Set variables: "+P.stringify(t),1),n},applyCustomerIDs:function(e,t){var n=this.parseIds(t);e.setCustomerIDs(n),P.notify("Visitor ID: Set Customer IDs: "+P.stringify(n),1)},parseValues:function(e){if(!1===P.isObject(e))return{};var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=P.replace(e[n]));return t},parseIds:function(e){var t={};if(!1===P.isObject(e))return{};for(var n in e)if(e.hasOwnProperty(n)){var i=P.replace(e[n].id);i!==e[n].id&&i&&(t[n]={},t[n].id=i,t[n].authState=Visitor.AuthState[e[n].authState])}return t}}),P.availableTools.visitor_id=y,P.inherit(_,P.BaseTool),P.extend(_.prototype,{name:"SC",endPLPhase:function(e){e===this.settings.loadOn&&this.initialize(e)},initialize:function(e){if(!this._cancelToolInit)if(this.settings.initVars=this.substituteVariables(this.settings.initVars,{type:e}),!1!==this.settings.initTool){var n=this.settings.sCodeURL||P.basePath()+"s_code.js";"object"==typeof n&&(n="https:"===t.location.protocol?n.https:n.http),n.match(/^https?:/)||(n=P.basePath()+n),this.settings.initVars&&this.$setVars(null,null,this.settings.initVars),P.loadScript(n,P.bind(this.onSCodeLoaded,this)),this.initializing=!0}else this.initializing=!0,this.pollForSC()},getS:function(e,n){var i=n&&n.hostname||t.location.hostname,a=this.concatWithToolVarBindings(n&&n.setVars||this.varBindings),r=n&&n.addEvent||this.events,s=this.getAccount(i),o=t.s_gi;if(!o)return null;if(this.isValidSCInstance(e)||(e=null),!s&&!e)return P.notify("Adobe Analytics: tracker not initialized because account was not found",1),null;e=e||o(s);var l="D"+P.appVersion;return"undefined"!=typeof e.tagContainerMarker?e.tagContainerMarker=l:"string"==typeof e.version&&e.version.substring(e.version.length-5)!=="-"+l&&(e.version+="-"+l),e.sa&&!0!==this.settings.skipSetAccount&&!1!==this.settings.initTool&&e.sa(this.settings.account),this.applyVarBindingsOnTracker(e,a),r.length>0&&(e.events=r.join(",")),P.getVisitorId()&&(e.visitor=P.getVisitorId()),e},onSCodeLoaded:function(e){this.initialized=!0,this.initializing=!1;var t=["Adobe Analytics: loaded",e?" (manual)":"","."];P.notify(t.join(""),1),P.fireEvent(this.id+".load",this.getS()),e||(this.flushQueueExceptTrackLink(),this.sendBeacon()),this.flushQueue()},getAccount:function(e){return t.s_account?t.s_account:e&&this.settings.accountByHost&&this.settings.accountByHost[e]||this.settings.account},getTrackingServer:function(){var e=this,n=e.getS();if(n){if(n.ssl&&n.trackingServerSecure)return n.trackingServerSecure;if(n.trackingServer)return n.trackingServer}var i,a=e.getAccount(t.location.hostname);if(!a)return null;var r,s,o="",l=n&&n.dc;return(r=(i=a).indexOf(","))>=0&&(i=i.gb(0,r)),i=i.replace(/[^A-Za-z0-9]/g,""),o||(o="2o7.net"),l=l?(""+l).toLowerCase():"d1","2o7.net"==o&&("d1"==l?l="112":"d2"==l&&(l="122"),s=""),r=i+"."+l+"."+s+o},sendBeacon:function(){var e=this.getS(t[this.settings.renameS||"s"]);e?this.settings.customInit&&!1===this.settings.customInit(e)?P.notify("Adobe Analytics: custom init suppressed beacon",1):(this.settings.executeCustomPageCodeFirst&&this.applyVarBindingsOnTracker(e,this.varBindings),this.executeCustomSetupFuns(e),e.t(),this.clearVarBindings(),this.clearCustomSetup(),P.notify("Adobe Analytics: tracked page view",1)):P.notify("Adobe Analytics: page code not loaded",1)},pollForSC:function(){P.poll(P.bind(function(){if("function"==typeof t.s_gi)return this.onSCodeLoaded(!0),!0},this))},flushQueueExceptTrackLink:function(){if(this.pending){for(var e=[],t=0;t<this.pending.length;t++){var n=this.pending[t];"trackLink"===n[0].command?e.push(n):this.triggerCommand.apply(this,n)}this.pending=e}},isQueueAvailable:function(){return!this.initialized},substituteVariables:function(e,t){var n={};for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];n[i]=P.replace(a,location,t)}return n},$setVars:function(e,t,n){for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];"function"==typeof a&&(a=a()),this.varBindings[i]=a}P.notify("Adobe Analytics: set variables.",2)},$customSetup:function(e,t,n){this.customSetupFuns.push(function(i){n.call(e,t,i)})},isValidSCInstance:function(e){return!!e&&"function"==typeof e.t&&"function"==typeof e.tl},concatWithToolVarBindings:function(e){var t=this.settings.initVars||{};return P.map(["trackingServer","trackingServerSecure"],function(n){t[n]&&!e[n]&&(e[n]=t[n])}),e},applyVarBindingsOnTracker:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},clearVarBindings:function(){this.varBindings={}},clearCustomSetup:function(){this.customSetupFuns=[]},executeCustomSetupFuns:function(e){P.each(this.customSetupFuns,function(n){n.call(t,e)})},$trackLink:function(e,t,n){var i=(n=n||{}).type,a=n.linkName;!a&&e&&e.nodeName&&"a"===e.nodeName.toLowerCase()&&(a=e.innerHTML),a||(a="link clicked");var r=n&&n.setVars,s=n&&n.addEvent||[],o=this.getS(null,{setVars:r,addEvent:s});if(o){var l=o.linkTrackVars,c=o.linkTrackEvents,d=this.definedVarNames(r);n&&n.customSetup&&n.customSetup.call(e,t,o),s.length>0&&d.push("events"),o.products&&d.push("products"),d=this.mergeTrackLinkVars(o.linkTrackVars,d),s=this.mergeTrackLinkVars(o.linkTrackEvents,s),o.linkTrackVars=this.getCustomLinkVarsList(d);var u=P.map(s,function(e){return e.split(":")[0]});o.linkTrackEvents=this.getCustomLinkVarsList(u),o.tl(!0,i||"o",a),P.notify(["Adobe Analytics: tracked link ","using: linkTrackVars=",P.stringify(o.linkTrackVars),"; linkTrackEvents=",P.stringify(o.linkTrackEvents)].join(""),1),o.linkTrackVars=l,o.linkTrackEvents=c}else P.notify("Adobe Analytics: page code not loaded",1)},mergeTrackLinkVars:function(e,t){return e&&(t=e.split(",").concat(t)),t},getCustomLinkVarsList:function(e){var t=P.indexOf(e,"None");return t>-1&&e.length>1&&e.splice(t,1),e.join(",")},definedVarNames:function(e){e=e||this.varBindings;var t=[];for(var n in e)e.hasOwnProperty(n)&&/^(eVar[0-9]+)|(prop[0-9]+)|(hier[0-9]+)|campaign|purchaseID|channel|server|state|zip|pageType$/.test(n)&&t.push(n);return t},$trackPageView:function(e,t,n){var i=n&&n.setVars,a=n&&n.addEvent||[],r=this.getS(null,{setVars:i,addEvent:a});r?(r.linkTrackVars="",r.linkTrackEvents="",this.executeCustomSetupFuns(r),n&&n.customSetup&&n.customSetup.call(e,t,r),r.t(),this.clearVarBindings(),this.clearCustomSetup(),P.notify("Adobe Analytics: tracked page view",1)):P.notify("Adobe Analytics: page code not loaded",1)},$postTransaction:function(e,n,i){var a=P.data.transaction=t[i],r=this.varBindings,s=this.settings.fieldVarMapping;if(P.each(a.items,function(e){this.products.push(e)},this),r.products=P.map(this.products,function(e){var t=[];if(s&&s.item)for(var n in s.item)if(s.item.hasOwnProperty(n)){var i=s.item[n];t.push(i+"="+e[n]),"event"===i.substring(0,5)&&this.events.push(i)}var a=["",e.product,e.quantity,e.unitPrice*e.quantity];return t.length>0&&a.push(t.join("|")),a.join(";")},this).join(","),s&&s.transaction){var o=[];for(var l in s.transaction)if(s.transaction.hasOwnProperty(l)){i=s.transaction[l];o.push(i+"="+a[l]),"event"===i.substring(0,5)&&this.events.push(i)}r.products.length>0&&(r.products+=","),r.products+=";;;;"+o.join("|")}},$addEvent:function(){for(var e=2,t=arguments.length;e<t;e++)this.events.push(arguments[e])},$addProduct:function(){for(var e=2,t=arguments.length;e<t;e++)this.products.push(arguments[e])}}),P.availableTools.sc=_,P.inherit(C,P.BaseTool),P.extend(C.prototype,{name:"Default",$loadIframe:function(e,n,i){var a=i.pages,r=i.loadOn,s=P.bind(function(){P.each(a,function(t){this.loadIframe(e,n,t)},this)},this);r||s(),"domready"===r&&P.domReady(s),"load"===r&&P.addEventHandler(t,"load",s)},loadIframe:function(e,t,i){var a=n.createElement("iframe");a.style.display="none";var r=P.data.host,s=i.data,o=this.scriptURL(i.src),l=P.searchVariables(s,e,t);r&&(o=P.basePath()+o),o+=l,a.src=o;var c=n.getElementsByTagName("body")[0];c?c.appendChild(a):P.domReady(function(){n.getElementsByTagName("body")[0].appendChild(a)})},scriptURL:function(e){return(P.settings.scriptDir||"")+e},$loadScript:function(e,n,i){var a=i.scripts,r=i.sequential,s=i.loadOn,o=P.bind(function(){r?this.loadScripts(e,n,a):P.each(a,function(t){this.loadScripts(e,n,[t])},this)},this);s?"domready"===s?P.domReady(o):"load"===s&&P.addEventHandler(t,"load",o):o()},loadScripts:function(t,n,i){function a(){s.length>0&&r&&s.shift().call(t,n,o);var e=i.shift();if(e){var c=P.data.host,d=l.scriptURL(e.src);c&&(d=P.basePath()+d),r=e,P.loadScript(d,a)}}try{i=i.slice(0);var r,s=this.asyncScriptCallbackQueue,o=n.target||n.srcElement,l=this}catch(e){console.error("scripts is",P.stringify(i))}a()},$loadBlockingScript:function(e,t,n){var i=n.scripts;n.loadOn;P.bind(function(){P.each(i,function(n){this.loadBlockingScript(e,t,n)},this)},this)()},loadBlockingScript:function(e,t,n){var i=this.scriptURL(n.src),a=P.data.host,r=t.target||t.srcElement;a&&(i=P.basePath()+i),this.argsForBlockingScripts.push([e,t,r]),P.loadScriptSync(i)},pushAsyncScript:function(e){this.asyncScriptCallbackQueue.push(e)},pushBlockingScript:function(e){var t=this.argsForBlockingScripts.shift(),n=t[0];e.apply(n,t.slice(1))},$writeHTML:P.escapeHtmlParams(function(e,t){if(!P.domReadyFired&&n.write)if("pagebottom"===t.type||"pagetop"===t.type)for(var i=2,a=arguments.length;i<a;i++){var r=arguments[i].html;r=P.replace(r,e,t),n.write(r)}else P.notify("You can only use writeHTML on the `pagetop` and `pagebottom` events.",1);else P.notify("Command writeHTML failed. You should try appending HTML using the async option.",1)}),linkNeedsDelayActivate:function(e,n){n=n||t;var i=e.tagName,a=e.getAttribute("target"),r=e.getAttribute("href");return(!i||"a"===i.toLowerCase())&&(!!r&&(!a||"_blank"!==a&&("_top"===a?n.top===n:"_parent"!==a&&("_self"===a||(!n.name||a===n.name)))))},$delayActivateLink:function(e,t){if(this.linkNeedsDelayActivate(e)){P.preventDefault(t);var n=P.settings.linkDelay||100;setTimeout(function(){P.setLocation(e.href)},n)}},isQueueable:function(e){return"writeHTML"!==e.command}}),P.availableTools["default"]=C,P.inherit(w,P.BaseTool),P.extend(w.prototype,{name:"tnt",endPLPhase:function(e){"aftertoolinit"===e&&this.initialize()},initialize:function(){P.notify("Test & Target: Initializing",1),this.initializeTargetPageParams(),this.load()},initializeTargetPageParams:function(){t.targetPageParams&&this.updateTargetPageParams(this.parseTargetPageParamsResult(t.targetPageParams())),this.updateTargetPageParams(this.settings.pageParams),this.setTargetPageParamsFunction()},load:function(){var e=this.getMboxURL(this.settings.mboxURL);!1!==this.settings.initTool?this.settings.loadSync?(P.loadScriptSync(e),this.onScriptLoaded()):(P.loadScript(e,P.bind(this.onScriptLoaded,this)),this.initializing=!0):this.initialized=!0},getMboxURL:function(e){var n=e;return P.isObject(e)&&(n="https:"===t.location.protocol?e.https:e.http),n.match(/^https?:/)?n:P.basePath()+n},onScriptLoaded:function(){P.notify("Test & Target: loaded.",1),this.flushQueue(),this.initialized=!0,this.initializing=!1},$addMbox:function(e,t,n){var i=n.mboxGoesAround,a=i+"{visibility: hidden;}",r=this.appendStyle(a);i in this.styleElements||(this.styleElements[i]=r),this.initialized?this.$addMBoxStep2(null,null,n):this.initializing&&this.queueCommand({command:"addMBoxStep2",arguments:[n]},e,t)},$addMBoxStep2:function(e,i,a){var r=this.generateID(),s=this;P.addEventHandler(t,"load",P.bind(function(){P.cssQuery(a.mboxGoesAround,function(e){var i=e[0];if(i){var o=n.createElement("div");o.id=r,i.parentNode.replaceChild(o,i),o.appendChild(i),t.mboxDefine(r,a.mboxName);var l=[a.mboxName];a.arguments&&(l=l.concat(a.arguments)),t.mboxUpdate.apply(null,l),s.reappearWhenCallComesBack(i,r,a.timeout,a)}})},this)),this.lastMboxID=r},$addTargetPageParams:function(e,t,n){this.updateTargetPageParams(n)},generateID:function(){return"_sdsat_mbox_"+String(Math.random()).substring(2)+"_"},appendStyle:function(e){var t=n.getElementsByTagName("head")[0],i=n.createElement("style");return i.type="text/css",i.styleSheet?i.styleSheet.cssText=e:i.appendChild(n.createTextNode(e)),t.appendChild(i),i},reappearWhenCallComesBack:function(e,t,n,i){function a(){var e=r.styleElements[i.mboxGoesAround];e&&(e.parentNode.removeChild(e),delete r.styleElements[i.mboxGoesAround])}var r=this;P.cssQuery('script[src*="omtrdc.net"]',function(e){var t=e[0];if(t){P.scriptOnLoad(t.src,t,function(){P.notify("Test & Target: request complete",1),a(),clearTimeout(i)});var i=setTimeout(function(){P.notify("Test & Target: bailing after "+n+"ms",1),a()},n)}else P.notify("Test & Target: failed to find T&T ajax call, bailing",1),a()})},updateTargetPageParams:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[P.replace(n)]=P.replace(e[n]));P.extend(this.targetPageParamsStore,t)},getTargetPageParams:function(){return this.targetPageParamsStore},setTargetPageParamsFunction:function(){t.targetPageParams=P.bind(this.getTargetPageParams,this)},parseTargetPageParamsResult:function(e){var t=e;return P.isArray(e)&&(e=e.join("&")),P.isString(e)&&(t=P.parseQueryParams(e)),t}}),P.availableTools.tnt=w,P.inherit(S,P.BaseTool),P.extend(S.prototype,{initialize:function(){var e=this.settings;if(!1!==this.settings.initTool){var t=e.url;t="string"==typeof t?P.basePath()+t:P.isHttps()?t.https:t.http,P.loadScript(t,P.bind(this.onLoad,this)),this.initializing=!0}else this.initialized=!0},isQueueAvailable:function(){return!this.initialized},onLoad:function(){this.initialized=!0,this.initializing=!1,this.settings.initialBeacon&&this.settings.initialBeacon(),this.flushQueue()},endPLPhase:function(e){e===this.settings.loadOn&&(P.notify(this.name+": Initializing at "+e,1),this.initialize())},$fire:function(e,t,n){this.initializing?this.queueCommand({command:"fire",arguments:[n]},e,t):n.call(this.settings,e,t)}}),P.availableTools.am=S,P.availableTools.adlens=S,P.availableTools.aem=S,P.availableTools.__basic=S;var M={allowLinker:function(){return P.hasMultipleDomains()},cookieDomain:function(){var e=P.settings.domainList,n=P.find(e,function(e){var n=t.location.hostname;return P.equalsIgnoreCase(n.slice(n.length-e.length),e)});return n?"."+n:"auto"}};P.inherit(D,P.BaseTool),P.extend(D.prototype,{name:"GAUniversal",endPLPhase:function(e){e===this.settings.loadOn&&(P.notify("GAU: Initializing at "+e,1),this.initialize(),this.flushQueue(),this.trackInitialPageView())},getTrackerName:function(){return this.settings.trackerSettings.name||""},isPageCodeLoadSuppressed:function(){return!1===this.settings.initTool||!0===this._cancelToolInit},initialize:function(){if(this.isPageCodeLoadSuppressed())return this.initialized=!0,void P.notify("GAU: Page code not loaded (suppressed).",1);var e="ga"
;t[e]=t[e]||this.createGAObject(),t.GoogleAnalyticsObject=e,P.notify("GAU: Page code loaded.",1),P.loadScriptOnce(this.getToolUrl());var n=this.settings;(M.allowLinker()&&!1!==n.allowLinker?this.createAccountForLinker():this.createAccount(),this.executeInitCommands(),n.customInit)&&(!1===(0,n.customInit)(t[e],this.getTrackerName())&&(this.suppressInitialPageView=!0));this.initialized=!0},createGAObject:function(){var e=function(){e.q.push(arguments)};return e.q=[],e.l=1*new Date,e},createAccount:function(){this.create()},createAccountForLinker:function(){var e={};M.allowLinker()&&(e.allowLinker=!0),this.create(e),this.call("require","linker"),this.call("linker:autoLink",this.autoLinkDomains(),!1,!0)},create:function(e){var t=this.settings.trackerSettings;(t=P.preprocessArguments([t],location,null,this.forceLowerCase)[0]).trackingId=P.replace(this.settings.trackerSettings.trackingId,location),t.cookieDomain||(t.cookieDomain=M.cookieDomain()),P.extend(t,e||{}),this.call("create",t)},autoLinkDomains:function(){var e=location.hostname;return P.filter(P.settings.domainList,function(t){return t!==e})},executeInitCommands:function(){var e=this.settings;e.initCommands&&P.each(e.initCommands,function(e){var t=e.splice(2,e.length-2);e=e.concat(P.preprocessArguments(t,location,null,this.forceLowerCase)),this.call.apply(this,e)},this)},trackInitialPageView:function(){this.suppressInitialPageView||this.isPageCodeLoadSuppressed()||this.call("send","pageview")},call:function(){"function"==typeof ga?this.isCallSuppressed()||(arguments[0]=this.cmd(arguments[0]),this.log(P.toArray(arguments)),ga.apply(t,arguments)):P.notify("GA Universal function not found!",4)},isCallSuppressed:function(){return!0===this._cancelToolInit},$missing$:function(e,t,n,i){i=i||[],i=[e].concat(i),this.call.apply(this,i)},getToolUrl:function(){var e=this.settings,t=P.isHttps();return e.url?t?e.url.https:e.url.http:(t?"https://ssl":"http://www")+".google-analytics.com/analytics.js"},cmd:function(e){var t=["send","set","get"],n=this.getTrackerName();return n&&-1!==P.indexOf(t,e)?n+"."+e:e},log:function(e){var t="GA Universal: sent command "+e[0]+" to tracker "+(this.getTrackerName()||"default");if(e.length>1){P.stringify(e.slice(1));t+=" with parameters "+P.stringify(e.slice(1))}t+=".",P.notify(t,1)}}),P.availableTools.ga_universal=D,P.inherit(I,P.BaseTool),P.extend(I.prototype,{name:"GA",initialize:function(){var e=this.settings,n=t._gaq,i=e.initCommands||[],a=e.customInit;if(n||(_gaq=[]),this.isSuppressed())P.notify("GA: page code not loaded(suppressed).",1);else{if(!n&&!I.scriptLoaded){var r=P.isHttps(),s=(r?"https://ssl":"http://www")+".google-analytics.com/ga.js";e.url&&(s=r?e.url.https:e.url.http),P.loadScript(s),I.scriptLoaded=!0,P.notify("GA: page code loaded.",1)}e.domain;var o=e.trackerName,l=M.allowLinker(),c=P.replace(e.account,location);P.settings.domainList;_gaq.push([this.cmd("setAccount"),c]),l&&_gaq.push([this.cmd("setAllowLinker"),l]),_gaq.push([this.cmd("setDomainName"),M.cookieDomain()]),P.each(i,function(e){var t=[this.cmd(e[0])].concat(P.preprocessArguments(e.slice(1),location,null,this.forceLowerCase));_gaq.push(t)},this),a&&(this.suppressInitialPageView=!1===a(_gaq,o)),e.pageName&&this.$overrideInitialPageView(null,null,e.pageName)}this.initialized=!0,P.fireEvent(this.id+".configure",_gaq,o)},isSuppressed:function(){return this._cancelToolInit||!1===this.settings.initTool},tracker:function(){return this.settings.trackerName},cmd:function(e){var t=this.tracker();return t?t+"._"+e:"_"+e},$overrideInitialPageView:function(e,t,n){this.urlOverride=n},trackInitialPageView:function(){if(!this.isSuppressed()&&!this.suppressInitialPageView)if(this.urlOverride){var e=P.preprocessArguments([this.urlOverride],location,null,this.forceLowerCase);this.$missing$("trackPageview",null,null,e)}else this.$missing$("trackPageview")},endPLPhase:function(e){e===this.settings.loadOn&&(P.notify("GA: Initializing at "+e,1),this.initialize(),this.flushQueue(),this.trackInitialPageView())},call:function(e,t,n,i){if(!this._cancelToolInit){this.settings;var a=this.tracker(),r=this.cmd(e);i=i?[r].concat(i):[r];_gaq.push(i),a?P.notify("GA: sent command "+e+" to tracker "+a+(i.length>1?" with parameters ["+i.slice(1).join(", ")+"]":"")+".",1):P.notify("GA: sent command "+e+(i.length>1?" with parameters ["+i.slice(1).join(", ")+"]":"")+".",1)}},$missing$:function(e,t,n,i){this.call(e,t,n,i)},$postTransaction:function(e,n,i){var a=P.data.customVars.transaction=t[i];this.call("addTrans",e,n,[a.orderID,a.affiliation,a.total,a.tax,a.shipping,a.city,a.state,a.country]),P.each(a.items,function(t){this.call("addItem",e,n,[t.orderID,t.sku,t.product,t.category,t.unitPrice,t.quantity])},this),this.call("trackTrans",e,n)},delayLink:function(e,t){var n=this;if(M.allowLinker()&&e.hostname.match(this.settings.linkerDomains)&&!P.isSubdomainOf(e.hostname,location.hostname)){P.preventDefault(t);var i=P.settings.linkDelay||100;setTimeout(function(){n.call("link",e,t,[e.href])},i)}},popupLink:function(e,n){if(t._gat){P.preventDefault(n);var i=this.settings.account,a=t._gat._createTracker(i)._getLinkerUrl(e.href);t.open(a)}},$link:function(e,t){"_blank"===e.getAttribute("target")?this.popupLink(e,t):this.delayLink(e,t)},$trackEvent:function(e,t){var n=Array.prototype.slice.call(arguments,2);if(n.length>=4&&null!=n[3]){var i=parseInt(n[3],10);P.isNaN(i)&&(i=1),n[3]=i}this.call("trackEvent",e,t,n)}}),P.availableTools.ga=I,_satellite.init({tools:{nejm:{engine:"ga_universal",pageName:"%URI%",forceLowerCase:!0,euCookie:!1,loadOn:"pagebottom",initCommands:[["set","forceSSL",!0]],customInit:function(e){if("undefined"!=typeof t._gaq)return!1;t.uaTracker="nejm",_satellite.setVar("uaTracker","nejm"),e("nejm.require","displayfeatures"),e("nejm.require","ec")},trackerSettings:{trackingId:"UA-2417843-7",name:"nejm",allowAnchor:!1}},"6ddc8066cb1f03f440d8f31adf632bff":{engine:"sc",loadOn:"pagebottom",account:"mmsngaa-nejm-prod",euCookie:!1,sCodeURL:"b6f6e85975d1a63df35e08cc6500015ddb076010/s-code-contents-47e6932036d6de73fb37bb9e696ea08a3da2ab40.js",initVars:{server:"%domain%",currencyCode:"USD",visitorNamespace:"mmsngaa",trackingServer:"mmsngaa.sc.omtrdc.net",campaign:"%utmParameters%",pageName:"%pageName%",channel:"%pageSiteSection%",trackInlineStats:!1,trackDownloadLinks:!0,linkDownloadFileTypes:"avi,css,csv,doc,docx,eps,exe,jpg,js,m4v,mov,mp3,pdf,png,ppt,pptx,rar,svg,tab,txt,vsd,vxd,wav,wma,wmv,xls,xlsx,xml,zip",trackExternalLinks:!0,linkInternalFilters:"%currentDomain%,.mp4,cdf.nejm.org,cdfdev.nejm.org,cdfqa.nejm.org,dev.nejm.org,javascript:,mailto:,qa.nejm.org,search-stage.nejm.org,search.nejm.org,tel:,www.nejm.org",linkLeaveQueryString:!1,dynamicVariablePrefix:"D=",eVar25:"%pageURL%",eVar24:"%pageName%",eVar2:"%userID%",eVar63:"%userLoginStatus%",eVar3:"%userInstitutionID%",eVar38:"%userAudienceSegment%",eVar26:"%pageType%",eVar75:"%pageViewType%",eVar4:"%userCustomerType%",eVar8:"%userProfession%",eVar9:"%userSpecialty%",eVar10:"%userWorkplace%",eVar11:"%userCountry%",eVar76:"%accessIsFreeCountry%",eVar80:"%userSubType%",eVar79:"%campaignCode%",eVar81:"%productSource%",eVar77:"%productCode%",eVar35:"%internalSearchCampaign%",eVar32:"%campaignPromoCode%",eVar36:"%campaignEmpCode%",eVar5:"%aam_sp_bt-segqual_Cookie%",eVar6:"%aam_sp_bt-zam_Cookie%",eVar52:"%queryLink%",eVar74:"%campaignCode%",eVar78:"%promoCode%",eVar42:"%dataLocation%",prop39:"%pageURL%",prop38:"%pageTitle%",prop13:"%articleDOI%",prop47:"%domain%",prop75:"%pageViewType%",prop66:"%userLoginStatus%",prop10:"%userInstitutionID%",prop9:"%userID%",prop14:"%userAudienceSegment%",prop67:"%accessIsFreeCountry%",prop72:"%productSource%",prop62:"%userProfession%",prop63:"%userSpecialty%",prop64:"%userWorkplace%",prop65:"%userCountry%",prop71:"%userSubType%",prop68:"%productCode%",prop70:"%campaignCode%",prop11:"%aam_sp_bt-segqual_Cookie%",prop12:"%aam_sp_bt-zam_Cookie%",prop37:"%queryLink%"},customInit:function(i){function r(e){var n=this;n.s=e;var i=t;i.s_c_in||(i.s_c_il=[],i.s_c_in=0),n._il=i.s_c_il,n._in=i.s_c_in,n._il[n._in]=n,i.s_c_in++,n._c="s_m",n.setup=function(e){i.DIL&&e&&(e.disableDefaultRequest=!0,e.disableScriptAttachment=!0,e.disableCORS=!0,e.secureDataCollection=!1,n.instance=i.DIL.create(e),n.tools=i.DIL.tools)},n.isReady=function(){return!!n.instance},n.getEventCallConfigParams=function(){return n.instance&&n.instance.api&&n.instance.api.getEventCallConfigParams?n.instance.api.getEventCallConfigParams():{}},n.passData=function(e){n.instance&&n.instance.api&&n.instance.api.passData&&n.instance.api.passData(e)}}function s(){if(!t.s_loadT){var e=(new Date).getTime(),n=t.performance?performance.timing:0,i=n?n.requestStart:t.inHeadTS||0;s_loadT=i?Math.round((e-i)/100):""}return s_loadT}function o(e){e.eVar24=_satellite.getVar("pageName"),e.eVar25=_satellite.getVar("pageURL"),e.eVar26=_satellite.getVar("pageType"),e.prop38=_satellite.getVar("pageTitle"),e.prop39=_satellite.getVar("pageURL"),e.prop17=_satellite.buildDate,e.linkTrackVars=e.apl(e.linkTrackVars,"prop69",",",2),e.prop69="",e.linkTrackVars=e.apl(e.linkTrackVars,"eVar1",",",2),e.linkTrackVars=e.apl(e.linkTrackVars,"prop8",",",2),e.eVar1=e.prop8="D=mid",e.events=e.apl(e.events,"event87",",",2),e.prop24=e.eVar100=_satellite.dtmRuleStack||"",e.linkTrackVars=e.apl(e.linkTrackVars,"prop24",",",2),e.linkTrackVars=e.apl(e.linkTrackVars,"eVar100",",",2),""!==e.prop24&&(_satellite.notify("RULESTACK >"+e.prop24,1),_satellite.dtmRuleStack=""),e.eVar27=e.getPreviousValue(e.pageName,"gpv_pn"),e.prop40=e.eVar27,e.prop44=e.getPercentPageViewed(),e.eVar27&&"no value"!=e.eVar27||(e.prop44=""),e.eVar28=e.getDaysSinceLastVisit("gds_lv"),e.prop41=e.eVar28,e.prop42=s(),e.eVar29=e.getNewRepeat(30,"s_getNewRepeat"),e.prop43=e.eVar29,e.eVar30=e.getTimePartingOld("h","-5")+" - "+e.getTimePartingOld("d","-5")+" - "+e.getTimePartingOld("w","-5"),e.prop45=e.eVar30;var i=Date.now(),a=((i=new Date(i)).getTimezoneOffset()/60*-1).toString(),r=e.getTimePartingNew("n",a),o=r.split("|")[0].split(":")[0],l=r.split("|")[0].split(" ")[1],c=r.split("|")[1],d="Weekday";"Saturday"!=c.toLowerCase()&&"Sunday"!=c.toLowerCase()||(d="Weekend");var u="00";r.split("|")[0].split(" ")[0].split(":")[1].match(/\b([0-9]|[0-2][0-9])\b/g)?u="00":r.split("|")[0].split(" ")[0].split(":")[1].match(/\b[3-5][0-9]\b/g)&&(u="30"),e.eVar62=o+":"+u+l+" - "+c+" - "+d,e.eVar31=e.getVisitNum(60),e.prop46=e.eVar31,navigator.userAgent.indexOf("iPhone")>-1&&(e.prop69=t.screen.width+"x"+t.screen.height),e.performanceTiming(),e.AudienceManagement.setup({partner:"mmsngaa",containerNSID:0,uuidCookie:{name:"aam_uuid",domain:"nejm.org",days:30}});var m=DIL.getDil("mmsngaa",0);nejmID=_satellite.getVar("userID"),p=_satellite.configurationSettings.settings.isStaging?"19784":"20839",nejmID&&m.api.aamIdSync({dpid:p,dpuuid:nejmID,minutesToLive:1});var p,g=_satellite.getVar("jwUserIDInUrl");if(p=_satellite.configurationSettings.settings.isStaging?"21013":"21014",g){var f=n.createElement("IMG");f.style.width="0px",f.style.height="0px",f.src="http://mmsngaa.demdex.net/event?d_dpid="+p+"&d_dpuuid="+g,n.body.appendChild(f)}var h=_satellite.readCookie("aam_ident_sites")||"";""!==h&&(h=decodeURIComponent(h),e.eVar94=h),"USA"==e.eVar11&&(e.eVar11="united states")}var l,c,d;"function"!=typeof t.DIL&&(t.DIL=function(e,i){var r,s,o,l,c,d,u,m,p,g,f,h,v,b,y,_,k,C,w,S,D=[];if(e!==Object(e)&&(e={}),o=e.partner,l=e.containerNSID,c=!!e.disableDestinationPublishingIframe,d=e.iframeAkamaiHTTPS,u=e.mappings,m=e.uuidCookie,p=!0===e.enableErrorReporting,g=e.visitorService,f=e.declaredId,h=!0===e.delayAllUntilWindowLoad,v=!0===e.disableIDSyncs,b="undefined"==typeof e.secureDataCollection||!0===e.secureDataCollection,y="boolean"==typeof e.isCoopSafe?e.isCoopSafe:null,_=!0===e.disableDefaultRequest,k=e.afterResultForDefaultRequest,C=e.dpIframeSrc,w=e.visitorConstructor,S=!0===e.disableCORS,p&&DIL.errorModule.activate(),p=!0===t._dil_unit_tests,(r=i)&&D.push(r+""),!o||"string"!=typeof o)return r="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:r,filename:"dil.js"}),Error(r);if(r="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0",(l||"number"==typeof l)&&(l=parseInt(l,10),!isNaN(l)&&0<=l&&(r="")),r&&(l=0,D.push(r),r=""),(s=DIL.getDil(o,l))instanceof DIL&&s.api.getPartner()===o&&s.api.getContainerNSID()===l)return s;if(!(this instanceof DIL))return new DIL(e,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+o+" and containerNSID = "+l);DIL.registerDil(this,o,l);var I={IS_HTTPS:b||"https:"===n.location.protocol,MILLIS_PER_DAY:864e5,DIL_COOKIE_NAME:"AAMC_"+encodeURIComponent(o)+"_"+l,FIRST_PARTY_SYNCS:"AMSYNCS",FIRST_PARTY_SYNCS_ON_PAGE:"AMSYNCSOP",REGION:"REGION",SIX_MONTHS_IN_MINUTES:259200,IE_VERSION:function(){if(n.documentMode)return n.documentMode;for(var e=7;4<e;e--){var t=n.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return e}return null}()};I.IS_IE_LESS_THAN_10="number"==typeof I.IE_VERSION&&10>I.IE_VERSION;var T,E,V={stuffed:{}},A={},L={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},firstRequestHasFired:!1,abortRequests:!1,num_of_cors_responses:0,num_of_cors_errors:0,corsErrorSources:[],num_of_img_responses:0,num_of_img_errors:0,platformParams:{d_nsid:l+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2e3,calledBack:!1,mid:null,noVisitorAPI:!1,VisitorAPI:null,instance:null,releaseType:"no VisitorAPI",isOptedOut:!0,isOptedOutCallbackCalled:!1,admsProcessingStarted:!1,process:function(t){try{if(!this.admsProcessingStarted){this.admsProcessingStarted=!0;var n,i,a,r,s=this;if("function"==typeof t&&"function"==typeof t.getInstance){if(g!==Object(g)||!(n=g.namespace)||"string"!=typeof n)return this.releaseType="no namespace",void this.releaseRequests();if((i=t.getInstance(n,{idSyncContainerID:l}))===Object(i)&&i instanceof t&&"function"==typeof i.isAllowed&&"function"==typeof i.getMarketingCloudVisitorID&&"function"==typeof i.getCustomerIDs&&"function"==typeof i.isOptedOut)return this.VisitorAPI=t,i.isAllowed()?(this.instance=i,a=function(e){"VisitorAPI"!==s.releaseType&&(s.mid=e,s.releaseType="VisitorAPI",s.releaseRequests())},"string"==typeof(r=i.getMarketingCloudVisitorID(a))&&r.length?void a(r):void setTimeout(function(){"VisitorAPI"!==s.releaseType&&(s.releaseType="timeout",s.releaseRequests())},this.getLoadTimeout())):(this.releaseType="VisitorAPI not allowed",void this.releaseRequests());this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(e){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0,L.registerRequest()},getMarketingCloudVisitorID:function(){return this.instance?this.instance.getMarketingCloudVisitorID():null},getMIDQueryString:function(){var e=j.isPopulatedString,t=this.getMarketingCloudVisitorID();return e(this.mid)&&this.mid===t||(this.mid=t),e(this.mid)?"d_mid="+this.mid+"&":""},getCustomerIDs:function(){return this.instance?this.instance.getCustomerIDs():null},getCustomerIDsQueryString:function(e){if(e===Object(e)){var t,n,i="",a=[],r=[];for(t in e)e.hasOwnProperty(t)&&(r[0]=t,(n=e[t])===Object(n)&&(r[1]=n.id||"",r[2]=n.authState||0,a.push(r),r=[]));if(r=a.length)for(e=0;e<r;e++)i+="&d_cid_ic="+F.encodeAndBuildRequest(a[e],"%01");return i}return""},getIsOptedOut:function(){this.instance?this.instance.isOptedOut([this,this.isOptedOutCallback],this.VisitorAPI.OptOut.GLOBAL,!0):(this.isOptedOut=!1,this.isOptedOutCallbackCalled=!0)},isOptedOutCallback:function(e){this.isOptedOut=e,this.isOptedOutCallbackCalled=!0,L.registerRequest()},getLoadTimeout:function(){var e=this.instance;if(e){if("function"==typeof e.getLoadTimeout)return e.getLoadTimeout();if("undefined"!=typeof e.loadTimeout)return e.loadTimeout}return this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE}},declaredId:{declaredId:{init:null,request:null},declaredIdCombos:{},setDeclaredId:function(e,t){var n=j.isPopulatedString,i=encodeURIComponent;if(e===Object(e)&&n(t)){var a=e.dpid,r=e.dpuuid,s=null;if(n(a)&&n(r))return s=i(a)+"$"+i(r),!0===this.declaredIdCombos[s]?"setDeclaredId: combo exists for type '"+t+"'":(this.declaredIdCombos[s]=!0,this.declaredId[t]={dpid:a,dpuuid:r},"setDeclaredId: succeeded for type '"+t+"'")}return"setDeclaredId: failed for type '"+t+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,t=this.declaredId.init,n=encodeURIComponent,i="";return null!==e?i="&d_dpid="+n(e.dpid)+"&d_dpuuid="+n(e.dpuuid):null!==t&&(i="&d_dpid="+n(t.dpid)+"&d_dpuuid="+n(t.dpuuid)),i}},registerRequest:function(e){var t=this.firingQueue;e===Object(e)&&t.push(e),this.firing||!t.length||h&&!DIL.windowLoaded||(this.adms.isOptedOutCallbackCalled||this.adms.getIsOptedOut(),this.adms.calledBack&&!this.adms.isOptedOut&&this.adms.isOptedOutCallbackCalled&&(this.adms.isOptedOutCallbackCalled=!1,(e=t.shift()).src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.adms.getMIDQueryString()+"d_nsid="),j.isPopulatedString(e.corsPostData)&&(e.corsPostData=e.corsPostData.replace(/^d_nsid=/,this.adms.getMIDQueryString()+"d_nsid=")),x.fireRequest(e),this.firstRequestHasFired||"script"!==e.tag&&"cors"!==e.tag||(this.firstRequestHasFired=!0)))},processVisitorAPI:function(){this.adms.process(w||t.Visitor)},getCoopQueryString:function(){var e="";return!0===y?e="&d_coop_safe=1":!1===y&&(e="&d_coop_unsafe=1"),e}},P={MAX_SYNCS_LENGTH:649,id:"destination_publishing_iframe_"+o+"_"+l,url:(b=function(){var e="http://fast.",t="?d_nsid="+l+"#"+encodeURIComponent(n.location.href);return"string"==typeof C&&C.length?C+t:(I.IS_HTTPS&&(e=!0===d?"https://fast.":"https://"),e+o+".demdex.net/dest5.html"+t)})(),onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return 3<=t.length?t[0]+"//"+t[2]:(D.push("getIframeHost: url is malformed: "+e),e)}},iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],ibsDeleted:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,newIframeCreated:null,iframeIdChanged:!1,originalIframeHasLoadedAlready:null,regionChanged:!1,timesRegionChanged:0,attachIframe:function(){function e(){(a=n.createElement("iframe")).sandbox="allow-scripts allow-same-origin",a.title="Adobe ID Syncing iFrame",a.id=i.id,a.name=i.id+"_name",a.style.cssText="display: none; width: 0; height: 0;",a.src=i.url,i.newIframeCreated=!0,t(),n.body.appendChild(a)}function t(){a.addEventListener("load",function(){a.className="aamIframeLoaded",i.iframeHasLoaded=!0,i.requestToProcess()})}if(!I.IS_IE_LESS_THAN_10){var i=this,a=n.getElementById(this.id);a?"IFRAME"!==a.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==a.className?(this.originalIframeHasLoadedAlready=!1,t()):(this.iframeHasLoaded=this.originalIframeHasLoadedAlready=!0,this.iframe=a,this.requestToProcess())):e(),this.iframe=a}},requestToProcess:function(e,t){function n(){r.jsonForComparison.push(e),r.jsonWaiting.push([e,t])}var i,a,r=this;if(i=L.adms.instance,e===Object(e)&&i===Object(i)&&i.idSyncContainerID===l&&(P.ibsDeleted.push(e.ibs),delete e.ibs),e&&!j.isEmptyObject(e))if(i=JSON.stringify(e.ibs||[]),a=JSON.stringify(e.dests||[]),this.jsonForComparison.length){var s,o,c,d=!1;for(s=0,o=this.jsonForComparison.length;s<o;s++)if(c=this.jsonForComparison[s],i===JSON.stringify(c.ibs||[])&&a===JSON.stringify(c.dests||[])){d=!0;break}d?this.jsonDuplicates.push(e):n()}else n();this.receivedThirdPartyCookiesNotification&&this.jsonWaiting.length&&(i=this.jsonWaiting.shift(),!1===this.newIframeCreated&&delete i[0].ibs,this.process(i[0],i[1]),this.requestToProcess()),this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.sendingMessages=!0,this.sendMessages())},checkIfRegionChanged:function(e){var t=F.getDilCookieField(I.REGION);null!==t&&"undefined"!=typeof e.dcs_region&&parseInt(t,10)!==e.dcs_region&&(this.regionChanged=!0,this.timesRegionChanged++,F.setDilCookieField(I.FIRST_PARTY_SYNCS_ON_PAGE,""),F.setDilCookieField(I.FIRST_PARTY_SYNCS,"")),"undefined"!=typeof e.dcs_region&&F.setDilCookieField(I.REGION,e.dcs_region)},processSyncOnPage:function(e){var t,n,i;if((t=e.ibs)&&t instanceof Array&&(n=t.length))for(e=0;e<n;e++)(i=t[e]).syncOnPage&&this.checkFirstPartyCookie(i,"","syncOnPage")},process:function(e,t){var n,i,a,r,s,o,l=encodeURIComponent;if(t===Object(t)&&(o=F.encodeAndBuildRequest(["",t.dpid||"",t.dpuuid||""],",")),(n=e.dests)&&n instanceof Array&&(i=n.length))for(a=0;a<i;a++)r=n[a],s=[l("dests"),l(r.id||""),l(r.y||""),l(r.c||"")],this.addMessage(s.join("|"));if((n=e.ibs)&&n instanceof Array&&(i=n.length))for(a=0;a<i;a++)r=n[a],s=[l("ibs"),l(r.id||""),l(r.tag||""),F.encodeAndBuildRequest(r.url||[],","),l(r.ttl||""),"",o,r.fireURLSync?"true":"false"],r.syncOnPage||(this.canSetThirdPartyCookies?this.addMessage(s.join("|")):r.fireURLSync&&this.checkFirstPartyCookie(r,s.join("|")));this.jsonProcessed.push(e)},checkFirstPartyCookie:function(e,t,n){var i=(n="syncOnPage"===n)?I.FIRST_PARTY_SYNCS_ON_PAGE:I.FIRST_PARTY_SYNCS,a=this.getOnPageSyncData(i),r=!1,s=!1,o=Math.ceil((new Date).getTime()/I.MILLIS_PER_DAY);a?(a=a.split("*"),r=(s=this.pruneSyncData(a,e.id,o)).dataPresent,s=s.dataValid,r&&s||this.fireSync(n,e,t,a,i,o)):(a=[],this.fireSync(n,e,t,a,i,o))},getOnPageSyncData:function(e){var t=L.adms.instance;return t&&"function"==typeof t.idSyncGetOnPageSyncInfo?t.idSyncGetOnPageSyncInfo():F.getDilCookieField(e)},pruneSyncData:function(e,t,n){var i,a,r,s=!1,o=!1;if(e instanceof Array)for(a=0;a<e.length;a++)i=e[a],r=parseInt(i.split("-")[1],10),i.match("^"+t+"-")?(s=!0,n<r?o=!0:(e.splice(a,1),a--)):n>=r&&(e.splice(a,1),a--);return{dataPresent:s,dataValid:o}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort(function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)});e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(e,t,n,i,a,r){function s(e,t,n,i){return function(){d.onPagePixels[e]=null;var a,r,s,o,l=[];if(a=d.getOnPageSyncData(n))for(r=0,s=(a=a.split("*")).length;r<s;r++)(o=a[r]).match("^"+t.id+"-")||l.push(o);d.setSyncTrackingData(l,t,n,i)}}var o,l,c,d=this;if(e){if("img"===t.tag)for(e=t.url,n=I.IS_HTTPS?"https:":"http:",i=0,o=e.length;i<o;i++){l=e[i],c=/^\/\//.test(l);var u=new Image;u.addEventListener("load",s(this.onPagePixels.length,t,a,r)),u.src=(c?n:"")+l,this.onPagePixels.push(u)}}else this.addMessage(n),this.setSyncTrackingData(i,t,a,r)},addMessage:function(e){this.messages.push(e)},setSyncTrackingData:function(e,t,n,i){e.push(t.id+"-"+(i+Math.ceil(t.ttl/60/24))),this.manageSyncsSize(e),F.setDilCookieField(n,e.join("*"))},sendMessages:function(){var e="",t=encodeURIComponent;this.regionChanged&&(e=t("---destpub-clear-dextp---"),this.regionChanged=!1),this.messages.length&&(e=e+t("---destpub-combined---")+this.messages.join("%01"),this.postMessage(e),this.messages=[]),this.sendingMessages=!1},postMessage:function(e){DIL.xd.postMessage(e,this.url,this.iframe.contentWindow),this.messagesPosted.push(e)},receiveMessage:function(e){var t=/^---destpub-to-parent---/;"string"==typeof e&&t.test(e)&&("canSetThirdPartyCookies"===(t=e.replace(t,"").split("|"))[0]&&(this.canSetThirdPartyCookies="true"===t[1],this.receivedThirdPartyCookiesNotification=!0,this.requestToProcess()),this.messagesReceived.push(e))}},M={traits:function(e){return j.isValidPdata(e)&&(A.sids instanceof Array||(A.sids=[]),F.extendArray(A.sids,e)),this},pixels:function(e){return j.isValidPdata(e)&&(A.pdata instanceof Array||(A.pdata=[]),F.extendArray(A.pdata,e)),this},logs:function(e){return j.isValidLogdata(e)&&(A.logdata!==Object(A.logdata)&&(A.logdata={}),F.extendObject(A.logdata,e)),this},customQueryParams:function(e){return j.isEmptyObject(e)||F.extendObject(A,e,L.reservedKeys),this},signals:function(e,t){var n,i=e;if(!j.isEmptyObject(i)){if(t&&"string"==typeof t)for(n in i={},e)e.hasOwnProperty(n)&&(i[t+n]=e[n]);F.extendObject(A,i,L.reservedKeys)}return this},declaredId:function(e){return L.declaredId.setDeclaredId(e,"request"),this},result:function(e){return"function"==typeof e&&(A.callback=e),this},afterResult:function(e){return"function"==typeof e&&(A.postCallbackFn=e),this},useImageRequest:function(){return A.useImageRequest=!0,this},clearData:function(){return A={},this},submit:function(){return x.submitRequest(A),A={},this},getPartner:function(){return o},getContainerNSID:function(){return l},getEventLog:function(){return D},getState:function(){var t={},n={};return F.extendObject(t,L,{registerRequest:!0}),F.extendObject(n,P,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0}),{initConfig:e,pendingRequest:A,otherRequestInfo:t,destinationPublishingInfo:n}},idSync:function(e){if(v)return"Error: id syncs have been disabled";if(e!==Object(e)||"string"!=typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!=typeof e.url||!e.url.length)return"Error: config.url is empty";var t,n=e.url,i=e.minutesToLive,a=encodeURIComponent,r=P;n=n.replace(/^https:/,"").replace(/^http:/,"");if(void 0===i)i=20160;else if(i=parseInt(i,10),isNaN(i)||0>=i)return"Error: config.minutesToLive needs to be a positive number";return t=F.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),e=["ibs",a(e.dpid),"img",a(n),i,"",t],r.addMessage(e.join("|")),L.firstRequestHasFired&&r.requestToProcess(),"Successfully queued"},aamIdSync:function(e){return v?"Error: id syncs have been disabled":e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,this.idSync(e)):"Error: config or config.dpuuid is empty"},passData:function(e){return j.isEmptyObject(e)?"Error: json is empty or not an object":(P.ibsDeleted.push(e.ibs),delete e.ibs,x.defaultCallback(e),e)},getPlatformParams:function(){return L.platformParams},getEventCallConfigParams:function(){var e,t=L,n=t.modStatsParams,i=t.platformParams;if(!n){for(e in n={},i)i.hasOwnProperty(e)&&!t.nonModStatsParams[e]&&(n[e.replace(/^d_/,"")]=i[e]);!0===y?n.coop_safe=1:!1===y&&(n.coop_unsafe=1),t.modStatsParams=n}return n},setAsCoopSafe:function(){return y=!0,this},setAsCoopUnsafe:function(){return y=!1,this}},x={corsMetadata:(T="none",E=!0,"undefined"!=typeof XMLHttpRequest&&XMLHttpRequest===Object(XMLHttpRequest)&&("withCredentials"in new XMLHttpRequest?T="XMLHttpRequest":new Function("/*@cc_on return /^10/.test(@_jscript_version) @*/")()?T="XMLHttpRequest":"undefined"!=typeof XDomainRequest&&XDomainRequest===Object(XDomainRequest)&&(E=!1),0<Object.prototype.toString.call(t.HTMLElement).indexOf("Constructor")&&(E=!1)),{corsType:T,corsCookiesEnabled:E}),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new t[this.corsMetadata.corsType]},submitRequest:function(e){return L.registerRequest(x.createQueuedRequest(e)),!0},createQueuedRequest:function(e){var t,n,i,a=e.callback,r="img";if(!j.isEmptyObject(u))for(t in u)u.hasOwnProperty(t)&&(null==(n=u[t])||""===n||!(t in e)||n in e||n in L.reservedKeys||null!=(i=e[t])&&""!==i&&(e[n]=i));return j.isValidPdata(e.sids)||(e.sids=[]),j.isValidPdata(e.pdata)||(e.pdata=[]),j.isValidLogdata(e.logdata)||(e.logdata={}),e.logdataArray=F.convertObjectToKeyValuePairs(e.logdata,"=",!0),e.logdataArray.push("_ts="+(new Date).getTime()),"function"!=typeof a&&(a=this.defaultCallback),t=this.makeRequestSrcData(e),(n=this.getCORSInstance())&&!0!==e.useImageRequest&&(r="cors"),{tag:r,src:t.src,corsSrc:t.corsSrc,callbackFn:a,postCallbackFn:e.postCallbackFn,useImageRequest:!!e.useImageRequest,requestData:e,corsInstance:n,corsPostData:t.corsPostData}},defaultCallback:function(e,t){var i,a,r,s,o,l,d,u,p;if(P.checkIfRegionChanged(e),P.processSyncOnPage(e),(i=e.stuff)&&i instanceof Array&&(a=i.length))for(r=0;r<a;r++)(s=i[r])&&s===Object(s)&&(o=s.cn,l=s.cv,void 0!==(d=s.ttl)&&""!==d||(d=Math.floor(F.getMaxCookieExpiresInMinutes()/60/24)),u=s.dmn||"."+n.domain.replace(/^www\./,""),p=s.type,o&&(l||"number"==typeof l)&&("var"!==p&&(d=parseInt(d,10))&&!isNaN(d)&&F.setCookie(o,l,1440*d,"/",u,!1),V.stuffed[o]=l));i=e.uuid,j.isPopulatedString(i)&&!j.isEmptyObject(m)&&("string"==typeof(a=m.path)&&a.length||(a="/"),r=parseInt(m.days,10),isNaN(r)&&(r=100),F.setCookie(m.name||"aam_did",i,1440*r,a,m.domain||"."+n.domain.replace(/^www\./,""),!0===m.secure)),c||L.abortRequests||P.requestToProcess(e,t)},makeRequestSrcData:function(e){e.sids=j.removeEmptyArrayValues(e.sids||[]),e.pdata=j.removeEmptyArrayValues(e.pdata||[]);var t=L,n=t.platformParams,i=F.encodeAndBuildRequest(e.sids,","),a=F.encodeAndBuildRequest(e.pdata,","),r=(e.logdataArray||[]).join("&");delete e.logdataArray;var s,l,c,d,u=I.IS_HTTPS?"https://":"http://",m=t.declaredId.getDeclaredIdQueryString(),p=t.adms.instance?t.adms.getCustomerIDsQueryString(t.adms.getCustomerIDs()):"",g=[];for(s in e)if(!(s in t.reservedKeys)&&e.hasOwnProperty(s))if(l=e[s],s=encodeURIComponent(s),l instanceof Array)for(c=0,d=l.length;c<d;c++)g.push(s+"="+encodeURIComponent(l[c]));else g.push(s+"="+encodeURIComponent(l));return e=g.length?"&"+g.join("&"):"",t="d_nsid="+n.d_nsid+t.getCoopQueryString()+m+p+(i.length?"&d_sid="+i:"")+(a.length?"&d_px="+a:"")+(r.length?"&d_ld="+encodeURIComponent(r):""),n="&d_rtbd="+n.d_rtbd+"&d_jsonv="+n.d_jsonv+"&d_dst="+n.d_dst,a=i=(u=u+o+".demdex.net/event")+"?"+t+n+e,2048<i.length&&(i=i.substring(0,2048).substring(0,i.lastIndexOf("&"))),{corsSrc:u+"?_ts="+(new Date).getTime(),src:i,originalSrc:a,corsPostData:t+n+e,isDeclaredIdCall:""!==m}},fireRequest:function(e){if("img"===e.tag)this.fireImage(e);else{var t=(t=L.declaredId).declaredId.request||t.declaredId.init||{};this.fireCORS(e,{dpid:t.dpid||"",dpuuid:t.dpuuid||""})}},fireImage:function(e){var t,n,i=L;i.abortRequests||(i.firing=!0,t=new Image(0,0),i.sent.push(e),t.onload=function(){i.firing=!1,i.fired.push(e),i.num_of_img_responses++,i.registerRequest()},n=function(t){r="imgAbortOrErrorHandler received the event of type "+t.type,D.push(r),i.abortRequests=!0,i.firing=!1,i.errored.push(e),i.num_of_img_errors++,i.registerRequest()},t.addEventListener("error",n),t.addEventListener("abort",n),t.src=e.src)},fireCORS:function(e,t){var n=this,i=L,a=this.corsMetadata.corsType,s=e.corsSrc,l=e.corsInstance,c=e.corsPostData,d=e.postCallbackFn,u="function"==typeof d;if(!i.abortRequests&&!S){i.firing=!0;try{l.open("post",s,!0),"XMLHttpRequest"===a&&(l.withCredentials=!0,l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.onreadystatechange=function(){if(4===this.readyState&&200===this.status)e:{var a;try{if((a=JSON.parse(this.responseText))!==Object(a)){n.handleCORSError(e,t,"Response is not JSON");break e}}catch(l){n.handleCORSError(e,t,"Error parsing response as JSON");break e}v&&(P.ibsDeleted.push(a.ibs),delete a.ibs);try{var s=e.callbackFn;i.firing=!1,i.fired.push(e),i.num_of_cors_responses++,s(a,t),u&&d(a,t)}catch(l){l.message="DIL handleCORSResponse caught error with message "+l.message,r=l.message,D.push(r),l.filename=l.filename||"dil.js",l.partner=o,DIL.errorModule.handleError(l);try{s({error:l.name+"|"+l.message},t),u&&d({error:l.name+"|"+l.message},t)}catch(c){}}finally{i.registerRequest()}}}),l.onerror=function(){n.handleCORSError(e,t,"onerror")},l.ontimeout=function(){n.handleCORSError(e,t,"ontimeout")},l.send(c)}catch(I){this.handleCORSError(e,t,"try-catch")}i.sent.push(e),i.declaredId.declaredId.request=null}},handleCORSError:function(e,t,n){L.num_of_cors_errors++,L.corsErrorSources.push(n)},handleRequestError:function(e,t){var n=L;D.push(e),n.abortRequests=!0,n.firing=!1,n.errored.push(t),n.registerRequest()}},j={isValidPdata:function(e){return!!(e instanceof Array&&this.removeEmptyArrayValues(e).length)},isValidLogdata:function(e){return!this.isEmptyObject(e)},isEmptyObject:function(e){if(e!==Object(e))return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},removeEmptyArrayValues:function(e){var t,n=0,i=e.length,a=[];for(n=0;n<i;n++)null!=(t=e[n])&&""!==t&&a.push(t);return a},isPopulatedString:function(e){return"string"==typeof e&&e.length}},F={convertObjectToKeyValuePairs:function(e,t,n){var i,a,r=[];for(i in t||(t="="),e)e.hasOwnProperty(i)&&(null!=(a=e[i])&&""!==a&&r.push(i+t+(n?encodeURIComponent(a):a)));return r},encodeAndBuildRequest:function(e,t){return e.map(function(e){return encodeURIComponent(e)}).join(t)},getCookie:function(e){e+="=";var t,i,a,r=n.cookie.split(";");for(t=0,i=r.length;t<i;t++){
for(a=r[t];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(e))return decodeURIComponent(a.substring(e.length,a.length))}return null},setCookie:function(e,t,i,a,r,s){var o=new Date;i&&(i*=6e4),n.cookie=e+"="+encodeURIComponent(t)+(i?";expires="+new Date(o.getTime()+i).toUTCString():"")+(a?";path="+a:"")+(r?";domain="+r:"")+(s?";secure":"")},extendArray:function(e,t){return e instanceof Array&&t instanceof Array&&(Array.prototype.push.apply(e,t),!0)},extendObject:function(e,t,n){var i;if(e===Object(e)&&t===Object(t)){for(i in t)!t.hasOwnProperty(i)||!j.isEmptyObject(n)&&i in n||(e[i]=t[i]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return I.SIX_MONTHS_IN_MINUTES},getCookieField:function(e,t){var n,i,a=this.getCookie(e),r=decodeURIComponent;if("string"==typeof a)for(n=0,i=(a=a.split("|")).length-1;n<i;n++)if(r(a[n])===t)return r(a[n+1]);return null},getDilCookieField:function(e){return this.getCookieField(I.DIL_COOKIE_NAME,e)},setCookieField:function(e,t,n){var i=this.getCookie(e),a=!1;if(t=(s=encodeURIComponent)(t),n=s(n),"string"==typeof i){var r,s=0;for(r=(i=i.split("|")).length-1;s<r;s++)if(i[s]===t){i[s+1]=n,a=!0;break}a||(i[s=i.length]=t,i[s+1]=n)}else i=[t,n];this.setCookie(e,i.join("|"),this.getMaxCookieExpiresInMinutes(),"/",this.getDomain(),!1)},setDilCookieField:function(e,t){return this.setCookieField(I.DIL_COOKIE_NAME,e,t)},getDomain:function(e){if(!e&&t.location&&(e=t.location.hostname),e)if(/^[0-9.]+$/.test(e))e="";else{var n=e.split("."),i=n.length-1,a=i-1;if(1<i&&2>=n[i].length&&(2===n[i-1].length||0>",DOMAIN_2_CHAR_EXCEPTIONS,".indexOf(","+n[i]+","))&&a--,0<a)for(e="";i>=a;)e=n[i]+(e?".":"")+e,i--}return e},replaceMethodsWithFunction:function(e,t){var n;if(e===Object(e)&&"function"==typeof t)for(n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t)}};"error"===o&&0===l&&t.addEventListener("load",function(){DIL.windowLoaded=!0});var O=!1,R=function(){O||(O=!0,L.registerRequest(),N(),c||L.abortRequests||P.attachIframe())},N=function(){c||setTimeout(function(){_||L.firstRequestHasFired||("function"==typeof k?M.afterResult(k).submit():M.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)};if(s=n,"error"!==o&&(DIL.windowLoaded?R():"complete"!==s.readyState&&"loaded"!==s.readyState?t.addEventListener("load",function(){DIL.windowLoaded=!0,R()}):(DIL.windowLoaded=!0,R())),"error"!==o)try{DIL.xd.receiveMessage(function(e){P.receiveMessage(e.data)},P.getIframeHost(P.url))}catch(a){}L.declaredId.setDeclaredId(f,"init"),L.processVisitorAPI(),I.IS_IE_LESS_THAN_10&&F.replaceMethodsWithFunction(M,function(){return this}),this.api=M,this.getStuffedVariable=function(e){var t=V.stuffed[e];return t||"number"==typeof t||(t=F.getCookie(e))||"number"==typeof t||(t=""),t},this.validators=j,this.helpers=F,this.constants=I,this.log=D,p&&(this.pendingRequest=A,this.requestController=L,this.setDestinationPublishingUrl=b,this.destinationPublishing=P,this.requestProcs=x,this.variables=V,this.callWindowLoadFunctions=R)},DIL.extendStaticPropertiesAndMethods=function(e){var t;if(e===Object(e))for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},DIL.extendStaticPropertiesAndMethods({version:"7.0",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50},variables:{scriptNodeList:n.getElementsByTagName("script")},windowLoaded:!1,dils:{},isAddedPostWindowLoad:function(e){this.windowLoaded="function"==typeof e?!!e():"boolean"!=typeof e||e},create:function(e){try{return new DIL(e)}catch(t){throw Error("Error in attempt to create DIL instance with DIL.create(): "+t.message)}},registerDil:function(e,t,n){(t=t+"$"+n)in this.dils||(this.dils[t]=e)},getDil:function(e,t){var n;return"string"!=typeof e&&(e=""),t||(t=0),(n=e+"$"+t)in this.dils?this.dils[n]:Error("The DIL instance with partner = "+e+" and containerNSID = "+t+" was not found")},dexGetQSVars:function(e,t,n){return(t=this.getDil(t,n))instanceof this?t.getStuffedVariable(e):""},xd:{postMessage:function(e,t,n){t&&n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1"))},receiveMessage:function(e,n){var i;try{e&&(i=function(t){if("string"==typeof n&&t.origin!==n||"[object Function]"===Object.prototype.toString.call(n)&&!1===n(t.origin))return!1;e(t)}),t[e?"addEventListener":"removeEventListener"]("message",i,!1)}catch(g){}}}}),DIL.errorModule=(l=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),d=!1,{activate:function(){d=!0},handleError:function(e){if(!d)return"DIL error module has not been activated";e!==Object(e)&&(e={});var t=e.name?(e.name+"").toLowerCase():"",i=[];return e={name:t,filename:e.filename?e.filename+"":"",partner:e.partner?e.partner+"":"no_partner",site:e.site?e.site+"":n.location.href,message:e.message?e.message+"":""},i.push(t in c?c[t]:c.noerrortypedefined),l.api.pixels(i).logs(e).useImageRequest().submit(),"DIL error report sent"},pixelMap:c={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020}}),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(e,t,n){var i="";return t=t||"Error caught in DIL module/submodule: ",e===Object(e)?i=t+(e.message||"err has no message"):(i=t+"err is not a valid object",e={}),e.message=i,n instanceof DIL&&(e.partner=n.api.getPartner()),DIL.errorModule.handleError(e),this.errorMessage=i}}}),t.AppMeasurement_Module_AudienceManagement=r,i.loadModule("AudienceManagement"),s(),i.linkTrackVars="eVar1,eVar2,eVar3,eVar4,eVar8,eVar9,eVar10,eVar11,eVar24,eVar25,eVar26,eVar27,eVar28,eVar29,eVar30,eVar31,eVar37,eVar38,eVar39,eVar41,eVar42,eVar45,eVar46,eVar63,eVar70,eVar71,eVar72,eVar75,eVar76,eVar80,eVar94,eVar98",i.linkTrackVars+="prop8,prop9,prop10,prop13,prop14,prop15,prop17,prop18,prop19,prop20,prop21,prop25,prop38,prop39,prop40,prop41,prop43,prop44,prop45,prop46,prop47,prop62,prop63,prop64,prop65,prop66,prop67,prop69,prop71,prop72,prop75",i.pte="event141,event142,event143,event144,event145,event146,event147,event148,event149,event150",i.ptc=!1,i._cb=[],i.usePlugins=!0,i.doPlugins=o,i.registerPostTrackCallback(function(){for(var e=0;e<i._cb.length;e++)i._cb[e]();i._cb=[],i.clearVars()}),i.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),i.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),i.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),i.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),i.getTimePartingOld=new Function("t","z","var s=this,d,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;d=new Date();A=d.getFullYear();if(A=='2009'){B='08';C='01'}if(A=='2010'){B='14';C='07'}if(A=='2011'){B='13';C='06'}if(A=='2012'){B='11';C='04'}if(A=='2013'){B='10';C='03'}if(A=='2014'){B='09';C='02'}if(!B||!C){B='08';C='01'}B='03/'+B+'/'+A;C='11/'+C+'/'+A;D=new Date('1/1/2000');if(D.getDay()!=6||D.getMonth()!=0){return'Data Not Available'}else{z=parseFloat(z);E=new Date(B);F=new Date(C);G=F;H=new Date();if(H>E&&H<G){z=z+1}else{z=z};I=H.getTime()+(H.getTimezoneOffset()*60000);J=new Date(I+(3600000*z));K=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];L=J.getHours();M=J.getMinutes();N=J.getDay();O=K[N];P='AM';Q='Weekday';R='00';if(M>30){R='30'}if(L>=12){P='PM';L=L-12};if(L==0){L=12};if(N==6||N==0){Q='Weekend'}T=L+':'+R+P;if(t=='h'){return T}if(t=='d'){return O}if(t=='w'){return Q}}"),i.getTimePartingNew=new Function("h","z","var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,U,ds,de,tm,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date();z=z?z:0;z=parseFloat(z);if(s._tpDST){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();U=' AM';if(H>=12){U=' PM';H=H-12;}if(H==0){H=12;}D=da[D];tm=H+':'+M+U;return(tm+'|'+D);}"),i.getVisitNum=new Function("tp","c","c2","var s=this,e=new Date,cval,cvisit,ct=e.getTime(),d;if(!tp){tp='m';}if(tp=='m'||tp=='w'||tp=='d'){eo=s.endof(tp),y=eo.getTime();e.setTime(y);}else {d=tp*86400000;e.setTime(ct+d);}if(!c){c='s_vnum';}if(!c2){c2='s_invisit';}cval=s.c_r(c);if(cval){var i=cval.indexOf('&vn='),str=cval.substring(i+4,cval.length),k;}cvisit=s.c_r(c2);if(cvisit){if(str){e.setTime(ct+1800000);s.c_w(c2,'true',e);return str;}else {return 'unknown visit number';}}else {if(str){str++;k=cval.substring(0,i);e.setTime(k);s.c_w(c,k+'&vn='+str,e);e.setTime(ct+1800000);s.c_w(c2,'true',e);return str;}else {s.c_w(c,e.getTime()+'&vn=1',e);e.setTime(ct+1800000);s.c_w(c2,'true',e);return 1;}}"),i.dimo=new Function("m","y","var d=new Date(y,m+1,0);return d.getDate();"),i.endof=new Function("x","var t=new Date;t.setHours(0);t.setMinutes(0);t.setSeconds(0);if(x=='m'){d=s.dimo(t.getMonth(),t.getFullYear())-t.getDate()+1;}else if(x=='w'){d=7-t.getDay();}else {d=1;}t.setDate(t.getDate()+d);return t;"),i.apl=new Function("L","v","d","u","var s=this,m=0;if(!L)L='';if(u){var i,n,a=s.split(L,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)L=L?L+d+v:v;return L"),i.getPercentPageViewed=new Function("n","var s=this,W=window,EL=W.addEventListener,AE=W.attachEvent,E=['load','unload','scroll','resize','zoom','keyup','mouseup','touchend','orientationchange','pan'];W.s_Obj=s;s_PPVid=(n=='-'?s.pageName:n)||s.pageName||location.href;if(!W.s_PPVevent){s.s_PPVg=function(n,r){var k='s_ppv',p=k+'l',c=s.c_r(n||r?k:p),a=c.indexOf(',')>-1?c.split(',',10):[''],l=a.length,i;a[0]=unescape(a[0]);r=r||(n&&n!=a[0])||0;a.length=10;if(typeof a[0]!='string')a[0]='';for(i=1;i<10;i++)a[i]=!r&&i<l?parseInt(a[i])||0:0;if(l<10||typeof a[9]!='string')a[9]='';if(r){s.c_w(p,c);s.c_w(k,'?')}return a};W.s_PPVevent=function(e){var W=window,D=document,B=D.body,E=D.documentElement,S=window.screen||0,Ho='offsetHeight',Hs='scrollHeight',Ts='scrollTop',Wc='clientWidth',Hc='clientHeight',C=100,M=Math,J='object',N='number',s=W.s_Obj||W.s||0;e=e&&typeof e==J?e.type||'':'';if(!e.indexOf('on'))e=e.substring(2);s_PPVi=W.s_PPVi||0;if(W.s_PPVt&&!e){clearTimeout(s_PPVt);s_PPVt=0;if(s_PPVi<2)s_PPVi++}if(typeof s==J){var h=M.max(B[Hs]||E[Hs],B[Ho]||E[Ho],B[Hc]||E[Hc]),X=W.innerWidth||E[Wc]||B[Wc]||0,Y=W.innerHeight||E[Hc]||B[Hc]||0,x=S?S.width:0,y=S?S.height:0,r=M.round(C*(W.devicePixelRatio||1))/C,b=(D.pageYOffset||E[Ts]||B[Ts]||0)+Y,p=h>0&&b>0?M.round(C*b/h):0,O=W.orientation,o=!isNaN(O)?M.abs(o)%180:Y>X?0:90,L=e=='load'||s_PPVi<1,a=s.s_PPVg(s_PPVid,L),V=function(i,v,f,n){i=parseInt(typeof a==J&&a.length>i?a[i]:'0')||0;v=typeof v!=N?i:v;v=f||v>i?v:i;return n?v:v>C?C:v<0?0:v};if(new RegExp('(iPod|iPad|iPhone)').exec(navigator.userAgent||'')&&o){o=x;x=y;y=o}o=o?'P':'L';a[9]=L?'':a[9].substring(0,1);s.c_w('s_ppv',escape(W.s_PPVid)+','+V(1,p,L)+','+(L||!V(2)?p:V(2))+','+V(3,b,L,1)+','+X+','+Y+','+x+','+y+','+r+','+a[9]+(a[9]==o?'':o))}if(!W.s_PPVt&&e!='unload')W.s_PPVt=setTimeout(W.s_PPVevent,333)};for(var f=W.s_PPVevent,i=0;i<E.length;i++)if(EL)EL(E[i],f,false);else if(AE)AE('on'+E[i],f);f()};var a=s.s_PPVg();return!n||n=='-'?a[1]:a"),i.performanceTiming=new Function("v","var s=this;if(v)s.ptv=v;if(typeof performance!='undefined'){if(performance.timing.loadEventEnd==0){s.pi=setInterval(function(){s.performanceWrite()},250);}if(!s.ptc||s.linkType=='e'){s.performanceRead();}else{s.rfe();s[s.ptv]='';}}"),i.performanceWrite=new Function("","var s=this;if(performance.timing.loadEventEnd>0)clearInterval(s.pi);try{if(s.c_r('s_ptc')==''&&performance.timing.loadEventEnd>0){try{var pt=performance.timing;var pta='';pta=s.performanceCheck(pt.fetchStart,pt.navigationStart);pta+='^^'+s.performanceCheck(pt.domainLookupStart,pt.fetchStart);pta+='^^'+s.performanceCheck(pt.domainLookupEnd,pt.domainLookupStart);pta+='^^'+s.performanceCheck(pt.connectEnd,pt.connectStart);pta+='^^'+s.performanceCheck(pt.responseStart,pt.connectEnd);pta+='^^'+s.performanceCheck(pt.responseEnd,pt.responseStart);pta+='^^'+s.performanceCheck(pt.loadEventStart,pt.domLoading);pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.loadEventStart);pta+='^^'+s.performanceCheck(pt.loadEventEnd,pt.navigationStart);s.c_w('s_ptc',pta);if(sessionStorage&&navigator.cookieEnabled&&s.ptv!='undefined'){var pe=performance.getEntries();var tempPe='';for(var i=0;i<pe.length;i++){tempPe+='!';tempPe+=pe[i].name.indexOf('?')>-1?pe[i].name.split('?')[0]:pe[i].name;tempPe+='|'+(Math.round(pe[i].startTime)/1000).toFixed(1)+'|'+(Math.round(pe[i].duration)/1000).toFixed(1)+'|'+pe[i].initiatorType;}sessionStorage.setItem('s_pec',tempPe);}}catch(err){return;}}}catch(err){return;}"),i.performanceCheck=new Function("a","b","if(a>=0&&b>=0){if((a-b)<60000&&((a-b)>=0)){return((a-b)/1000).toFixed(2);}else{return 600;}}"),i.performanceRead=new Function("","var s=this;if(performance.timing.loadEventEnd>0)clearInterval(s.pi);var cv=s.c_r('s_ptc');if(s.pte){var ela=s.pte.split(',');}if(cv!=''){var cva=s.split(cv,'^^');if(cva[1]!=''){for(var x=0;x<(ela.length-1);x++){s.events=s.apl(s.events,ela[x]+'='+cva[x],',',2);}}s.events=s.apl(s.events,ela[ela.length-1],',',2);}s.linkTrackEvents=s.apl(s.linkTrackEvents,s.pte,',',2);s.c_w('s_ptc','',0);if(sessionStorage&&navigator.cookieEnabled&&s.ptv!='undefined'){s[s.ptv]=sessionStorage.getItem('s_pec');sessionStorage.setItem('s_pec','',0);}else{s[s.ptv]='sessionStorage Unavailable';}s.ptc=true;"),i.rfe=new Function("","var s=this;var ea=s.split(s.events,',');var pta=s.split(s.pte,',');try{for(x in pta){s.events=s.rfl(s.events,pta[x]);s.contextData['events']=s.events;}}catch(e){return;}"),i.rfl=new Function("l","v","d1","d2","ku","var s=this,R=new Array(),C='',d1=!d1?',':d1,d2=!d2?',':d2,ku=!ku?0:1;if(!l)return'';L=l.split(d1);for(i=0;i<L.length;i++){if(L[i].indexOf(':')>-1){C=L[i].split(':');C[1]=C[0]+':'+C[1];L[i]=C[0];}if(L[i].indexOf('=')>-1){C=L[i].split('=');C[1]=C[0]+'='+C[1];L[i]=C[0];}if(L[i]!=v&&C)R.push(C[1]);else if(L[i]!=v)R.push(L[i]);else if(L[i]==v&&ku){ku=0;if(C)R.push(C[1]);else R.push(L[i]);}C='';}return s.join(R,{delim:d2})"),i.ActivityMap.link=function(n,i){try{var r,s=$(n).closest("[data-element-name],[data-interactiontype]");if(t.$&&s.length>0)return s[0].getAttribute("data-element-name")||s[0].getAttribute("data-interactiontype");if(i)return i;if(i)r=g(k(i),e.linkExclusions);else if((r=n)&&!(r=q(n,"sObjectId","s-object-id","s_objectID",1))){var o,l;(l=g(k(n.innerText||n.textContent),e.linkExclusions))||(a(n,o=[],r={a:void 0,t:void 0,s:void 0}),(l=g(k(o.join(""))))||(l=g(k(r.a?r.a:r.t?r.t:r.s?r.s:void 0)))||!(o=(o=n.tagName)&&o.toUpperCase?o.toUpperCase():"")||("INPUT"==o||"SUBMIT"==o&&n.value?l=g(k(n.value)):"IMAGE"==o&&n.src&&(l=g(k(n.src))))),r=l}return r}catch(c){return(n.innerText||n.textContent).trim()}},i.ActivityMap.region=function(e){if(0!==e){var n=$(e).closest("[data-location-name],[data-location]");if(t.$&&n.length>0){var i,a=n[0].getAttribute("data-location-name"),r=n[0].getAttribute("data-location");if(i=a&&r?r+":"+a:a||r)return _satellite.setCookie("dtm_cusLinkPageArea ",i),i}for(var s,o={header:1,navbar:1,"left-content":1,"main-content":1,footer:1};e&&(e=e.parentNode);)if((s=e.className)&&o[s])return s;return"BODY"}}}},"6bf96895ddd22cc38128224e88c2236df4224ded":{engine:"tnt",mboxURL:"b6f6e85975d1a63df35e08cc6500015ddb076010/mbox-contents-6bf96895ddd22cc38128224e88c2236df4224ded.js",loadSync:!0,pageParams:{}},e2d1f4affee629e5c41cc08784d014decf6ba68e:{engine:"visitor_id",loadOn:"pagetop",name:"VisitorID",mcOrgId:"600AC8AD54D5818A0A4C98A6@AdobeOrg",autoRequest:!0,initVars:{trackingServer:"mmsngaa.sc.omtrdc.net",loadTimeout:"1100"},customerIDs:{NEJM_ID_Sync_Prod:{id:"%userID%",authState:"AUTHENTICATED"}}}},pageLoadRules:[{name:"AD 250: NEJM.org Init",trigger:[{command:"writeHTML",arguments:[{html:'<div id="DTM_Position_InterstitialBanner" class="InterstitialBanner"></div>\n<div id="DTM_Position_Adhesive" class="Adhesive"></div>'}]},{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-554eb9ec3766660017140000.js"}]}]}],scope:{subdomains:{exclude:["cdf"]}},event:"pagebottom"},{name:"AD 299: mmsAdtech.js  ",trigger:[{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5536be233231300017290300.js"}]}]}],scope:{subdomains:{exclude:["cdf"]}},event:"pagebottom"},{name:"AD 399: DAC.js",trigger:[{command:"writeHTML",arguments:[{html:"<script>\n/**\n * ADTECH DAC 2.0 JS Library\n *\n * Async Tag - Primary\n * Tag for network 5493: NEJM \n * Website: QA.NEJM.org and NEJM.org\n**/\n(function() {\n  var _satellite = window._satellite,\n      standardDAC = 'http://aka-cdn-ns.adtechus.com/dt/common/DAC.js',\n      secureDAC   = 'https://aka-cdn.adtechus.com/dt/common/DAC.js',\n      protocol = _satellite.getVar('protocol'),\n      srcDAC = (protocol === 'https:') ? secureDAC : standardDAC;\n\n  document.write('<scr' + 'ipt type=\"text/javascript\" src=\"' + srcDAC + '\"></scri' + 'pt>');\n  _satellite.notify('ADTECH: document.write DAC.js source: [' + srcDAC + ']', 1);\n})();\n</script>"}]}],scope:{subdomains:{exclude:["cdf"]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("isBot"),"false")}],event:"pagetop"},{name:"AD 399: NEJM.org CSS",trigger:[{command:"writeHTML",arguments:[{html:"<style>\n  /**\n   * DTM Name:\n   * AD 399: NEJM.org Styles CSS - Production\n   * Version: 2.0.12\n   *  - adhesive fix\n  **/\n\n  /* Area17 Adtech Ad Overwrites */\n  .m-cta__sponsor-image script {\n    display: inline;\n  }\n\n  /* -------------------------------------------------- */\n  /* Global - all ad placements */\n  .ad {\n    position: relative;\n    z-index: 0;\n  }\n  .no-dtm-pos .ad {\n    display: none;\n  }\n\n  /* -------------------------------------------------- */\n  /* MultipleOptions */\n  #DTM_Position_MultipleOptions {\n    display: block;\n    text-align: center;\n  }\n  #DTM_Position_MultipleOptions img {\n    display: inline-block;\n  }\n\n  /* -------------------------------------------------- */\n  /* MedRectangle */\n  #DTM_Position_MedRectangle_Wrap,\n  #DTM_Position_MedRectangle {\n    display: none;\n  }\n  @media screen and (min-width: 1024px) {\n    #DTM_Position_MedRectangle_Wrap,\n    #DTM_Position_MedRectangle {\n      display: block;\n    }\n    #DTM_Position_MedRectangle > iframe {\n      width: 300px;\n      height: 250px;\n    }\n  }\n\n  /* -------------------------------------------------- */\n  /* Topbanner */\n  .ad-topbanner-wrap {\n    background: #fff;\n  }\n  @media screen and (min-width: 768px) {\n    .ad-topbanner-wrap {\n      border-bottom: 1px solid #e2e2e2;\n    }\n  }\n\n  .ad-topbanner-wrap .ad-topbanner {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    position: relative;\n    left: 0;\n    right: 0;\n    top: 0;\n    -ms-flex-flow: column;\n    flex-flow: column;\n    z-index: auto !important;\n  }\n  @media screen and (min-width: 1024px) {\n    .ad-topbanner-wrap .ad-topbanner {\n      padding-top: 12px;\n      padding-bottom: 13px;\n    }\n  }\n\n  @media screen and (min-width: 768px) {\n    .ad-topbanner-wrap .ad-topbanner::after {\n      font-family: Helvetica, Arial, sans-serif;\n      font-size: 10px;\n      line-height: 12px;\n      font-weight: 700;\n      font-style: normal;\n      margin-bottom: 0;\n      padding-top: 8px;\n      padding-bottom: 5px;\n      text-transform: uppercase;\n      letter-spacing: .12em;\n      content: 'Advertisement';\n      display: block;\n      -webkit-box-ordinal-group: 2;\n      -ms-flex-order: 1;\n      order: 1;\n      color: #b3b3b3;\n      text-align: center;\n    }\n    .wf-active .ad-topbanner-wrap .ad-topbanner::after {\n      font-family: \"ff-scala-sans-web-pro\", Helvetica, Arial, sans-serif;\n    }\n  }\n  @media screen and (min-width: 1024px) {\n    .ad-topbanner-wrap .ad-topbanner::after {\n      position: absolute;\n      left: 50%;\n      height: 90px;\n      margin-left: -375px;\n      padding-top: 0;\n      padding-bottom: 0;\n      font-size: 9px;\n      font-weight: 700;\n      letter-spacing: .12em;\n      line-height: 10px;\n      -webkit-transform: rotate(-90deg);\n      -o-transform: rotate(-90deg);\n      transform: rotate(-90deg);\n    }\n  }\n\n  .ad-topbanner-wrap .ad-topbanner .ad {\n    display: block;\n    -webkit-box-ordinal-group: 3;\n    -ms-flex-order: 2;\n    order: 2;\n    width: 100%;\n  }\n\n  /* Default Topbanner Style */\n  @media screen and (min-width: 768px) {\n    #DTM_Position_Topbanner {\n      width: 728px;\n      height: 90px;\n      margin: 26px auto 0;\n      z-index: 15 !important;\n    }\n    /* Hamburger Icon Menu Active */\n    .s-menu-active #DTM_Position_Topbanner {\n      z-index: 10 !important;\n    }\n    .ad-topbanner-wrap #DTM_Position_Topbanner {\n      margin: 0 auto;\n    }\n  }\n  @media screen and (min-width: 1024px) {\n    #DTM_Position_Topbanner {\n      margin: 13px auto;\n    }\n    .ad-topbanner-wrap #DTM_Position_Topbanner {\n      margin: 0 auto;\n    }\n  }\n  \n  #DTM_Position_Topbanner > iframe {\n    float: left;\n    height: 0;\n  }\n  @media screen and (min-width: 768px) {\n    #DTM_Position_Topbanner > iframe {\n      width: 728px;\n      height: 90px;\n    }\n  }\n\n  /* Fixed Topbanner */\n  @media screen and (min-width: 768px) {\n    .ad-fixed {\n      width: 100%;\n      height: 115px;\n      overflow: hidden;\n    }\n    .ad-fixed .ad-topbanner {\n      position: fixed;\n      top: 0;\n      width: 100%;\n      height: 115px;\n      border-bottom: 1px solid #e2e2e2;\n      background: #fff;\n      z-index: 15 !important;\n    }\n  }\n  @media screen and (min-width: 1024px) {\n    .ad-fixed {\n      height: 116px;\n    }\n    .ad-fixed .ad-topbanner {\n      position: fixed;\n      top: 0;\n      width: 100%;\n      height: 116px;\n      border-bottom: 1px solid #e2e2e2;\n      background: #fff;\n      z-index: 15 !important;\n    }\n  }\n\n  /* -------------------------------------------------- */\n  /* Adhesive */\n  #DTM_Position_Adhesive_Wrap {\n    position: fixed;\n  }\n  .ad-leaderboard--anchor {\n    position: fixed;\n    z-index: 2;\n    left: 0;\n    right: 0;\n    top: auto;\n    bottom: 0;\n    opacity: 0;\n    -webkit-transition: opacity .25s linear 1s;\n    -o-transition: opacity .25s linear 1s;\n    transition: opacity .25s linear 1s;\n  }\n  .ad-leaderboard--anchor::before {\n    border-top: 1px solid #e2e2e2;\n    border-bottom: 0;\n  }\n  @media screen and (min-width: 768px) {\n    .ad-leaderboard--anchor.ad-fixed {\n      z-index: 15;\n      opacity: 1\n    }\n  }\n  .ad-leaderboard--anchor .close-ad {\n    position: absolute;\n    width: 57px;\n    height: 30px;\n    left: 50%;\n    margin-left: 308px;\n    color: #333;\n    font-size: 14px;\n  }\n  @media screen and (min-width: 1024px) {\n    .ad-leaderboard--anchor .close-ad {\n      margin-left: 349px;\n      top: 43px;\n      -webkit-transform: rotate(90deg);\n      -o-transform: rotate(90deg);\n      transform: rotate(90deg);\n    }\n  }\n  .ad-leaderboard--anchor .close-ad .icon--close {\n    position: absolute;\n  }\n  \n  @media screen and (min-width: 768px) {\n    #DTM_Position_Adhesive {\n      width: 728px;\n      margin: 0 auto;\n    }\n    #DTM_Position_Adhesive > iframe {\n      width: 728px;\n      height: 90px;\n    }\n  }\n\n  /* -------------------------------------------------- */\n  /* Main CSS - Overwrites */\n  .a-banner-square > script {\n    display: none;\n  }\n</style>"}]}],scope:{subdomains:{exclude:["cdf"]}},event:"pagetop"},{name:"Ad Blocker (1/2) - Advertisement.js",trigger:[{command:"writeHTML",arguments:[{html:'<script src="//www.nejm.org/templates/jsp/_mms/ads/advertisement.js"></script>'}]}],event:"pagetop"},{name:"Ad Blocker (2/2) - Analytics",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar82:"yes"}]}],conditions:[function(){return typeof mmsAdvertisement==typeof r?(_satellite.notify("AD BLOCKER Detected: True",1),!0):(_satellite.notify("AD BLOCKER Detected: False",1),!1)}],event:"pagebottom"},{name:"Adobe Target: mmsTarget CSS",trigger:[{command:"writeHTML",arguments:[{html:"<style>\n/**\n * Adobe Target Modal CSS\n * mmsTarget.modal CSS\n * Version 1.0.3\n *  - fix scrollbar spacing\n**/\n\n/**\n * Featherlight - ultra slim jQuery lightbox\n * Version 1.7.13 - http://noelboss.github.io/featherlight/\n *\n * Copyright 2018, No\xebl Raoul Bossart (http://www.noelboss.com)\n * MIT Licensed.\n**/\n\nhtml.with-featherlight {\n\t/* disable global scrolling when featherlights are visible */\n\toverflow: hidden;\n}\n\n.featherlight {\n\tdisplay: none;\n\n\t/* dimensions: spanning the background from edge to edge */\n\tposition:fixed;\n\ttop: 0; right: 0; bottom: 0; left: 0;\n\tz-index: 2147483647; /* z-index needs to be >= elements on the site. */\n\n\t/* position: centering content */\n\ttext-align: center;\n\n\t/* insures that the ::before pseudo element doesn't force wrap with fixed width content; */\n\twhite-space: nowrap;\n\n\t/* styling */\n\tcursor: pointer;\n\tbackground: #333;\n\tbackground: rgba(0, 0, 0, 0.8);\n}\n\n.featherlight:before {\n\t/* position: trick to center content vertically */\n\tcontent: '';\n\tdisplay: inline-block;\n\theight: 100%;\n\tvertical-align: middle;\n}\n\n.featherlight .featherlight-content {\n\t/* make content container for positioned elements (close button) */\n\tposition: relative;\n\n\t/* position: centering vertical and horizontal */\n\ttext-align: left;\n\tvertical-align: middle;\n\tdisplay: inline-block;\n\n\t/* dimensions: cut off images */\n\toverflow: auto;\n\tpadding: 0;\n\tborder-bottom: 20px solid transparent;\n\n\t/* dimensions: handling large content */\n\tmargin-left: 5%;\n\tmargin-right: 5%;\n\tmax-height: 95%;\n\n\t/* styling */\n\t/* background: #fff; */\n\tcursor: auto;\n\n\t/* reset white-space wrapping */\n\twhite-space: normal;\n}\n\n/* handling phones and small screens */\n@media only screen and (max-width: 1024px) {\n\t.featherlight .featherlight-content {\n\t\t/* dimensions: maximize lightbox with for small screens */\n\t\tmargin-left: 0;\n\t\tmargin-right: 0;\n\t\tmax-height: 98%;\n\n\t\t/* padding: 10px 10px 0;\n\t\tborder-bottom: 10px solid transparent; */\n\t}\n}\n\n/* contains the content */\n.featherlight .featherlight-inner {\n\t/* make sure its visible */\n\tdisplay: block;\n}\n\n/* don't show these though */\n.featherlight script.featherlight-inner,\n.featherlight link.featherlight-inner,\n.featherlight style.featherlight-inner {\n\tdisplay: none;\n}\n\n.featherlight .featherlight-close-icon {\n\t/* position: centering vertical and horizontal */\n\tposition: absolute;\n\tz-index: 9999;\n\ttop: 8px;\n\tright: 8px;\n\n\t/* dimensions: 25px x 25px */\n\tline-height: 30px;\n\twidth: 30px;\n\n\t/* styling */\n\tcursor: pointer;\n\ttext-align: center;\n\tfont-family: Arial, sans-serif;\n\tfont-weight: bold;\n\tfont-size: 18px;\n\tbackground: #fff; /* Set the background in case it overlaps the content */\n\t/* background: rgba(255, 255, 255, 0.3); */\n\tcolor: #000;\n\tborder: none;\n\tpadding: 0;\n\n\t/* circular */\n\tborder-radius: 50%;\n}\n\n/* See http://stackoverflow.com/questions/16077341/how-to-reset-all-default-styles-of-the-html5-button-element */\n.featherlight .featherlight-close-icon::-moz-focus-inner {\n\tborder: 0;\n\tpadding: 0;\n}\n\n.featherlight .featherlight-image {\n\t/* styling */\n\twidth: 100%;\n}\n\n\n.featherlight-iframe .featherlight-content {\n\t/* removed the border for image croping since iframe is edge to edge */\n\tborder-bottom: 0;\n\tpadding: 0;\n\t-webkit-overflow-scrolling: touch;\n}\n\n.featherlight iframe {\n\t/* styling */\n\tborder: none;\n}\n\n.featherlight * { /* See https://github.com/noelboss/featherlight/issues/42 */\n\t-webkit-box-sizing: border-box;\n\t-moz-box-sizing: border-box;\n\tbox-sizing: border-box;\n}\n\n/* hide non featherlight items when printing */\n@media print {\n\thtml.with-featherlight > * > :not(.featherlight) {\n\t\tdisplay: none;\n\t}\n}\n</style>"}]}],event:"pagebottom"},{name:"Alert Settings Saved",trigger:[{engine:"sc",command:"addEvent",arguments:["event84"]}],scope:{URI:{include:[/^\/nejm-alerts/i]}},conditions:[function(){var e=$("p.a-alert-bar--success")[0].innerText||$("p.a-alert-bar--success")[0].textContent||"";if("Your changes have been saved."==(e=e.replace(/^\s+|\s+$/g,""))){var t=$('input[type="checkbox"][name="code"],input[type="checkbox"][name="collectionCode"]'),n=0;for(i=0;i<t.length;i++)t[i].checked&&n++;if(n>0)return!0}}],event:"pagebottom"},{name:"All Pages: Page Bottom",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar48:"%userMeterCountRemaining%",eVar49:"%userSubscriptionExpiryNumDays%",eVar50:"%userTotalMeterCount%",eVar93:"%searchPresetFilter%"}]},{engine:"sc",command:"customSetup",arguments:[function(e,t){"y"===(_satellite.getVar("hostisCDF")||"n")&&(t.abort=!0),t.apl||(t.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),t.apl=new Function("L","v","d","u","var s=this,m=0;if(!L)L='';if(u){var i,n,a=s.split(L,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)L=L?L+d+v:v;return L"));var n=_satellite.getVar("pageType")||"",i=sessionStorage.getItem("searchClick");if(sessionStorage.removeItem("searchClick"),i&&("article"==n.toLowerCase()||"gateway"==n.toLowerCase())){var a=JSON.parse(i);t.linkTrackVars=t.apl(t.linkTrackVars,"prop7",",",2),t.linkTrackVars=t.apl(t.linkTrackVars,"events",",",2),t.prop7=a.searchQuery+"||"+a.searchResultRank+"||"+a.searchType,t.events=t.apl(t.events,"event115",",",2)}var r=sessionStorage.getItem("article_topic_c19");sessionStorage.removeItem("article_topic_c19");var s=sessionStorage.getItem("article_topic_v42");sessionStorage.removeItem("article_topic_v42");var o=sessionStorage.getItem("article_topic_v43");sessionStorage.removeItem("article_topic_v43"),o&&"recirc_topics_article"==_satellite.getVar("queryLink")&&(t.linkTrackVars=t.apl(t.linkTrackVars,"events",",",2),t.events=t.apl(t.events,"event102",",",2),t.prop19=r,t.eVar42=s,t.eVar43=o);var l="s_prevLogStatus",c=_satellite.getVar("window.mmsData.user.loginStatus"),d=sessionStorage.getItem(l)||"";if(sessionStorage.setItem(l,c),"signedIn"==c&&"notSignedIn"==d?t.events=t.apl(t.events,"event95",",",2):"notSignedIn"==c&&"signedIn"==d&&(t.events=t.apl(t.events,"event96",",",2)),t.eVar93){var u=0;$.each(mmsData.search.presetFilter,function(e,t){t&&u++}),t.eVar95=u.toString(),t.eVar96=mmsData.search.manualFilter.contentAge||"Default",t.eVar97=mmsData.search.manualFilter.dateRange||"N/A"}}]}],event:"pagebottom"},{name:"All Pages: Page Top",conditions:[function(){return"undefined"==typeof _satellite._notify&&(_satellite._notify=_satellite.notify,_satellite.notify=function(e,t){if(_satellite._notify(e,t),(0===e.indexOf("Rule ")||0===e.indexOf("Direct call Rule "))&&-1!=e.indexOf(" fired.")){_satellite.dtmRuleStack=_satellite.dtmRuleStack||"";var n=e.match(/\".+\"/)[0].replace(/\"/g,"");""===_satellite.dtmRuleStack?_satellite.dtmRuleStack+=n:_satellite.dtmRuleStack+="::"+n}}),t._sdi=t._sdi||{},t._sdi.cookieDomain="nejm.org",
t._sdi.dtm=t._sdi.dtm||{},t._sdi.util=t._sdi.util||{},t._sdi.util.setCookie=function(e,i,a){var r="";if(void 0!==a&&a>0){var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3),r="; expires="+s.toUTCString()}n.cookie=encodeURI(e)+"="+encodeURIComponent(i)+r+"; path=/; domain="+t._sdi.cookieDomain},t._sdi.util.getCookie=function(e){for(var t=encodeURI(e)+"=",i="",a=n.cookie.split(";"),r=0;r<a.length;r++){for(var s=a[r];" "==s.charAt(0);)s=s.substring(1);if(0===s.indexOf(t))return i=s.substring(t.length,s.length),decodeURIComponent(i)}return i},t._sdi.util.removeCookie=function(e){n.cookie=encodeURI(e)+"=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain="+t._sdi.cookieDomain},t._sdi.util.getQueryParam=function(e,n){n||(n=t.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(n);return i&&i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):""},!0}],event:"pagetop"},{name:"Article Page",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar37:"%articleDOI%",eVar39:"%articleType%",eVar41:"%articleViewType%",eVar45:"%articleIssueDate%",eVar46:"%articleIsFree%",eVar51:"%l_articleFindingMethod%",eVar70:"%articleCategory%",eVar72:"%articleAge%",prop13:"D=v37",prop15:"D=v39",prop18:"D=v41",prop19:"%articleTopics%",prop20:"D=v70",prop21:"D=v72",prop25:"D=v46",hier1:"%articleCategory%,%articleType%,%articleTitle%",hier2:"%articleIssueYear%,%articleIssueDate%,%articleTitle%",hier3:"%articleSpecialty%,%articlePrimaryTopic%,%articleTitle%"}]},{engine:"sc",command:"customSetup",arguments:[function(e,t){t.list1=_satellite.getVar("articleSubTopics"),t.list2=_satellite.getVar("articleTopics"),t.linkTrackVars=t.apl(t.linkTrackVars,"eVar29",",",2),t.linkTrackVars=t.apl(t.linkTrackVars,"prop13",",",2),t.linkTrackVars=t.apl(t.linkTrackVars,"list1",",",2),t.linkTrackVars=t.apl(t.linkTrackVars,"list2",",",2),-1==n.location.pathname.indexOf("/doi/exam/")?t.events=t.apl(t.events,"event92",",",2):(t.list1=_satellite.getVar("window.mmsData.cme.topics"),t.list2=_satellite.getVar("window.mmsData.cme.subtopics"),t.eVar61=_satellite.getVar("window.mmsData.cme.name"),t.eVar7=_satellite.getVar("window.mmsData.cme.type"),",,"==t.hier1&&(t.hier1=""),",,"==t.hier2&&(t.hier2=""),",,"==t.hier3&&(t.hier3=""))}]}],conditions:[function(){var e=sessionStorage.getItem("articleFindingMethod");return e?(_satellite.setVar("l_articleFindingMethod",e),sessionStorage.removeItem("articleFindingMethod")):_satellite.setVar("l_articleFindingMethod",""),!0},function(){return _satellite.textMatch(_satellite.getVar("pageType"),/^article$|^gateway$/i)}],event:"pagebottom"},{name:"Article Page - Metrics Tab",trigger:[{engine:"sc",command:"addEvent",arguments:["event109"]}],scope:{URI:{include:[/^\/doi\/.*/i]},hashes:{include:[/^#t=metrics$/i]}},conditions:[function(){return!!$("#metricsTab").length}],event:"pagebottom"},{name:"Article Page - Regional Mboxes",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5c4a0d5864746d615102073d.js"}]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("pageType"),/^article$/i)}],event:"pagebottom"},{name:"CDF - Complete",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar13:"%pageActivityCDF%",eVar14:"%pageActivityStepCDF%",eVar17:"%pageActivityTypeCDF%",eVar20:"%transPaymentMethod%",eVar21:"%transPurchaseID%",eVar37:"%transArticleDOI%",eVar77:"%productCode%",prop55:"%common flow composite%",prop68:"%productCode%",state:"%transState%",transactionID:"%transTransactionID%",zip:"%transZipCode%"}]},{engine:"sc",command:"addEvent",arguments:["event14"]},{engine:"sc",command:"customSetup",arguments:[function(e,t){var n=_satellite.getVar("window.mmsDataCDF.page.activity")||"";switch(n=n.toLowerCase()){case"subscribe":case"subscribe_onestep":t.events=t.apl(t.events,"event27",",",2);break;case"renew":t.events=t.apl(t.events,"event34",",",2);break;case"register":case"register_onestep":t.events=t.apl(t.events,"event32",",",2);break;case"activateindividuals":t.events=t.apl(t.events,"event54",",",2);break;case"payperview":t.events=t.apl(t.events,"event38",",",2);break;case"payforaccess":t.events=t.apl(t.events,"event39",",",2);break;case"paymybill":t.events=t.apl(t.events,"event56",",",2);break;case"weeklycme":case"reviewcme":t.events=t.apl(t.events,"event43",",",2)}if(""!=_satellite.getVar("transProductCode")){t.purchaseID=_satellite.getVar("transPurchaseID"),t.events=t.apl(t.events,"purchase",",",2);var i=_satellite.getVar("transProductCode"),a=1,r=_satellite.getVar("transPrice");t.products=";"+i+";"+a+";"+r}t.eVar9&&(t.eVar9=t.eVar9.toLowerCase(),t.prop63="D=v9"),t._cb.push(t.clearVars)}]},{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-57d829a764746d060800111c.js"}]}]}],scope:{URI:{include:[/^\/nejm-alerts.*$/i]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("cdfFlowIsComplete"),"y")}],event:"pagebottom"},{name:"CDF - Renew One Page Complete",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar13:"RENEW",eVar14:"Complete",eVar17:"OneStep",eVar77:"%productCode%",prop55:"%common flow composite%",prop68:"%productCode%"}]},{engine:"sc",command:"addEvent",arguments:["event14","event34"]},{engine:"sc",command:"customSetup",arguments:[function(e,t){if(t.purchaseID=t.eVar21=t.transactionID=_satellite.getVar("window.mmsData.transaction.purchaseID"),t.purchaseID){t.state=_satellite.getVar("window.mmsData.transaction.state"),t.zip=_satellite.getVar("window.mmsData.transaction.zip"),t.eVar20=_satellite.getVar("window.mmsData.transaction.paymentMethod"),t.currencyCode=_satellite.getVar("window.mmsData.transaction.currency")||"USD";var n=_satellite.getVar("window.mmsData.transaction.productCode")||"",i=_satellite.getVar("window.mmsData.transaction.price")||"";t.products=";"+n+";1;"+i,t.events=t.apl(t.events,"purchase",",",2),sessionStorage.setItem("s_renew",t.purchaseID)}t.eVar9&&(t.eVar9=t.eVar9.toLowerCase(),t.prop63="D=v9"),t.abort&&(t.abort=!1),t.t()}]}],scope:{URI:{include:["renew/ren_onestep_confirm"]}},conditions:[function(){return _satellite.getVar("window.mmsData.transaction.purchaseID")!=sessionStorage.getItem("s_renew")}],event:"pagebottom"},{name:"CDF - Subscribe - Japan / S. Korea",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar13:"%pageActivity%",eVar14:"%pageActivityStep%",eVar17:"%pageActivityType%",prop55:"%common flow composite%"}]},{engine:"sc",command:"addEvent",arguments:["event23"]}],scope:{URI:{include:[/(^\/subscribe\/sub_message.aspx\?msgid=SR_Japan)|(^\/subscribe\/sub_message.aspx\?msgid=SR_SKorea$)/i]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")}],event:"pagebottom"},{name:"CDF - VendorTags Interstitial",trigger:[{engine:"sc",command:"customSetup",arguments:[function(){a.abort=!0}]}],scope:{URI:{include:[/^\/common\/cmn_vendortags.aspx.*$/i]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")}],event:"pagebottom"},{name:"CDF Complete: Proxy Fix",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar14:"complete",prop55:"%common flow composite%"}]},{engine:"sc",command:"addEvent",arguments:["event14"]},{engine:"sc",command:"customSetup",arguments:[function(e,t){var n=_satellite.getQueryParam("MSG_CODE");switch(localStorage.setItem("s_"+n+"_complete","true"),t.eVar17="MultiStep",n){case"REG":t.eVar13="REGISTER",t.transactionID=t.eVar2=t.eVar21,t.events=t.apl(t.events,"event32",",",2),t.events=t.apl(t.events,"event95",",",2);break;case"REG_ONESTEP":t.eVar13="REGISTER",t.eVar17="OneStep",t.transactionID=t.eVar2=t.eVar21,t.events=t.apl(t.events,"event32",",",2),t.events=t.apl(t.events,"event95",",",2);break;case"SUB":t.eVar13="SUBSCRIBE",t.events=t.apl(t.events,"event27",",",2),t.events=t.apl(t.events,"event95",",",2);break;case"SUB_ONESTEP":t.eVar13="SUBSCRIBE",t.eVar17="OneStep",t.events=t.apl(t.events,"event27",",",2),t.events=t.apl(t.events,"event95",",",2);break;case"PMB":t.eVar13="PAYMYBILL",t.events=t.apl(t.events,"event56",",",2);break;case"ACT":t.eVar13="ACTIVATEINDIVIDUALS",t.events=t.apl(t.events,"event54",",",2);break;case"PPV":t.eVar13="PAYPERVIEW",t.events=t.apl(t.events,"event38",",",2);break;case"PFA":t.eVar13="PAYFORACCESS",t.events=t.apl(t.events,"event39",",",2);break;case"WCME":t.eVar13="WEEKLYCME",t.events=t.apl(t.events,"event43",",",2);break;case"RCME":t.eVar13="REVIEWCME",t.events=t.apl(t.events,"event43",",",2);break;case"REN":t.eVar13="RENEW",t.events=t.apl(t.events,"event34",",",2)}}]}],scope:{URI:{include:["nejm-alerts"]}},conditions:[function(){if(location.host.split(".").length>3){var e=_satellite.getQueryParam("MSG_CODE");if(!localStorage.getItem("s_"+e+"_complete"))return!0}return!1},function(){return _satellite.textMatch(_satellite.getQueryParam("MSG_CODE"),/.*/i)}],event:"pagebottom"},{name:"CDF-Title-Field-Switch",trigger:[{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-56bb9b6b64746d4d84001452.js"}]}]}],scope:{subdomains:{include:["cdfqa.nejm.org","cdfdev.nejm.org","cdf.nejm.org"]}},event:"pagebottom"},{name:"CME - Exam Complete",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar65:"%cmeName%",eVar7:"%cmeType%",prop34:"D=v65"}]},{engine:"sc",command:"addEvent",arguments:["event108"]}],scope:{URI:{include:[/^\/doi\/exam\/.*$/i]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("pageActivity"),"showCompleteExam")}],event:"pagebottom"},{name:"CME - Exam Incomplete",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar65:"%cmeName%",eVar7:"%cmeType%",prop34:"D=v65"}]},{engine:"sc",command:"addEvent",arguments:["event107"]}],scope:{URI:{include:[/^\/doi\/exam\/.*$/i]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("pageActivity"),"showIncompleteExam")}],event:"pagebottom"},{name:"CME - Exam Start",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar65:"%cmeName%",eVar7:"%cmeType%",prop34:"D=v65"}]},{engine:"sc",command:"addEvent",arguments:["event103"]}],scope:{URI:{include:[/^\/doi\/exam\/.*$/i]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("pageActivity"),"showExam")}],event:"pagebottom"},{name:"CSS Fix: MTECH-724",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5c74239464746d2e25000490.js"}]}]}],scope:{subdomains:{exclude:["cdf"]}},event:"pagebottom"},{name:"DMD - AIM Reader",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5c547ec664746d0e80000052.js"}]}]}],scope:{subdomains:{include:["www"]}},event:"pagetop"},{name:"GDPR Message",conditions:[function(){return _satellite.notify("GDPR: Condition - Start"),t.mms=t.mms||{},t.mms.gdpr=t.mms.gdpr||{},mms.gdpr.cookie={name:"GDPR",value:"w|",expires:1825,domain:"nejm.org"},_satellite.getVar("mmsCookieHelper"),_satellite.notify("GDPR: mmsCookieHelper.js loaded"),mms.cookie.get(mms.gdpr.cookie.name).indexOf(mms.gdpr.cookie.value)>-1?(_satellite.notify("GDPR: Condition - false"),!1):(_satellite.notify("GDPR: Condition - true"),_satellite.getVar("mmsGdprInit"),_satellite.notify("GDPR: mmsGdprInit.js loaded"),mms.gdpr.init(),!0)}],event:"pagebottom"},{name:"Global Page OnLoad",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55141ae93834350014500300.js"}]}]}],event:"windowload"},{name:"ID Sync NEJM - AM",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-55282b986366320702d00200.js"}]}]}],event:"pagebottom"},{name:"JW Player Video Tracking",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5b7f301764746d665e004d04.js"}]}]}],conditions:[function(){if("function"==typeof jwplayer)return!0}],event:"windowload"},{name:"Layering Logic",trigger:[{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-59401e6e64746d68b8008826.js"}]}]}],scope:{URI:{exclude:["now"]},domains:[/nejm\.org$/i]},event:"pagebottom"},{name:"MOAT Content Tag",trigger:[{command:"writeHTML",arguments:[{html:'<script>\n(function(){function t(){for(var a=[4],e=1;1>=e;e++)a.push(4+e),a.push(4-e);a=a[Math.floor(Math.random()*a.length)];return{b:a,a:0==Math.floor(Math.random()*a)}}function g(a){var e=a=a.replace(":","");try{for(var b=0;100>b&&(a=decodeURIComponent(a),e!=a)&&!a.match(/^http(s)?\\:/);b++)e=a}catch(c){}return a.replace(/(^\\s+|\\s+$)/g,"")}try{if(!location||!location.hostname||!location.pathname)return!1;var c=document.location.hostname.replace(/^www\\./,""),u=function(){for(var a,b=document.getElementsByTagName("meta"),\nc,d=0,f=b.length;d<f;d++)if(c=b[d],"og:title"===c.getAttribute("property")){a=c.getAttribute("content");break}a||(a=document.title||"Untitled");return a}(),b={},b=function(a,b,c){a.l1=b;a.l2=c;a.l3="__page__";a.l4="-";return a}(b,c,u),h=(new Date).getTime(),k=Math.floor(Math.random()*Math.pow(10,12)),l,d;d=t();l=d.a?d.b:0;b.zmoatab_cm=l;b.t=h;b.de=k;b.zMoatAB_SNPT=!0;var m;m=l?l:1;var n;n=d?d.a?!0:!1:!0;var c=[],v=(new Date).getTime().toString(35),p=[g(b.l1),g(b.l2),g(b.l3),g(b.l4)].join(":"),w="https://tffwjwwaaq0b-a.akamaihd.net/"+\nv+".gif?e=17&d="+encodeURIComponent(p)+"&de="+k+"&t="+h+"&i=NEJMCONTENT1&cm="+m+"&mp=1&ac=1&pl=1&bq=10&vc=2&cs=0",x="https://px.moatads.com/pixel.gif?e=17&d="+encodeURIComponent(p)+"&de="+k+"&t="+h+"&i=NEJMCONTENT1&cm="+m+"&mp=0&ac=1&pl=1&bq=10&ad_type=img&vc=2&cs=0",y="https://px.moatads.com/pixel.gif?e=17&d="+encodeURIComponent(p)+"&de="+k+"&t="+h+"&i=NEJMCONTENT1&cm="+m+"&ku=1&ac=1&pl=1&bq=10&ad_type=img&vc=2&cs=0";n&&((new Image).src=w,(new Image).src=x);for(var q in b)c.push(q+"="+encodeURIComponent(b[q]));\nvar c=c.join("&"),c=c+"&vc=2",f=document.createElement("script");f.type="text/javascript";f.async=!0;n&&(f.onerror=function(){(new Image).src=y});var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(f,r);f.src="https://z.moatads.com/nejmcontent732496713334/moatcontent.js#"+c}catch(a){try{var z="//pixel.moatads.com/pixel.gif?e=24&d=data%3Adata%3Adata%3Adata&i=MOATCONTENTABSNIPPET1&vc=2&ac=1&k="+encodeURIComponent(a)+"&j="+encodeURIComponent(document.referrer)+"&cs="+(new Date).getTime();\n(new Image).src=z}catch(e){}}})();\n</script>'}]}],conditions:[function(){var e=t.location.host.split(".")[0];return _satellite.notify("Sub domain: "+e,1),!e.match("cdf")}],event:"pagetop"},{name:"Marketing.Science Consulting Group Tag",trigger:[{command:"writeHTML",arguments:[{html:'<script src="https://api.b2c.com/api/init-180323l4eo513mmefx3.js" data-cfasync="false" async></script>\n<noscript><img src="https://api.b2c.com/api/noscript-180323l4eo513mmefx3.gif"></noscript>'}]}],event:"pagebottom"},{name:"Media - flash tracking listener",trigger:[{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5667438964746d571e0047c1.js"}]}]}],event:"pagebottom"},{name:"My Account",trigger:[{engine:"sc",command:"addEvent",arguments:["event93"]}],scope:{URI:{include:["/nejm-account"]}},event:"pagebottom"},{name:"Now@NEJM CSS: Global",trigger:[{command:"writeHTML",arguments:[{html:"<style>\n\t#DTM_Ad_Wrapper_Right_1 {\n    display: none;\n  }\n</style>\n<!--[if lt IE 10]>\n<style>\n  a[href*=adtechus] {\n    display: none;\n  }\n</style>\n<![endif]-->"}]}],scope:{URI:{include:["now"]},subdomains:{include:["blogs"]}},event:"pagetop"},{name:"Now@NEJM HTML: ADTECH Tag - RightTower",trigger:[{command:"writeHTML",arguments:[{html:"<div id=\"DTM_Ad_Wrapper_Right_1\">\n<script language=\"javascript\">\n  (function(){\n    var adtechRightTowerID = _satellite.getVar(\"adtechRightTowerID\");\n    document.write(\n      '<scr'+'ipt src=\"https://adserver.adtechus.com/addyn/3.0/5493.1/'\n      + adtechRightTowerID\n      + '/0/170/ADTECH;loc=100;target=_blank;key=key1+key2+key3+key4;grp=[group];misc=' \n      + new Date().getTime() \n      + '\"></scri'+'pt>'\n    );\n\n    _satellite.notify(\"ADTECH RIGHT TOWER ID : \"+ adtechRightTowerID, 1);\n  })();\n</script>\n</div>"}]}],scope:{URI:{include:["now"]},subdomains:{include:["blogs"]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("adtechRightTowerID"),/^[0-9]+$/i)}],event:"pagebottom"},{name:"Now@NEJM JS: DOM Ready",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-567466ff64746d6fd3002928.js"}]}]}],scope:{URI:{include:["now"]},subdomains:{include:["blogs"]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("adtechRightTowerID"),/^[0-9]+$/i)}],event:"domready"},{name:"OrderConfirmMbox",trigger:[{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5a834f3064746d5ff700123a.js"}]}]}],scope:{URI:{include:[/nejm-alerts/i]},domains:[/nejm\.org$/i]},conditions:[function(){return _satellite.textMatch(_satellite.getVar("cdfFlowIsCompleteTarget"),"y")}],event:"pagetop"},{name:"Quick Take Page",trigger:[{engine:"sc",command:"setVars",arguments:[{eVar54:"%objectCategory%",eVar55:"%objectType%",eVar59:"%objectAge%",eVar60:"%objectDoi%",prop25:"%objectIsFree%",prop48:"%objectCategory%",prop49:"%objectType%",prop73:"%objectDoi%"}]},{engine:"sc",command:"customSetup",arguments:[function(e,t){0===(_satellite.getVar("articleTopics")||[]).length&&(t.list2=_satellite.getVar("objectTopics"))}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("objectType"),/quick take/i)}],event:"pagebottom"},{name:"Register One-Step: Temp Fix",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5bfd8b5364746d4616009fbd.js"}]}]}],scope:{URI:{include:["register/reg_onestep"]}},event:"domready"},{name:"Search Results Page",trigger:[{engine:"sc",command:"customSetup",arguments:[function(e,t){t.abort=!0}]},{command:"loadBlockingScript",arguments:[{sequential:!0,scripts:[{src:"satellite-5519ad3a6634390017c00600.js"}]}]}],scope:{URI:{include:[/^\/search\?.*/i]}},event:"pagebottom"},{name:"iPerception Universal Code",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-56f44bbd64746d08cc00344e.js"}]}]}],event:"pagebottom"}],rules:[{name:"(production testing) PDF Download Event",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"trackDownload - %event.detail.fileType% Download"}]}],selector:"body",eventHandlerOnElement:!0,event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"trackDownload"},{name:"Article Comments : Link Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Comments : LInk Click",setVars:{eVar73:"commentsJump",prop59:"commentsJump"},addEvent:["event101","event89"]}]}],selector:"p.openUntilInfo a[name='discussion'],[data-interactiontype='article_comment_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Comments : Submit New",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Comments ; Submit New ",addEvent:["event88"]}]}],selector:"form[action=\"/action/submitComment\"],[data-interactiontype='article_comment_submit']",eventHandlerOnElement:!0,event:"submit",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Link Click - Set Finding Methods",conditions:[function(){var e=_satellite.getVar("pageType"),t=" ",i="other";switch(this.getAttribute("data-search-result-rank")?i="Results List":$(this).parents("div#searchResultContent").length>0?i="Results List":"Trends"==e?$(this).parents("dd#viewed").length>0?i="Most Viewed":$(this).parents("dd#emailed").length>0?i="Most Emailed":$(this).parents("dd#cited").length>0?i="Most Cited":$(this).parents("dd#citedInPress").length>0&&(i="Most Media"):"Issue Archive"==e?$(this).parents("div.tocContent").length>0&&(i="Results List"):"Home"==e&&($(this).parents("div.articlesListOnlineFirst").length>0?i="Online First":$(this).parents("div.articlesListPerspective").length>0?i="Perspectives":$(this).parents("div.articlesListRight").length>0?i="Results List Right":$(this).parents("div.articlesListLeft").length>0?i="Results List Left":$(this).parents("div.imageBox").length>0&&(i="Image of the Week")),$(this).parents("div#trendsMod").length>0?i="Trends Module":$(this).parents("div.interactiveItem").length>0?i="Feature-Interactive":$(this).parents("div.featuredArticles").length>0?i="Feature-Article":$(this).parents("div.archiveBoxContent").length>0?i="Feature-Archive":$(this).parents("div#related").length>0?i="Related Module":$(this).parents("dd#citedby").length>0?i="Citation":$(this).parents("div.featuredMiddle").length>0?i="Feature-Article":$(this).parents("div.tocContent").length>0?i="Results List":"article_recirculation_click"==$(this).attr("data-interactiontype")&&(i="Recirculation Widget"),e){case"Hub":case"Browse":case"Topic":t=n.location.pathname}var a=e+"::"+t+"::"+i;return sessionStorage.setItem("articleFindingMethod",a),!0}],selector:'a[href*="/doi/"],.articleLink a',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article List : Download PDF",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Download PDF",setVars:{eVar46:"%l_downloadArticleFree%",eVar66:"%l_downloadFileName%",eVar84:"%l_downloadType%",eVar85:"%l_downloadFormat%",eVar86:"%l_downloadContentID%",eVar87:"%l_downloadFileType%",prop25:"D=v46",prop31:"D=v87",prop32:"D=v85",prop60:"D=v84",prop61:"D=v66"},customSetup:function(e,n){"Download PDF"==this.getAttribute("data-tooltip")&&(n.eVar84="Article PDF",n.eVar85=n.eVar87="PDF"),t.$&&$(this).closest("[data-article-tools]").length>0&&(n.events+=",event106",n.linkTrackEvents="event106",n.eVar46=_satellite.getVar("window.mmsData.article.isFree"))},addEvent:["event67"]}]},{command:"delayActivateLink"}],conditions:[function(){var e=this.getAttribute("data-download-type")||"",t=this.getAttribute("data-download-content")||"",n=this.getAttribute("data-download-contentid")||"",i=this.getAttribute("data-download-format")||"",a=this.getAttribute("href")||"",r=this.getAttribute("data-download-filetype")||"not specified";_satellite.setVar("l_downloadType",e),_satellite.setVar("l_downloadContent",t),_satellite.setVar("l_downloadContentID",n),_satellite.setVar("l_downloadFormat",i),_satellite.setVar("l_downloadFileName",decodeURIComponent(a)),_satellite.setVar("l_downloadFileType",r);var s="n";s=(jQuery(this).closest(".m-result,.m-teaser-item").find("svg.icon--free")||[]).length>0?"y":_satellite.getVar("window.mmsData.article.isFree")||s,_satellite.setVar("l_downloadArticleFree",s);var o=_satellite.getVar("window.mmsData.user.audienceSegment")||"";return o=o.toLowerCase(),"y"===s||!(o.indexOf("barter")>-1||o.indexOf("notactivated")>-1)&&(0==o.indexOf("active")||void 0)}],selector:"div.pdf_save a[data-download-type],[data-interactiontype='article_list_download_pdf'],a[data-download-type='PDF'],a[data-tooltip='Download PDF']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Metrics Icon Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Metrics Icon Click: %l_metricsIconName%",setVars:{eVar94:"%l_metricsIconName%"},addEvent:["event110"]}]}],conditions:[function(){var e=$(this).attr().replace(/^\s+|\s+$/gm,"")||$(this).find(".title").text().replace(/^\s+|\s+$/gm,"");return _satellite.setVar("l_metricsIconName",e),!0}],selector:".articleTabs .section-icons a.icon-wrapper,[data-interactiontype='article_icon']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tab Clicks",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tab Click : %l_tabName%",setVars:{eVar73:"%l_tabName%",prop59:"%l_tabName%"},customSetup:function(e,t){var n=_satellite.getVar("l_tabName");"metricsWindow"==n?(t.eVar73="",t.prop59=""):"commentsJump"==n||(t.events=t.apl(t.events,"event101",",",2),t.linkTrackEvents=t.apl(t.linkTrackEvents,"event101",",",2))}}]}],conditions:[function(){var e=this.getAttribute("data-tabname");return _satellite.setVar("l_tabName",e),!0}],selector:"dl.articleTabs #lettersTab, dl.articleTabs #articleTab, dl.articleTabs #referencesTab, dl.articleTabs #commentsTab, dl.articleTabs #citedbyTab, dl.articleTabs #abstractTab, dl.articleTabs #metricsTab, dl.articleTabs #glossaryTab,[data-interactiontype='article_tab']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tab Clicks - Mobile",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tab Click : %l_tabName%",setVars:{eVar73:"%l_tabName%",prop59:"%l_tabName%"},customSetup:function(e,t){"Comments"==_satellite.getVar("l_tabName")&&(t.events=t.apl(t.events,"event89",",",2),t.linkTrackEvents=t.apl(t.linkTrackEvents,"event89",",",2))},addEvent:["event101"]}]}],conditions:[function(){if("Show"==_satellite.text($(this).find("div.status")[0]))return!1;var e=$(this).find("h2")[0],t=_satellite.text(e).replace(/\(.+\)/,"").replace(/^\s+|\s+$/gm,"");return _satellite.setVar("l_tabName",t),!0}],selector:'section.a-sec a[href^="#"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Article Alert",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Article Alert",addEvent:["event74"]}]}],selector:"div#toolsBox li.getAlert a,[data-interactiontype='article_alert']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : CME",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : CME",addEvent:["event104"]}]}],selector:"div#toolsBox li.getCME a,div.tools li.getCME a,[data-interactiontype='article_tools_cme_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Download Citation",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Download Citation",setVars:{eVar66:"%l_downloadFileName%",eVar84:"%l_downloadType%",eVar85:"%l_downloadFormat%",eVar87:"%l_downloadFileType%",prop31:"D=v87",prop32:"D=v85",prop60:"D=v84",prop61:"D=v66"},addEvent:["event67","event69"]}]}],conditions:[function(){if(-1!=this.className.indexOf("event-layer-downloadCitation"))var e=" : "+_satellite.text(this).replace(/^\s+|\s+$/gm,"");_satellite.setVar("l_citationType",e);var t=this.getAttribute("data-download-type")||"",n=this.getAttribute("data-download-content")||"",i=this.getAttribute("data-download-contentid")||"",a=this.getAttribute("data-download-format")||"",r=this.getAttribute("href")||"",s=this.getAttribute("data-download-filetype")||"not specified";return _satellite.setVar("l_downloadType",t),_satellite.setVar("l_downloadContent",n),_satellite.setVar("l_downloadContentID",i),_satellite.setVar("l_downloadFormat",a),_satellite.setVar("l_downloadFileName",decodeURIComponent(r)),_satellite.setVar("l_downloadFileType",s),!0}],selector:"div#toolsLayer ul li a[class^=\"event-layer-downloadCitation\"],div.tools li.downloadCitation a, [data-interactiontype='article_tools_citation_download']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Download PDF  - Mobile",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Download PDF",setVars:{eVar66:"%l_downloadFileName%",eVar84:"%l_downloadType%",eVar85:"%l_downloadFormat%",eVar86:"%l_downloadContentID%",eVar87:"%l_downloadFileType%",prop31:"D=v87",prop32:"D=v85",prop60:"D=v84",prop61:"D=v66"},addEvent:["event106","event67"]}]},{command:"delayActivateLink"}],conditions:[function(){var e="PDF",t="Article",n=$(this).parents("article.a").attr("id")||"",i="PDF",a=this.getAttribute("href")||"",r=this.getAttribute("data-download-filetype")||"not specified";return _satellite.setVar("l_downloadType",e),_satellite.setVar("l_downloadContent",t),_satellite.setVar("l_downloadContentID",n),_satellite.setVar("l_downloadFormat",i),_satellite.setVar("l_downloadFileName",decodeURIComponent(a)),_satellite.setVar("l_downloadFileType",r),!0}],selector:"div.a-tools-menu a.bi-tools-articlePDF",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Email",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Email",setVars:{eVar53:"email"},addEvent:["event72"]}]}],selector:"div#toolsBox li.emailPage a,div.tools li.emailPage a,[data-interactiontype='article_tools_email_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Permissions",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Permissions",addEvent:["event77"]}]}],selector:"div#toolsBox li.permissions a,div.tools li.permissions a, [data-interactiontype='article_tools_permissions_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Pop-Up Glossary",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Pop-Up Glossary Term Click",setVars:{prop16:"%popupText%"},addEvent:["event109"]}]}],conditions:[function(){var e=this.innerText||this.textContent;return e=e.replace(/^\s+|\s+$/g,""),_satellite.setVar("popupText",e),!0}],selector:"a.popUpCluetip, [data-interactiontype='article_tools_popup_glossary_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Print",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Print",addEvent:["event68"]}]}],selector:"div#toolsBox li.printPage a,div.tools li.printPage a,[data-interactiontype='article_tools_print_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Reprints",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Reprints",addEvent:["event76"]}]},{command:"delayActivateLink"}],selector:"div#toolsBox li.reprints a,[data-interactiontype='article_tools_reprints_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Save",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Save",addEvent:["event73"]}]}],selector:"div#toolsBox li.savePage a,[data-interactiontype='article_tools_save_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Slide Set",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Slide Set",setVars:{eVar66:"%l_downloadFileName%",eVar84:"%l_downloadType%",eVar85:"%l_downloadFormat%",eVar86:"%l_downloadContentID%",eVar87:"%l_downloadFileType%",prop31:"%l_downloadFileType%",prop32:"%l_downloadFormat%",prop60:"%l_downloadType%",prop61:"%l_downloadFileName%",prop74:"%l_downloadContentID%"},addEvent:["event65","event67","event70"]}]},{command:"delayActivateLink"}],conditions:[function(){var e=this.getAttribute("data-download-type")||"",t=this.getAttribute("data-download-content")||"",n=this.getAttribute("data-download-contentid")||"",i=this.getAttribute("data-download-format")||"",a=this.getAttribute("href")||"",r=this.getAttribute("data-download-filetype")||"not specified";return _satellite.setVar("l_downloadType",e),_satellite.setVar("l_downloadContent",t),_satellite.setVar("l_downloadContentID",n),_satellite.setVar("l_downloadFormat",i),_satellite.setVar("l_downloadFileName",encodeURIComponent(a)),_satellite.setVar("l_downloadFileType",r),!0}],selector:"div#toolsBox li.downloadSlides a, [data-interactiontype='article_tools_slide_set_download']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Slide Set  - Mobile",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Slideset",setVars:{eVar66:"%l_downloadFileName%",eVar84:"%l_downloadType%",eVar85:"%l_downloadContent%",eVar86:"%l_downloadContentID%",eVar87:"%l_downloadFormat%",prop31:"D=v87",prop32:"D=v85",prop60:"D=v84",prop61:"D=v66",prop74:"D=v86"},addEvent:["event67","event70"]}]},{command:"delayActivateLink"}],conditions:[function(){var e="Slideset",t="Article",n=$(this).parents("article.a").attr("id")||"",i="Slideset",a=this.getAttribute("href")||"";return _satellite.setVar("l_downloadType",e),_satellite.setVar("l_downloadContent",t),
_satellite.setVar("l_downloadContentID",n),_satellite.setVar("l_downloadFormat",i),_satellite.setVar("l_downloadFileName",decodeURIComponent(a)),!0}],selector:"div.a-tools-menu a.bi-tools-slideSet",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Submit a Letter",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Submit a Letter",addEvent:["event75"]}]},{command:"delayActivateLink"}],selector:"div#toolsBox li.submitLetter a,[data-interactiontype='article_tools_submitLetter_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Supplementary Material",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Supplementary Material",addEvent:["event71"]}]}],selector:"div#toolsBox li.supplementaryMaterial a, [data-interactiontype='article_tools_supplementary_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Tools : Supplementary Material - Mobile",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Article Tools : Supplementary Material",setVars:{eVar66:"%l_downloadFileName%",eVar84:"%l_downloadType%",eVar85:"%l_downloadContent%",eVar86:"%l_downloadContentID%",eVar87:"%l_downloadFormat%",prop31:"D=v87",prop32:"D=v85",prop60:"D=v84",prop61:"D=v66",prop74:"D=v86"},addEvent:["event67","event71"]}]},{command:"delayActivateLink"}],conditions:[function(){var e="Supplementary Material",t="Article Supplement",n=$(this).parents("article.a").attr("id")||"",i="Supplementary Material",a=this.getAttribute("href")||"";return _satellite.setVar("l_downloadType",e),_satellite.setVar("l_downloadContent",t),_satellite.setVar("l_downloadContentID",n),_satellite.setVar("l_downloadFormat",i),_satellite.setVar("l_downloadFileName",decodeURIComponent(a)),!0}],selector:"a.bi-supplementaryMaterial-SupplementaryAppendix",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Article Topic Clicks",trigger:[{command:"delayActivateLink"}],conditions:[function(){var e=_satellite.text(this);if(_satellite.setVar("l_topicText",e),"undefined"!=typeof jQuery){var t=jQuery(this).closest("[data-location]");t.length>0&&(t=jQuery(this).closest("[data-location]")[0].getAttribute("data-location"),_satellite.setVar("pageArea",t))}return sessionStorage.setItem("article_topic_c19",_satellite.getVar("articleTopics")),sessionStorage.setItem("article_topic_v42",_satellite.getVar("pageArea")),sessionStorage.setItem("article_topic_v43",_satellite.getVar("l_topicText")),!0}],selector:"div#related div#topics a, [data-interactiontype='related_article_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - Continue Button : Email Updates",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"CDF - Continue Button"}]},{command:"delayActivateLink"}],conditions:[function(){if("#pemailUpdate"==_satellite.getVar("documentHash")&&"/register/reg_multistep.aspx"==n.location.pathname){if($("#ContentPlaceHolder1_form_ctl_emailupdates1_chkEmailInfo")[0].checked)return!0}else if("#pprofInfo"==_satellite.getVar("documentHash")&&"/activate/act_form.aspx"==n.location.pathname){if($("#ContentPlaceHolder1_form_ctl_emailupdates1_chkEmailInfo")[0].checked)return!0}else if("#pprofInfo"==_satellite.getVar("documentHash")&&"/renew/ren_form.aspx"==n.location.pathname){if($("#ContentPlaceHolder1_form_ctl_profinfoemail1_chkEmailInfo")[0].checked)return!0}else if("#pemailUpdate"==_satellite.getVar("documentHash")&&"/ppv/ppv_form.aspx"==n.location.pathname){if($("#ContentPlaceHolder1_form_ctl_emailupdates1_chkEmailInfo")[0].checked)return!0}else if("#pemailUpdate"==_satellite.getVar("documentHash")&&"/cmew/cmew_form.aspx"==n.location.pathname){if($("#ContentPlaceHolder1_form_ctl_emailupdates1_chkEmailInfo")[0].checked)return!0}else if("#pemailUpdate"==_satellite.getVar("documentHash")&&"/cmer/cmer_form.aspx"==n.location.pathname&&$("#ContentPlaceHolder1_form_ctl_emailupdates1_chkEmailInfo")[0].checked)return!0;return!1}],selector:"#btnContinue,[data-interaction-type=' cdf_email_updates']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - Email Updates Chosen",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Common Flow : Email Updates Chosen",addEvent:["event11"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")},function(){return!!($("#ContentPlaceHolder1_form_ctl_profinfoemail1_chkEmailInfo").length>0&&$("#ContentPlaceHolder1_form_ctl_profinfoemail1_chkEmailInfo")[0].checked)}],selector:"inut#btnContinue",eventHandlerOnElement:!0,event:"blur",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - Email Updates Terms Link",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"CDF - Email Updates Terms Link",addEvent:["event31"]}]}],selector:"#cdfForm a[href*='legal/terms-of-use.htm']",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - Forgot Password Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Common Flow : Forgot Password Click",addEvent:["event16"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.readCookie("signInOpener"),"CDF NavBarSignIn")}],selector:'a[href^="/action/requestCDFResetPassword"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - How to find your Customer Number",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"%pageActivity% - How to find your customer number",addEvent:["event51"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")}],selector:"a.aFindCust.eventTaggingFindCust",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - Institutional Activation : Finish Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"CDF - Institutional Subscription Activation - Complete",addEvent:["event14","event54"]}]}],scope:{URI:{include:[/^\/iactivate\/iact_review.aspx.*$/i]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")}],selector:'div.formLineButtonSubmit input.submit[title="Finish"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - Remember Me : Toggle",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"CDF - Remember Me Toggle : %l_cbStatus%",addEvent:["event80"]}]}],conditions:[function(){return this.checked?_satellite.setVar("l_cbStatus","Selected"):_satellite.setVar("l_cbStatus","De-Selected"),!0}],selector:"#ContentPlaceHolder1_form_ctl_createaccount1_chkRemember",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - SignIn Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Common Flow : Sign In Click",addEvent:["event2"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")},function(){return n.cookie="signInOpener=CDF NavBarSignIn; path=/; domain=.nejm.org",!0}],selector:"#aSignIn",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - SignOut Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Common Flow : Sign Out Click",addEvent:["event3"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")},function(){return n.cookie="signInOpener=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.nejm.org",!0}],selector:"#aSignOut",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - Subscribe - Institutional Info Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"CDF - Institutional Subscription Info",addEvent:["event20"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")}],selector:"#aInstLink",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF - What's This Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"What's This : %l_context%",setVars:{prop57:"%l_context%"},addEvent:["event83"]}]}],conditions:[function(){var e=_satellite.text($(this).parents("h2.pageHead").find("span")[0]);return _satellite.setVar("l_context",e),!0},function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")}],selector:"a#aWhatsThis",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF Create Account - Forgot Password Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Common Flow : Create Account Forgot Password Click",addEvent:["event7"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.readCookie("signInOpener"),"CDF CreateAccountSignIn")}],selector:'a[href^="/action/requestCDFResetPassword"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF Create Account - SignIn Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Common Flow : Create Accout - Sign In Click",addEvent:["event6"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")},function(){return n.cookie="signInOpener=CDF CreateAccountSignIn; path=/; domain=.nejm.org",!0}],selector:"#ContentPlaceHolder1_form_ctl_createaccount1_aAlready,#ContentPlaceHolder1_form_ctl_createacct1_aAlready,#ContentPlaceHolder1_form_aAlready",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDF Review - Edit Button Clicks",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Review Order Edit : %l_editAction%",setVars:{eVar13:"%pageActivity%",eVar18:"%l_editAction%"},addEvent:["event13"]}]},{command:"delayActivateLink"}],scope:{URI:{include:["review"]}},conditions:[function(){var e=this.id.split("_"),t="";if(e.length>=1)t=(t=e[1]).replace("1",""),_satellite.setVar("l_editAction",t);else if(n.indexOf("edt=Y#")>-1){var n=this.href;t=n.substring(n.indexOf("edt=Y#")+6,n.length),_satellite.setVar("l_editAction",t)}return!0}],selector:"a[href*='?edt=Y']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"CDN - targetHashChange",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5a94c42a64746d4051007a86.js"}]}]}],scope:{subdomains:{include:["cdf"]}},event:"locationchange",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Catalyst Widget - Exit Link",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"e",linkName:"%catURL%"}]}],conditions:[function(){return _satellite.setVar("catURL",_sdi.util.getQueryParam("url",this.href)),!0}],selector:'div#catalystWidget a[href*="catalyst.nejm.org"], [data-interactiontype="catalyst_widget_exit"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Email Clicks",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Email Clicked : %l_mailToAddress%",setVars:{eVar64:"%l_mailToAddress%"},addEvent:["event85"]}]}],conditions:[function(){var e=this.pathname;return _satellite.setVar("l_mailToAddress",e),!0}],selector:'a[href^="mailto:"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Featured Homepage Article Click - Secondary",conditions:[function(){return _satellite.setCookie("dtm_cusLinkPageArea ","featured_secondary_home"),!0}],selector:'[data-location="featured_secondary_home"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Featured Specialty/Topic Article Click",conditions:[function(){var e=this.getAttribute("data-location")||"";return _satellite.setCookie("dtm_cusLinkPageArea ",e),!0},function(){return _satellite.textMatch(_satellite.getVar("pageType"),/(Specialty|Topic) Hub/i)}],selector:'[data-location^="featured_"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Forgot Password Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Forgot Password Click",addEvent:["event16"]}]}],scope:{URI:{include:["/action/requestResetPassword"]}},selector:"input.continueBtn,[data-interactiontype='forgot_password_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"IMC - GA Events",conditions:[function(){return _satellite.textMatch(_satellite.getVar("ga_imc_event"),"fire")}],selector:"body",eventHandlerOnElement:!0,event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"crossDomainDataPass"},{name:"IMC - Percent Milestones - AA",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"IMC Milestone Completion",setVars:{eVar24:"%pageName%",eVar25:"%pageURL%",eVar26:"%pageType%",eVar39:"%articleType%",eVar41:"%articleViewType%",eVar54:"%articleTitle%",eVar55:"%articleType%",eVar60:"%articleDOI%",eVar70:"%articleCategory%",eVar72:"%articleAge%",eVar75:"%pageViewType%"},customSetup:function(e,t){switch(t.linkTrackVars=t.apl(t.linkTrackVars,"list1",",",2),t.linkTrackVars=t.apl(t.linkTrackVars,"list2",",",2),t.list1=_satellite.getVar("articleTopics"),t.list2=_satellite.getVar("articleSubTopics"),_satellite.getVar("imcPercentMilestone")){case 25:t.linkTrackEvents=t.apl(t.linkTrackEvents,"event58",",",2),t.events=t.apl(t.events,"event58",",",2);break;case 50:t.linkTrackEvents=t.apl(t.linkTrackEvents,"event59",",",2),t.events=t.apl(t.events,"event59",",",2);break;case 75:t.linkTrackEvents=t.apl(t.linkTrackEvents,"event60",",",2),t.events=t.apl(t.events,"event60",",",2);break;case 100:t.linkTrackEvents=t.apl(t.linkTrackEvents,"event61",",",2),t.events=t.apl(t.events,"event61",",",2),t.linkTrackEvents=t.apl(t.linkTrackEvents,"event62",",",2),t.events=t.apl(t.events,"event62="+_satellite.getVar("elapsedTime"),",",2)}}}]}],conditions:[function(){t.console&&console.log(t.mmsData.object),t._sdiImcMilestonesReached=t._sdiImcMilestonesReached||[];for(var e=[25,50,75,100],n=_satellite.getVar("window.mmsData.object.slideCurrent")/_satellite.getVar("window.mmsData.object.slideTotal")*100,i=0;i<e.length;i++)if(n>=e[i]&&-1==t._sdiImcMilestonesReached.indexOf(e[i])){t._sdiImcMilestonesReached.push(e[i]),_satellite.setVar("imcPercentMilestone",e[i]);var a=_satellite.readCookie("dtm_imcLaunchTime")||0;if(a>0){var r=((new Date).getTime()-a)/1e3;_satellite.setVar("elapsedTime",r)}return!0}}],selector:"body",eventHandlerOnElement:!0,event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"crossDomainDataPass"},{name:"IMC - Start - AA",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"IMC Start",setVars:{eVar24:"%pageName%",eVar25:"%pageURL%",eVar26:"%pageType%",eVar39:"%articleType%",eVar41:"%articleViewType%",eVar54:"%articleTitle%",eVar55:"%articleType%",eVar60:"%articleDOI%",eVar70:"%articleCategory%",eVar72:"%articleAge%",eVar75:"%pageViewType%"},customSetup:function(e,t){t.linkTrackVars=t.apl(t.linkTrackVars,"list1",",",2),t.linkTrackVars=t.apl(t.linkTrackVars,"list2",",",2),t.list1=_satellite.getVar("articleTopics"),t.list2=_satellite.getVar("articleSubTopics")}}]}],conditions:[function(){if("Start"==_satellite.getVar("window.mmsData.object.eventAction")){var e=(new Date).getTime();return _satellite.setCookie("dtm_imcLaunchTime",e),!0}}],selector:"body",eventHandlerOnElement:!0,event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"crossDomainDataPass"},{name:"IMC - Trigger - AA",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"IMC Start",setVars:{eVar24:"%pageName%",eVar25:"%pageURL%",eVar26:"%pageType%",eVar39:"%articleType%",eVar41:"%articleViewType%",eVar54:"%articleTitle%",eVar55:"%articleType%",eVar60:"%articleDOI%",eVar70:"%articleCategory%",eVar72:"%articleAge%",eVar75:"%pageViewType%"},customSetup:function(e,t){t.linkTrackVars=t.apl(t.linkTrackVars,"list1",",",2),t.linkTrackVars=t.apl(t.linkTrackVars,"list2",",",2),t.list1=_satellite.getVar("articleTopics"),t.list2=_satellite.getVar("articleSubTopics")},addEvent:["event57"]}]}],conditions:[function(){var e=(new Date).getTime();return _satellite.setCookie("dtm_imcLaunchTime",e),!0}],selector:"dd.imcTab#article a#showImc",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"IMC - What's Next Link - AA",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"What's Next Link Click",setVars:{eVar40:"IMC",eVar44:"%whatsNextLinkType%"},addEvent:["event114"]}]}],conditions:[function(){var e=_satellite.getVar("window.mmsData.object.eventName")||"",t=_satellite.getVar("window.mmsData.object.eventAction")||"";if("What's Next Link"==e&&""!==t)return _satellite.setVar("whatsNextLinkType",t),!0}],selector:"body",eventHandlerOnElement:!0,event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"crossDomainDataPass"},{name:"Image Challenge - You May Also Like Click",conditions:[function(){return _satellite.setCookie("dtm_cusLinkPageArea ","recirc_also_like_ICpage"),!0}],selector:'[data-location="recirc_also_like_ICpage"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Image Challenge Submit",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Image Challenge - Answer Submit",setVars:{eVar67:"%imageChallengeID%",prop33:"D=v67"},addEvent:["event100"]}]}],scope:{URI:{include:[/(^\/image-challenge)|(^\/action\/showImageChallenge)/i]}},selector:"input.imageChallengeSubmit, [data-interactiontype='image_challenge_submit']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Info Icon Mouseover",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Info Icon Mouseover : %l_optionDesc%",setVars:{eVar88:"%l_optionDesc%",prop56:"D=v88"},addEvent:["event82"]}]}],conditions:[function(){var e=$(this).prev().find("div.radioDesc,label.radioDesc"),t=_satellite.text(e[0]);return!!t&&(_satellite.setVar("l_optionDesc",t.replace(/^\s+|\s+$/gm,"").replace(/\n/g," ")),!0)}],selector:".infoIcon,[data-interactiontype='image_challenge_submit']",eventHandlerOnElement:!0,event:"hover(500)",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Main Nav Click - Large",conditions:[function(){var e;return"undefined"!=typeof jQuery&&(e="main_nav"==(e=jQuery(".g-nav__primary").data("location"))?"main_nav_condensed":"main_nav_large"),_satellite.setCookie("dtm_cusLinkPageArea ",e),!0}],selector:'[data-location="main_nav_large"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Modal : Clickthrough",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Modal : Clickthrough",setVars:{eVar19:"%customEventLocation%|%customEventLocationName%",eVar78:"%customEventPromo%"},addEvent:["event153","event47"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("customEventAction"),"click")},function(){return _satellite.textMatch(_satellite.getVar("customEventLocation"),"modal")}],selector:"body",event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"trackModal"},{name:"Modal : Close",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Modal : Close",setVars:{eVar19:"%customEventLocation%|%customEventLocationName%",eVar78:"%customEventPromo%"},addEvent:["event152","event22"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("customEventLocation"),"modal")},function(){return _satellite.textMatch(_satellite.getVar("customEventAction"),"close")}],selector:"body",event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"trackModal"},{name:"Modal : Display",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Modal : Display",setVars:{eVar19:"%customEventLocation%|%customEventLocationName%",eVar78:"%customEventPromo%"},addEvent:["event151","event21"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("customEventAction"),"display")},function(){return _satellite.textMatch(_satellite.getVar("customEventLocation"),"modal")}],selector:"body",event:"custom",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1,customEvent:"trackModal"},{name:"Multimedia Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Multimedia Click : %l_multimediaContent%",setVars:{eVar54:"%l_multimediaFormat%",eVar55:"%l_multimediaType%",eVar60:"%l_multimediaContentId%",prop48:"%l_multimediaFormat%",prop49:"%l_multimediaType%",prop73:"%l_multimediaContentId%"},addEvent:["event57"]}]}],conditions:[function(){if("undefined"!=typeof jQuery&&jQuery(this).closest(".dropDown-articles").length>0)return!1;if("multimedia_click"==this.getAttribute("data-interactiontype"))var e=this.getAttribute("data-multimedia-type")||"not specified",n=this.getAttribute("data-multimedia-content")||"not specified",i=this.getAttribute("data-multimedia-contentid")||"",a=this.getAttribute("data-multimedia-format")||"not specified";if("m-cta__figure-img"==this.getAttribute("class"))e=jQuery(this).find("img").attr("data-multimedia-type")||"not specified",n=jQuery(this).find("img").attr("data-multimedia-content")||"not specified",i=jQuery(this).find("img").attr("data-multimedia-contentid")||"",a=jQuery(this).find("img").attr("data-multimedia-format")||"not specified";return"undefined"!=typeof jQuery&&"article_digitalObject_layout"==jQuery(this).closest("div").attr("class")&&(e="Quick Take",n="Video",i=t._sdi.util.getQueryParam("relatedArticle",jQuery(this).attr("href"))),_satellite.setVar("l_multimediaType",e),_satellite.setVar("l_multimediaContent",n),_satellite.setVar("l_multimediaContentId",i),_satellite.setVar("l_multimediaFormat",a),!0}],selector:"[data-interactiontype='multimedia_click'], span.m-cta__figure-link.open-figure-link",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!1,bubbleStop:!1},{name:"Multimedia Download",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Multimedia Download : %l_downloadType%",setVars:{eVar84:"%l_downloadType%",eVar85:"%l_downloadFormat%",eVar86:"%l_downloadContentId%",eVar87:"%l_downloadFileType%",prop31:"%l_downloadFileType%",prop32:"%l_downloadFormat%",prop60:"%l_downloadType%",prop61:"%l_downloadFileName%",prop74:"%l_downloadContentId%"},customSetup:function(e,t){"yes"==_satellite.getVar("supMat")&&(t.linkTrackEvents=t.apl(t.linkTrackEvents,"event71",",",2),t.events=t.apl(t.events,"event71",",",2),_satellite.setVar("supMat","no")),_satellite.getVar("l_downloadContentId").length<13&&(t.eVar86=_satellite.getVar("l_multimediaContentId"),t.prop74=_satellite.getVar("l_multimediaContentId"))},addEvent:["event65","event67"]}]},{command:"delayActivateLink"}],conditions:[function(){if("showIssueAudio"!=_satellite.getVar("pageActivity")){if($(this).parents("div#toolsBox").length>0)return!1;if($(this).parents("div.tools").length>0)return!1}var e=this.getAttribute("data-download-type")||"not specified",t=this.getAttribute("data-download-content")||"not specified",n=this.getAttribute("data-download-contentid")||"",i=this.getAttribute("data-download-format")||"not specified",a=this.getAttribute("href")||"not specified",r=this.getAttribute("data-download-filetype")||"not specified";return _satellite.setVar("l_downloadType",e),_satellite.setVar("l_downloadContent",t),_satellite.setVar("l_downloadContentId",n),_satellite.setVar("l_downloadFormat",i),_satellite.setVar("l_downloadFileName",a),_satellite.setVar("l_downloadFileType",r),$(this).closest("#article_supplementary_material").length>0&&_satellite.setVar("supMat","yes"),!0}],selector:'li[class^="download"] a[data-download-type], li[class^="downloadAudio"] a[data-download-type] ,[data-interactiontype=\'multimedia_download\'], a.o-figures-modal__nav-link[data-tooltip="Download Slide"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Offer Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Offer Click"}]},{command:"delayActivateLink"}],selector:'[data-element-name^="Offer:"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Privacy Policy Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Privacy Policy Click",addEvent:["event17"]}]},{command:"delayActivateLink"}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("hostisCDF"),"y")}],selector:"#aPrivacy, .eventTagging-PrivacyPolicy,[data-interactiontype='privacy_policy_click']",eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Quick Take Carousel : Next Link",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Quick Take Carousel Next Link",addEvent:["event110"]}]}],selector:'div.navigation_layout a.next,[data-interactiontype="quick_take_next"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Quick Take Carousel : Previous Link",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Quick Take Carousel Previous Link",addEvent:["event111"]}]}],selector:'div.navigation_layout a.previous,[data-interactiontype="quick_take_previous"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Quick Take Carousel : See All Link",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Quick Take Carousel See All Link",addEvent:["event112"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("objectCategory"),/^video/i)}],selector:'div.navigation_layout a.seeAll,[data-interactiontype="quick_take_see_all"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Quick Take Carousel : Video Link",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Quick Take Carousel Video Link",setVars:{eVar54:"%vidTitle%",eVar55:"quick take video"},addEvent:["event113"]}]}],conditions:[function(){return _satellite.textMatch(_satellite.getVar("objectCategory"),/^video/i)},function(){var e=jQuery(this).closest("figure").find("figcaption a h3").text()||"no value populated";return _satellite.setVar("vidTitle",e),!0}],selector:'section.digitalObjectCarousel_layout a,[data-interactiontype="quick_take_type_link_all"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"RSS Link Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"RSS Click : %pageName%",setVars:{eVar61:"%l_rssLink%",prop54:"%l_rssLink%"},addEvent:["event86"]}]},{command:"delayActivateLink"}],conditions:[function(){var e=this.href;return _satellite.setVar("l_rssLink",e),!0}],selector:'.rssLink a,p.rssStandardLink a,[data-interactiontype="rss_click"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Recirculation Widget - Article Click",conditions:[function(){if("undefined"!=typeof jQuery){var e=jQuery(this).closest("[data-location]");return e.length>0&&(e=jQuery(this).closest("[data-location]")[0].getAttribute("data-location"),_satellite.setCookie("dtm_cusLinkPageArea ",e)),!0}}],selector:'[data-interactiontype="article_recirculation_click"]',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Recirculation Widget - Next",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Recirculation Widget - Next",addEvent:["event117"]}]}],selector:'[data-location="recirc_top_ribbon_article"] .o-traveling-home__pager-next',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Recirculation Widget - Previous",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Recirculation Widget - Previous",addEvent:["event116"]}]}],selector:'[data-location="recirc_top_ribbon_article"] .o-traveling-home__pager-prev',event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Search Result Click",conditions:[function(){var e=jQuery('div[data-role="search"] div.articleListMobile li a').index(this)+1||"";e=e.toString();var t={searchType:_satellite.getVar("searchType"),searchResultID:this.getAttribute("data-search-result-id")||"",searchResultRank:this.getAttribute("data-search-result-rank")||e||"",searchQuery:_satellite.getVar("searchQuery")||""};return"*"!=t.searchQuery?(sessionStorage.setItem("searchClick",JSON.stringify(t)),!0):(sessionStorage.removeItem("searchClick"),!1)},function(){return _satellite.textMatch(_satellite.getVar("pageType"),"Search")}],selector:'ul.searchResults div.articleEntry .articleLink a, div[data-role="search"] div.articleListMobile li a,[data-interactiontype="search_click_through"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Site License Learn More Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Site License Learn More",addEvent:["event18"]}]}],scope:{URI:{include:[/^\/page\/institution\/resource-center.*$/i]}},selector:'a[href="/page/institution/pricing-and-ordering"],[data-interactiontype="site_license_learn"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Social Follow Click",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Social Follow : %l_socialService%",setVars:{eVar42:"%pageArea%",eVar53:"%l_socialService%"},addEvent:["event78"]}]}],conditions:[function(){var e="",t=this.href;if(-1!=t.indexOf("facebook.com")?e="facebook":-1!=t.indexOf("twitter.com")?e="twitter":-1!=t.indexOf("youtube.com")?e="youTube":-1!=t.indexOf("blogs.nejm.org/now/")?e="nowNejmBlog":-1!=t.indexOf("linkedin")&&(e="linkedin"),e){if(_satellite.setVar("l_socialService",e),"undefined"!=typeof jQuery){var n=jQuery(this).closest("[data-location]");n.length>0&&(n=jQuery(this).closest("[data-location]")[0].getAttribute("data-location"),_satellite.setVar("pageArea",n))}return!0}}],selector:'div.socialNetworking ul li a, [data-interactiontype="social_follow_click"], [data-interactiontype="social"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Social Follow Footer Clicks",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Social Follow : %l_socialService%",setVars:{eVar42:"%pageArea%",eVar53:"%l_socialService%"},addEvent:["event78"]}]}],conditions:[function(){var e="",t=this.href;if(-1!=t.indexOf("facebook.com")?e="facebook":-1!=t.indexOf("twitter.com")?e="twitter":-1!=t.indexOf("youtube.com")?e="youTube":-1!=t.indexOf("blogs.nejm.org/now/")?e="nowNejmBlog":"http://blogs.nejm.org/now?query=footer"==t?e="nowNejmBlog":-1!=t.indexOf("linkedin")&&(e="linkedin"),e){if(_satellite.setVar("l_socialService",e),"undefined"!=typeof jQuery){var n=jQuery(this).closest("[data-location]");n.length>0&&(n=jQuery(this).closest("[data-location]")[0].getAttribute("data-location"),_satellite.setVar("pageArea",n))}return!0}}],selector:'div.socialNetworking ul li a, [data-interactiontype="social_follow_clicks"]',eventHandlerOnElement:!0,event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"Special Offers: Download",trigger:[{engine:"sc",command:"trackLink",arguments:[{customSetup:function(e,t){var n=this.getAttribute("href"),i=s_Obj.Util.getQueryParam("url",n);i=i.substring(i.lastIndexOf("/"),i.length),t.eVar66=i,t.eVar84=t.eVar87="PDF",t.eVar85="Special Offer PDF",t.linkTrackVars="eVar66,eVar84,eVar85,eVar87,events"},addEvent:["event67"]}]}],scope:{URI:{include:["nejm-special"]}},selector:"a[href*='.pdf']",event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"User Top Navigation Click",conditions:[function(){return _satellite.setCookie("dtm_cusLinkPageArea ","authstring_nav"),!0}],selector:'[data-location="authstring_nav"]',
event:"click",bubbleFireIfParent:!0,bubbleFireIfChildFired:!0,bubbleStop:!1},{name:"facebook like",event:"facebook.like",trigger:[{command:"send",arguments:[{hitType:"social",socialNetwork:"facebook",socialAction:"like",socialTarget:n.location.href}],tool:["nejm"]}]},{name:"facebook unlike",event:"facebook.unlike",trigger:[{command:"send",arguments:[{hitType:"social",socialNetwork:"facebook",socialAction:"unlike",socialTarget:n.location.href}],tool:["nejm"]}]},{name:"facebook send",event:"facebook.send",trigger:[{command:"send",arguments:[{hitType:"social",socialNetwork:"facebook",socialAction:"send",socialTarget:n.location.href}],tool:["nejm"]}]},{name:"twitter tweet",event:"twitter.tweet",trigger:[{command:"send",arguments:[{hitType:"social",socialNetwork:"twitter",socialAction:"tweet",socialTarget:n.location.href}],tool:["nejm"]}]}],directCallRules:[{name:"CDF PAGES",trigger:[{engine:"sc",command:"trackPageView",arguments:[{setVars:{eVar13:"%pageActivity%",eVar14:"%pageActivityStep%",eVar17:"%pageActivityType%",eVar77:"%productCode%",eVar81:"%productSource%",prop55:"%common flow composite%",prop68:"%productCode%",prop72:"%productSource%",pageName:"%pageName%",channel:"%pageSiteSection%",pageURL:"D=g"},customSetup:function(e,t){t.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),t.apl=new Function("L","v","d","u","var s=this,m=0;if(!L)L='';if(u){var i,n,a=s.split(L,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)L=L?L+d+v:v;return L");var n=_satellite.getVar("window.mmsData.transaction.specialty")||"";t.eVar9=n;var i=_satellite.getVar("window.mmsData.transaction.workplace")||"";t.eVar10=i,t.events="";var a=_satellite.getVar("pageActivity"),r=_satellite.getVar("pageActivityStart");if("y"==r){switch(t.events="event1",a){case"SUBSCRIBE":case"SUBSCRIBE_ONESTEP":t.events=t.apl(t.events,"event19",",",2);break;case"RENEW":t.events=t.apl(t.events,"event33",",",2);break;case"REGISTER":t.events=t.apl(t.events,"event28",",",2);break;case"WEEKLYCME":case"REVIEWCME":t.events=t.apl(t.events,"event40",",",2);break;case"ACTIVATEINDIVIDUALS":case"INST_ACTIVATE":t.events=t.apl(t.events,"event50",",",2);break;case"PAYPERVIEW":case"PAYFORACCESS":t.events=t.apl(t.events,"event35",",",2);break;case"PAYMYBILL":t.events=t.apl(t.events,"event55",",",2)}1}var s=_satellite.getVar("pageActivityStep");switch(s){case"subInfo":case"custNum":t.events=t.apl(t.events,"event4",",",2),"ACTIVATEINDIVIDUALS"!=a&&"INST_ACTIVATE"!=a||(t.events=t.apl(t.events,"event94",",",2)),4;break;case"createAcct":t.events=t.apl(t.events,"event5",",",2),"y"==r?1:5;break;case"agreement":t.events=t.apl(t.events,"event52",",",2),5;break;case"location":t.events=t.apl(t.events,"event29",",",2),6;break;case"instType":t.events=t.apl(t.events,"event53",",",2),6;break;case"purchaseArticle":t.events=t.apl(t.events,"event105",",",2),6;break;case"product":t.events=t.apl(t.events,"event24",",",2),7;break;case"profInfoEmail":case"profInfo":t.events=t.apl(t.events,"event8",",",2),8;break;case"name":t.events=t.apl(t.events,"event30",",",2),9;break;case"emailUpdate":t.events=t.apl(t.events,"event11",",",2),10;break;case"addressInfo":t.events=t.apl(t.events,"event9",",",2),11;break;case"payment":t.events=t.apl(t.events,"event10",",",2),12;break;case"Review":t.events=t.apl(t.events,"event12",",",2),14;break;case"Receipt":t.events=t.apl(t.events,"event15",",",2),15}var o=0;$("#progressBar").children().each(function(){"Blue"==this.alt&&o++}),o>=3&&$("span#sDdlCountry select").length>0&&(t.eVar11=$("span#sDdlCountry select")[0].value),o>=4&&$("span#sDdlCategory select").length>0&&(t.eVar8=$("span#sDdlCategory select")[0].value),("SUBSCRIBE"==a&&"profInfoEmail"==s&&"MultiStep"==_satellite.getVar("pageActivityType")||"REGISTER"==a&&"location"==s&&"MultiStep"==_satellite.getVar("pageActivityType")||"INST_ACTIVATE"==a&&"custNum"==s&&"MultiStep"==_satellite.getVar("pageActivityType")||"ACTIVATEINDIVIDUALS"==a&&"custNum"==s&&"MultiStep"==_satellite.getVar("pageActivityType")||"PAYMYBILL"==a&&"custNum"==s&&"MultiStep"==_satellite.getVar("pageActivityType")||"RENEW"==a&&"custNum"==s&&"MultiStep"==_satellite.getVar("pageActivityType")||"PAYPERVIEW"==a&&"purchaseArticle"==s&&"MultiStep"==_satellite.getVar("pageActivityType")||"REVIEWCME"==a&&"addressInfo"==s&&"MultiStep"==_satellite.getVar("pageActivityType")||"WEEKLYCME"==a&&"addressInfo"==s&&"MultiStep"==_satellite.getVar("pageActivityType"))&&$("p.rememberMe input").length>0&&($("p.rememberMe input")[0].checked?t.eVar16="Remember":t.eVar16="Do Not Remember"),"PAYPERVIEW"==a&&"addressInfo"==s&&"MultiStep"==_satellite.getVar("pageActivityType")&&(t.events=t.apl(t.events,"event36",",",2)),"PAYFORACCESS"==a&&"addressInfo"==s&&"MultiStep"==_satellite.getVar("pageActivityType")&&(t.events=t.apl(t.events,"event37",",",2)),("SUBSCRIBE"==a&&"addressInfo"==s&&"MultiStep"==_satellite.getVar("pageActivityType")||"PAYMYBILL"==a&&"payment"==s&&"MultiStep"==_satellite.getVar("pageActivityType"))&&$("#ContentPlaceHolder1_form_ctl_profinfoemail1_chkEmailInfo").length>0&&$("#ContentPlaceHolder1_form_ctl_profinfoemail1_chkEmailInfo")[0].checked&&(t.events=t.apl(t.events,"event11",",",2)),"SUBSCRIBE"==a&&"addressInfo"==s&&"MultiStep"==_satellite.getVar("pageActivityType")&&($("span#sDdlSpecialty select").length>0&&(t.eVar9=$("span#sDdlSpecialty select")[0].value),$("span#sDdlPlaceOfWork select").length>0&&(t.eVar10=$("span#sDdlPlaceOfWork select")[0].value)),"SUBSCRIBE"==a&&"payment"==s&&"MultiStep"==_satellite.getVar("pageActivityType")&&$("#ContentPlaceHolder1_form_ctl_profinfoemail1_chkEmailInfo").length>0&&$("#ContentPlaceHolder1_form_ctl_profinfoemail1_chkEmailInfo")[0].checked&&(t.eVar22=$("#ContentPlaceHolder1_form_ctl_addressinfo1_txtCompany")[0].value,t.linkTrackVars=t.apl(t.linkTrackVars,"eVar22",",",2)),t.eVar9&&(t.eVar9=t.eVar9.toLowerCase(),t.prop63="D=v9")}}]}]},{name:"CDF ERROR",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Common Flow Error : %errorCode%",setVars:{eVar15:"%errorCode%",prop53:"%errorList%",prop58:"D=v15"},customSetup:function(e,t){t.list3=_satellite.getVar("errorList"),t.linkTrackVars=t.apl(t.linkTrackVars,"list3",",",2)},addEvent:["event81"]}]}]},{name:"media100",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"media100",customSetup:function(e,n){n=t._sdi.mediaEventTracker("event61","media100",n)}}]}]},{name:"media25",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"media25",customSetup:function(e,n){n=t._sdi.mediaEventTracker("event58","media25",n)}}]}]},{name:"media50",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"media50",customSetup:function(e,n){n=t._sdi.mediaEventTracker("event59","media50",n)}}]}]},{name:"media75",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"media75",customSetup:function(e,n){n=t._sdi.mediaEventTracker("event60","media75",n)}}]}]},{name:"mediaclick",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"mediaclick",customSetup:function(e,n){n=t._sdi.mediaEventTracker("event66","mediaclick",n)}}]}]},{name:"mediastop",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"mediastop",customSetup:function(e,n){n=t._sdi.mediaEventTracker("event64","mediastop",n)}}]}]},{name:"mediaview",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"mediaview",customSetup:function(e,n){n=t._sdi.mediaEventTracker("event97","mediaview",n)}}]}]},{name:"Filter",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Filter",setVars:{eVar68:"%searchQuery%",prop1:"%searchQuery%",prop2:"%searchResultCount%",prop3:"%searchSort%",prop5:"%searchType%"},customSetup:function(e,i){function a(e){var t=0;return $.each(e,function(e,n){!n||"contentAge"==e&&"custom"==n||(t+=n.split(",").length)}),t}function r(e,t){if(!e)return t;"string"==typeof e&&(e=e.split(",")),"string"==typeof t&&(t=t.split(","));var n="";return t.forEach(function(t){var i=t;e.forEach(function(e){t==e&&(i="")}),i&&(n=i)}),n}if("complete"!=n.readyState&&"/search"!=location.pathname&&(_satellite.filterPageLoadWithFilters=!0),t.mmsData&&mmsData.search.manualFilter){var s=mmsData.search.manualFilter||{};if("completeArchive"==s.contentAge&&(s.contentAge=null),location.pathname.replace("/","")==(s.specialty||"").toLowerCase().replace("/","-")&&(s.specialty=null),_satellite.filterPageLoadWithFilters)_satellite.filterPrevManual=s,_satellite.filterPrevCount=a(s),_satellite.filterPageLoadWithFilters=!1,i.abort=!0;else{var o=_satellite.filterPrevManual||{};_satellite.filterPrevCount||(_satellite.filterPrevCount=0);var l=a(s);if(l>_satellite.filterPrevCount){var c={};$.each(s,function(e,t){t&&s[e]!==o[e]&&(_satellite.notify("fitler: compare key:"+e),c.key=e,c.value=r(o[e],s[e]))}),c&&c.value&&"null"!=c.value&&("dateRange"==c.key&&"custom"==s.dateRange&&(c.value="custom"),_satellite.notify("New Filter Item: "+c.key+"|"+c.value+"   Count: "+l),i.eVar93=c.key+"|"+c.value+"|manual",i.eVar95=l.toString(),i.eVar96=mmsData.search.manualFilter.contentAge||"Default",i.eVar97=mmsData.search.manualFilter.dateRange||"N/A",i.linkTrackVars+=",eVar93,eVar95,eVar96,eVar97")}else"INITIAL SEARCH"!=_satellite.searchPhase&&(i.abort=!0);_satellite.filterPrevManual=s,_satellite.filterPrevCount=l}}"y"==_satellite.getVar("searchMobileFilter")?i.events="event91":"INITIAL SEARCH"==_satellite.searchPhase?(i.events="event90",_satellite.searchPhase="REFINEMENT"):i.events="event91",i.linkTrackEvents=i.events,i.linkTrackVars+=",events","figure"==_satellite.getVar("searchType")&&(i.eVar91=i.prop28="Fig-Media Tab "+_satellite.getVar("searchFilterMediaType"),i.linkTrackVars+=",eVar91,prop28"),"custom"==_satellite.getVar("searchFilterContentAge")&&_satellite.getVar("searchFilterDateRange")&&(i.eVar96=i.prop29=_satellite.getVar("searchFilterDateRange"),i.linkTrackVars+=",eVar96,prop29"),"complete"!=n.readyState&&"/search"==location.pathname&&(i.t(),i.abort=!0)}}]}]},{name:"Social Share",trigger:[{engine:"sc",command:"trackLink",arguments:[{type:"o",linkName:"Social Share : %l_socialService%",setVars:{eVar53:"%l_socialService%"},addEvent:["event79"]}]}]},{name:"mmsDataCDFAvailable",trigger:[{command:"loadScript",arguments:[{sequential:!1,scripts:[{src:"satellite-5ab163d864746d5a68007c1b.js"}]}]}]}],settings:{trackInternalLinks:!0,libraryName:"satelliteLib-031d74e851fb6b24b14817803cfe5baa21252522",isStaging:!1,allowGATTcalls:!1,downloadExtensions:/\.(?:doc|docx|eps|jpg|png|svg|xls|ppt|pptx|pdf|xlsx|tab|csv|zip|txt|vsd|vxd|xml|js|css|rar|exe|wma|mov|avi|wmv|mp3|wav|m4v)($|\&|\?)/i,notifications:!1,utilVisible:!1,domainList:["nejm.org","wpengine.com"],scriptDir:"b6f6e85975d1a63df35e08cc6500015ddb076010/scripts/",linkDelay:250,tagTimeout:3e3},data:{URI:n.location.pathname+n.location.search,browser:{},cartItems:[],revenue:"",host:{http:"assets.adobedtm.com",https:"assets.adobedtm.com"}},dataElements:{aam_ad_demotarget:{cookie:"aam_ad_demotarget",storeLength:"pageview"},"aam_sp_bt-segqual_Cookie":{cookie:"aam_sp_bt-segqual",storeLength:"pageview"},"aam_sp_bt-zam_Cookie":{cookie:"aam_sp_bt-zam",storeLength:"pageview"},accessIsFreeCountry:{customJS:function(){return _satellite.getVar("window.mmsData.access.isFreeCountry")||""},storeLength:"pageview"},adCategory:{jsVariable:"mmsData.ad.category",storeLength:"pageview"},"Adobe Target: mmsTarget Helpers":{customJS:function(){var e;return t.mmsTarget=t.mmsTarget||{},(e=t.mmsTarget).cookie={domain:function(){for(var e=n.location.hostname,t=[".nejm.org",".jwatch.org"],i=0;i<t.length;i++)if(e.indexOf(t[i])>0)return t[i];return e},set:function(t,i,a,r){var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);var o="expires="+s.toUTCString(),l=r||e.cookie.domain();n.cookie=t+"="+i+";"+o+";path=/;domain="+l},get:function(e){for(var t=e+"=",i=decodeURIComponent(n.cookie).split(";"),a=0;a<i.length;a++){for(var r=i[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},remove:function(t){e.cookie.set(t,"",-1)}},e.trackEvent=function(){if(adobe&&"target"in adobe){var e=arguments[1].split("&"),t={};e.forEach(function(e){e=e.split("="),t[e[0]]=e[1]||""}),adobe.target.trackEvent({mbox:arguments[0],params:t})}},!0},storeLength:"pageview"},"Adobe Target: mmsTarget.modal":{customJS:function(){return function(){function i(e){var t=new CustomEvent("trackModal",{bubbles:!0,cancelable:!0,detail:{action:e.action,location:"modal",locationName:e.locationName,promo:e.promo}});n.body.dispatchEvent(t)}function a(){for(var e=n.cookie.split(";"),t="",i=0;i<e.length;i++){var a=e[i].split("=");if(a[0]&&a[0].match("tt_modal_"))t+="|"+a[0].trim()+":"+a[1].trim()}return t=t?t+"|":t}function s(e,t,n){var i=void 0!==t&&"True"===t?"True":"False";t&&mmsTarget.cookie.set(e,i,n)}function o(e){return s(e,"True",m),mmsTarget.trackEvent("mboxClickTrack","settingCookie=true&profile.modalCookieName="+e+"&profile.modalCookieValue="+mmsTarget.cookie.get(e)+"&profile.modalCookieValues="+a()),!0}function l(e){return s(e,"False",365),mmsTarget.trackEvent("mboxClickTrack","settingCookie=false&profile.modalCookieName="+e+"&profile.modalCookieValue="+mmsTarget.cookie.get(e)+"&profile.modalCookieValues="+a()),!0}function c(){_satellite.notify("mmsTarget.modal: Check layersVisible");var t=!1;try{t=!!_satellite.getVar("layersVisible")}catch(e){_satellite.notify("mmsTarget.modal: ERROR: "+e)}return t}function d(e){return"True"===mmsTarget.cookie.get(e)}function u(e,n,a,o){var l=t.jQuery||null;if(!l)return _satellite.notify("mmsTarget.modal: INIT ERROR: jQuery undefined"),!1;if(_satellite.getVar("Featherlight Modal jQuery Plugin"),_satellite.getVar("Featherlight Modal jQuery Plugin"),e===r)return _satellite.notify("mmsTarget.modal: NO DISPLAY - No wrapperId"),!1;if(!d(e))return s(e,"False",365),_satellite.notify("mmsTarget.modal: NO DISPLAY - user not qualified (cookie) to see modal"),!1;if("false"===a)return s(e,"False",365),_satellite.notify("mmsTarget.modal: NO DISPLAY - User New Session or Cookie"),!1;if(c())return s(e,"False",365),_satellite.notify("mmsTarget.modal: NO DISPLAY - layersVisible"),!1;var u=e,m=".tt-link-cta",p=l("#"+u);return l.featherlight(p.children(),{variant:u,beforeOpen:function(){p.empty()},afterOpen:function(){_satellite.notify("mmsTarget.modal: Modal Displayed"),i({action:"display",locationName:n.locationName,promo:n.promo}),s(e,o,365),this.$instance.find(m).click(function(){_satellite.notify("mmsTarget.modal: Modal Link Clicked"),i({action:"click",locationName:n.locationName,promo:n.promo})})},beforeClose:function(){_satellite.notify("mmsTarget.modal: Modal Closed"),i({action:"close",locationName:n.locationName,promo:n.promo})}}),!0}t.mmsTarget=t.mmsTarget||{},t._satellite=t._satellite||{};var m=.09;_satellite.notify=_satellite.notify||function(e){console.log(e)},t.mmsTarget.modal={init:u,initStart:o,initFinish:l},console.log("tnt: mmsTarget.modal created")}(),!0},storeLength:"pageview"},adProfile:{jsVariable:"mmsData.ad.profile",storeLength:"pageview"},adtechAdhesiveID:{customJS:function(){var e={"mms.nej.search":[3612462,3616301]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},adtechInterstitialBannerID:{customJS:function(){var e={"mms.nej.about-nejm":[3562599,3568802],"mms.nej.topics.aging-geriatrics":[3562600,3568803],"mms.nej.topics.allergy-immunology":[3562601,3568804],"mms.nej.archive.articles_1812":[3562602,3568805],"mms.nej.archive.articles_1945":[3562603,3568806],"mms.nej.articleindex":[3562604,3568807],"mms.nej.articles":[3562605,3568808],"mms.nej.audio":[3562606,3568809],"mms.nej.browse":[3562607,3568891],"mms.nej.topics.cardiology":[3562608,3568892],"mms.nej.topics.primarycare-hospitalist":[3562609,3568893],"mms.nej.topics.dermatology":[3562611,3568894],"mms.nej.ebola-virus":[3562612,3568895],"mms.nej.topics.emergency-medicine":[3562613,3568896],"mms.nej.topics.endocrinology":[3562614,3568897],"mms.nej.topics.gastroenterology":[3562615,3568898],"mms.nej.generalmenu":[3562616,3568899],"mms.nej.generalsubpages":[3562617,3568900],"mms.nej.topics.genetics":[3562618,3568901],"mms.nej.global-health":[3562619,3568902],"mms.nej.topics.gynecology-obstetrics":[3562620,3568906],"mms.nej.health_policy_datawatch":[3562622,3568907],"mms.nej.topics.health-policy":[3562621,3568908],"mms.nej.home":[3550333,3568909],"mms.nej.imagechallenge":[3562623,3568910],"mms.nej.topics.infectious-disease":[3562624,3568911],"mms.nej.issues.current":[3562625,3568912],"mms.nej.issues.past":[3562627,3568913],"mms.nej.topics.medicine":[3562628,3568914],"mms.nej.meetings":[3562629,3568915],"mms.nej.nejm-quick-take-video":[3562630,3568916],"mms.nej.nejm-quick-take-video-summary":[3917406,3917409],"mms.nej.topics.nephrology":[3562631,3568917],"mms.nej.topics.neurology-neurosurgery":[3562632,3568918],"mms.nej.topics.oncology-hematology":[3562633,3568919],"mms.nej.topics.pediatrics":[3562635,3568921],"mms.nej.topics.psychiatry":[3562636,3568922],"mms.nej.topics.pulmonary":[3562637,3568923],"mms.nej.topics.rheumatology":[3562638,3568924],"mms.nej.rss":[3562639,3568925],"mms.nej.search":[3562640,3568926],"mms.nej.searchadv":[3562641,3568927],"mms.nej.signin":[3562642,3568928],"mms.nej.topics.surgery":[3562643,3568929],"mms.nej.trends":[3562645,3568931],"mms.nej.zika-virus":[3903591,3903593],"mms.nej.frontiers-in-medicine":[4971303,4968610],"mms.nej.conference":[4999056,4999060],"mms.nej.case-studies-in-social-medicine":[5034108,5034111],"mms.nej.epidemics":[5034745,5034749],"mms.nej.topics.challengeyourself":[4633833,4756470],"mms.nej.data-sharing":[4755984,4756475],"mms.nej.forgotpassword":[4633982,4756477],"mms.nej.images-in-clinical-medicine":[4756006,4756480],"mms.nej.interactive-medical-case":[4756005,4756482],"mms.nej.health_policy_datawatch":[4755996,4756491],"mms.nej.topics.multimedia":[4633834,4756496],"mms.nej.pain-management":[4755987,4756499],"mms.nej.recentpub":[4633854,4756503],"mms.nej.topics.specialtiesindex":[4633840,4756506],"mms.nej.clinical-trials-series":[4755992,4756510],"mms.nej.topics.index":[4756221,4756513],"mms.nej.videos-in-clinical-medicine":[4756e3,4756515]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},adtechMedRectangleID:{customJS:function(){var e={"mms.nej.topics.aging-geriatrics":[3488351,3487604],"mms.nej.topics.allergy-immunology":[3488385,3487587],"mms.nej.archive.articles_1812":[3488363,3487664],"mms.nej.archive.articles_1945":[3488377,3487687],"mms.nej.articles":[3488371,3487591],"mms.nej.browse":[3488300,3487605],"mms.nej.topics.cardiology":[3488341,3487630],"mms.nej.topics.primarycare-hospitalist":[3488381,3487656],"mms.nej.topics.dermatology":[3488281,3487623],"mms.nej.topics.emergency-medicine":[3488258,3487677],"mms.nej.topics.endocrinology":[3488262,3487674],"mms.nej.topics.gastroenterology":[3488372,3487602],"mms.nej.topics.genetics":[3488388,3487660],"mms.nej.global-health":[3488271,3487606],"mms.nej.topics.gynecology-obstetrics":[3488311,3487564],"mms.nej.health_policy_datawatch":[3488288,3487596],"mms.nej.topics.health-policy":[3488297,3487651],"mms.nej.home":[3488284,3487580],"mms.nej.imagechallenge":[3488261,3487593],"mms.nej.topics.infectious-disease":[3488327,3487603],"mms.nej.issues.current":[3488304,3487641],"mms.nej.issues.past":[3488294,3487657],"mms.nej.topics.medicine":[3488354,3487669],"mms.nej.nejm-quick-take-video-summary":[3917404,3917408],"mms.nej.topics.nephrology":[3488368,3487579],"mms.nej.topics.neurology-neurosurgery":[3488264,3487573],"mms.nej.topics.oncology-hematology":[3488314,3487613],"mms.nej.topics.pediatrics":[3488369,3487588],"mms.nej.topics.psychiatry":[3488340,3487654],"mms.nej.topics.pulmonary":[3488337,3487647],"mms.nej.topics.rheumatology":[3488253,3487567],"mms.nej.search":[3488383,3487663],"mms.nej.searchadv":[3488353,3487578],"mms.nej.signin":[3488274,3487565],"mms.nej.topics.surgery":[3488335,3487666],"mms.nej.frontiers-in-medicine":[5034741,5034742],"mms.nej.case-studies-in-social-medicine":[5034139,5034140],"mms.nej.epidemics":[5034747,5034750],"mms.nej.ebola-virus":[4755719,4756461],"mms.nej.global-health":[4755720,4756463],"mms.nej.zika-virus":[4755718,4756464],"mms.nej.topics.challengeyourself":[4633831,4756469],"mms.nej.data-sharing":[4755983,4756473],"mms.nej.forgotpassword":[4633981,4756476],"mms.nej.images-in-clinical-medicine":[4756007,4756479],"mms.nej.interactive-medical-case":[4756004,4756484],"mms.nej.health_policy_datawatch":[4755997,4756490],"mms.nej.topics.multimedia":[4633836,4756493],"mms.nej.pain-management":[4755985,4756500],"mms.nej.recentpub":[4633855,4756504],"mms.nej.clinical-trials-series":[4755991,4756508],"mms.nej.topics.index":[4756220,4756511],"mms.nej.videos-in-clinical-medicine":[4755999,4756514]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},adtechMicroIMGID:{customJS:function(){var e={"mms.nej.home":[3488352,3487676]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},adtechMicroToolsID:{customJS:function(){var e={"mms.nej.archive.articles_1812":[3488350,3487653],"mms.nej.archive.articles_1945":[3488320,3487637]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},adtechMicroTrendsID:{customJS:function(){var e={"mms.nej.topics.aging-geriatrics":[3488299,3487581],"mms.nej.topics.allergy-immunology":[3488343,3487634],"mms.nej.archive.articles_1812":[3488330,3487667],"mms.nej.archive.articles_1945":[3488308,3487592],"mms.nej.articleindex":[3488334,3487574],"mms.nej.browse":[3488324,3487609],"mms.nej.topics.cardiology":[3488302,3487595],"mms.nej.topics.primarycare-hospitalist":[3488266,3487599],"mms.nej.topics.dermatology":[3488316,3487620],"mms.nej.topics.emergency-medicine":[3488344,3487625],"mms.nej.topics.endocrinology":[3488276,3487569],"mms.nej.topics.gastroenterology":[3488378,3487600],"mms.nej.topics.genetics":[3488367,3487681],"mms.nej.global-health":[3488318,3487598],"mms.nej.topics.gynecology-obstetrics":[3488255,3487639],"mms.nej.health_policy_datawatch":[3488338,3487607],"mms.nej.topics.health-policy":[3488359,3487640],"mms.nej.home":[3488290,3487626],"mms.nej.topics.infectious-disease":[3488349,3487629],"mms.nej.issues.current":[3488269,3487668],"mms.nej.issues.past":[3488361,3487675],"mms.nej.topics.medicine":[3488348,3487572],"mms.nej.topics.nephrology":[3488257,3487582],"mms.nej.topics.neurology-neurosurgery":[3488360,3487643],"mms.nej.topics.oncology-hematology":[3488287,3487642],"mms.nej.topics.pediatrics":[3488312,3487628],"mms.nej.topics.psychiatry":[3488283,3487618],"mms.nej.topics.pulmonary":[3488315,3487632],"mms.nej.topics.rheumatology":[3488322,3487611],"mms.nej.search":[3488273,3487682],"mms.nej.searchadv":[3488263,3487670],"mms.nej.topics.surgery":[3488279,3487633]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},adtechMobileBottomID:{customJS:function(){var e={"mms.nej_mobile":[3487954,3487233]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},adtechMultiOptionsID:{customJS:function(){var e={"mms.nej.about-nejm":[3488280,3487684],"mms.nej.articleindex":[3488375,3487652],"mms.nej.browse":[3488268,3487575],"mms.nej.issues.current":[3488293,3487644],"mms.nej.issues.past":[3488379,3487622],"mms.nej.meetings":[3488366,3487659],"mms.nej.search":[3488356,3487619],"mms.nej.searchadv":[3488296,3487577],"mms.nej.signin":[3685073,3685074],"mms.nej.trends":[3488346,3487624],"mms.nej.topics.multimedia":[4633835,4756494],"mms.nej.recentpub":[4633851,4756502],"mms.nej.topics.specialtiesindex":[4633839,4756507]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},adtechPageID:{customJS:function(){var e={"mms.nej.about-nejm":[745275,744994],"mms.nej.topics.aging-geriatrics":[745251,745024],"mms.nej.topics.allergy-immunology":[745265,745031],"mms.nej.archive.articles_1812":[745262,745014],"mms.nej.archive.articles_1945":[745289,745012],"mms.nej.articleindex":[745256,744989],"mms.nej.articles":[745282,745011],"mms.nej.audio":[745271,745003],"mms.nej.browse":[745293,745e3],"mms.nej.topics.cardiology":[745280,745020],"mms.nej.topics.primarycare-hospitalist":[745253,745018],"mms.nej.topics.dermatology":[745258,744993],"mms.nej.ebola-virus":[745257,745013],"mms.nej.topics.emergency-medicine":[745276,744998],"mms.nej.topics.endocrinology":[745250,745016],"mms.nej.topics.gastroenterology":[745272,745027],"mms.nej.generalmenu":[745277,745025],"mms.nej.generalsubpages":[745254,745029],"mms.nej.topics.genetics":[745268,745006],"mms.nej.global-health":[745291,745021],"mms.nej.topics.gynecology-obstetrics":[745285,745015],"mms.nej.health_policy_datawatch":[745269,744988],"mms.nej.topics.health-policy":[745264,745004],"mms.nej.home":[745270,744997],"mms.nej.imagechallenge":[745267,745001],"mms.nej.topics.infectious-disease":[745274,745022],"mms.nej.issues.current":[745278,745008],"mms.nej.issues.past":[745252,744996],"mms.nej.topics.medicine":[745294,745010],"mms.nej.meetings":[745283,744995],"mms.nej.nejm-quick-take-video":[745273,744992],"mms.nej.nejm-quick-take-video-summary":[842154,842155],"mms.nej.topics.nephrology":[745286,744987],"mms.nej.topics.neurology-neurosurgery":[745261,745009],"mms.nej.topics.oncology-hematology":[745287,745032],"mms.nej.topics.pediatrics":[745281,745007],"mms.nej.topics.psychiatry":[745255,745030],"mms.nej.topics.pulmonary":[745296,745002],"mms.nej.topics.rheumatology":[745290,745019],"mms.nej.rss":[745248,745017],"mms.nej.search":[745297,744999],"mms.nej.searchadv":[745260,745005],"mms.nej.signin":[745288,745026],"mms.nej.topics.surgery":[745266,745023],"mms.nej.trends":[745279,744991],"mms.nej.zika-virus":[838409,838410],"mms.nej.frontiers-in-medicine":[1042872,1042438],"mms.nej.conference":[1047095,1047096],"mms.nej.case-studies-in-social-medicine":[1053606,1053607],"mms.nej.epidemics":[1053762,1053763],"mms.nej.topics.challengeyourself":[986867,1008600],"mms.nej.data-sharing":[1008496,1008610],"mms.nej.forgotpassword":[986908,1008604],"mms.nej.images-in-clinical-medicine":[1008499,1008609],"mms.nej.interactive-medical-case":[1008498,1008608],"mms.nej.health_policy_datawatch":[1008497,1008611],"mms.nej.topics.multimedia":[986868,1008605],"mms.nej.pain-management":[1008494,1008612],"mms.nej.recentpub":[986875,1008602],"mms.nej.topics.specialtiesindex":[986866,1008603],"mms.nej.clinical-trials-series":[1008493,1008606],"mms.nej.topics.index":[1008545,1008599],"mms.nej.videos-in-clinical-medicine":[1008495,1008607]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},adtechRightTowerID:{customJS:function(){var e,t,i=[["","3488227","3487562"],["index.php","3488227","3487562"],["now","3488227","3487562"]],a="",r=n.location.pathname.split("/")[1];for(t=_satellite.configurationSettings.settings.isStaging?1:2,e=0;e<i.length;e++)if(i[e][0]===r){a=i[e][t];break}return a},storeLength:"pageview"},adtechTopbannerID:{customJS:function(){var e={"mms.nej.about-nejm":[3488307,3487645],"mms.nej.topics.aging-geriatrics":[3488310,3487691],"mms.nej.topics.allergy-immunology":[3488306,3487586],"mms.nej.archive.articles_1812":[3488333,3487635],"mms.nej.archive.articles_1945":[3488303,3487583],"mms.nej.articleindex":[3488355,3487601],"mms.nej.articles":[3488357,3487597],"mms.nej.audio":[3488254,3487683],"mms.nej.browse":[3488295,3487661],"mms.nej.topics.cardiology":[3488364,3487585],"mms.nej.topics.primarycare-hospitalist":[3488339,3487696],"mms.nej.topics.dermatology":[3488313,3487638],"mms.nej.ebola-virus":[3488384,3487589],"mms.nej.topics.emergency-medicine":[3488282,3487648],"mms.nej.topics.endocrinology":[3488265,3487594],"mms.nej.topics.gastroenterology":[3488380,3487631],"mms.nej.generalmenu":[3488272,3487672],"mms.nej.generalsubpages":[3488305,3487655],"mms.nej.topics.genetics":[3488301,3487671],"mms.nej.global-health":[3488286,3487658],"mms.nej.topics.gynecology-obstetrics":[3488298,3487686],"mms.nej.health_policy_datawatch":[3488386,3487662],"mms.nej.topics.health-policy":[3488376,3487590],"mms.nej.home":[3488362,3487570],"mms.nej.imagechallenge":[3488277,3487636],"mms.nej.topics.infectious-disease":[3488326,3487695],"mms.nej.issues.current":[3488285,3487571],"mms.nej.issues.past":[3488347,3487693],"mms.nej.topics.medicine":[3488278,3487612],"mms.nej.meetings":[3488358,3487566],"mms.nej.nejm-quick-take-video":[3488370,3487576],"mms.nej.nejm-quick-take-video-summary":[3917405,3917407],"mms.nej.topics.nephrology":[3488365,3487694],"mms.nej.topics.neurology-neurosurgery":[3488323,3487563],"mms.nej.topics.oncology-hematology":[3488373,3487615],"mms.nej.topics.pediatrics":[3488387,3487680],"mms.nej.topics.psychiatry":[3488332,3487649],"mms.nej.topics.pulmonary":[3488260,3487692],"mms.nej.topics.rheumatology":[3488374,3487621],"mms.nej.rss":[3488321,3487627],"mms.nej.search":[3488382,3487678],"mms.nej.searchadv":[3488270,3487685],"mms.nej.signin":[3488336,3487608],"mms.nej.topics.surgery":[3488259,3487616],"mms.nej.trends":[3488329,3487688],"mms.nej.zika-virus":[3903592,3903594],"mms.nej.frontiers-in-medicine":[4971304,4968611],"mms.nej.conference":[4999055,4999058],"mms.nej.case-studies-in-social-medicine":[5034109,5034110],"mms.nej.epidemics":[5034746,5034748],"mms.nej.topics.challengeyourself":[4633832,4756471],"mms.nej.data-sharing":[4755982,4756474],"mms.nej.images-in-clinical-medicine":[4756008,4756481],"mms.nej.interactive-medical-case":[4756003,4756483],"mms.nej.health_policy_datawatch":[4755995,4756492],"mms.nej.topics.multimedia":[4633837,4756495],"mms.nej.pain-management":[4755986,4756498],"mms.nej.recentpub":[4633852,4756501],"mms.nej.topics.specialtiesindex":[4633838,4756505],"mms.nej.clinical-trials-series":[4755990,4756509],"mms.nej.topics.index":[4756222,4756512],"mms.nej.videos-in-clinical-medicine":[4755998,4756516]},t="",n=_satellite.getVar("adCategory"),i=_satellite.configurationSettings.settings.isStaging?0:1;return n&&e[n]&&(t=e[n][i]),t},storeLength:"pageview"},articleAge:{customJS:function(){return _satellite.getVar("window.mmsData.article.age")||""},storeLength:"pageview"},articleCategory:{customJS:function(){if("object"==typeof mmsData.article.category){if(null==mmsData.article.category)return""}else if("string"==typeof mmsData.article.category)return mmsData.article.category},storeLength:"pageview"},articleDOI:{customJS:function(){return _satellite.getVar("window.mmsData.article.doi")||""},storeLength:"pageview"},articleFormat:{customJS:function(){return _satellite.getVar("window.mmsData.article.format")||""},storeLength:"pageview"},articleIsFree:{customJS:function(){return _satellite.getVar("window.mmsData.article.isFree")||""},storeLength:"pageview"},articleIsOnlineFirst:{customJS:function(){return _satellite.getVar("window.mmsData.article.isOnlineFirst")||""},storeLength:"pageview"},articleIssueDate:{customJS:function(){var e=_satellite.getVar("window.mmsData.article.issueDate")||"";return e.length>10?e.substring(0,10):""},storeLength:"pageview"},articleIssueYear:{customJS:function(){var e=_satellite.getVar("articleIssueDate");if(e.length>0)return e.substring(0,4)},storeLength:"pageview"},articlePrimaryTopic:{customJS:function(){var e=_satellite.getVar("window.mmsData.article.subtopics")||"";return e.length>0?e.split("|")[0]:""},storeLength:"pageview"},articleSpecialty:{customJS:function(){var e=_satellite.getVar("window.mmsData.article.topics")||"";return e.length>0?e.split("|")[0]:""},storeLength:"pageview"},articleSubCategory:{customJS:function(){return _satellite.getVar("window.mmsData.article.subCategory")||""},storeLength:"pageview"},articleSubSpecialty:{customJS:function(){return _satellite.getVar("window.mmsData.article.subSpecialty")||""},storeLength:"pageview"},articleSubTopics:{customJS:function(){return _satellite.getVar("window.mmsData.article.subtopics")||[]},storeLength:"pageview"},articleTitle:{customJS:function(){return _satellite.getVar("window.mmsData.article.title")||""},storeLength:"pageview"},articleTopics:{customJS:function(){
return _satellite.getVar("window.mmsData.article.topics")||[]},storeLength:"pageview"},articleType:{customJS:function(){return _satellite.getVar("window.mmsData.article.type")||""},storeLength:"pageview"},articleViewType:{customJS:function(){return _satellite.getVar("window.mmsData.article.viewType")||""},storeLength:"pageview"},campaignCode:{customJS:function(){return _satellite.getVar("window.mmsData.campaign.code")||""},storeLength:"pageview"},campaignEmpCode:{customJS:function(){return _satellite.getVar("window.mmsData.campaign.empCode")||""},storeLength:"pageview"},campaignPromoCode:{customJS:function(){var e=(_satellite.getVar("window.mmsData.campaign.promoCode")||"")+"|"+(_satellite.getVar("window.mmsData.campaign.priceCode")||"")+"|"+(_satellite.getVar("window.mmsData.campaign.code")||"")+"|"+(_satellite.getVar("window.mmsData.campaign.empCode")||"");return"|||"!=e?e:""},storeLength:"pageview"},campaignTrackingCode:{customJS:function(){return _satellite.getVar("window.mmsData.campaign.trackingCode")||""},storeLength:"pageview"},cdfFlowIsComplete:{customJS:function(){var e=decodeURIComponent(_sdi.util.getCookie("CDF_COMPLETE"));return _sdi.util.removeCookie("CDF_COMPLETE"),"null"!=e?(t.mmsDataCDF=JSON.parse(e),_satellite.track("mmsDataCDFAvailable"),"y"):"n"},storeLength:"pageview"},cdfFlowIsCompleteTarget:{customJS:function(){var e=decodeURIComponent(_sdi.util.getCookie("CDF_COMPLETE"));return void 0!==e&&e?(t.mmsDataCDF=JSON.parse(e),"y"):"n"},storeLength:"pageview"},cdfRegComplete:{customJS:function(){var e=_satellite.readCookie("CDF_REG_COMP")||"";return""==e||"false"==e?(_satellite.setCookie("CDF_REG_COMP","false",1),"false"):"true"==cookie?"true":void 0},storeLength:"pageview"},cdfRegCompleteCookie:{cookie:"CDF_REG_COMP",storeLength:"pageview"},cmeName:{customJS:function(){return _satellite.getVar("window.mmsData.cme.name")||""},storeLength:"pageview"},cmeSpecialty:{customJS:function(){return _satellite.getVar("window.mmsData.cme.specialty")||""},storeLength:"pageview"},cmeType:{customJS:function(){return _satellite.getVar("window.mmsData.cme.type")||""},storeLength:"pageview"},"common flow composite":{customJS:function(){return(_satellite.getVar("pageActivity")||"")+"::"+(_satellite.getVar("userType")||"")+"::"+(_satellite.getVar("userLoginStatus")||"")+"::"+(_satellite.getVar("pageActivityStep")||"")},storeLength:"pageview"},currentDomain:{jsVariable:"document.domain",storeLength:"pageview"},customEventAction:{jsVariable:"event.detail.action",storeLength:"pageview",cleanText:!0},customEventLocation:{jsVariable:"event.detail.location",storeLength:"pageview",cleanText:!0},customEventLocationName:{jsVariable:"event.detail.locationName","default":"No Name",storeLength:"pageview",cleanText:!0},customEventPromo:{jsVariable:"event.detail.promo",storeLength:"pageview",cleanText:!0},dataLocation:{customJS:function(){var e=_satellite.readCookie("dtm_cusLinkPageArea")||"";return _satellite.removeCookie("dtm_cusLinkPageArea"),e},storeLength:"pageview"},documentHash:{jsVariable:"document.location.hash",storeLength:"pageview"},domain:{jsVariable:"document.domain",storeLength:"pageview"},errorCode:{customJS:function(){return _satellite.getVar("window.mmsData.event.error.code")||""},storeLength:"pageview"},errorList:{customJS:function(){var e,t=$('.errorText.mstrHide[style="display: block;"]'),n=[];for(e=0;e<t.length;e++){var i=_satellite.text(t[e]).replace(/^\s+|\s+$/gm,"").replace(/Please.*your /,"Rqd:").replace(/\./g,"").replace(/\|/g,"");n.push(i)}return n.join("|")},storeLength:"pageview"},externalCampaignCode:{customJS:function(){var e="",t=_satellite.getVar("window.mmsData.campaign.code")||"",n=_satellite.getVar("window.mmsData.campaign.promoCode")||"";return""!==t&&""!==n&&(e=t+"-"+n),e},storeLength:"pageview"},"Featherlight Modal jQuery Plugin":{customJS:function(){return function(e){"use strict";function i(e,t){if(!(this instanceof i)){var n=new i(e,t);return n.open(),n}this.id=i.id++,this.setup(e,t),this.chainCallbacks(i._callbackChain)}function a(e,t){var n={};for(var i in e)i in t&&(n[i]=e[i],delete e[i]);return n}function r(e,t){var n={},i=new RegExp("^"+t+"([A-Z])(.*)");for(var a in e){var r=a.match(i);if(r)n[(r[1]+r[2].replace(/([A-Z])/g,"-$1")).toLowerCase()]=e[a]}return n}if(void 0!==e)if(e.fn.jquery.match(/-ajax/))"console"in t&&t.console.info("Featherlight needs regular jQuery, not the slim version.");else{var s=[],o=function(t){return s=e.grep(s,function(e){return e!==t&&e.$instance.closest("body").length>0})},l={allow:1,allowfullscreen:1,frameborder:1,height:1,longdesc:1,marginheight:1,marginwidth:1,mozallowfullscreen:1,name:1,referrerpolicy:1,sandbox:1,scrolling:1,src:1,srcdoc:1,style:1,webkitallowfullscreen:1,width:1},c={keyup:"onKeyUp",resize:"onResize"},d=function(t){e.each(i.opened().reverse(),function(){return t.isDefaultPrevented()||!1!==this[c[t.type]](t)?void 0:(t.preventDefault(),t.stopPropagation(),!1)})},u=function(n){if(n!==i._globalHandlerInstalled){i._globalHandlerInstalled=n;var a=e.map(c,function(e,t){return t+"."+i.prototype.namespace}).join(" ");e(t)[n?"on":"off"](a,d)}};i.prototype={constructor:i,namespace:"featherlight",targetAttr:"data-featherlight",variant:null,resetCss:!1,background:null,openTrigger:"click",closeTrigger:"click",filter:null,root:"body",openSpeed:250,closeSpeed:250,closeOnClick:"background",closeOnEsc:!0,closeIcon:"&#10005;",loading:"",persist:!1,otherClose:null,beforeOpen:e.noop,beforeContent:e.noop,beforeClose:e.noop,afterOpen:e.noop,afterContent:e.noop,afterClose:e.noop,onKeyUp:e.noop,onResize:e.noop,type:null,contentFilters:["jquery","image","html","ajax","iframe","text"],setup:function(t,n){"object"!=typeof t||t instanceof e!=0||n||(n=t,t=void 0);var i=e.extend(this,n,{target:t}),a=i.resetCss?i.namespace+"-reset":i.namespace,r=e(i.background||['<div class="'+a+"-loading "+a+'">','<div class="'+a+'-content">','<button class="'+a+"-close-icon "+i.namespace+'-close" aria-label="Close">',i.closeIcon,"</button>",'<div class="'+i.namespace+'-inner">'+i.loading+"</div>","</div>","</div>"].join("")),s="."+i.namespace+"-close"+(i.otherClose?","+i.otherClose:"");return i.$instance=r.clone().addClass(i.variant),i.$instance.on(i.closeTrigger+"."+i.namespace,function(t){if(!t.isDefaultPrevented()){var n=e(t.target);("background"===i.closeOnClick&&n.is("."+i.namespace)||"anywhere"===i.closeOnClick||n.closest(s).length)&&(i.close(t),t.preventDefault())}}),this},getContent:function(){if(!1!==this.persist&&this.$content)return this.$content;var n=this,i=this.constructor.contentFilters,a=function(e){return n.$currentTarget&&n.$currentTarget.attr(e)},r=a(n.targetAttr),s=n.target||r||"",o=i[n.type];if(!o&&s in i&&(o=i[s],s=n.target&&r),s=s||a("href")||"",!o)for(var l in i)n[l]&&(o=i[l],s=n[l]);if(!o){var c=s;if(s=null,e.each(n.contentFilters,function(){return(o=i[this]).test&&(s=o.test(c)),!s&&o.regex&&c.match&&c.match(o.regex)&&(s=c),!s}),!s)return"console"in t&&t.console.error("Featherlight: no content filter found "+(c?' for "'+c+'"':" (no target specified)")),!1}return o.process.call(n,s)},setContent:function(t){return this.$instance.removeClass(this.namespace+"-loading"),this.$instance.toggleClass(this.namespace+"-iframe",t.is("iframe")),this.$instance.find("."+this.namespace+"-inner").not(t).slice(1).remove().end().replaceWith(e.contains(this.$instance[0],t[0])?"":t),this.$content=t.addClass(this.namespace+"-inner"),this},open:function(t){var n=this;if(n.$instance.hide().appendTo(n.root),!(t&&t.isDefaultPrevented()||!1===n.beforeOpen(t))){t&&t.preventDefault();var i=n.getContent();if(i)return s.push(n),u(!0),n.$instance.fadeIn(n.openSpeed),n.beforeContent(t),e.when(i).always(function(e){n.setContent(e),n.afterContent(t)}).then(n.$instance.promise()).done(function(){n.afterOpen(t)})}return n.$instance.detach(),e.Deferred().reject().promise()},close:function(t){var n=this,i=e.Deferred();return!1===n.beforeClose(t)?i.reject():(0===o(n).length&&u(!1),n.$instance.fadeOut(n.closeSpeed,function(){n.$instance.detach(),n.afterClose(t),i.resolve()})),i.promise()},resize:function(e,t){if(e&&t){this.$content.css("width","").css("height","");var n=Math.max(e/(this.$content.parent().width()-1),t/(this.$content.parent().height()-1));n>1&&(n=t/Math.floor(t/n),this.$content.css("width",e/n+"px").css("height",t/n+"px"))}},chainCallbacks:function(t){for(var n in t)this[n]=e.proxy(t[n],this,e.proxy(this[n],this))}},e.extend(i,{id:0,autoBind:"[data-featherlight]",defaults:i.prototype,contentFilters:{jquery:{regex:/^[#.]\w/,test:function(t){return t instanceof e&&t},process:function(t){return!1!==this.persist?e(t):e(t).clone(!0)}},image:{regex:/\.(png|jpg|jpeg|gif|tiff?|bmp|svg)(\?\S*)?$/i,process:function(t){var n=this,i=e.Deferred(),a=new Image,r=e('<img src="'+t+'" alt="" class="'+n.namespace+'-image" />');return a.onload=function(){r.naturalWidth=a.width,r.naturalHeight=a.height,i.resolve(r)},a.onerror=function(){i.reject(r)},a.src=t,i.promise()}},html:{regex:/^\s*<[\w!][^<]*>/,process:function(t){return e(t)}},ajax:{regex:/./,process:function(t){var n=e.Deferred(),i=e("<div></div>").load(t,function(e,t){"error"!==t&&n.resolve(i.contents()),n.fail()});return n.promise()}},iframe:{process:function(t){var n=new e.Deferred,i=e("<iframe/>"),s=r(this,"iframe"),o=a(s,l);return i.hide().attr("src",t).attr(o).css(s).on("load",function(){n.resolve(i.show())}).appendTo(this.$instance.find("."+this.namespace+"-content")),n.promise()}},text:{process:function(t){return e("<div>",{text:t})}}},functionAttributes:["beforeOpen","afterOpen","beforeContent","afterContent","beforeClose","afterClose"],readElementConfig:function(t,n){var i=this,a=new RegExp("^data-"+n+"-(.*)"),r={};return t&&t.attributes&&e.each(t.attributes,function(){var t=this.name.match(a);if(t){var n=this.value,s=e.camelCase(t[1]);if(e.inArray(s,i.functionAttributes)>=0)n=new Function(n);else try{n=JSON.parse(n)}catch(c){}r[s]=n}}),r},extend:function(t,n){var i=function(){this.constructor=t};return i.prototype=this.prototype,t.prototype=new i,t.__super__=this.prototype,e.extend(t,this,n),t.defaults=t.prototype,t},attach:function(t,n,i){var a=this;"object"!=typeof n||n instanceof e!=0||i||(i=n,n=void 0);var r,s=(i=e.extend({},i)).namespace||a.defaults.namespace,o=e.extend({},a.defaults,a.readElementConfig(t[0],s),i),l=function(s){var l=e(s.currentTarget),c=e.extend({$source:t,$currentTarget:l},a.readElementConfig(t[0],o.namespace),a.readElementConfig(s.currentTarget,o.namespace),i),d=r||l.data("featherlight-persisted")||new a(n,c);"shared"===d.persist?r=d:!1!==d.persist&&l.data("featherlight-persisted",d),c.$currentTarget.blur&&c.$currentTarget.blur(),d.open(s)};return t.on(o.openTrigger+"."+o.namespace,o.filter,l),{filter:o.filter,handler:l}},current:function(){var e=this.opened();return e[e.length-1]||null},opened:function(){var t=this;return o(),e.grep(s,function(e){return e instanceof t})},close:function(e){var t=this.current();return t?t.close(e):void 0},_onReady:function(){var t=this;if(t.autoBind){var i=e(t.autoBind);i.each(function(){t.attach(e(this))}),e(n).on("click",t.autoBind,function(n){if(!n.isDefaultPrevented()){var a=e(n.currentTarget);if(i.length!==(i=i.add(a)).length){var r=t.attach(a);(!r.filter||e(n.target).parentsUntil(a,r.filter).length>0)&&r.handler(n)}}})}},_callbackChain:{onKeyUp:function(t,n){return 27===n.keyCode?(this.closeOnEsc&&e.featherlight.close(n),!1):t(n)},beforeOpen:function(t,i){return e(n.documentElement).addClass("with-featherlight"),this._previouslyActive=n.activeElement,this._$previouslyTabbable=e("a, input, select, textarea, iframe, button, iframe, [contentEditable=true]").not("[tabindex]").not(this.$instance.find("button")),this._$previouslyWithTabIndex=e("[tabindex]").not('[tabindex="-1"]'),this._previousWithTabIndices=this._$previouslyWithTabIndex.map(function(t,n){return e(n).attr("tabindex")}),this._$previouslyWithTabIndex.add(this._$previouslyTabbable).attr("tabindex",-1),n.activeElement.blur&&n.activeElement.blur(),t(i)},afterClose:function(t,a){var r=t(a),s=this;return this._$previouslyTabbable.removeAttr("tabindex"),this._$previouslyWithTabIndex.each(function(t,n){e(n).attr("tabindex",s._previousWithTabIndices[t])}),this._previouslyActive.focus(),0===i.opened().length&&e(n.documentElement).removeClass("with-featherlight"),r},onResize:function(e,t){return this.resize(this.$content.naturalWidth,this.$content.naturalHeight),e(t)},afterContent:function(e,t){var n=e(t);return this.$instance.find("[autofocus]:not([disabled])").focus(),this.onResize(t),n}}}),e.featherlight=i,e.fn.featherlight=function(e,t){return i.attach(this,e,t),this},e(n).ready(function(){i._onReady()})}else"console"in t&&t.console.info("Too much lightness, Featherlight needs jQuery.")}($),!0},storeLength:"pageview"},ga_imc_event:{customJS:function(){try{var n=_satellite.getVar("window.mmsData.object.universalAnalytics")||{},i=n.eventCategory||"",a=n.eventAction||"",r=n.eventLabel||"",s=parseInt(n.eventValue)||0;if("undefined"!=typeof t.ga){var o=n.fieldObject,l=_satellite.getVar("uaTracker");ga(l+".send","event",i,a,r,s,o)}else _gaq.push(["_trackEvent",i,a,r,s])}catch(e){}return"fire"},storeLength:"pageview"},headersReferrerDomain:{customJS:function(){if(n.referrer)return n.referrer.match(/:\/\/(.[^/]+)/)[1]},storeLength:"pageview"},hostisCDF:{customJS:function(){return-1==n.location.hostname.split(".")[0].indexOf("cdf")?"n":"y"},storeLength:"pageview"},imageChallengeID:{customJS:function(){return _satellite.getVar("window.mmsData.imageChallenge.id")||""},storeLength:"pageview"},internalSearchCampaign:{queryParam:"contextual",storeLength:"pageview",ignoreCase:1},isBot:{customJS:function(){try{var n=t.navigator.userAgent,i=!1;i=["Googlebot","BingPreview","Baiduspider","moatbot","pingdom","bingbot","Daum","AdsBot-Google","Google Web Preview","PhantomJS","Yandex","facebookexternalhit","Google Page Speed Insights","Applebot","HubSpot Marketing Grader","Yahoo Ad Monitoring","naver.me","oBot","Mediapartners-Google","SkypeUriPreview","aiHitBot","Prerender","Screaming Frog"].some(function(e){var t=new RegExp("\\b"+e+"\\b").test(n);return _satellite.notify("DATA ELEMENT: isBot: item: ["+e+"] - isMatch: ["+t+"]"),t}),_satellite.notify("DATA ELEMENT: isBot: ["+i+"]")}catch(e){_satellite.notify("DATA ELEMENT: ERROR caught in isBot"),_satellite.notify("DATA ELEMENT: ERROR info: "+e)}return i},"default":"false",storeLength:"pageview"},jwUserIDInUrl:{queryParam:"jwd",storeLength:"pageview",ignoreCase:1},jwUserSpecialtyGroupCodeInCookie:{cookie:"jw_jspc",storeLength:"pageview"},jwUserSpecialtyGroupCodeInUrl:{queryParam:"jspc",storeLength:"pageview",forceLowerCase:!0,ignoreCase:1},layersVisible:{customJS:function(){function e(){var e=!!$("table.iframeLayer").length;_satellite.notify("DATA ELEMENT: iframeLayer = ["+e+"]");var t=!!$(".promoLayer").length;_satellite.notify("DATA ELEMENT: promoLayer = ["+t+"]");var n=!!$("#monetate_lightbox").length;_satellite.notify("DATA ELEMENT: monetate = ["+n+"]");var i="block"===$("[id^=modalWindow]").css("display");_satellite.notify("DATA ELEMENT: Adobe Target Modal: id^=modalWindow = ["+i+"]");var a=!!$(".featherlight").length;_satellite.notify("DATA ELEMENT: Adobe Target Featherlight = ["+a+"]");var r="block"===$('div[id^="IPEbgCover"]').css("display");return _satellite.notify('DATA ELEMENT: iperception div[id^="IPEbgCover"] = ['+r+"]"),e||t||n||i||a||r}var n=e();return _satellite.notify("DATA ELEMENT: updatedLayersVisible = ["+n+"]"),_satellite.notify("DATA ELEMENT: Current value of window.layersVisible = ["+t.layersVisible+"]"),t.layersVisible=t.layersVisible||n,_satellite.notify("DATA ELEMENT: Updated value of window.layersVisible = ["+t.layersVisible+"]"),t.layersVisible},storeLength:"pageview"},mmsCookieHelper:{customJS:function(){var e;return t.mms=t.mms||{},e=t.mms,_satellite.notify("GDPR: MMS Cookie Helper"),e.cookie=e.cookie||{domain:function(){for(var e=n.location.hostname,t=[".nejm.org",".jwatch.org"],i=0;i<t.length;i++)if(e.indexOf(t[i])>0)return t[i];return e},set:function(t,i,a,r){var s=new Date;s.setTime(s.getTime()+24*a*60*60*1e3);var o="expires="+s.toUTCString(),l=r||e.cookie.domain();n.cookie=t+"="+i+";"+o+";path=/;domain="+l},get:function(e){for(var t=e+"=",i=decodeURIComponent(n.cookie).split(";"),a=0;a<i.length;a++){for(var r=i[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},remove:function(t){e.cookie.set(t,"",-1)}},!0},storeLength:"pageview"},mmsGdprInit:{customJS:function(){return t.mms=t.mms||{},t.mms.gdpr=t.mms.gdpr||{},function(e){function n(e){return'<!--  GDPR - Privacy Message  HTML/CSS/JS  v2.0.10  - IE test: pointer-events--><style>  .gdpr-msg {    display: none;    position: fixed;    bottom: 0;    z-index: 5000;    width: 100%;    background: #666;  }  .gdpr-msg .gdpr-msg__copy {    margin: 0 auto;    position: relative;    padding: 15px 60px 15px 20px;    color: #FFF;  }  .gdpr-msg .gdpr-msg__copy .p {    padding: 3px 0;    margin: 0;    font-family: ff-scala-sans-web-pro, Helvetica, Arial, sans-serif;    font-size: 16px;    line-height: 20px;    font-weight: 300;  }  .gdpr-msg .gdpr-msg__copy .p2 {    font-size: 14px;    line-height: 16px;    margin-top: 4px;  }  .gdpr-msg .gdpr-msg__copy .gdpr-cookies {    font-weight: bold;    color: #a6bacb;    text-transform: capitalize;    letter-spacing: .12em;  }  .gdpr-msg .gdpr-msg__copy a,  .gdpr-msg .gdpr-msg__copy a:hover {    color: #a6bacb;    text-decoration: underline;  }    .gdpr-msg .gdpr-msg__close {    position: absolute;    top: 13px;    right: 20px;    border-radius: 30px;    padding: 5px;    color: #faeff6;    font-size: 30px;    line-height: 28px;    text-align: center;    cursor: pointer;  }  .gdpr-msg .gdpr-msg__close svg {    pointer-events: none;    width: 24px;    height: 24px;  }  .gdpr-msg .gdpr-msg__close svg path {    fill: currentColor;    stroke: currentColor;    stroke-miterlimit: 10;    stroke-width: 2;  }</style><div class="gdpr-msg" style="display: none;">  <div class="gdpr-msg__copy">    <div class="gdpr-msg__close">      <svg viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="2" d="M6 18L18 6m0 12L6 6"></path></svg>    </div>    <div class="p"><span class="gdpr-cookies">THIS SITE USES COOKIES</span> to personalize content, to measure website and advertising performance, and to present relevant advertising.</div>    <div class="p p2">By continuing to use our site, you accept the use of these cookies. To learn more, please visit our <a href="'+(e||"https://www.nejmgroup.org/legal/cookie-information.htm")+'" target="_blank">Cookie Information</a> page.</div>  </div></div>'}function i(){var t={name:"GDPR",value:"w|",expires:1825,domain:e.cookie.domain()},n=e.gdpr.cookie||t;if(n){var i=e.cookie.get(n.name);e.cookie.set(n.name,i+n.value,n.expires,n.domain)}}function a(e){i(),c(t).off(".gdpr"),e.animate({opacity:0,bottom:"-=100"},1e3,function(){e.hide()})}function r(e){c(t).on("touchend.gdpr",function(){_satellite.notify("GDPR: touchend window"),a(e)}),c(t).on("click.gdpr",function(){_satellite.notify("GDPR: clicked window"),a(e)});var n=c(t).scrollTop();c(t).on("scroll.gdpr",function(){c(this).scrollTop()>n+120&&(_satellite.notify("GDPR: scrolled over 120px"),a(e))})}function s(){_satellite.notify("GDPR: _showMsg()"),c("body").append(n()),_satellite.notify("GDPR: CSS & HTML - injected");var e=c(".gdpr-msg");e.show(),_satellite.notify("GDPR: CSS & HTML - Visible"),r(e)}function o(){var e=1e4,n=setInterval(function(){e<0?(clearInterval(n),_satellite.notify("GDPR: jQuery timed out"),_satellite.notify("GDPR: jQuery wait time: ["+(1e4-e)+"]")):"function"==typeof t.jQuery&&(clearInterval(n),_satellite.notify("GDPR: jQuery loaded"),_satellite.notify("GDPR: jQuery wait time: ["+(1e4-e)+"]"),c=t.jQuery,s()),e-=100},100)}function l(){_satellite.notify("GDPR: _init()"),o()}var c;e.gdpr.init=l}(t.mms),!0},storeLength:"pageview"},mmsLayersCounter:{cookie:"Layer Counter","default":"1",storeLength:"pageview"},multimediaContent:{customJS:function(){return _satellite.getVar("window.mmsData.multimedia.content")||""},storeLength:"pageview"},multimediaContentID:{customJS:function(){return _satellite.getVar("window.mmsData.multimedia.contentID")||""},storeLength:"pageview"},multimediaScreen:{customJS:function(){return _satellite.getVar("window.mmsData.multimedia.screen")||""},storeLength:"pageview"},multimediaType:{customJS:function(){return _satellite.getVar("window.mmsData.multimedia.type")||""},storeLength:"pageview"},multimediaVideoChapter:{customJS:function(){return _satellite.getVar("window.mmsData.multimedia.video.chapter")||""},storeLength:"pageview"},multimediaVideoFormat:{customJS:function(){return _satellite.getVar("window.mmsData.multimedia.video.format")||""},storeLength:"pageview"},nejm_customerid:{customJS:function(){return n.getElementsByName("sessionEvt-idGUID").length>0?n.getElementsByName("sessionEvt-idGUID")[0].content:""},storeLength:"pageview"},objectAge:{customJS:function(){return _satellite.getVar("window.mmsData.object.age")||""},storeLength:"pageview"},objectCategory:{customJS:function(){return _satellite.getVar("window.mmsData.object.category")||""},storeLength:"pageview"},objectDoi:{customJS:function(){return _satellite.getVar("window.mmsData.object.doi")||""},storeLength:"pageview"},objectDurationBucket:{customJS:function(){var e=_satellite.getVar("objectTotalDuration")||"",t="";if(e)switch(e=parseInt(e),!0){case e<31:t="under 31 seconds";break;case e<61:t="under 61 seconds";break;case e<121:t="1-2 minutes";break;case e<181:t="2-3 minutes";break;case e<301:t="3-5 minutes";break;case e<421:t="5-7 minutes";break;case e<601:t="7-10 minutes";break;case e<901:t="10-15 minutes";break;case e>900:t="over 15 minutes"}return t},storeLength:"pageview"},objectEventAction:{jsVariable:"window.mmsData.object.eventAction",storeLength:"pageview"},objectEventName:{jsVariable:"window.mmsData.object.eventName",storeLength:"pageview"},objectIsFree:{customJS:function(){return _satellite.getVar("window.mmsData.object.isFree")||""},storeLength:"pageview"},objectIssueDate:{customJS:function(){return _satellite.getVar("window.mmsData.object.issueDate")||""},storeLength:"pageview"},objectTitle:{customJS:function(){return _satellite.getVar("window.mmsData.object.title")||""},storeLength:"pageview"},objectTopics:{customJS:function(){return _satellite.getVar("window.mmsData.object.topics")||""},storeLength:"pageview"},objectTotalDuration:{jsVariable:"window.mmsData.object.totalDuration",storeLength:"pageview"},objectType:{customJS:function(){return _satellite.getVar("window.mmsData.object.type")||""},storeLength:"pageview"},pageActivity:{customJS:function(){return _satellite.getVar("window.mmsData.page.activity")||""},storeLength:"pageview"},pageActivityCDF:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.page.activity")||""},storeLength:"pageview"},pageActivityStart:{customJS:function(){return _satellite.getVar("window.mmsData.page.activityStart")||""},storeLength:"pageview"},pageActivityStep:{customJS:function(){return _satellite.getVar("window.mmsData.page.activityStep")||""},storeLength:"pageview"},pageActivityStepCDF:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.page.activityStep")||""},storeLength:"pageview"},pageActivityType:{customJS:function(){return _satellite.getVar("window.mmsData.page.activityType")||""},storeLength:"pageview"},pageActivityTypeCDF:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.page.activityType")||""},storeLength:"pageview"},pageName:{customJS:function(){var e=_satellite.getVar("window.mmsData.page.type")||"";""===e&&("Quick Take"==(_satellite.getVar("objectType")||"")&&(e="Multimedia"));var t=_satellite.getVar("window.mmsData.page.title")||"",i=e+"-"+(t=(t=t.replace("The New England Journal of Medicine","NEJM.org")).replace("the New England Journal of Medicine","NEJM.org"));if("/subscribe/sub_message.aspx"===location.pathname){var a=location.href,r=a.substr(a.indexOf("msgid=")+6,a.length);r&&(i+="-Apologies-"+(r=r.replace("#","-")))}return"-"==i?"-"+n.location.pathname:""==t?e+"-"+n.location.pathname:i},storeLength:"pageview"},pageSiteSection:{customJS:function(){return _satellite.getVar("window.mmsData.page.siteSection")||""},storeLength:"pageview"},pageTab:{customJS:function(){return _satellite.getVar("window.mmsData.page.tab")||""},storeLength:"pageview"},pageTitle:{customJS:function(){var e=_satellite.getVar("window.mmsData.page.title");return e||n.title},storeLength:"pageview"},pageType:{customJS:function(){if("nownejm1dev.wpengine.com"===t.location.host||"blogs.nejm.org"===t.location.host)return"Blog";var e=_satellite.getVar("window.mmsData.page.type")||"";if(""===e){var n=_satellite.getVar("objectType")||"";""!==n&&(e=n)}return e},storeLength:"pageview"},pageURL:{jsVariable:"document.location.href",storeLength:"pageview"},pageViewType:{customJS:function(){return _satellite.getVar("window.mmsData.page.viewType")||""},storeLength:"pageview"},priorRegStatus:{customJS:function(){return _satellite.getVar("window.mmsData.user.priorRegStatus")||"false"},storeLength:"pageview"},productCode:{customJS:function(){var e=_satellite.getVar("window.mmsData.user.productCode")||_satellite.getVar("window.mmsData.transaction.productCode")||"";return"online only"==e.toLowerCase()?"onj":"print & online"==e.toLowerCase()?"nej":e},storeLength:"pageview"},productSource:{customJS:function(){return _satellite.getVar("window.mmsData.user.productSource")||""},storeLength:"pageview"},promoCode:{customJS:function(){return _satellite.getVar("window.mmsData.campaign.promoCode")||""},storeLength:"pageview"},queryLink:{queryParam:"query",storeLength:"pageview",ignoreCase:1},queryStringSignInState:{customJS:function(){if(n.location.search.toLowerCase().match(/sstate/)){var e=_satellite.getQueryParamCaseInsensitive("sstate")||"";if("signdedin"===e)return e}return"notsignedin"},storeLength:"pageview",forceLowerCase:!0,cleanText:!0},searchFilterContentAge:{customJS:function(){return contentAge=_satellite.getVar("window.mmsData.search.filter.contentAge")||"","completeArchive"==contentAge&&(contentAge=""),contentAge},storeLength:"pageview"},searchFilterDateRange:{customJS:function(){return _satellite.getVar("window.mmsData.search.filter.dateRange")||""},storeLength:"pageview"},searchMobileFilter:{customJS:function(){var e="n",t=_satellite.getVar("window.mmsData.page.viewType")||"";return jQuery("a#clearFilter").length>0&&"mobile"==t&&(e="y"),e},storeLength:"pageview"},searchPresetFilter:{customJS:function(){try{if(t.mmsData&&mmsData.search&&mmsData.search.presetFilter){var e="";return $.each(mmsData.search.presetFilter,function(t,n){n&&(e=t+"|"+n+"|preset")}),e}}catch(n){}},storeLength:"pageview"},searchQuery:{customJS:function(){return _satellite.getVar("window.mmsData.search.query")||""},storeLength:"pageview"},searchQueryTyped:{customJS:function(){return _satellite.getVar("window.mmsData.search.queryTyped")||""},storeLength:"pageview"},searchResultCount:{customJS:function(){var e=_satellite.getVar("window.mmsData.search.resultCount")||"";return"0"==e?"zero":e},storeLength:"pageview"},searchResultPage:{customJS:function(){return _satellite.getVar("window.mmsData.search.resultPage")||""},storeLength:"pageview"},searchSort:{customJS:function(){return _satellite.getVar("window.mmsData.search.sort")||""},storeLength:"pageview"},searchType:{customJS:function(){return _satellite.getVar("window.mmsData.search.type")||""},storeLength:"pageview"},transArticleDOI:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.article.doi")||""},storeLength:"pageview"},transBillType:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.transaction.billType")||""},storeLength:"pageview"},transCountry:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.transaction.country")||""},storeLength:"pageview"},transPaymentMethod:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.transaction.paymentMethod")||""},storeLength:"pageview"},transPrice:{customJS:function(){var e=_satellite.getVar("window.mmsDataCDF.transaction.price")||"";return""!=e&&(e=parseFloat(e).toFixed(2)),e},storeLength:"pageview"},transProductCode:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.transaction.productCode")||""},storeLength:"pageview"},transPurchaseID:{customJS:function(){if(""!=_satellite.getVar("window.mmsDataCDF.transaction.purchaseID"))return t.mmsDataCDF.transaction.purchaseID;if(""!=_satellite.getVar("window.mmsDataCDF.transaction.customerNumber")){var e=parseInt(t.mmsDataCDF.transaction.customerNumber).toString().slice(-8),n=new Date;return e+n.getUTCFullYear().toString().slice(-2)+String("00"+n.getUTCMonth()).slice(-2)+String("00"+n.getUTCDay()).slice(-2)+String("00"+n.getUTCHours()).slice(-2)+String("00"+n.getUTCMinutes()).slice(-2)+String("00"+n.getUTCSeconds()).slice(-2)}},storeLength:"pageview"},transShippingMethod:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.transaction.shippingMethod")||""},storeLength:"pageview"},transState:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.transaction.state")||""},storeLength:"pageview"},transTax:{customJS:function(){var e=_satellite.getVar("window.mmsDataCDF.transaction.tax")||"";return""!=e&&(e=parseFloat(e).toFixed(2)),e},storeLength:"pageview"},transTotalAmount:{customJS:function(){var e=_satellite.getVar("window.mmsDataCDF.transaction.totalAmount")||"";return""!=e&&(e=parseFloat(e).toFixed(2)),e},storeLength:"pageview"},transTransactionID:{customJS:function(){if(""!=_satellite.getVar("window.mmsDataCDF.transaction.transactionID"))return t.mmsDataCDF.transaction.transactionID;if(""!=_satellite.getVar("window.mmsDataCDF.transaction.customerNumber")){var e=parseInt(t.mmsDataCDF.transaction.customerNumber).toString().slice(-8),n=new Date;return e+n.getUTCFullYear().toString().slice(-2)+String("00"+n.getUTCMonth()).slice(-2)+String("00"+n.getUTCDay()).slice(-2)+String("00"+n.getUTCHours()).slice(-2)+String("00"+n.getUTCMinutes()).slice(-2)+String("00"+n.getUTCSeconds()).slice(-2)}},storeLength:"pageview"},transZipCode:{customJS:function(){return _satellite.getVar("window.mmsDataCDF.transaction.zipCode")||""},storeLength:"pageview"},userAudienceSegment:{customJS:function(){var e=_satellite.getVar("window.mmsData.user.audienceSegment")||"",t=_satellite.getVar("window.mmsData.user.limitedAccess");return e&&t&&(e+="-"+t),e},storeLength:"pageview"},userCountry:{customJS:function(){return _satellite.getVar("window.mmsData.user.country")||""},storeLength:"pageview",forceLowerCase:!0},userCustomerType:{customJS:function(){return _satellite.getVar("window.mmsData.user.customerType")||""},storeLength:"pageview"},userID:{customJS:function(){return _satellite.getVar("window.mmsData.user.userID")||""},storeLength:"pageview"},userInstitutionID:{customJS:function(){return _satellite.getVar("window.mmsData.user.institutionID")||""},storeLength:"pageview"},userLimitedAccess:{customJS:function(){var e=_satellite.getVar("window.mmsData.user.LimitedAccess");return e&&"NULL"!==e&&"null"!==e?e:""},storeLength:"pageview"},userLoginStatus:{customJS:function(){return _satellite.getVar("window.mmsData.user.loginStatus")||""},storeLength:"pageview"},userMeterCountRemaining:{jsVariable:"mmsData.user.meterCountRemaining",storeLength:"pageview"},userProfession:{customJS:function(){return _satellite.getVar("window.mmsData.user.profession")||""},storeLength:"pageview"},userSpecialty:{customJS:function(){return _satellite.getVar("window.mmsData.user.specialty")||""},storeLength:"pageview"},userSpecialtyCode:{customJS:function(){return _satellite.getVar("window.mmsData.user.specialtyCode")||""},storeLength:"pageview"},userSpecialtyGroup:{customJS:function(){return _satellite.getVar("window.mmsData.user.specialtyGroup")||""},storeLength:"pageview"},userSpecialtyGroupCode:{customJS:function(){return _satellite.getVar("window.mmsData.user.specialtyGroupCode")||""},storeLength:"pageview"},userStatus:{customJS:function(){return _satellite.getVar("window.mmsData.user.status")||""},storeLength:"pageview"},userSubscriptionExpiryDate:{jsVariable:"mmsData.user.subscriptionExpiryDate",storeLength:"pageview"},userSubscriptionExpiryNumDays:{customJS:function(){try{var e=_satellite.getVar("userSubscriptionExpiryDate");if(!e)return"";e=new Date(e);var t=new Date;t.setHours(0,0,0,0);var n=Math.round((e-t)/864e5);return"0"==(n=n.toString())&&(n="zero"),n}catch(e){return"Issue parsing 'userSubscriptionExpiryNumDays' data element'"}},storeLength:"pageview"},userSubType:{customJS:function(){return _satellite.getVar("window.mmsData.user.subType")||""},storeLength:"pageview"},userTotalMeterCount:{
jsVariable:"mmsData.user.totalMeterCount",storeLength:"pageview"},userType:{customJS:function(){var e=_satellite.getVar("window.mmsData.user.loginStatus")||"",t=_satellite.getVar("window.mmsData.user.institutionID")||"";return"SignedIn"==e?""!=t?"Individual":"Institutional":"Unknown"},storeLength:"pageview"},userWorkplace:{customJS:function(){return _satellite.getVar("window.mmsData.user.workplace")||""},storeLength:"pageview"},utmParameters:{customJS:function(){function e(e,n){n||(n=t.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(n);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}var n=[];n.push(e("utm_medium")||""),n.push(e("utm_source")||""),n.push(e("utm_campaign")||""),n.push(e("utm_content")||""),n.push(e("utm_term")||"");for(var i=n.join("|"),a=0;a<n.length;a++)if(n[a].length>0)return _satellite.notify("i is equal to: "+a),i;return""},storeLength:"pageview"}},appVersion:"7QN",buildDate:"2019-04-17 00:15:18 UTC",publishDate:"2019-04-17 00:15:17 UTC"})}(window,document);