function makeBoxesEqual(){"use strict";var a=1,b=2,c=29;if(Modernizr.mq("(min-width: 768px)")||$("html").hasClass("lt-ie9"))for(a=1;a<=c;a++){for($(".same-height-group-"+a).setAllToMaxHeight(),b;b<=c;b++)$(".same-height-group-"+a+"-x"+b).innerHeight($(".same-height-group-"+a).innerHeight()*b);b=2}else for(a=1;a<=c;a++)for($(".same-height-group-"+a).innerHeight("auto"),b;b<=c;b++)$(".same-height-group-"+a+"-x"+b).innerHeight("auto")}function findId(a,b){"use strict";for(var c=a.slice(a.indexOf("?")+1).split("&"),d=0;d<c.length;d++)if(c[d].split("=")[0]===b)var e=Number(c[d].split("=")[1]);return e}function validate(){"use strict";var a=$("#jobSearchInput").val().toLowerCase().trim(),b=decodeURI(a);return window.open("/jobs/results/?keywords="+b,"_self"),!1}!function(a){function b(b,c,d,e){"use strict";var f=a.document.createElement("link"),g=c||a.document.getElementsByTagName("script")[0],h=a.document.styleSheets;return f.rel="stylesheet",f.href=b,f.media="only x",e&&(f.onload=e),g.parentNode.insertBefore(f,g),f.onloadcssdefined=function(a){for(var c,d=0;h.length>d;d++)h[d].href&&h[d].href.indexOf(b)>-1&&(c=!0);c?a():setTimeout(function(){f.onloadcssdefined(a)})},f.onloadcssdefined(function(){f.media=d||"all"}),f}function c(a,b){a.onload=function(){a.onload=null,b&&b.call(a)},"isApplicationInstalled"in navigator&&"onloadcssdefined"in a&&a.onloadcssdefined(b)}var d=function(e,f){"use strict";if(e&&3===e.length){var g=a.Image,h=!(!document.createElementNS||!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect||!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1")||a.opera&&-1===navigator.userAgent.indexOf("Chrome")||-1!==navigator.userAgent.indexOf("Series40")),i=new g;i.onerror=function(){d.method="png",d.href=e[2],b(e[2])},i.onload=function(){var a=1===i.width&&1===i.height,g=e[a&&h?0:a?1:2];d.method=a&&h?"svg":a?"datapng":"png",d.href=g,c(b(g),f)},i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",document.documentElement.className+=" grunticon"}};d.loadCSS=b,d.onloadCSS=c,a.grunticon=d}(this),Modernizr.cssanimations&&(new WOW).init(),function(){webshim.setOptions({forms:{lazyCustomMessages:!0,replaceValidationUI:!0,iVal:{sel:".ws-validate",handleBubble:"hide",fx:"fade",submitCheck:"true",events:"focusout change submit",errorMessageClass:"help-block",successWrapperClass:"has-success",errorWrapperClass:"has-error",fieldWrapper:".form-group"}}}),webshim.polyfill("forms")}(),function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),$.fn.setAllToMaxHeight=function(){return this.innerHeight("auto"),this.innerHeight(Math.max.apply(this,$.map(this,function(a){return $(a).innerHeight()})))},$(document).ready(function(){function a(){$(".logo, .icon").css("background-color","transparent")}if(makeBoxesEqual(),$("html").hasClass("lt-ie9")||$(window).on("resize",function(){makeBoxesEqual()}),$.support.pjax){$(document).on("pjax:send",function(){$("#ajax-loader").addClass("fade in")}),$(document).on("pjax:complete",function(){$("#ajax-loader").removeClass("fade in")}),$.pjax.defaults.scrollTo=!1,$.pjax.defaults.timeout=1e4;var b,c;$(document).pjax('[data-toggle="modal-pjax"]',"#ajax",{fragment:".body"}).on("pjax:click",function(){void 0!==(b=0===document.location.hash.length?document.location.pathname:document.location.hash.substring(1))&&(c=b.substring(1,b.length-1).replace(/\//g,"-"))}).on("pjax:beforeSend",function(){$(".modal-backdrop").hasClass("fade in")&&$(".modal-backdrop").remove(),$("#ajax .modal").hasClass("in")&&$("#ajax .modal").removeClass("in")}).on("pjax:start",function(){}).on("pjax:clicked",function(){}).on("pjax:complete",function(){}).on("pjax:popstate",function(){}).on("pjax:beforeReplace",function(){$(".modal-backdrop").hasClass("fade in")&&$(".modal-backdrop").remove(),$("#ajax .modal").hasClass("in")&&$("#ajax .modal").removeClass("in")}).on("pjax:end",function(){$("#ajax .modal").modal("toggle");var a;a=0===window.location.hash.length?window.location.pathname:window.location.hash.substring(1),ga("set","location",a),ga("send","pageview")}).on("show.bs.modal",function(){$("html").hasClass("lt-ie9")&&$(".modal").find("div").hasClass("embed-container")&&$(".modal").find('[data-toggle="modal-pjax"]').hide(),$(".modal-backdrop").remove()}).on("shown.bs.modal",function(){}).on("hide.bs.modal",function(){}).on("hidden.bs.modal",function(){void 0!==b&&($("body").hasClass(c)?($.pjax({url:b,container:"#ajax",fragment:"#ajax"}),$("#ajax-loader").removeClass("fade in")):$("body").hasClass("index")&&($.pjax({url:"/",container:"#ajax",fragment:"#ajax"}),$("#ajax-loader").removeClass("fade in")))})}$("html").hasClass("lt-ie9")&&setTimeout(a,100),$(".nav").localScroll({duration:750,easing:"easeOutQuint",event:"click",hash:!0,reset:!0,lazy:!0}),$(".box").localScroll({duration:750,easing:"easeOutQuint",event:"click",hash:!0,reset:!0,lazy:!0}),$(".nav-tabs").localScroll({duration:750,easing:"easeOutQuint",event:"shown.bs.tab",hash:!0,reset:!0,lazy:!0}),$("body").on("click",".back-to-top",function(a){a.preventDefault(),$(window).scrollTo(0,750,{easing:"easeOutQuint"})})}),window.addEventListener("load",function(){window.cookieconsent.initialise({palette:{popup:{background:"#e4e4e4"},button:{background:"#777777",text:"#ffffff"}},theme:"classic",content:{message:"This site uses data such as your browser cookies and IP address in order to deliver an effective service. You can change your cookie settings at any time but parts of our site will not function correctly without them.",dismiss:"OK",link:"For more information on our use of such information, please see our Privacy Policy.",href:"https://www.exlibrisgroup.com/privacy-policy"}})}),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$el=$("#JobsModule")},render:function(){this.$el.prepend('<div class="alert alert-warning wow fadeIn">There are currently no vacancies available, please check back later</div>')}}).init()}if($("#work-with-us").hasClass("work-with-us")){var b="/php/work-with-us.php",c=$.getJSON(b);c.done(function(b){var c=b.items,d={init:function(){this.cacheDom(),this.checkData(),this.bindEvents()},cacheDom:function(){this.$el=$("#JobsModule")},checkData:function(){0===b.items.length?a():this.render()},bindEvents:function(){this.$el.on("click","a.contentfulJob",this.openModal.bind(this))},render:function(){for(var a=c.length-1;a>=0;a--){var b={};b='<a  href="/work-with-us/job-details/?job='+c[a].fields.slug+'"',b+='class="contentfulJob col-md-4 col-xs-12 same-height-group-2 wow animated fadeIn animated"',b+='data-job="'+[a]+'" data-wow-delay="0.0s" data-target="#modal-'+c[a].fields.slug+'" data-toggle="modal-pjax">',b+='<div class="content job position-centered">',b+='<h2 class="title">'+c[a].fields.title+"</h2>",b+="</div></a>",this.$el.prepend(b)}makeBoxesEqual()},openModal:function(a){var b=$(a.currentTarget).data("job");$(document).on("pjax:end",function(a){if(a.preventDefault(),$("body").hasClass("modal-open")){({init:function(){this.cacheModule(),this.getJobDesc()},cacheModule:function(){this.$el=$("#modal-jobDetails"),this.$title=this.$el.find(".modal-title"),this.$subTitle=this.$el.find(".modal-subTitle"),this.$body=this.$el.find(".modal-body"),this.$closeBtn=this.$el.find(".modal-footer button")},getJobDesc:function(){this.$title.html(c[b].fields.title),this.$subTitle.html(c[b].fields.subTitle),this.$body.html(c[b].fields.body)}}).init()}})}},e={init:function(){this.cacheModule(),this.sortJob()},cacheModule:function(){this.$el=$("#modal-jobDetails"),this.$title=this.$el.find(".modal-title"),this.$subTitle=this.$el.find(".modal-subTitle"),this.$body=this.$el.find(".modal-body")},sortJob:function(){for(var a=window.location.search.substring(5),b=c.length-1;b>=0;b--)c[b].fields.slug===a&&this.render(c[b])},render:function(a){this.$title.html(a.fields.title),this.$body.html(a.fields.body),this.checkSubTitle(a)},checkSubTitle:function(a){return!!a.fields.subTitle&&this.$subTitle.html(a.fields.subTitle)}};$("body").hasClass("work-with-us")?d.init():e.init()}),c.fail(function(){a()})}}(),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$module=$(".searchResults")},render:function(){this.$module.addClass("ajaxError")}}).init()}if($("#jobServiceModule").hasClass("searchResults"))if(window.location.search&&""!==window.location.search.substring(10)){var b=window.location.search.substring(10).toLocaleLowerCase(),c="/php/job-search.php?keywords="+decodeURI(b),d=$.getJSON(c);d.done(function(c){({init:function(){this.cacheModule(),this.checkData()},cacheModule:function(){this.$module=$(".searchResults"),this.$results=this.$module.find(".results"),this.$resultCount=this.$module.find("#resultCount"),this.$jobContainer=this.$results.find("ul")},checkData:function(){""===b||0===c.length?a():(this.calculateResultCount(),this.render())},render:function(){for(var a=c.length-1;a>=0;a--){var b='<li class="entry wow fadeInUp" data-wow-delay="0.'+[a]+'s">';b+='<a href="/jobs/job-details/?jobid='+c[a].id+'">',b+="<h3><strong>"+c[a].jobTitle+"</strong></h3>",b+='<p class="closingDate">Closing date: <span>'+new Date(c[a].closingDate).toLocaleDateString()+"</span></p>",b+='<p class="location">Location: <span>'+c[a].location+"</span></p>",b+='<p class="salary">Location: <span>'+c[a].salary+"</span></p>",b+="</a>",b+="</li>",this.$results.show(),this.$jobContainer.prepend(b)}},calculateResultCount:function(){function a(){return c.length>1?"results":"result"}var d="Found <strong>"+c.length+" </strong>";d+=a()+' for "<strong class="query">',d+=decodeURI(b)+'</strong>"',this.$resultCount.html(d)}}).init()}),d.fail(function(){a()})}else a()}(),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$module=$(".jobs-jobOfTheWeek"),this.$anchor=this.$module.find(".miniFeed"),this.$title=this.$module.find(".jobTitle")},render:function(){this.$module.addClass("error"),this.$title.html("There is currently no job of the week. Please check back soon."),this.$anchor.removeAttr("href")}}).init()}if($("#jobServiceModule").hasClass("jobs-jobOfTheWeek")){var b=$.getJSON("/php/job-of-the-week.php");b.done(function(b){({init:function(){this.cacheModule(),this.checkData()},cacheModule:function(){this.$module=$(".jobs-jobOfTheWeek"),this.$miniFeed=this.$module.find(".miniFeed"),this.$jobInfo=this.$module.find(".jobInfo"),this.$title=this.$module.find(".jobTitle"),this.$summary=this.$module.find(".summary"),this.$img=this.$module.find(".featured-job-img"),this.$jobId=this.$module.find(".id"),this.$company=this.$module.find(".company"),this.$location=this.$module.find(".location"),this.$salary=this.$module.find(".salary"),this.$closingDate=this.$module.find(".closingDate"),this.$sourceLink=this.$module.find(".sourceLink"),this.$contactInfo=this.$module.find(".contactInfo"),this.$reference=this.$module.find(".reference"),this.$anchor=this.$module.find(".miniFeed")},checkData:function(){!b||b.closingDate&&new Date(b.closingDate)<new Date?a():this.render()},render:function(){this.$jobId.append(b.id),this.$title.html(b.jobTitle),this.checkImage(b.imageUrl);var a=b.summary;if(this.$summary.html(a),this.$company.append(b.employer),this.$location.append(b.location),this.$salary.append(b.salary),this.$reference.append(b.reference),b.closingDate){var c=b.closingDate.split("T");this.$closingDate.append(new Date(c[0]).toLocaleDateString("en-GB"))}else this.$closingDate.append("Not stated");this.$sourceLink.append('<a href="'+b.sourceLink+'" target="_blank">'+b.sourceLink+"</a>"),this.furtherinfoCheck(),this.$jobInfo.show(),this.$miniFeed.addClass("visible")},checkImage:function(a){if(""===a||null===a)this.$module.addClass("no-img");else{var b=a.trim();this.$img.attr("src",b)}},furtherinfoCheck:function(){b.contactAddress.length>=1&&this.$contactInfo.append(b.contactAddress+"<br />"),b.contactEmail.length>=1&&this.$contactInfo.append('<a href="mailto:'+b.contactEmail+'">'+b.contactEmail+"<br />"),b.contactPhone.length>=1&&this.$contactInfo.append(b.contactPhone+"<br />")}}).init()}),b.fail(function(){a()})}}(),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$module=$(".jobs-latestNews"),this.$container=this.$module.find("> div"),this.$heading=this.$module.find("h2")},render:function(){this.$module.addClass("error");var a='<div class="wow fadeIn" data-wow-delay="0.1s" data-id="">';a+="<p>There are currently no news articles from Research Fortnight.</p>",a+="</div>",$(a).insertAfter(this.$heading)}}).init()}if($("#jobServiceModule").hasClass("jobs")){var b="/php/job-news.php",c="/php/job-news-article.php?articleId=",d=$.getJSON(b);d.done(function(b){var d={init:function(){this.cacheModule(),this.checkData()},cacheModule:function(){this.$module=$(".jobs-latestNews"),this.$container=this.$module.find("> div"),this.$heading=this.$module.find("div").first()},checkData:function(){if(null===b||0===b.items.length)a();else for(var c=b.items.length-1;c>=0;c--)!0===b.items[c].fields.topStory?this.renderFeatured(b.items[c].fields.articleId):this.renderStory(b.items[c].fields.articleId)},renderFeatured:function(a){$.getJSON(c+a).done(function(a){var b='<div class="newsStory" data-id="'+a[0].id+'">';b+='<a href="/jobs/article/?articleId='+a[0].id+'">',b+='<h2 class="title">'+a[0].headline+"</h2></a>",b+="<p>"+a[0].firstParagraph+"</p></div>",$(b).insertAfter(d.$heading).addClass("wow fadeIn")})},renderStory:function(a){$.getJSON(c+a).done(function(a){var b='<div class="newsStory" data-id="'+a[0].id+'">';b+='<a href="/jobs/article/?articleId='+a[0].id+'"><h2 class="title">'+a[0].headline+"</h2></a>",b+="<p>"+a[0].firstParagraph+"</p></div>",$(b).appendTo(d.$module).addClass("wow fadeIn")})}};d.init()}),d.fail(function(){a()})}}(),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$module=$(".jobs-newsDetails"),this.$headline=this.$module.find("#headline"),this.$byline=this.$module.find("#byline")},render:function(){this.$module.addClass("error"),this.$headline.hide(),this.$byline.html("The free article you are trying to view is no longer available or you have not reached an article page.")}}).init()}if($("#jobServiceModule").hasClass("jobs-newsDetails")){var b=window.location.search,c=findId(b,"articleId"),d="/php/job-news-article.php?articleId="+c,e=$.getJSON(d);e.done(function(b){({init:function(){this.cacheModule(),this.checkResponse()},cacheModule:function(){this.$module=$(".jobs-newsDetails"),this.$details=this.$module.find(".authorDetails"),this.$headline=this.$module.find("#headline"),this.$byline=this.$module.find("#byline"),this.$publication=this.$module.find("#publication"),this.$publicationDate=this.$module.find("#publicationDate"),this.$bodyText=this.$module.find("#bodyText"),this.$ogTitle=$('meta[property="og:title"]'),this.$ogDesc=$('meta[property="og:description"]')},checkResponse:function(){void 0===b||null===b||0===b.length?a():(this.article=b[0],this.render())},render:function(){this.$byline.html("By <strong>"+this.article.byline+"</strong>"),this.$publication.html("Publication: <strong>"+this.article.publication+"</strong>"),this.$publicationDate.html("Publication date: <strong>"+this.article.publicationDate+"</strong>"),this.$headline.html(this.article.headline),this.$bodyText.html(this.article.firstParagraph+"<br /><br />"+this.article.bodyText),this.$details.show(),this.addShare()},addShare:function(){this.$ogTitle.attr("content",this.article.headline),this.$ogDesc.attr("content",this.article.firstParagraph),document.title=this.article.headline;!function(a,b){var c=a.createElement(b);c.src=("https:"==a.location.protocol?"https://":"http://")+"s7.addthis.com/js/300/addthis_widget.js#pubid=ra-575ec12597ac33f0";var d=a.getElementsByTagName(b)[0];d.parentNode.insertBefore(c,d)}(document,"script")}}).init()}),e.fail(function(){a()})}}(),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$module=$("#jobs-featuredJobs"),this.$jobDrop=this.$module.find("#jobDrop"),this.$switcher=this.$module.find(".moreJobsBtn")},render:function(){this.$module.addClass("error");var a={};a+="<tr>",a+='<td class="jobItem-employer">',a+="<span></span>",a+="</td>",a+='<td class="jobItem-title">We are currently experiencing some technical issues. Please check back soon.</td>',a+='<td class="jobItem-location hidden-sm hidden-xs"></td>',a+='<td class="jobItem-salary hidden-sm hidden-xs"></td>',a+='<td class="jobItem-salary hidden-md hidden-sm hidden-xs"></td>',a+="</tr>",this.$jobDrop.prepend(a)}}).init()}if($("#jobServiceModule").hasClass("jobs")){var b="/php/all-jobs.php",c=$.getJSON(b);c.done(function(b){({init:function(){this.cacheModule(),this.checkData(),this.bindEvents()},cacheModule:function(){this.$module=$("#jobs-featuredJobs"),this.$header=this.$module.find(".header"),this.$jobDrop=this.$module.find("#jobDrop"),this.$jobItems=this.$module.find(".jobitem"),this.$switcher=this.$module.find(".moreJobsBtn"),this.$jobCount=this.$module.find(".jobsCount > span")},bindEvents:function(){this.$jobDrop.on("click",".jobItem",this.viewDetails.bind(this)),this.$switcher.on("click",this.toggleAllJobs.bind(this))},checkData:function(){void 0===b||null===b?a():this.render()},render:function(){this.$jobCount.html(b.length),b.sort(function(a,b){return a.id<b.id?1:a.id>b.id?-1:0});for(var a=b.length-1;a>=0;a--){var c=this.validateFeatured(b[a]);c+=this.validateImage(b[a].imageUrl),c+='<td class="jobItem-employer">',c+="<span>"+b[a].employer+" </span></td>",c+='<td class="jobItem-title">'+b[a].jobTitle+"</td>",c+='<td class="jobItem-location hidden-sm hidden-xs">'+b[a].location+"</td>",c+='<td class="jobItem-salary hidden-sm hidden-xs">'+b[a].salary+"</td>",c+=this.validateDate(b[a].closingDate),c+="</tr>",$("#jobDrop").prepend(c),this.$switcher.find("span").text("View all jobs")}},viewDetails:function(a){var b=$(a.target).closest("tr"),c="/jobs/job-details?jobid="+b.data("job");window.open(c,"_self")},toggleAllJobs:function(){this.$jobDrop.toggleClass("showAll "),this.$jobDrop.hasClass("showAll")?(this.$switcher.find("span").text("View just featured jobs"),this.$header.html("All Jobs")):(this.$switcher.find("span").text("View all jobs"),this.$header.html("Featured Jobs"))},validateFeatured:function(a){return!0===a.featured?'<tr class="jobItem featured-item" data-job="'+a.id+'">':'<tr class="jobItem" data-job="'+a.id+'">'},validateImage:function(a){return null===a||""===a?'<td class="jobItem-logo hidden-sm hidden-xs"></td>':'<td class="jobItem-logo hidden-sm hidden-xs"><img class="jobItem-img" src="'+a+'" alt="" /></td>'},validateDate:function(a){var b="Not stated";if(a){var c=a.split("T");b=new Date(c[0]).toLocaleDateString("en-GB")}return'<td class="jobItem-salary hidden-md hidden-sm hidden-xs">'+b+"</td>"}}).init()}),c.fail(function(){a()})}}(),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$module=$(".jobDetails")},render:function(){$(".jobDetails").addClass("error")}}).init()}if($("#jobServiceModule").hasClass("jobs-jobs-details")){var b=window.location.search;if(b&&b.indexOf("jobid=")>-1)var c="/php/job.php?job="+findId(b,"jobid");else a();var d=$.getJSON(c);d.done(function(b){({init:function(){this.cacheModule(),this.checkData()},cacheModule:function(){this.$module=$(".jobDetails"),this.$jobInfo=this.$module.find(".jobInfo"),this.$summary=this.$module.find(".summary"),this.$jobId=this.$module.find(".id"),this.$jobTitle=this.$module.find(".jobTitle"),this.$organisation=this.$module.find(".organisation"),this.$location=this.$module.find(".location"),this.$salary=this.$module.find(".salary"),this.$closingDate=this.$module.find(".closingDate"),this.$furtherInfo=this.$module.find(".furtherInfo"),this.$contactInfo=this.$module.find(".contactInfo"),this.$reference=this.$module.find(".reference"),this.protocols=["http://","https://"]},checkData:function(){null===b||void 0===b?a():this.render()},render:function(){if(this.$jobTitle.html(b.jobTitle),null!==b.summary?this.$summary.html(b.summary):this.$summary.hide(),this.imageCheck(b.imageUrl),this.$jobId.append(b.id),null!==b.employer?this.$organisation.append(b.employer):this.$organisation.hide(),null!==b.location?this.$location.append(b.location):this.$location.hide(),null!==b.salary?this.$salary.append(b.salary):this.$salary.hide(),b.reference?this.$reference.append(b.reference):this.$reference.hide(),null!==b.closingDate){var a=moment(b.closingDate).tz("Europe/London"),c=a.format("DD/MM/YYYY"),d=a.format("HH:mm");this.$closingDate.append(c+" at "+d)}else this.$closingDate.hide();this.$furtherInfo.append(this.validateAnchor(b.sourceLink)),this.furtherInfoCheck(),this.$jobInfo.show()},imageCheck:function(a){if(null===a||""===a)return"";this.$jobInfo.prepend('<img class="img-responsive featured-job-img" src="'+a+'" alt="Featured job logo"/>')},validateAnchor:function(a){return 0===a.search(this.protocols[0])?'<a href="'+a+'" target="_blank">'+a+"</a>":0===a.search(this.protocols[1])?'<a href="'+a+'" target="_blank">'+a+"</a>":'<a href="http://'+a+'" target="_blank">'+a+"</a>"},furtherInfoCheck:function(){b.contactAddress.length>=1&&this.$contactInfo.append(b.contactAddress+"<br />"),b.contactEmail.length>=1&&this.$contactInfo.append('<a href="mailto:'+b.contactEmail+'">'+b.contactEmail+"<br />"),b.contactPhone.length>=1&&this.$contactInfo.append(b.contactPhone+"<br />")}}).init()}),d.fail(function(){a()})}}(),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$module=$("#newsServiceModule")},render:function(){this.$module.addClass("error")}}).init()}if($("#newsServiceModule").hasClass("news-articles")){var b="/php/job-news-article.php?articleId=",c="/php/bitly-news.php",d=$.getJSON(c);d.done(function(c){var d={init:function(){this.cacheModule(),this.checkData()},cacheModule:function(){this.$module=$("#newsServiceModule"),this.$topStory=this.$module.find(".topStory"),this.$newsUrl=this.$module.find(".newsUrl"),this.$topTitle=this.$module.find(".topTitle"),this.$pubDate=this.$module.find(".pubDate"),this.$author=this.$module.find(".author"),this.$summary=this.$module.find(".summary"),this.$otherStories=this.$module.find(".secondaryStories")},checkData:function(){null===c||void 0===c?a():(this.bitlyData=c.data.link_history,this.sortData())},sortData:function(){for(var a=[],b=[],c=0;this.bitlyData.length-1>c;c++)if(this.bitlyData[c].long_url.indexOf("/news/article/?articleId=")>-1)if(this.bitlyData[c].tags.length>0&&this.bitlyData[c].tags.indexOf("top")>-1&&1!==b.length)b.push(this.bitlyData[c].long_url.split("=")[1]);else{if(8===a.length)break;a.push(this.bitlyData[c].long_url.split("=")[1])}var d=b[0];d&&this.sortFeatured(d),this.sortStory(a)},sortFeatured:function(a){if(a){var c=b+a,e=$.getJSON(c);e.done(function(b){var c=b[0];d.$newsUrl.attr({href:"/news/article/?articleId="+a}),d.$topTitle.html(c.headline),d.$author.html("Author: <span>"+c.byline+"</span>"),d.$pubDate.html("Published: <span>"+c.publicationDate+"</span>"),d.$summary.html(c.firstParagraph),d.$topStory.addClass("show")}),e.fail(function(){})}},sortStory:function(a){var c=a.map(Number),e=b+a.toString();$.getJSON(e,function(a){for(var b=0;c.length-1>=b;b++)$.each(a,function(a,e){if(c[b]===e.id){var f='<div class="newsStory wow fadeInUp col-sm-6" data-wow-delay="0.'+e.id+'s">';return f+="<div>",f+="<h2>",f+='<a href="/news/article/?articleId='+e.id+'">'+e.headline+"</a>",f+="</h2>",f+='<p class="author">Author: <span>'+e.byline+"</span></p>",f+='<p class="pubDate">Published: <span>'+e.publicationDate+"</span></p>",f+='<p class="summary">'+e.firstParagraph+"</p>",f+="</div>",f+="</div>",d.$otherStories.append(f),!1}})})}};d.init()}),d.fail(function(){a()})}}(),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$module=$(".news-newsDetails"),this.$headline=this.$module.find("#headline"),this.$byline=this.$module.find("#byline")},render:function(){this.$module.addClass("error"),this.$headline.hide(),this.$byline.html("The free article you are trying to view is no longer available or you have not reached an article page.")}}).init()}if($("#newsServiceModule").hasClass("news-newsDetails")){var b=window.location.search,c=findId(b,"articleId"),d="/php/job-news-article.php?articleId="+c,e=$.getJSON(d);e.done(function(b){({init:function(){this.cacheModule(),this.checkResponse()},cacheModule:function(){this.$module=$(".news-newsDetails"),this.$details=this.$module.find(".authorDetails"),this.$headline=this.$module.find("#headline"),this.$byline=this.$module.find("#byline"),this.$publication=this.$module.find("#publication"),this.$publicationDate=this.$module.find("#publicationDate"),this.$bodyText=this.$module.find("#bodyText"),this.$ogTitle=$('meta[property="og:title"]'),this.$ogDesc=$('meta[property="og:description"]')},checkResponse:function(){void 0===b||null===b||0===b.length?a():(this.article=b[0],this.render())},render:function(){this.$byline.html("By <strong>"+this.article.byline+"</strong>"),this.$publication.html("Publication: <strong>"+this.article.publication+"</strong>"),this.$publicationDate.html("Publication date: <strong>"+this.article.publicationDate+"</strong>"),this.$headline.html(this.article.headline),this.$bodyText.html(this.article.firstParagraph+"<br /><br />"+this.article.bodyText),this.$details.show(),this.addShare()},addShare:function(){this.$ogTitle.attr("content",this.article.headline),this.$ogDesc.attr("content",this.article.firstParagraph),document.title=this.article.headline,function(a,b){var c=a.createElement(b);c.src=("https:"==a.location.protocol?"https://":"http://")+"s7.addthis.com/js/300/addthis_widget.js#pubid=ra-575ec12597ac33f0";var d=a.getElementsByTagName(b)[0];d.parentNode.insertBefore(c,d)}(document,"script")}}).init()}),e.fail(function(){a()})}}(),function(){"use strict";function a(){({init:function(){this.cacheModule(),this.render()},cacheModule:function(){this.$module=$(".news-editors"),this.$container=this.$module.find(".editor-container")},render:function(){this.$module.addClass("error")}}).init()}if($("#newsServiceModule").hasClass("news-editors")){var b="/php/editorial-staff.php",c=$.getJSON(b);c.done(function(b){({init:function(){this.cacheModule(),this.checkData()},cacheModule:function(){this.$module=$(".news-editors"),this.$container=this.$module.find(".editor-container")},checkData:function(){null===b||void 0===b?a():this.render()},render:function(){for(var a=0;b.items.length-1>=a;a++){var c='<div class="authorProfile col-sm-6">';c+="<div>",c+='<h2 class="name">'+b.items[a].fields.name+"</h2>",c+='<div class="position">'+b.items[a].fields.occupationTitle+"</div>",c+='<p class="bio">'+b.items[a].fields.biography+"</p>",c+='<span class="tel contactInfo">'+b.items[a].fields.tel+"</span>",c+='<a href="mailto:'+b.items[a].fields.email+'" class="email contactInfo">'+b.items[a].fields.email+"</a>",c+='<span class="location contactInfo">'+b.items[a].fields.location+"</span>",c+="<div>",c+="<div>",this.$container.append(c)}}}).init()}),c.fail(function(){a()})}}();