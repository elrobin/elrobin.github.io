(function(win,doc){if(win.$wt){console.log("WTINFO:Duplicate 'load.js' found into your page!");return;}win.isIE=(function(){var myNav=navigator.userAgent.toLowerCase();return(myNav.indexOf('msie')!==-1)? parseInt(myNav.split('msie')[1]):false;})();win.$wt=function(selector){return document.querySelectorAll(selector)};$wt.extend=function(obj){for(var i in obj){this[i]=obj[i];}};$wt.extend({root:"https://europa.eu/webtools",isMobile:('ontouchstart' in window),inProgress:false,components:{},css:{},alias:{"twitter":"smk","chart":"charts","share":"sbkm","maps":"map","piwik":"analytics","alert":"announcement"},force:function(params){return(params.render || ["laco","cck","globan","announcement"].indexOf(params.service)!==-1)||(params.service==="sbkm" && params.selection);},mergeParams:function(defaultJSON,customJSON){(function r(a,b){for(var k in b){if(b.hasOwnProperty(k)){if(!a[k] && a[k] !=='' && a[k] !==0){a[k]=undefined;}if(typeof b[k]==="function" || typeof b[k]==="string" || typeof b[k]==="number" || typeof b[k]==="boolean" || b[k]===null ||(typeof b[k]==="object" &&(typeof a[k]==="string" || typeof a[k]==="number" || typeof a[k]==="boolean"))){a[k]=b[k];}else if(typeof b[k]==="object"){if(!a[k]){if(b[k].length !==undefined){a[k]=[];}else{a[k]={};}}r(a[k],b[k]);}}}}(defaultJSON,customJSON));return defaultJSON;},compliant:function(params,alias){function from(node,path,value){if(typeof path==="string"){return from(node,path.split("."),value);}var name=path[0];var next=path[1];var size=path.length;if(value !==null && value !==undefined){if(node[name]){if(!node[name][next]){if(size===1){node[name]=value;return;}if(typeof node[name] !=="object"){node[name]={};}node[name][next]={};}if(typeof value !=="object" || node[name] !==value){from(node[name],path.slice(1),value);}if(JSON.stringify(node[name][next])===JSON.stringify({})){delete node[name][next];if(JSON.stringify(node[name])===JSON.stringify({})){delete node[name];}}}else{node[name]={};from(node,path,value);}}else if(size===1){if(node[name]){return node[name];}}else if(size===0){return node;}else if(node[name]){return from(node[name],path.slice(1));}return "UNKNOW";}var toChange=(function(c){for(var x in alias){var value=from(params,x);if(value !=="UNKNOW"){c[alias[x]]=value;}}return c;})({});for(var x in toChange){from(params,x,toChange[x]);}return params;},next:function(elm){try{var ready=(elm.snippet || elm).params.events.onready;(window[ready] || ready)(elm);}catch(e){}$wt.inProgress=false;$wt.collect();},regenerate:function(){[].forEach.call(doc.querySelectorAll("script[type='application/json']"),function(elm){if(elm.reset){elm.reset();}});$wt.components=[];$wt.collect();},collect:function(){if(isIE && isIE < 9){return;}var utility=[],render=[],service=[];[].forEach.call(doc.querySelectorAll("script[type='application/json']"),function(uec){if(!uec.isProcess && !uec.getAttribute("data-process")){if(!uec.params){try{uec.params=JSON.parse(uec.innerHTML);}catch(e){uec.isProcess=true;console.log("WTINFO:JSON is not correctly formatted:",uec);return;}if(!uec.params.service && !uec.params.utility){return;}$wt.uniqueID(uec);uec.params.render=$wt.force(uec.params);}if(!uec.container){var t=document.getElementById(uec.params.renderTo || false);if(t){uec.container=t;delete uec.params.renderTo;uec.container.innerHTML='';uec.container.className="wtWidgets wtWaiting";}else{uec.container=document.createElement("div");uec.container.className="wtWidgets wtWaiting";$wt.before(uec.container,uec);}}if(uec.params.service==="search"){uec.container.style.height="52px";}}if(!uec.isProcess && !uec.getAttribute("data-run")){if(uec.params && uec.params.utility){utility.push(uec);}else if(uec.params && uec.params.render){render.push(uec);}else if($wt.visible(uec.container)){service.push(uec);}}});var dom=utility[0] || render[0] || service[0];if(dom){$wt.process(dom);}},process:function(elm,params){if(!elm || $wt.inProgress){return;}elm.setAttribute("data-process",true);params=elm.params || params ||{};var self=this;var comp=params.service || params.utility || false;comp=$wt.alias[comp] || comp;if(!comp){console.log("WTINFO:Unknow component:",params);return;}$wt.inProgress=true;if(!elm.container){elm.container=document.createElement("div");$wt.before(elm.container,elm);}elm.reset=function(){if(elm.container && elm.params && !elm.params.utility){var API=$wt[elm.params.service];if(API && API.onRemove){[].forEach.call(API.onRemove(),function(e){$wt.remove(e);});}elm.remove();elm.isProcess=false;elm.removeAttribute("data-run");elm.removeAttribute("data-process");}};elm.remove=function(){$wt.remove(elm.container);elm.container=false;};elm.regenerate=function(){elm.reset();$wt.process(elm,params);};if(elm.container){elm.container.params=params;elm.container.className=comp + " wt wt-" + comp + " " +(params["class"] || "");}elm.container.snippet=elm;if(!params.utility && !self.css["__" + comp]){var GETCSS=$wt.root + "/webtools." + comp + ".css";var extra=[];(Object.keys(self.css).length===0)? extra.push("utilities=true"):"";((params.version)? extra.push("version=" + params.version):"");if(extra.length){GETCSS +="?" + extra.join("&");}self.css["__" + comp]=true;$wt.include(GETCSS);}var runMe=function(){if($wt[comp] && $wt[comp].run && !elm.getAttribute("data-run")){elm.setAttribute("data-run",true);$wt[comp].run(elm.container,params);return true;}return false;};if(runMe()){return;}var GETJS=$wt.root + "/webtools." + comp + ".js";if(params.version){GETJS +="?version=" + params.version;}$wt.include(GETJS,function(msg){if(msg==="error"){console.log("WTERROR:'" + comp + "' doesn't exist!");$wt.process.start=false;$wt.remove(elm.container);$wt.remove(elm);self.next();}else if($wt[comp] && $wt[comp].run){runMe();}},"js");},render:function(elm,params){var createSnippet=function(json){var s=document.createElement("script");s.type="application/json";s.params=json;s.innerHTML=JSON.stringify(json);return s;};var container=false;if($wt.components[elm]){container=$wt.components[elm];}else if(typeof elm==="string"){container=document.querySelectorAll("#" + elm + ",." + elm);container=container[0] || false;}else if(typeof elm==="object"){container=elm;}if(!container){console.log("WTINFO:Your container doesn't exist.");return;}var uec=$wt.mergeParams((container.params ||{}),(params ||{}));uec.render=true;if(!container.container){var S=createSnippet(uec);container.innerHTML="";container.appendChild(S);$wt.uniqueID(S);}else if(container.container && params){container.reset();container.params=uec;container.innerHTML=JSON.stringify(uec);container.isProcess=false;$wt.uniqueID(container);}else if(container.isProcess && !params){container.container.innerHTML="";$wt[container.params.service].run(container);}$wt.collect();}});$wt.extend({_queue:$wt.next});})(window,document);
$wt.extend({id:function(){return Math.random().toString(36).substr(2,16);},uniqueID:function(E){if(E.params){$wt.components[(E.params.name ||((E.params.service || E.params.utility)+ "_" + $wt.id()))]=E;}},getUrlParams:function(s){var p={};(s || window.location.search).replace(/[?&]+([^=&]+)=([^&]*)/gi,function(str,key,value){value=decodeURIComponent(value);if(key.indexOf("[")!==-1){var k=key.replace("[]","");if(!p[k]){p[k]=[];}p[k].push(value);}else{p[key]=value;}});return p;},ext:function(s){s=((s || "").toLowerCase()).split("#")[0].split("?")[0];return((/[.]/.exec(s))?(/[^.]+$/.exec(s)):undefined)+ "";},arrayToUrl:function(a){var n="";for(var key in a){n +="&" + key + "=" + a[key];}return n;},absolute:function(s,o){var a=document.createElement('a');a.href=s;return(o)? a:a.href;},template:function(t,e){return t.replace(/{([\w_\-]+)}/g,function(k,n){return e[n] || "";});},alphaOrder:function(dataSrc,options){if(!Array.isArray(dataSrc)){console.log("WTERROR:alphaOrder need a real ARRAY in first argument!");return;}var orderConf={"default":"aAªáÁàÀăĂâÂåÅǻǺäÄǟǞãÃǡǠąĄāĀæÆǽǼǣǢbBḃḂcCćĆĉĈčČċĊçÇ℅dDďĎḋḊđĐðÐeEéÉèÈĕĔêÊěĚëËęĘēĒėĖəƏfFḟḞƒﬁﬂgGğĞĝĜǧǦġĠģĢǥǤhHĥĤȟȞħĦiIíÍìÌĭĬîÎïÏĩĨİįĮīĪıĳĲjJĵĴkKǩǨķĶĸlLĺĹľĽļĻłŁŀĿmMṁṀnⁿNńŃňŇñÑņŅŋŊŉ№oOºóÓòÒŏŎôÔöÖőŐõÕǫǪǭǬōŌøØǿǾœŒpPṗṖqQrRŕŔřŘŗŖɼsSśŚŝŜšŠṡṠşŞșȘſẛßtTťŤṫṪţŢțȚŧŦ™uUúÚùÙŭŬûÛůŮüÜűŰũŨųŲūŪvVwWẃẂẁẀŵŴẅẄxXyYýÝỳỲŷŶÿŸzZźŹžŽżŻʒƷǯǮ","greek":"αΑἀἈἄἌἂἊἆἎἁἉἅἍἃἋἇἏάΆὰᾺᾶάΆᾳᾼᾀᾈᾄᾌᾂᾊᾆᾎᾁᾉᾅᾍᾃᾋᾇᾏᾴᾲᾷᾰᾸᾱᾹβϐΒγΓδΔεΕἐἘἔἜἒἚἑἙἕἝἓἛέΈὲῈέΈϝϜϛϚζΖηΗἠἨἤἬἢἪἡἩἥἭἣἫἧἯήΉὴῊῆἦἮήΉῃῌᾐᾘᾔᾜᾒᾚᾖᾞᾑᾙᾕᾝᾓᾛᾗᾟῄῂῇθϑΘιιΙἰἸἴἼἲἺἶἾἱἹἵἽἳἻἷἿίΊὶῚῖίΊῐῘϊΪΐῒῗΐῑῙκϰΚϗλΛμµΜνΝξΞοΟὀὈὄὌὂὊὁὉὅὍὃὋόΌὸῸόΌπϖΠϟϞρϱΡῤῥῬσςΣτΤυΥὐὔὒὖὑὙὕὝὓὛὗὟύΎὺῪῦύΎῠῨϋΫΰῢῧΰῡῩφϕΦχΧψΨωΩΩὠὨὤὬὢὪὦὮὡὩὥὭὣὫὧὯώΏὼῺῶώΏῳῼᾠᾨᾤᾬᾢᾪᾦᾮᾡᾩᾥᾭᾣᾫᾧᾯῴῲῷϡϠ","cyrillic":"аАӑӐӓӒәӘӛӚӕӔбБвВгГґҐғҒҕҔдДђЂѓЃҙҘеЕѐЀёЁӗӖєЄжЖӂӁӝӜҗҖзЗӟӞѕЅӡӠиИѝЍӣӢӥӤіІїЇйЙјЈкКқҚӄӃҡҠҟҞҝҜлЛљЉмМнНңҢӈӇҥҤњЊоОӧӦөӨӫӪпПҧҦрРсСҫҪтТҭҬћЋќЌуУӯӮўЎӱӰӳӲүҮұҰфФхХҳҲһҺцЦҵҴчЧӵӴҷҶӌӋҹҸҽҼҿҾџЏшШщЩъЪыЫӹӸьЬэЭюЮяЯҩҨӀ"},options=options ||{lang:document.lang || "default"},langGroup={"el":"greek","bg":"cyrillic","uk":"cyrillic","mk":"cyrillic","sr":"cyrillic"},orderLang={"default":["default","greek","cyrillic"],"greek":["greek","default","cyrillic"],"cyrillic":["cyrillic","default","greek"]};dataSrc.sort();var lang=langGroup[options.lang] || "default";var p=orderLang[lang];var o='';var word='';var order=[];var tmp=[];var index='';for(var val in p){o=orderConf[p[val]].split("");for(var k in o){for(var kk in dataSrc){word=dataSrc[kk];if(word.charCodeAt(0)===o[k].charCodeAt(0)){order.push(dataSrc[kk]);tmp.push(dataSrc[kk]);}}}for(var k in tmp){index=dataSrc.indexOf(tmp[k]);dataSrc.splice(index,1);}tmp=[];}return order.concat(dataSrc);},parse:{csv:function(data,callback){var parseCsv=function(data){if(data.split('.').pop()==="csv"){console.log('WTERROR:please call $wt.parse.csv with a callback or give directly the data to the method.');return false;}var lineDelimiter=/\r\n|\n/;var itemDelimiter=/\,|\;/;var tab=(data.split(lineDelimiter)).slice(0,-1);var values=[];for(var i=0;i < tab.length;i++){var subtab=tab[i].split(itemDelimiter);values.push(subtab);}return values;};if(typeof callback==="function"){callback(parseCsv(data));}else{return parseCsv(data);}}}});
$wt.extend({visible:function(e){if(!e){return false;}var c=e.getBoundingClientRect();return(c.top >=-200 && c.top <=(window.innerHeight || document.documentElement.clientHeight)+ 200);},lang:function(lang){if(document.lang){return document.lang;}lang=lang || "en";var html=document.querySelector("html");var meta=document.querySelectorAll("meta[http-equiv='Content-Language']");var url=(window.location + "").replace(/(.*)(_|-|::|=|\/)([a-zA-Z]{2})(\.|&|#|$|\?|\/)(.*)/ig,"$3");if(html && html.lang){lang=(html.lang).split("_")[0].split("-")[0];}else if(meta[0]){lang=meta[0].content;}else if(url.length===2){lang=url.toLowerCase();}document.lang=lang;return lang;},insertBefore:function(from,to){from.insertBefore(to,from.firstChild);},before:function(n,t){(t.parentNode)? t.parentNode.insertBefore(n,t):"";},after:function(n,t){var p=t.parentNode;(p.lastchild===t)? p.appendChild(n):p.insertBefore(n,t.nextSibling);},remove:function(e){(e && e.parentNode)? e.parentNode.removeChild(e):"";}});
$wt.extend({domqueue:$wt.domqueue || [],domchange:function(fnc){var queue=function(){var runner=$wt.domqueue[0];if(runner){runner();$wt.domqueue.shift();}};var run=function(){$wt.domqueue.push(fnc);queue();};var MutationObserver=window.MutationObserver || window.WebKitMutationObserver;if(MutationObserver){var register=new MutationObserver(run);register.observe(document.body,{childList:true,subtree:true});}else if(window.addEventListener){document.addEventListener('DOMNodeInserted',run,false);document.addEventListener('DOMNodeRemoved',run,false);}},ready:function(f){/^(in|com)/.test(document.readyState)? f():setTimeout($wt.ready,0,f);},on:function(o,e,f){(e==="load" && document.readyState==="complete")? f():(o.addEventListener)? o.addEventListener(e,f,false):"";},trigger:function(dom,name,args){var e,v=document.createEvent;if(v){e=document.createEvent("HTMLEvents");e.initEvent(name,true,true);}else{e=document.createEventObject();e.eventType=name;}e.eventName=name;e.parameters=args || false;if(v){dom.dispatchEvent(e);}else{dom.fireEvent("on" + e.eventType,e);}}});$wt.extend({addEvent:$wt.on});
$wt.extend({dictionary:[],label:function(set,label,lang,placeholder,range){var dico=$wt.dictionary[set];var translate=false;lang=lang || document.lang;placeholder=placeholder || [];range=range || 0;if(dico){var lng=dico[lang];if(lng){var strg=lng[label];if(strg){translate=(typeof strg==="string")? strg:strg[range];if(typeof strg==="object"){return strg;}else if(translate==="string"){translate=translate.replace(/{(\d+)}/g,function(match,key){return(typeof placeholder[key - 1] !=="undefined")? placeholder[key - 1]:"";});}}}if(translate==="" || !translate){if(dico["en"]){if(dico["en"][label]){translate=dico["en"][label];}}}}return translate || "UNKNOWN LABEL";},addTranslation:function(json){var dico=$wt.dictionary;for(var i in json){if(typeof dico[i] !=="object"){dico[i]={};}dico[i]=$wt.mergeParams(dico[i],json[i]);}$wt.dictionary=dico;},loadTranslations:function(translations,callback){if(typeof callback !=='function'){console.log("WTERROR:callback parameter is mandatory");return;}if(typeof translations==="object"){$wt.addTranslation(translations);callback(true);}else if(typeof translations==="string"){if(!$wt.isLoad[translations]){$wt.isLoad[translations]=translations;$wt.getFile({url:translations,type:'json',success:function(json){try{var labels=(typeof json==="string")? JSON.parse(json):json;$wt.addTranslation(labels);}catch(e){console.log("WTERROR:Couldn't load custom dictionary'",translations,"'");var error=true;}callback(!error);},error:function(e){console.log("WTERROR:Couldn't load custom dictionary'",translations,"'");callback(false);}});}else{callback(true);}}else{callback(true);}}});$wt.extend({mergeTranslation:$wt.addTranslation});
$wt.extend({isLoad:[],include:function(srcFile,callback,ext,forceReload){var tag,target,isLoad=($wt.isLoad[srcFile])? true:false,doc=document;if(isLoad===false || forceReload){ext=(ext)? ext:$wt.ext(srcFile);if(ext==="css"){tag=document.createElement("link");tag.setAttribute("type","text/css");tag.setAttribute("rel","stylesheet");tag.setAttribute("media","all");target=document.getElementsByTagName("head")[0];}else{tag=document.createElement("script");tag.setAttribute("type","text/javascript");target=document.getElementsByTagName("body")[0];}if(typeof callback==="function"){if(isIE){tag.onreadystatechange=function(){if(this.readyState==="loaded" || this.readyState==="complete"){callback(tag);$wt.isLoad[srcFile]=tag;}};}else{tag.onload=function(){callback(tag);$wt.isLoad[srcFile]=tag;}}tag.onerror=function(){callback("error");$wt.isLoad[srcFile]=tag;};}tag.setAttribute((ext==="css")? "href":"src",srcFile);target.appendChild(tag);}else if(typeof callback==="function"){callback();}return tag;},load:function(files,callback){var toLoad=(typeof files==="string")? [files]:files;$wt.include(toLoad[0],function(){toLoad.shift();if(toLoad.length===0){if(typeof callback==="function"){callback();}return;}$wt.load(toLoad,callback);},$wt.ext(toLoad[0]));},jsonp:function(url,callback){if(!$wt.json_retval){$wt.json_retval=[];}var extra_url=($wt.urlParams && $wt.urlParams["wtenv"])? "&wtenv=" + $wt.urlParams["wtenv"]:"";extra_url +=($wt.urlParams && $wt.urlParams["wtdebug"])? "&wtdebug=" + $wt.urlParams["wtdebug"]:"";url=$wt.absolute(url);if(url.indexOf("?")!==-1){url=encodeURIComponent(url);}var kemopi=(url.indexOf("countries.php")!==-1);$wt.jsonpCounter=$wt.jsonpCounter || 68448510;var id=(kemopi)?($wt.jsonpCounter++):Math.random();var u=($wt.root + "/jsonp.php?url=" + url)+ "&wtid=" + id;var s=document.createElement("script");if(kemopi){u +="&kemopi=enabled";}s.setAttribute("type","text/javascript");s.setAttribute("src",u + extra_url);function success(json){if(json.wtstatus.success===0){callback(json,json.wtstatus.status);return;}callback(json);}if(isIE){s.onreadystatechange=function(){var j=this.readyState;if(j==="loaded" || j==="complete"){success($wt.json_retval[id]);}};}else{s.onload=function(){success($wt.json_retval[id]);};}s.onerror=function(){callback({},"error");};h=document.getElementsByTagName("body")[0];h.appendChild(s);return s;},jsonstat:function(params){var opt=$wt.mergeParams({from:false,ready:false,to:false,categories:false,sheets:false,series:false},params);var from=opt.from;var to=opt.to;var fnc=opt.ready;var cat=opt.categories;var series=opt.series;var sheets=opt.sheets;if(!from){console.log("WTERROR:jsonstat - 'from' parameter is missing.");return;}else if(typeof fnc !=="function"){console.log("WTERROR:jsonstat - 'ready' parameter is missing.");return;}var sanitizeLabels=function(jsonstat){try{jsonstat.dimension.geo.category.label["DE"]=jsonstat.dimension.geo.category.label["DE"].replace(/Germany +\(until.+/gi,"Germany").replace(/Allemagne +\(jusqu.+/gi,"Allemagne").replace(/Deutschland +\(bis.+/gi,"Deutschland");}catch(err){}return jsonstat;};var convert=function(json){json=sanitizeLabels(json);var jsonStat=JSONstat(json);if(to==="html"){jsonStat=JSONstatUtils.datalist(jsonStat);}else if(to==="csv"){jsonStat=JSONstatUtils.toCSV(jsonStat);}else if(to==="lasko"){jsonStat=$wt.toLasko(jsonStat,cat,series,sheets);}fnc(jsonStat,opt);};var process=function(){if(!window.JSONstat){console.log("WTERROR:jsonstat - 'libs' was not loaded correctly.");return}(typeof from==="object")? convert(from):$wt.jsonp(from,function(json,error){(!error)? convert(json):console.log("WTERROR:jsonstat - request failed on url:\n",from);});};$wt.include($wt.root + "/libs/json-stat/jsonstat.php",process,"js");},ajax:function(config){var url=config["url"];var error=config["error"];var success=config["success"];var data=config["data"];var dataType=config["dataType"];var credential=config["withCredentials"] || false;var method=(data)? 'POST':'GET';if(url !=="" && url !==undefined && url !==null){if(!dataType){dataType="application/x-www-form-urlencoded";}var request=(function(){if(window.XMLHttpRequest){return new XMLHttpRequest();}else if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP");}return false;})();if(!request){return;}url=url.replace(/&amp;/ig,"&");request.onreadystatechange=function(){if(request.readyState===4){if(request.status !==200 && request.status !==304){if(typeof error==="function"){error(config);}}else{if(typeof success==="function"){success(request.responseText,request.responseXML,config);}else{return{txt:request.responseText,xml:request.responseXML};}}}};request.open(method,url,true);if(credential){request.withCredentials=true;}if(method==='POST'){request.setRequestHeader("Content-Type",dataType);url='';for(var prop in data){url +=encodeURIComponent(prop)+ '=' +encodeURIComponent(data[prop])+ '&';}data=url.substring(0,url.length - 1);request.send(data);}else{request.send(null);}}},post:function(url,params){if(!params.target || params.target==="iframe"){var ifrm=document.createElement("iframe");ifrm.name="phiflochri";ifrm.style.display="none";$wt.after(ifrm,document.body);}var form=document.createElement("form");form.method="post";form.style.display="none";form.action=url;form.target=params.target || "phiflochri";function populateInput(n,v){if(Array===v.constructor){for(var i=0,l=v.length;i < l;i++){populateInput(n + "[" + i + "]",v[i]);}}else if(v){var inp=document.createElement("INPUT");inp.type="hidden";inp.name=n;inp.value=decodeURIComponent(v);form.appendChild(inp);}}for(var name in params){populateInput(name,params[name]);}$wt.after(form,document.body);form.submit();},getFile:function(params){params=$wt.mergeParams({url:false,type:false,options:{to:"jsonstat",categories:false,series:false,sheets:false},success:function(){},error:function(){}},params);if(!params.url){params.error("No url provided for getFile.");return;}var url=$wt.absolute(params.url,true);params.url=url.href;if(url.hostname===window.location.hostname){$wt.ajax({url:params.url,success:params.success,error:function(){params.error("Ajax request failed on url:\n" + params.url);}});}else if(params.type==="csv"){$wt.ajax({url:$wt.root + "/rest/requests/requestFiles.php?type=csv&url=" + encodeURIComponent(params.url),success:function(json){try{json=JSON.parse(json);if(!json.wtstatus.success){params.error("Ajax request failed on url:\n" + params.url);return;}params.success(json.data);}catch(e){params.error("The service seems down.")}},error:function(){params.error("Ajax request failed on url:\n" + params.url);}});}else if(params.type==="json"){$wt.jsonp(params.url,function(json,error){if(error){params.error("JSONP request failed on url:\n" + params.url);return;}delete json.wtstatus;params.success(json);});}else if(params.type==="jsonstat"){$wt.jsonstat($wt.mergeParams($wt.mergeParams(params,params.options),{from:params.url,ready:function(result){params.success(result);},}))}else{params.error("Unknown type for getting the file:\n" + params.url);}}});
$wt.extend({isDNTOn:function(){var doNotTrackOption=(window.doNotTrack ||window.navigator.doNotTrack ||window.navigator.msDoNotTrack || '');return(doNotTrackOption.charAt(0)==='1' || doNotTrackOption==='yes');},cookie:{set:function(params){params=$wt.mergeParams({name:"",value:false,days:false,path:"/",domain:location.host,date:new Date(),expires:""},params);if(params.days){params.date.setTime(params.date.getTime()+(params.days * 24 * 60 * 60 * 1000));params.expires=";expires=" + params.date.toGMTString();}var domain=params.domain.split('.');if(domain.length > 2){params.domain='.' + domain.slice(-3).join('.');}document.cookie=params.name + "=" + params.value + params.expires + ";path=" + params.path + ";domain=" + params.domain;},get:function(name){var nameEQ=name + "=",ca=document.cookie.split(';');for(var i=0;i < ca.length;i++){var cook=ca[i];while(cook.charAt(0)===' '){cook=cook.substring(1,cook.length);}if(cook.indexOf(nameEQ)===0){return cook.substring(nameEQ.length,cook.length);}}return false;},remove:function(name){this.set({name:name,days:-1});},consent:{get:function(){var cck=unescape($wt.cookie.get("eu_cookie_consent"));return(cck !=="false")? JSON.parse(cck):{a:{},r:{}};},status:function(){var cck=this.get();var get=function(a){for(var x in a){if(a[x].indexOf("europa-analytics")>=0){return true;}}return false;};if(get(cck["a"])){return "accepted";}if(get(cck["r"])){return "refused";}return false;},set:function(v){var host=(window.location.host.indexOf("europa.eu")>=0)? ".europa.eu":false;document.cookie="eu_cookie_consent=" + escape(v)+ ";path=/" +((!host)? "":";domain=" + host);},update:function(stat){var cck=this.get();for(var x in cck){for(var y in cck[x]){if(Array.isArray(cck[x][y])){var tmp=cck[x][y].filter(function(elm){return elm !=="europa-analytics";});cck[x][y]=tmp;}}}stat=(stat)? "a":"r";cck[stat]["europa"]=cck[stat]["europa"] || [];cck[stat]["europa"].push("europa-analytics");this.set(JSON.stringify(cck));}}}});
$wt.frame={init:function(){if(top.window !==window){if(window.name.indexOf("WT_FRAME_")!==-1){var styling={position:"absolute",left:0,right:0,display:"inline-block",margin:0,overflow:"hidden"};for(var x in styling){if(document.body){document.body.style[x]=styling[x];}}$wt.on(window,"load",function(){$wt.frame.resize();$wt.on(window,"resize",$wt.frame.resize);$wt.on(window,"orientationchange",$wt.frame.resize);if("MutationObserver" in window){var obsrv=new MutationObserver($wt.frame.resize);obsrv.observe(document.body,{childList:true,subtree:true});}});$wt.on(document.getElementById('nexteuropasearch__search-results')|| window,'click',function(evt){var evt=evt || window.event;var targ=evt.target || evt.srcElement;while(targ && !targ.href){targ=targ.parentNode;}if(targ && targ.href&& !targ.getAttribute("aria-controls")&& !targ.isTracked&& !targ.href.match(/^(javascript|mailto|#|sms)/i)||($wt.urlParams['render']==="iframe" && targ.href.indexOf('europa.eu/search')< 0)){evt.preventDefault();evt.stopPropagation();window.parent.postMessage({service:'frame-analytics',link:targ.href},'*');setTimeout(function(){targ.isTracked=true;targ.click();},350);}});var isSearchPage=document.getElementById('internal-search');if(isSearchPage){var countElement=document.querySelector("meta[property='nexteuropasearch:count']");var count=countElement && +countElement.getAttribute("content")|| 0;parent.postMessage({service:"frame-search-track",keyword:isSearchPage.value,count:count,location:location.href},"*");}}}else{$wt.on(window,"message",$wt.frame.parent);}},resize:function(){if(top.window===window && !parent.postMessage){return;}parent.postMessage({service:"frame",name:window.name,height:document.body.offsetHeight},"*");},parent:function(e){var data=e.data ||{};if(data.service==='frame-search-track'){if($wt.analytics.parameters){$wt.analytics.parameters.search={keyword:data.keyword,category:"Europa Search",count:data.count};$wt.trackPageView($wt.analytics.parameters);window.name=data.location;}}else if(data.service==='frame-analytics'){$wt.trackLinks(data.link);}else if(data.service==="frame"){var frame=document.querySelectorAll("iframe[name='" + data.name + "']");if(!frame || !frame.length){return;}var height=data.height;var frm=frame[0];var width=frm.offsetWidth;var prev=frm.previousWidth;if(width===prev && frm.offsetHeight===height){frm.previousHeight=height;frm.previousWidth=width;}else{if(width > prev && frm.previousHeight){height=(frm.previousHeight)- Math.round((width - prev)*(height / width));}frm.previousHeight=height;frm.previousWidth=frm.offsetWidth;frm.height=height;frm.setAttribute("style",(frm.getAttribute("style")|| "").split(";height:")[0] + ";height:" + height + "px !important");}}}};$wt.on(window,"wtReady",$wt.frame.init);
$wt.extend({pop:function(c){var doc=document;c=c ||{};var currentFocusableElement=document.activeElement || false;document.body.setAttribute("aria-hidden",true);$wt.pop.close=function(){$wt.pop.wtOverlayer.style.display="none";$wt.remove($wt.pop.wtPopup);document.body.removeAttribute("aria-hidden");if(currentFocusableElement){currentFocusableElement.focus();}if(typeof $wt.pop.wtPopup.onClose==="function"){$wt.pop.wtPopup.onClose();}};if(!$wt.pop.wtOverlayer){$wt.pop.wtOverlayer=document.createElement("div");$wt.pop.wtOverlayer.className="wtOverlayer";$wt.after($wt.pop.wtOverlayer,document.body);$wt.on(document,"keydown",function(evt){evt=evt || window.event;if(evt.keyCode===27){$wt.pop.close();}});$wt.on($wt.pop.wtOverlayer,"click",$wt.pop.close);}$wt.pop.wtOverlayer.style.display="block";$wt.pop.wtPopup=document.createElement("div");$wt.pop.wtPopup.className="wtPopup " +((c["fullscreen"])? "wtPopupFullscreen ":"")+ c["class"];$wt.after($wt.pop.wtPopup,$wt.pop.wtOverlayer);$wt.pop.wtPopup.setAttribute("tabindex","0");$wt.pop.wtPopup.setAttribute("role","dialog");$wt.pop.wtPopup.setAttribute("aria-describedby","modalDescription");$wt.pop.wtPopup.dialogDesc=document.createElement("div");$wt.pop.wtPopup.dialogDesc.id="modalDescription";$wt.pop.wtPopup.dialogDesc.className="offscreen";$wt.pop.wtPopup.appendChild($wt.pop.wtPopup.dialogDesc);$wt.pop.wtPopup.dialogDesc.innerHTML="Escape will cancel and close the window";var hh=c["head"] || c["title"];var hh=(hh)? "<h1><span>" + hh + "</span></h1>":"<h1 aria-hidden='true'>&nbsp;</h1>";$wt.pop.wtPopup.head=document.createElement("div");$wt.pop.wtPopup.head.className="wtPopupHead";$wt.pop.wtPopup.head.innerHTML=hh;$wt.pop.wtPopup.appendChild($wt.pop.wtPopup.head);$wt.pop.wtPopup.content=document.createElement("div");$wt.pop.wtPopup.content.className="wtPopupContent";$wt.pop.wtPopup.content.innerHTML=(c["content"])? c["content"]:"";$wt.pop.wtPopup.appendChild($wt.pop.wtPopup.content);$wt.pop.wtPopup.footer=document.createElement("div");$wt.pop.wtPopup.footer.className="wtPopupFooter";$wt.pop.wtPopup.footer.innerHTML=(c["footer"])? c["footer"]:"";$wt.pop.wtPopup.appendChild($wt.pop.wtPopup.footer);var x="Close";var k=document.createElement("a");k.className="wtPopupCloseBtn";k.title=x;k.href="javascript:$wt.pop.close()";k.innerHTML=x + '<b><span>&times;</span></b>';$wt.pop.wtPopup.appendChild(k);$wt.pop.focusableElements=$wt.pop.wtPopup.querySelectorAll("a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,*[tabindex],*[contenteditable]");$wt.pop.wtPopup.focus();function trapTabKey(obj,evt){if(evt.which===9){$wt.pop.focusableElements=$wt.pop.wtPopup.querySelectorAll("a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,*[tabindex],*[contenteditable]");var focusedItem=document.activeElement;var numberOfFocusableItems=$wt.pop.focusableElements.length;var focusedItemIndex=0;for(var i=0,l=numberOfFocusableItems;i < l;i++){if($wt.pop.focusableElements[i]===focusedItem){focusedItemIndex=i;}}if(evt.shiftKey){if(focusedItemIndex===0){$wt.pop.focusableElements[$wt.pop.focusableElements.length - 1].focus();evt.preventDefault();}}else{if(focusedItemIndex===numberOfFocusableItems - 1){$wt.pop.focusableElements[0].focus();evt.preventDefault();}}}}$wt.pop.wtPopup.onkeydown=function(e){var e=e || window.event;trapTabKey(this,e);};if(typeof c["callback"]==="function"){c["callback"]($wt.pop.wtPopup);}return $wt.pop.wtPopup;}});
$wt.extend({shadeColor:function(color,percent){var bit=parseInt(color.slice(1),16);bin=percent <(0)? 0:255,pourcent=percent <(0)? percent * -1:percent,red=bit >> 16,green=bit >> 8 & 0x00FF,blue=bit & 0x0000FF;return '#' +(0x1000000 +(Math.round((bin - red)* pourcent)+ red)* 0x10000 +(Math.round((bin - green)* pourcent)+ green)* 0x100 +(Math.round((bin - blue)* pourcent)+ blue)).toString(16).slice(1);},color:function(color,percent){if(!!window.CanvasRenderingContext2D===false){return color;}if(!$wt.wtColor){$wt.wtColor=document.createElement('canvas').getContext('2d');}var canvas=$wt.wtColor;canvas.fillStyle=color;canvas.fillRect(0,0,1,1);var get=function(val){if(val > 255){val=255;}else if(val < 0){val=0;}return val;};var col=canvas.getImageData(0,0,1,1),perc=Math.floor(percent / 100 * 255),red=get(col.data[0] + perc),green=get(col.data[1] + perc),blue=get(col.data[2] + perc);return '#' +((red << 16)|(green << 8)| blue).toString(16);}});
$wt.extend({getSupercookieName:function(cookName){return location.host==='europa.eu' ? 'main_' + cookName:cookName;},trackLinks:function(str,callback){if(!window._paq || !window.Piwik || !$wt.analytics.isTrackable()){return false;}if(typeof str==="string"){var isExternal=$wt.isExternal(str);var isDocument=$wt.isDocument(str);var isLink=(!str.match(/^(javascript|mailto|#|sms)/i));var isNotSame=(str !==window.location.href);if((isExternal || isDocument)&& isLink && isNotSame){_paq.push(['trackLink',str,isDocument ? 'download':'link',null,callback]);}}else if(Piwik.getAsyncTracker && !$wt.analytics.parameters.mobile){var t=Piwik.getAsyncTracker();[].forEach.call(document.body.getElementsByTagName('a'),function(a){if(!a.analyticsWasHere&& !a.piwikTrackers&& a.href&& !a.href.match(/^(javascript|mailto|#|sms)/i)&& !a.getAttribute("aria-controls")){t.addListener(a);a.analyticsWasHere=true;}});}},isDocument:function(s){if(typeof s !=="string"){if(s.className &&(s.className + "").indexOf("piwik_download")!==-1){return true;}s=s.href || "";}var d=['7z','aac','apk','arc','arj','asf','asx','avi','azw3','bin','csv','deb','dmg','doc','docx','epub','exe','flv','gif','gz','gzip','hqx','ibooks','jar','jpg','jpeg','js','mobi','mp2','mp3','mp4','mpg','mpeg','mov','movie','msi','msp','odb','odf','odg','ods','odt','ogg','ogv','pdf','phps','png','ppt','pptx','qt','qtm','ra','ram','rar','rpm','sea','sit','tar','tbz','tbz2','bz','bz2','tgz','torrent','txt','wav','wma','wmv','wpd','xls','xlsx','xml','z','zip'];var p=new RegExp('\\.(' + d.join('|')+ ')([?&#]|$)','i');return p.test(s);},isExternal:function(str){var params=$wt.analytics.sitePaths;str=$wt.absolute(str);str=str.replace(/#.*$/,'').replace(/\?.*$/,'');var isExternal=true;for(var x in params){if(String(str).indexOf(params[x])!==-1){isExternal=false;}}return isExternal;},trackPageView:function(params,can){params=$wt.mergeParams($wt.analytics.parameters,params);var cfg=$wt.analytics.config();var inst=params["instance"] || 'ec.europa.eu';var tmpp=params["sitePath"];var path=(typeof tmpp==="string")? [tmpp]:tmpp;var status=cfg[inst].status;var url=cfg[inst].url;if(!params["siteID"]){console.log("WTERROR:Piwik,missing 'siteID' parameter");}else if(!path){console.log("WTERROR:Piwik,missing 'sitePath' parameter");}else if(!status){console.log('WTERROR:[PIWIK] The Piwik instance,[' + inst + '] is down,please try again later');}else{var currentUrl=(location.href).split("#")[0];if((params["mode"]==="auto" || params["mode"]==="manual")&&(params["currentTitle"] !==document.title ||params["currentUrl"] !==currentUrl)){if(document.referrer){_paq.push(['setReferrerUrl',params["currentUrl"]]);}_paq.push(['setCustomUrl',currentUrl]);_paq.push(['setGenerationTimeMs',0]);params["currentUrl"]=currentUrl;}_paq.push(['setSiteId',params["siteID"]]);_paq.push(["setDomains",$wt.analytics.sitePaths]);if($wt.analytics.parameters.cookiePath){_paq.push(['setCookiePath',$wt.analytics.parameters.cookiePath]);can=true;}if(params["lang"]){_paq.push(["setCustomDimension",1,params["lang"]]);}else if($wt.lang(true)!==false){_paq.push(["setCustomDimension",1,$wt.lang(true)]);}else{_paq.push(["setCustomDimension",1,"unknown"]);}if(params["siteSection"]){_paq.push(["setCustomDimension",2,params["siteSection"]]);}(function(strSize,maxSize,arr,meta){if(meta){(((meta.getAttribute('content')|| "").split(",")).sort()).forEach(function(e){var k=e.replace(/^\s+|\s+$/gm,'');strSize +=k.length + 1;if(strSize < maxSize){arr.push(k);}});_paq.push(['setCustomDimension',3,'.' +(arr.join('.')).toUpperCase()+ '.']);}})(0,253,[],document.querySelector("meta[name='ec_departments']"));if(params["is404"]){_paq.push(['setDocumentTitle','404/URL=' + encodeURIComponent(document.location.pathname + document.location.search)+ '/From=' + encodeURIComponent(document.referrer)]);}else if(params["is403"]){_paq.push(['setDocumentTitle','403/URL=' + encodeURIComponent(document.location.pathname + document.location.search)+ '/From=' + encodeURIComponent(document.referrer)]);}else if(params["is500"]){_paq.push(['setDocumentTitle','500/URL=' + encodeURIComponent(document.location.pathname + document.location.search)+ '/From=' + encodeURIComponent(document.referrer)]);}else{_paq.push(['setDocumentTitle',encodeURIComponent(document.title)]);}_paq.push(['setTrackerUrl',url + 'piwik.php']);if(params["search"]){_paq.push(['trackSiteSearch',params["search"]["keyword"] || "",params["search"]["category"] || false,params["search"]["count"] || 0]);}if(params['before']){if(typeof window[params['before']]==="function"){_paq=window[params['before']](_paq);}}if(!params['search']&& params['mode'] !=="notnow"){_paq.push(['trackPageView']);}if(params['mode']==="notnow"){params['mode']="manual";}if(!params['mobile']){_paq.push(['enableLinkTracking']);}_paq.push(['setDoNotTrack',true]);}if(params["after"]){if(typeof window[params["after"]]==="function"){window[params["after"]]();}}$wt.analytics.parameters=params;return{"process":can,"instance":status,"url":url,"params":params};},analytics:{config:function(){return {"root":{"ec.europa.eu":["ec.europa.eu\/index*","ec.europa.eu\/about_*","ec.europa.eu\/represent_*","ec.europa.eu\/info","ec.europa.eu\/priorities","ec.europa.eu\/commission","ec.europa.eu\/about","ec.europa.eu\/atwork","ec.europa.eu\/policies","ec.europa.eu\/contracts_grants","ec.europa.eu\/news","ec.europa.eu\/legislation","ec.europa.eu\/geninfo\/europa_analytics_*","ec.europa.eu\/geninfo\/legal_notices_*","ec.europa.eu\/green-papers","ec.europa.eu\/white-papers","ec.europa.eu\/cookies","ec.europa.eu\/contact","ec.europa.eu\/services","ec.europa.eu\/your-rights","ec.europa.eu\/visits","ec.europa.eu\/sitemap"],"europa.eu":["europa.eu\/index*","europa.eu\/european-union"],"allowedIframeHosts":["europa.eu","ec.europa.eu"]},"ec.europa.eu":{"url":"https:\/\/webanalytics.ec.europa.eu\/","status":true},"europa.eu":{"url":"https:\/\/webanalytics.europa.eu\/","status":true},"testing":{"url":"https:\/\/webgate.ec.europa.eu\/fpfis\/piwik\/","status":true},"awstesting":{"url":"https:\/\/webanalytics.acc.fpfis.tech.ec.europa.eu\/","status":true},"optin":[]};},parameters:false,mobile:function(event){var params=$wt.analytics.parameters;if(!params.mobile){return true;}var el=event.srcElement || event.target;while(el && !el.href){el=el.parentNode;}if(el&& el.href&& !el.href.match(/^(javascript|mailto|#|sms)/i)&& !el.piwikTrackers&& el.href !==""&& el.href !==(location.href).split("#")[0]&&($wt.isExternal(el.href)|| $wt.isDocument(el))&& !el.realClick){event.preventDefault();event.stopPropagation();if(el.isTrigger){return;}el.isTrigger=true;var callback=(params.mobile ||{}).callback;var validate=(typeof window[callback]==="function")? window[callback](el):true;var process=function(){clearTimeout($wt.analytics.timer);if(validate){el.realClick=true;el.click();}};$wt.trackLinks(el.href,process);$wt.analytics.timer=setTimeout(process,((params.mobile ||{}).delay || 1000));}},track:function(){clearTimeout(window.analyticsTimer);window.analyticsTimer=setTimeout(function(){$wt.trackLinks();},100);},getCookiePath:function(){var params=$wt.analytics.parameters;var tmpp=params["sitePath"];var path=(typeof tmpp==="string")? [tmpp]:tmpp;if(!params){return "/";}path.sort(function(a,b){return a.length > b.length;});var setCookiePath=(function(ref){for(var i=0,l=path.length;i < l;i++){if(ref.indexOf(path[i])!==-1 && ref.indexOf(path[i])< 9){return "/" +((path[i].replace(/.*?:?\/\//g,"").replace(/^\/+|\/+$/g,''))).split("/").slice(1).join("/");}}return false;})(location.href);return $wt.analytics.parameters.cookiePath=setCookiePath;},deletePiwikCookies:function(){var cookieNames=document.cookie.split(";");for(var i=0;i < cookieNames.length;i++){var cookName=(cookieNames[i].split("=")[0]).trim();if(/_pk_(ses|id|ref)[\.a-z0-9]*/.test(cookName)){$wt.cookie.remove(cookName);$wt.cookie.set({name:cookName,value:'',days:-1,path:$wt.analytics.getCookiePath()});document.cookie=cookName + '=;Path=' + $wt.analytics.getCookiePath()+ ';Expires=Thu,01 Jan 1970 00:00:01 GMT;';}}},isOptInModeEnable:function(){var cfg=$wt.analytics.config();var pathsOptin=cfg['optin'] || [];var domain=location.host.split('.').length > 3 ?location.host.split('.').slice(-3).join('.'):location.host;return pathsOptin.indexOf(domain)!==-1;},isOptedIn:function(){return $wt.cookie.get($wt.getSupercookieName('eu_optin'))==="true";},isOptedOut:function(){return $wt.cookie.get($wt.getSupercookieName('eu_optout'))==="true";},optOut:function(){$wt.analytics.isOptInModeEnable()?$wt.cookie.remove($wt.getSupercookieName('eu_optin')):$wt.cookie.set({name:$wt.getSupercookieName('eu_optout'),value:true,days:365});$wt.analytics.deletePiwikCookies();$wt.cookie.consent.update(false);},optIn:function(){$wt.analytics.isOptInModeEnable()?$wt.cookie.set({name:$wt.getSupercookieName('eu_optin'),value:true,days:365}):$wt.cookie.remove($wt.getSupercookieName('eu_optout'));$wt.cookie.consent.update(true);},isTrackable:function(){if($wt.isDNTOn()|| $wt.analytics.isOptedOut()|| $wt.cookie.consent.status()==="refused"){$wt.analytics.deletePiwikCookies();return false;}if($wt.analytics.isOptInModeEnable()){return $wt.analytics.isOptedIn();}return true;},pushstate:function(){var p=$wt.analytics.parameters;if(p.mode !=="auto"){return;}clearTimeout(window.analyticsTimer);window.analyticsTimer=setTimeout(function(){$wt.trackPageView(p);},10);},popstate:function(e){var p=$wt.analytics.parameters;if(p.mode !=="auto"){return;}clearTimeout(window.analyticsTimer);window.analyticsTimer=setTimeout(function(){if((location.href).split("#")[0] !==p["currentUrl"]){$wt.analytics.parameters.currentUrl=(location.href).split("#")[0];$wt.trackPageView($wt.analytics.parameters);}},50);},run:function(obj,params){$wt.analytics.container=obj;$wt.analytics.parameters=params;$wt.analytics.getCookiePath();if(!$wt.analytics.isTrackable()){$wt.next(obj);return false;}window._paq=window._paq || [];params.currentUrl=(document.referrer).split("#")[0];params.currentTitle=document.title;if(params.mobile || 'ontouchstart' in window){params.mobile=params.mobile || true;}params.mode=params.mode || "default";params.mode=(params.mode==="manual")? "notnow":params.mode;var cfg=$wt.analytics.config();var temp=[];for(var x=0,l=params.sitePath.length;x < l;x++){var path=params.sitePath[x];var alias=cfg.root[path];if(alias){for(var z in alias){temp.push(alias[z]);}}else{temp.push(path);}}$wt.analytics.sitePaths=temp;this.parameters=params;var tracker=$wt.trackPageView(params);if(tracker.process && tracker.instance){$wt.include(tracker.url + 'piwik.js',function(){if(params.mobile){$wt.on(document,"click",$wt.analytics.mobile);}else{$wt.domchange($wt.analytics.track);}if(params.mode==="auto"){$wt.on(window,'popstate',$wt.analytics.popstate);if(!(isIE && isIE < 9)){try{var oriHistory=history.pushState;history.pushState=function(){$wt.analytics.pushstate();oriHistory.apply(this,arguments);};}catch(e){}}}},"js",false,params["async"]);}$wt.next(obj);}}});
(function(win,doc,previous){var prev=function(elm,slc){var temp={};for(;elm && elm !==document;elm=elm.parentNode){var childs=elm.querySelectorAll(slc);if(childs.length >=2){temp.children=childs;temp.parent=elm;break;}}return temp;};var trap=function(elm){var fields=elm.querySelectorAll("a[href],input,select,textarea,button"),first=fields[0],last=fields[fields.length - 1];first.focus();elm.onkeydown=function(e){if((e.key==='Tab' || e.keyCode===9)){if(e.shiftKey){if(doc.activeElement===first){last.focus();e.preventDefault();}}else{if(doc.activeElement===last){first.focus();e.preventDefault();}}}};return elm;};var reset=function(e){var current=e.target || false;if(previous && current && previous !==current){[].forEach.call(previous.from,function(brother){if(brother.get("aria-expanded")==="true"){brother.set("aria-expanded",false);}});[].forEach.call(previous.to,function(targ){if(!targ.has("hidden")){targ.set("hidden","");}});$wt.trigger(window,"aria-dropdown-previous-close",previous);previous=false;}};var menu=function(elm){if(!this.has("hidden")){previous=elm;}};var dialog=function(elm,escKey){if(!escKey && !this.has("hidden")){win.lastFocus=elm;win.lastDialog=this;doc.body.setAttribute("aria-hidden",true);trap(this,true);}else{doc.body.removeAttribute("aria-hidden");if(win.lastFocus){win.lastFocus.focus();win.lastFocus=false;};if(win.lastDialog){win.lastDialog.set("hidden","");win.lastDialog=false;};}};var tab=function(elm,init,focus){var tabs=prev(elm,'[role="tab"]');[].forEach.call(tabs.children,function(btn,index){if(init){btn.setAttribute("tabindex",(btn.getAttribute("aria-selected")==="true")? 0:-1);btn.index=index;btn.onkeydown=function(e){var e=e || win.event,current=false;if(e.keyCode===39){current=tabs.children[btn.index + 1] || tabs.children[0];}else if(e.keyCode===37){current=tabs.children[btn.index - 1] || tabs.children[tabs.children.length - 1];}else if(e.keyCode===36){current=tabs.children[0];}else if(e.keyCode===35){current=tabs.children[tabs.children.length - 1];}if(/35|36|37|39/.test(e.keyCode)&& current){if(current !==this){current.click();current.focus();}e.preventDefault();}};}else{btn.set("aria-selected","false");btn.set("tabindex",-1);var cntrl=btn.get("aria-controls");[].forEach.call(doc.querySelectorAll("." + cntrl + ",#" + cntrl),function(item){item.setAttribute("hidden","");});}});if(!init){elm.set("aria-selected","true");elm.set("tabindex",0);if(focus){elm.focus();}}};var heading=function(elm){var heads=prev(elm,'[role="heading"] [aria-controls]');[].forEach.call(heads.children,function(head,index){if(!head.index){head.index=index;head.onkeydown=function(e){var e=e || win.event,current=false;if(e.keyCode===40){current=heads.children[head.index + 1] || heads.children[0];}else if(e.keyCode===38){current=heads.children[head.index - 1] || heads.children[heads.children.length - 1];}else if(e.keyCode===36){current=heads.children[0];}else if(e.keyCode===35){current=heads.children[heads.children.length - 1];}if(/35|36|38|40/.test(e.keyCode)&& current){if(current !==this){current.focus();}e.preventDefault();}};}});};var bind=function(elm){elm.has=elm.hasAttribute;elm.get=elm.getAttribute;elm.set=elm.setAttribute;elm.del=elm.removeAttribute;elm.menu=menu;elm.dialog=dialog;elm.tab=tab;elm.heading=heading;return elm;};var aria=function(container){[].forEach.call(container.querySelectorAll('[aria-controls]'),function(elm){var ECL=(elm.className.indexOf("ecl-")> -1 && window.ECL);if(!ECL && !elm.get){bind(elm);var role=elm.get("role")|| bind(elm.parentNode).get("role");if(role && elm[role]){elm[role](elm,true);}var controls=function(e){e.preventDefault();if(elm.isAnimate){return;}var cntrl=this.get("aria-controls");var isSelected=this.get("aria-selected");var role=this.get("role");if(cntrl===''){console.log("WTINFO:Empty controlers ",this);return;}$wt.trigger(elm,cntrl);$wt.trigger(window,"aria-controls",this);if(isSelected && role==="checkbox"){this.set("aria-selected",(isSelected==="false"));}else if(isSelected && isSelected==="true"){return;}reset(e);var brothers=doc.querySelectorAll('[aria-controls="' + cntrl + '"]');elm.FROM=brothers;[].forEach.call(brothers,function(brother){if(!brother.get){return;}var expanded=brother.get("aria-expanded");var role=brother.get("role");if(expanded){brother.set("aria-expanded",(expanded==="false"));}if(role && brother[role]){brother[role](elm);}});var children=doc.querySelectorAll("." + cntrl + ",#" + cntrl);elm.TO=children;[].forEach.call(children,function(child){bind(child);var hide=child.has("hidden");var role=child.get("role");if(child.tagName==="LINK" && cntrl===child.id){(child.has("disabled"))? child.del("disabled"):child.set("disabled","");}else{var animated=(function(){if((child.className || "").indexOf("animated [")!==-1){elm.animated=child.className.replace(/(.*)animated\ \[(.*)\](.*)/ig,"$2").split(",");[].forEach.call(elm.animated,function(e){child.className=child.className.replace(" " + e,"");});return elm.animated;}return false;})();if(animated){if(!child.animationsEvents){child.addEventListener("animationstart",function(){elm.isAnimate=true;});child.addEventListener("animationend",function(){if(child.className.indexOf(" " + animated[1])!==-1){setTimeout(function(){child.set("hidden","");elm.del("hidden");if(child.get("role")==="dialog"){dialog(false,true);}},10);}elm.isAnimate=false;});child.animationsEvents=true;}elm.direction=(hide)? 0:1;child.className +=" " + animated[elm.direction];if(elm.direction===0){child.del("hidden");}}else if(hide){child.del("hidden");}else if(!animated){child.set("hidden","");}if(role && child[role]){elm.from=brothers;elm.to=children;child[role](elm);}if(child.has("aria-controls")){child.focus();}}});if(typeof window[cntrl]==="function"){window[cntrl](elm);}};$wt.on(elm,"click",controls);}});};aria.run=function(obj){var wrapper=(obj.params.include)? document.querySelector(obj.params.include):document;wrapper.params=obj.params;if(wrapper.params.custom){$wt.load(wrapper.params.custom,function(){aria.init(wrapper);});}else{aria.init(wrapper);}};aria.on=function(controler,callback){window[controler]=callback;};$wt.on(win,"wtReady",function(){$wt.on(doc.body,"click",reset);$wt.on(doc.body,"keydown",function(e){if(e.keyCode===27){dialog(false,true);}});});aria.init=function(container){aria(container);$wt.domchange(function(){aria(container);});};$wt.aria=aria;})(window,document,false);
$wt.on(window,"wtReady",function(){var loc=window.location;var protocol=loc.protocol;var hostname=loc.hostname;var pathname=loc.pathname;if(this.statsSending || ["http:","https:"].indexOf(protocol)< 0 || ["localhost","127.0.0.1"].indexOf(hostname)>=0){return;}this.statsSending=true;var stats={url:protocol + "//" + hostname + pathname,components:(function(comps,result){for(var key in comps){var component=comps[key];var params=component.params;result[key]={service:params.name || params.utility || params.service,version:params.version || "none",provider:params.provider || "none"}}return JSON.stringify(result);})($wt.components,{})};if(stats.components==='{}'){return;}$wt.ajax({"url":$wt.root + '/rest/service-inventory/index.php',"data":stats});});
$wt.on(window,"wtReady",function(){var createPanel=function(e){if((((e.keyCode || e.which)===87 && e.altKey)|| $wt.urlParams["wtpanel"]==="open")&& !$wt.panelDebug){$wt.panelDebug=document.createElement("div");$wt.after($wt.panelDebug,document.body);$wt.render($wt.panelDebug,{"service":"panel"});}};$wt.on(document,"keydown",createPanel);createPanel(this);});
$wt.ready(function(){$wt.urlParams=$wt.getUrlParams();if($wt.urlParams.wtGloban){$wt.root=(function(){var R=document.querySelectorAll('script[src*="/load.js"]');var O=((R[0])? R[0].src:"").split("/");return(O.slice(0,O.length - 1)).join("/");})();$wt.include($wt.root + "/webtools.globan.js?version=2.0");}$wt.root=(function(){var R=document.querySelectorAll('script[src*="/load.js"]');var O=((R[0])? R[0].src:"").split("/");return(O.slice(0,O.length - 1)).join("/");})();$wt.lang();if(isIE){setTimeout($wt.collect,10);}else{$wt.collect();}var checkScroll=function(){if(window.$wt){clearTimeout($wt.timer);$wt.timer=setTimeout($wt.collect,100);}};$wt.on(window,"scroll",checkScroll);[].forEach.call(document.querySelectorAll('div'),function(elm){$wt.on(elm,"scroll",checkScroll);});$wt.trigger(window,"wtReady");});
