var load_figshare_widget;(function(){var c;if(window.jQuery===undefined||window.jQuery.fn.jquery!=="1.9.1"){var d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src","//code.jquery.com/jquery-1.9.1.min.js");if(d.readyState){d.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){b()}}}else{d.onload=b}(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(d)}else{c=window.jQuery;a()}function b(){c=window.jQuery.noConflict(true);a()}function a(){(function(e,f,g){e.fn.jScrollPane=function(h){function j(br,bc){var b0,ba=this,a2,bF,aM,bD,a7,bQ,s,aQ,bZ,bU,bq,aY,bi,aZ,aX,bP,a6,bz,a3,aO,bx,bw,bK,bC,bl,aV,bs,bk,aK,bo,bR,a1,bf,bG=true,bb=true,bS=false,aW=false,bA=br.clone(false,false).empty(),bN=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";bR=br.css("paddingTop")+" "+br.css("paddingRight")+" "+br.css("paddingBottom")+" "+br.css("paddingLeft");a1=(parseInt(br.css("paddingLeft"),10)||0)+(parseInt(br.css("paddingRight"),10)||0);function bu(k){var p,n,o,r,t,l,m=false,q=false;b0=k;if(a2===g){t=br.scrollTop();l=br.scrollLeft();br.css({overflow:"hidden",padding:0});bF=br.innerWidth()+a1;aM=br.innerHeight();br.width(bF);a2=e('<div class="jspPane" />').css("padding",bR).append(br.children());bD=e('<div class="jspContainer" />').css({width:bF+"px",height:aM+"px"}).append(a2).appendTo(br)}else{br.css("width","");m=b0.stickToBottom&&bg();q=b0.stickToRight&&bv();r=br.innerWidth()+a1!=bF||br.outerHeight()!=aM;if(r){bF=br.innerWidth()+a1;aM=br.innerHeight();bD.css({width:bF+"px",height:aM+"px"})}if(!r&&bf==a7&&a2.outerHeight()==bQ){br.width(bF);return}bf=a7;a2.css("width","");br.width(bF);bD.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}a2.css("overflow","auto");if(k.contentWidth){a7=k.contentWidth}else{a7=a2[0].scrollWidth}bQ=a2[0].scrollHeight;a2.css("overflow","");s=a7/bF;aQ=bQ/aM;bZ=aQ>1;bU=s>1;if(!(bU||bZ)){br.removeClass("jspScrollable");a2.css({top:0,width:bD.width()-a1});aT();bp();a9();aL();bH()}else{br.addClass("jspScrollable");p=b0.maintainPosition&&(bi||bP);if(p){n=bW();o=bY()}bT();by();bn();if(p){bd(q?(a7-bF):n,false);be(m?(bQ-aM):o,false)}bh();bJ();bB();if(b0.enableKeyboardNavigation){a8()}if(b0.clickOnTrack){aR()}bt();if(b0.hijackInternalLinks){aU()}}if(b0.autoReinitialise&&!bo){bo=setInterval(function(){bu(b0)},b0.autoReinitialiseDelay)}else{if(!b0.autoReinitialise&&bo){clearInterval(bo)}}t&&br.scrollTop(0)&&be(t,false);l&&br.scrollLeft(0)&&bd(l,false);br.trigger("jsp-initialised",[bU||bZ])}function bT(){if(bZ){bD.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />')));a6=bD.find(">.jspVerticalBar");bz=a6.find(">.jspTrack");bq=bz.find(">.jspDrag");if(b0.showArrows){bw=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",bV(0,-1)).bind("click.jsp",bX);bK=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",bV(0,1)).bind("click.jsp",bX);if(b0.arrowScrollOnHover){bw.bind("mouseover.jsp",bV(0,-1,bw));bK.bind("mouseover.jsp",bV(0,1,bK))}bE(bz,b0.verticalArrowPositions,bw,bK)}aO=aM;bD.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){aO-=e(this).outerHeight()});bq.hover(function(){bq.addClass("jspHover")},function(){bq.removeClass("jspHover")}).bind("mousedown.jsp",function(l){e("html").bind("dragstart.jsp selectstart.jsp",bX);bq.addClass("jspActive");var k=l.pageY-bq.position().top;e("html").bind("mousemove.jsp",function(m){a5(m.pageY-k,false)}).bind("mouseup.jsp mouseleave.jsp",bm);return false});aS()}}function aS(){bz.height(aO+"px");bi=0;a3=b0.verticalGutter+bz.outerWidth();a2.width(bF-a3-a1);try{if(a6.position().left===0){a2.css("margin-left",a3+"px")}}catch(k){}}function by(){if(bU){bD.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />')));bC=bD.find(">.jspHorizontalBar");bl=bC.find(">.jspTrack");aZ=bl.find(">.jspDrag");if(b0.showArrows){bk=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",bV(-1,0)).bind("click.jsp",bX);aK=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",bV(1,0)).bind("click.jsp",bX);if(b0.arrowScrollOnHover){bk.bind("mouseover.jsp",bV(-1,0,bk));aK.bind("mouseover.jsp",bV(1,0,aK))}bE(bl,b0.horizontalArrowPositions,bk,aK)}aZ.hover(function(){aZ.addClass("jspHover")},function(){aZ.removeClass("jspHover")}).bind("mousedown.jsp",function(l){e("html").bind("dragstart.jsp selectstart.jsp",bX);aZ.addClass("jspActive");var k=l.pageX-aZ.position().left;e("html").bind("mousemove.jsp",function(m){a4(m.pageX-k,false)}).bind("mouseup.jsp mouseleave.jsp",bm);return false});aV=bD.innerWidth();bI()}}function bI(){bD.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){aV-=e(this).outerWidth()});bl.width(aV+"px");bP=0}function bn(){if(bU&&bZ){var l=bl.outerHeight(),k=bz.outerWidth();aO-=l;e(bC).find(">.jspCap:visible,>.jspArrow").each(function(){aV+=e(this).outerWidth()});aV-=k;aM-=k;bF-=l;bl.parent().append(e('<div class="jspCorner" />').css("width",l+"px"));aS();bI()}if(bU){a2.width((bD.outerWidth()-a1)+"px")}bQ=a2.outerHeight();aQ=bQ/aM;if(bU){bs=Math.ceil(1/s*aV);if(bs>b0.horizontalDragMaxWidth){bs=b0.horizontalDragMaxWidth}else{if(bs<b0.horizontalDragMinWidth){bs=b0.horizontalDragMinWidth}}aZ.width(bs+"px");aX=aV-bs;bL(bP)}if(bZ){bx=Math.ceil(1/aQ*aO);if(bx>b0.verticalDragMaxHeight){bx=b0.verticalDragMaxHeight}else{if(bx<b0.verticalDragMinHeight){bx=b0.verticalDragMinHeight}}bq.height(bx+"px");aY=aO-bx;bM(bi)}}function bE(p,n,q,m){var k="before",o="after",l;if(n=="os"){n=/Mac/.test(navigator.platform)?"after":"split"}if(n==k){o=n}else{if(n==o){k=n;l=q;q=m;m=l}}p[k](q)[o](m)}function bV(m,k,l){return function(){bj(m,k,this,l);this.blur();return false}}function bj(o,p,k,l){k=e(k).addClass("jspActive");var m,q,r=true,n=function(){if(o!==0){ba.scrollByX(o*b0.arrowButtonSpeed)}if(p!==0){ba.scrollByY(p*b0.arrowButtonSpeed)}q=setTimeout(n,r?b0.initialDelay:b0.arrowRepeatFreq);r=false};n();m=l?"mouseout.jsp":"mouseup.jsp";l=l||e("html");l.bind(m,function(){k.removeClass("jspActive");q&&clearTimeout(q);q=null;l.unbind(m)})}function aR(){aL();if(bZ){bz.bind("mousedown.jsp",function(l){if(l.originalTarget===g||l.originalTarget==l.currentTarget){var o=e(this),k=o.offset(),m=l.pageY-k.top-bi,q,r=true,n=function(){var w=o.offset(),v=l.pageY-w.top-bx/2,u=aM*b0.scrollPagePercent,t=aY*u/(bQ-aM);if(m<0){if(bi-t>v){ba.scrollByY(-u)}else{a5(v)}}else{if(m>0){if(bi+t<v){ba.scrollByY(u)}else{a5(v)}}else{p();return}}q=setTimeout(n,r?b0.initialDelay:b0.trackClickRepeatFreq);r=false},p=function(){q&&clearTimeout(q);q=null;e(document).unbind("mouseup.jsp",p)};n();e(document).bind("mouseup.jsp",p);return false}})}if(bU){bl.bind("mousedown.jsp",function(l){if(l.originalTarget===g||l.originalTarget==l.currentTarget){var o=e(this),k=o.offset(),m=l.pageX-k.left-bP,q,r=true,n=function(){var w=o.offset(),v=l.pageX-w.left-bs/2,u=bF*b0.scrollPagePercent,t=aX*u/(a7-bF);if(m<0){if(bP-t>v){ba.scrollByX(-u)}else{a4(v)}}else{if(m>0){if(bP+t<v){ba.scrollByX(u)}else{a4(v)}}else{p();return}}q=setTimeout(n,r?b0.initialDelay:b0.trackClickRepeatFreq);r=false},p=function(){q&&clearTimeout(q);q=null;e(document).unbind("mouseup.jsp",p)};n();e(document).bind("mouseup.jsp",p);return false}})}}function aL(){if(bl){bl.unbind("mousedown.jsp")}if(bz){bz.unbind("mousedown.jsp")}}function bm(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(bq){bq.removeClass("jspActive")}if(aZ){aZ.removeClass("jspActive")}}function a5(k,l){if(!bZ){return}if(k<0){k=0}else{if(k>aY){k=aY}}if(l===g){l=b0.animateScroll}if(l){ba.animate(bq,"top",k,bM)}else{bq.css("top",k);bM(k)}}function bM(o){if(o===g){o=bq.position().top}bD.scrollTop(0);bi=o;var l=bi===0,n=bi==aY,m=o/aY,k=-m*(bQ-aM);if(bG!=l||bS!=n){bG=l;bS=n;br.trigger("jsp-arrow-change",[bG,bS,bb,aW])}aN(l,n);a2.css("top",k);br.trigger("jsp-scroll-y",[-k,l,n]).trigger("scroll")}function a4(l,k){if(!bU){return}if(l<0){l=0}else{if(l>aX){l=aX}}if(k===g){k=b0.animateScroll}if(k){ba.animate(aZ,"left",l,bL)}else{aZ.css("left",l);bL(l)}}function bL(o){if(o===g){o=aZ.position().left}bD.scrollTop(0);bP=o;var l=bP===0,m=bP==aX,n=o/aX,k=-n*(a7-bF);if(bb!=l||aW!=m){bb=l;aW=m;br.trigger("jsp-arrow-change",[bG,bS,bb,aW])}aP(l,m);a2.css("left",k);br.trigger("jsp-scroll-x",[-k,l,m]).trigger("scroll")}function aN(l,k){if(b0.showArrows){bw[l?"addClass":"removeClass"]("jspDisabled");bK[k?"addClass":"removeClass"]("jspDisabled")}}function aP(l,k){if(b0.showArrows){bk[l?"addClass":"removeClass"]("jspDisabled");aK[k?"addClass":"removeClass"]("jspDisabled")}}function be(k,m){var l=k/(bQ-aM);a5(l*aY,m)}function bd(m,k){var l=m/(a7-bF);a4(l*aX,k)}function bO(k,p,x){var t,w,v,z=0,l=0,y,q,r,n,o,m;try{t=e(k)}catch(u){return}w=t.outerHeight();v=t.outerWidth();bD.scrollTop(0);bD.scrollLeft(0);while(!t.is(".jspPane")){z+=t.position().top;l+=t.position().left;t=t.offsetParent();if(/^body|html$/i.test(t[0].nodeName)){return}}y=bY();r=y+aM;if(z<y||p){o=z-b0.verticalGutter}else{if(z+w>r){o=z-aM+w+b0.verticalGutter}}if(o){be(o,x)}q=bW();n=q+bF;if(l<q||p){m=l-b0.horizontalGutter}else{if(l+v>n){m=l-bF+v+b0.horizontalGutter}}if(m){bd(m,x)}}function bW(){return -a2.position().left}function bY(){return -a2.position().top}function bg(){var k=bQ-aM;return(k>20)&&(k-bY()<10)}function bv(){var k=a7-bF;return(k>20)&&(k-bW()<10)}function bJ(){bD.unbind(bN).bind(bN,function(m,k,n,p){var o=bP,l=bi;ba.scrollBy(n*b0.mouseWheelSpeed,-p*b0.mouseWheelSpeed,false);return o==bP&&l==bi})}function aT(){bD.unbind(bN)}function bX(){return false}function bh(){a2.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(k){bO(k.target,false)})}function bp(){a2.find(":input,a").unbind("focus.jsp")}function a8(){var k,n,l=[];bU&&l.push(bC[0]);bZ&&l.push(a6[0]);a2.focus(function(){br.focus()});br.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(o){if(o.target!==this&&!(l.length&&e(o.target).closest(l).length)){return}var p=bP,q=bi;switch(o.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:k=o.keyCode;m();break;case 35:be(bQ-aM);k=null;break;case 36:be(0);k=null;break}n=o.keyCode==k&&p!=bP||q!=bi;return !n}).bind("keypress.jsp",function(o){if(o.keyCode==k){m()}return !n});if(b0.hideFocus){br.css("outline","none");if("hideFocus" in bD[0]){br.attr("hideFocus",true)}}else{br.css("outline","");if("hideFocus" in bD[0]){br.attr("hideFocus",false)}}function m(){var o=bP,p=bi;switch(k){case 40:ba.scrollByY(b0.keyboardSpeed,false);break;case 38:ba.scrollByY(-b0.keyboardSpeed,false);break;case 34:case 32:ba.scrollByY(aM*b0.scrollPagePercent,false);break;case 33:ba.scrollByY(-aM*b0.scrollPagePercent,false);break;case 39:ba.scrollByX(b0.keyboardSpeed,false);break;case 37:ba.scrollByX(-b0.keyboardSpeed,false);break}n=o!=bP||p!=bi;return n}}function a9(){br.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function bt(){if(location.hash&&location.hash.length>1){var l,m;try{l=e(location.hash)}catch(k){return}if(l.length&&a2.find(location.hash)){if(bD.scrollTop()===0){m=setInterval(function(){if(bD.scrollTop()>0){bO(location.hash,true);e(document).scrollTop(bD.position().top);clearInterval(m)}},50)}else{bO(location.hash,true);e(document).scrollTop(bD.position().top)}}}}function bH(){e("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function aU(){bH();e("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var k=this.href.split("#"),l;if(k.length>1){l=k[1];if(l.length>0&&a2.find("#"+l).length>0){bO("#"+l,true);return false}}})}function bB(){var o,p,m,n,k,l=false;bD.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var q=r.originalEvent.touches[0];o=bW();p=bY();m=q.pageX;n=q.pageY;k=false;l=true}).bind("touchmove.jsp",function(q){if(!l){return}var r=q.originalEvent.touches[0],t=bP,u=bi;ba.scrollTo(o+m-r.pageX,p+n-r.pageY);k=k||Math.abs(m-r.pageX)>5||Math.abs(n-r.pageY)>5;return t==bP&&u==bi}).bind("touchend.jsp",function(q){l=false}).bind("click.jsp-touchclick",function(q){if(k){k=false;return false}})}function a0(){var k=bY(),l=bW();br.removeClass("jspScrollable").unbind(".jsp");br.replaceWith(bA.append(a2.children()));bA.scrollTop(k);bA.scrollLeft(l)}e.extend(ba,{reinitialise:function(k){k=e.extend({},b0,k);bu(k)},scrollToElement:function(l,m,k){bO(l,m,k)},scrollTo:function(l,k,m){bd(l,m);be(k,m)},scrollToX:function(l,k){bd(l,k)},scrollToY:function(k,l){be(k,l)},scrollToPercentX:function(l,k){bd(l*(a7-bF),k)},scrollToPercentY:function(l,k){be(l*(bQ-aM),k)},scrollBy:function(m,k,l){ba.scrollByX(m,l);ba.scrollByY(k,l)},scrollByX:function(k,m){var n=bW()+k,l=n/(a7-bF);a4(l*aX,m)},scrollByY:function(k,m){var n=bY()+k,l=n/(bQ-aM);a5(l*aY,m)},positionDragX:function(k,l){a4(k,l)},positionDragY:function(l,k){a5(l,k)},animate:function(o,l,k,m){var n={};n[l]=k;o.animate(n,{duration:b0.animateDuration,ease:b0.animateEase,queue:false,step:m})},getContentPositionX:function(){return bW()},getContentPositionY:function(){return bY()},getContentWidth:function(){return a7},getContentHeight:function(){return bQ},getPercentScrolledX:function(){return bW()/(a7-bF)},getPercentScrolledY:function(){return bY()/(bQ-aM)},getIsScrollableH:function(){return bU},getIsScrollableV:function(){return bZ},getContentPane:function(){return a2},scrollToBottom:function(k){a5(aY,k)},hijackInternalLinks:function(){aU()},destroy:function(){a0()}});bu(bc)}h=e.extend({},e.fn.jScrollPane.defaults,h);e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){h[this]=h[this]||h.speed});var i;this.each(function(){var l=e(this),k=l.data("jsp");if(k){k.reinitialise(h)}else{k=new j(l,h);l.data("jsp",k)}i=i?i.add(l):l});return i};e.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:g,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(c,this);(function(f){if(typeof define==="function"&&define.amd){define(["jquery"],f)}else{if(typeof exports==="object"){module.exports=f}else{f(c)}}})(function(k){function l(x){var i=x||window.event,y=[].slice.call(arguments,1),e=0,w=0,v=0,q=0,p=0,r;x=k.event.fix(i);x.type="mousewheel";if(i.wheelDelta){e=i.wheelDelta}if(i.detail){e=i.detail*-1}if(i.deltaY){v=i.deltaY*-1;e=v}if(i.deltaX){w=i.deltaX;e=w*-1}if(i.wheelDeltaY!==undefined){v=i.wheelDeltaY}if(i.wheelDeltaX!==undefined){w=i.wheelDeltaX*-1}q=Math.abs(e);if(!j||q<j){j=q}p=Math.max(Math.abs(v),Math.abs(w));if(!f||p<f){f=p}r=e>0?"floor":"ceil";e=Math[r](e/j);w=Math[r](w/f);v=Math[r](v/f);y.unshift(x,e,w,v);return(k.event.dispatch||k.event.handle).apply(this,y)}var g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"];var m="onwheel" in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];var j,f;if(k.event.fixHooks){for(var h=g.length;h;){k.event.fixHooks[g[--h]]=k.event.mouseHooks}}k.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=m.length;i;){this.addEventListener(m[--i],l,false)}}else{this.onmousewheel=l}},teardown:function(){if(this.removeEventListener){for(var i=m.length;i;){this.removeEventListener(m[--i],l,false)}}else{this.onmousewheel=null}}};k.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}})});c.ajax=(function(i){var k=location.protocol,e=location.hostname,f=RegExp(k+"//"+e);function h(l){return !f.test(l)&&/\/\//.test(l)}function g(l){l=l.split("/");l=l[l.length-1];var m=l.split(".")[0];return m}function j(l){l=l.split("/");l=l[l.length-1];var n=l.split(".")[0];var m=c("#fig_article_"+n);m.unmask();m.css({"background-color":"#F5F5F5","min-height":"300px"})}return function(m){var l=m.url;m.dataType="text";if(/get/i.test(m.type)&&!/json/i.test(m.dataType)&&h(l)){m.url=m.url+"?callback=?";m.dataType="json";var n=m.data;m.data={q:g(l),start:0,format:"json"};if(!m.success&&m.complete){m.success=m.complete;delete m.complete}m.success=(function(o){return function(p){if(o){try{o.call(this,{responseText:p},"success")}catch(q){j(l)}}}})(m.success)}return i.apply(this,arguments)}})(c.ajax);(function(e){e.fn.mask=function(f,g){e(this).each(function(){if(g!==undefined&&g>0){var h=e(this);h.data("_mask_timeout",setTimeout(function(){e.maskElement(h,f)},g))}else{e.maskElement(e(this),f)}})};e.fn.unmask=function(){e(this).each(function(){e.unmaskElement(e(this))})};e.fn.isMasked=function(){return this.hasClass("masked")};e.maskElement=function(f,i){if(f.data("_mask_timeout")!==undefined){clearTimeout(f.data("_mask_timeout"));f.removeData("_mask_timeout")}if(f.isMasked()){e.unmaskElement(f)}if(f.css("position")=="static"){f.addClass("masked-relative")}f.addClass("masked");var h=e('<div class="loadmask"></div>');if(navigator.userAgent.toLowerCase().indexOf("msie")>-1){h.height(f.height()+parseInt(f.css("padding-top"))+parseInt(f.css("padding-bottom")));h.width(f.width()+parseInt(f.css("padding-left"))+parseInt(f.css("padding-right")))}if(navigator.userAgent.toLowerCase().indexOf("msie 6")>-1){f.find("select").addClass("masked-hidden")}f.append(h);if(i!==undefined){var g=e('<div class="loadmask-msg" style="display:none;"></div>');g.append("<div>"+i+"</div>");f.append(g);g.css("top",Math.round(f.height()/2-(g.height()-parseInt(g.css("padding-top"))-parseInt(g.css("padding-bottom")))/2-16)+"px");g.css("left",Math.round(f.width()/2-(g.width()-parseInt(g.css("padding-left"))-parseInt(g.css("padding-right")))/2-26)+"px");g.show()}};e.unmaskElement=function(f){if(f.data("_mask_timeout")!==undefined){clearTimeout(f.data("_mask_timeout"));f.removeData("_mask_timeout")}f.find(".loadmask-msg,.loadmask").remove();f.removeClass("masked");f.removeClass("masked-relative");f.find("select").removeClass("masked-hidden")}})(c);c(document).ready(function(l){var H="//wl.figshare.com";var z=0;var C=0;var j=0;var A={};var o={};var f={};var n={};var F={};var p={};var B=false;var i=l(window).height()-320;var g=0;var G=l(window).height();var v=l(window).width();var r=parseInt(v*0.2);if(r>280){r=280}else{if(r<140){r=140}}var w=(v-r-140);if(w>1140){w=1140}var u=function(){var I=l("#figshare_enlarge");if(I.length!=0){return false}l("body").append('            <a href="javascript: void(0)" id="go_overlay" style="display: none;"></a>            <a href="javascript: void(0)" id="go_share" style="display: none;"></a>            <div id="figshare_enlarge" class="enlarge-view" style="display:none">                <div class="fw-overlay-curtain"></div>                <a class="fw-close-enlarge" title="close overlay" href="javascript:void(0)">                  <span>or press Esc</span>                </a>                <div class="fw-list-wrap black">                <ul class="fw-enlarge-list">                    <li class="active">                        <a class="fw-el-trigger" href="javascript:void(0)">                            <div class="fw-el-thumb">                            </div>                            <div class="fw-el-details">                                <span class="fw-eld-filename">Phospholipuds_p...csv</span>                                <span class="fw-eld-filesize">112kb</span>                                <div class="fw-eld-icon"></div>                            </div>                        </a>                    </li>                    <li>                        <a class="fw-el-trigger" href="javascript:void(0)">                            <div class="fw-el-thumb">                            </div>                            <div class="fw-el-details">                                <span class="fw-eld-filename">Phospholipuds_p...csv</span>                                <span class="fw-eld-filesize">112kb</span>                                <div class="fw-eld-icon"></div>                            </div>                        </a>                    </li>                </ul>                </div>                  <div class="fw-enlarge-preview">                    <div class="fw-preview-wrap">                    <a href="javascript:void(0)" title="previous file" class="fw-ep-left">                      <span></span>                    </a>                    <a href="javascript:void(0)" title="next file"class="fw-ep-right">                      <span></span>                    </a>                      <div class="fw-ep-embed-wrap">                        <div class="fw-ep-embed">                        </div>                      </div>                      <div class="fw-ep-details">                      </div>                      <div class="fw-ep-caption-wrap">                      <div class="fw-ep-caption">                          <a href="javascript:void(0)" class="fp-cap-minimize"><span></span>Hide description</a>                          <div class="fw-ep-cap-shadow"></div>                          <div class="fw-epc-content-wrap">                            <div class="fw-epc-content">                                  <div class="fw-more-description">                                    <a class="fw-epc-more" href="javascript:void(0)"><span></span>Show more</a>                                  </div>                                <div class="fw-epc-desc"></div>                            </div>                          </div>                      </div>                      </div>                  </div>                </div>            </div>        ');var I=l("#figshare_enlarge");var J=l(".fw-ep-embed",I).css({height:(G-126-110)+"px"});l("#figshare_enlarge .fw-list-wrap").css({width:r+"px"});l(".fw-enlarge-preview",I).css({height:G-100+"px","margin-top":"-"+((G-100)/2)+"px",width:w+"px","margin-left":"-"+(w-r)/2+"px"});l(".fw-preview-wrap",I).css({width:"100%"})};var D=function(I){g=C;l("#pv_"+C+" a").css("border","1px solid black")};var q=function(R,M){var I=l("#fig_article_"+R);var L=I.css("height");L=L.substring(0,L.length-2);l("#fig_article_"+R).unmask();n[parseInt(M.article_id)]=M.files_id_list;F[parseInt(M.article_id)]=M.files_id_list[0];A[parseInt(M.article_id)]=M.files;p[parseInt(M.article_id)]=M.article_files_count;l("#fig_article_"+M.article_id).html(M.widget_html);var O=l(".fig_title",I).height();var T=l(".fig_bottom",I).height();if(L<100){L=0}var U=330;if(L==0){}else{U=L-O-T;var N=l(".fig_description",I).height();U-=N+5}var S=l(".first_preview_bar",I);if(S.length>0){l(".fig_fileset",I).height(U+"px");U-=S.height()+3;if(L==0){l(".first_preview_box .viewer_container",I).css("min-height",U+"px")}}else{if(L==0){U-=50;l(".viewer_container",I).css("min-height",U+"px")}}f[parseInt(M.article_id)]=M.article_type;if(M.article_type==4){setTimeout(function(){l("#fig_article_"+M.article_id+" div.fig_fileset").jScrollPane({showArrows:true,verticalDragMinHeight:50})},300)}else{l(".viewer_container",l("#fig_article_"+R)).css("overflow","hidden")}var P=l(".fw-fileset .fw-file",I);var K=(P.length*41);var J=l(".fw-content",I).height();var Q=l(".fw-fileset-wrap",I);if(J<K){Q.css("height",parseInt(J*0.8)+"px")}else{Q.css("height",K+"px")}};var t=function(I,K){var J=l("#figshare_enlarge .fw-preview-wrap");J.mask("Loading...");l.getJSON(H+"/articles/get_inline_display_html/"+I+"/"+K+"/1/",function(N){h();if(typeof N.responseText!="undefined"){var Q=N.responseText}else{var Q=c.parseJSON(N)}if(typeof Q=="string"){var Q=c.parseJSON(Q)}var O=l("#figshare_enlarge");J.unmask();l(".fw-ep-embed",O).html(Q.html);var L=Q.download;var P='<span class="fw-epd-filename">'+Q.name+'</span>                          <a href="'+L+'" class="fw-epd-download">download <span class="fw-epd-filesize">('+Q.size+")</span></a>";l(".fw-ep-details",O).html(P);l(".fw-epc-desc",O).html(Q.description);if(Q.description==""){l(".fw-ep-caption-wrap",O).hide()}else{l(".fw-ep-caption-wrap",O).show();if(l(".fw-epc-content",O).height()<l(".fw-epc-desc",O).height()){l(".fw-more-description",O).show()}else{l(".fw-more-description",O).hide()}}l("#f_prev_"+I+"_"+E).parent().removeClass("active");l("#f_prev_"+I+"_"+K).parent().addClass("active");e=I;E=K;var M=n[I];if(M[0]==K){l("#figshare_enlarge .fw-ep-left").addClass("disabled");k[0]=1}else{if(k[0]==1){l("#figshare_enlarge .fw-ep-left").removeClass("disabled")}}if(M[M.length-1]==K){l("#figshare_enlarge .fw-ep-right").addClass("disabled");k[1]=1}else{if(k[1]==1){l("#figshare_enlarge .fw-ep-right").removeClass("disabled")}}})};var y=function(I,K){var J=l("#fig_article_"+I+" .fw-embed");J.mask("Loading...");l.getJSON(H+"/articles/get_inline_display_html/"+I+"/"+K+"/0/",function(L){if(typeof L.responseText!="undefined"){var M=L.responseText}else{var M=c.parseJSON(L)}if(typeof M=="string"){var M=c.parseJSON(M)}J.html(M.html);l("#fig_article_"+I+" .fw-download-this span").html("("+M.size+")");if(M.description==""||M.description=="None"){l("#fig_article_"+I+" .fw-caption").hide()}else{l("#fig_article_"+I+" .fw-caption").show()}l("#fig_article_"+I+" .fw-cap-content").html(M.description);l("#fig_article_"+I+" .fw-title-bar").html(M.name);l("#fig_article_"+I+" .fw-download-this a").attr("href",M.download)})};var e=0;var E=0;var k=[0,0];var x=function(J,K,I){if(K==1){l(".fw-prev",J).addClass("disabled")}else{l(".fw-prev",J).removeClass("disabled")}if(n[I].length==K){l(".fw-next",J).addClass("disabled")}else{l(".fw-next",J).removeClass("disabled")}};var s=false;var h=function(){var I=l("#figshare_enlarge");l(".fp-cap-minimize",I).hide();l(".fw-ep-caption-wrap",I).css({height:"auto"});l(".fw-ep-caption",I).css({bottom:"auto",position:"relative","min-height":"auto"});l(".fw-epc-content",I).css({"max-height":"59px","overflow-y":"hidden"})};var m=function(){l("#figshare_enlarge").off("click","a.fw-ep-right").on("click","a.fw-ep-right",function(){if(l(this).hasClass("disabled")){return false}var I=n[e];var J=l.inArray(E,I);t(e,I[J+1])});l("#figshare_enlarge").off("click","a.fw-ep-left").on("click","a.fw-ep-left",function(){if(l(this).hasClass("disabled")){return false}var I=n[e];var J=l.inArray(E,I);t(e,I[J-1])});l("#figshare_enlarge").off("click","a.fw-el-trigger").on("click","a.fw-el-trigger",function(){var I=l(this).attr("id").split("_");t(parseInt(I[2]),parseInt(I[3]));return false});l(".figshare_widget").off("click",".fw-prev").on("click",".fw-prev",function(K){var J=l(this).parent().parent().parent().parent();var M=l(".fwc-current",J);var L=parseInt(l(".curent_article_id",J).val());if(parseInt(M.html())==1){return false}var I=parseInt(M.html())-1;M.html(I);x(J,I,L);y(L,n[L][I-1]);l(".curent_file_id",J).val(n[L][I-1])});l(".figshare_widget").off("click",".fw-next").on("click",".fw-next",function(K){var J=l(this).parent().parent().parent().parent();var M=parseInt(l(".curent_article_id",J).val());var L=l(".fwc-current",J);if(parseInt(L.html())>=n[M].length){return false}var I=parseInt(L.html())+1;L.html(I);x(J,I,M);y(M,n[M][I-1]);l(".curent_file_id",J).val(n[M][I-1])});l(".figshare_widget").off("click","a.show_all_files").on("click","a.show_all_files",function(){var L=l(this).parent().parent().parent().parent().parent();l(".first_preview",L).hide();l(".fig_fileset",L).show();var K=l(".fig_fileset",L).height();var I=l(".jspPane",L).height();if(I<K){l(".viewer_container",L).css("height",I+"px")}var J=l(".fig_fileset",L).data("jsp");try{J.reinitialise()}catch(M){}return false});l(".figshare_widget").off("click","a.prev_lnk").on("click","a.prev_lnk",function(J){var K=l(this).attr("id").split("_");var L=parseInt(K[2]);var I=parseInt(K[1]);l("#figshare_enlarge .fw-enlarge-list").html(A[L]);if(n[L].length==1){l("#figshare_enlarge .fw-list-wrap").hide();l("#figshare_enlarge .fw-ep-left").hide();l("#figshare_enlarge .fw-ep-right").hide();l("#figshare_enlarge .fw-enlarge-preview").css({width:"90%","margin-left":"-45%"})}else{l("#figshare_enlarge .fw-list-wrap").show();l("#figshare_enlarge .fw-ep-left").show();l("#figshare_enlarge .fw-ep-right").show();l("#figshare_enlarge .fw-enlarge-preview").css({height:"auto","margin-top":"-"+((G-100)/2)+"px",width:w+"px","margin-left":"-"+(w-r)/2+"px"})}if(r<210){l("#figshare_enlarge .fw-el-thumb").hide()}t(L,I);l("body").css("overflow","hidden");l("#figshare_enlarge").css("width",l(document).width());l("#figshare_enlarge").show();l(".fw-list-wrap").jScrollPane({showArrows:true,verticalDragMinHeight:50})});l(".figshare_widget").off("click","a.fig_refresh_now").on("click","a.fig_refresh_now",function(K){var I=l(this).parent().parent().attr("id").split("_")[2];var J=0;l("#fig_article_"+I+" .fig_error").mask("Loading...");l.getJSON(H+"/widget/plos/"+I+".json",function(L){if(typeof L.responseText!="undefined"){var M=L.responseText}else{var M=c.parseJSON(L)}if(typeof M=="string"){var M=c.parseJSON(M)}q(I,M)})});l("#figshare_enlarge").off("click","a.thumb_prev").on("click","a.thumb_prev",function(J){var K=l(this).parent().attr("id").substring(3);var I=0;l("#pv_"+C+" a").css("border","1px solid #ccc");C=parseInt(K);l("#display_preview").mask("Loading...");l.getJSON(H+"/articles/plos_get_display_html/"+C+"/",function(L){if(typeof L.responseText!="undefined"){var M=L.responseText}else{var M=c.parseJSON(L)}if(typeof M=="string"){var M=c.parseJSON(M)}l("#display_preview").html(M.html);l("#d_lnk").html(M.link);l("#d_lnk").css("visibility","visible");l("#display_preview .viewer_container_pop").css("height",i+"px");l(".viewer_container_pop").show();l("#display_preview").css("height",i+"px");if(l("#display_preview .viewer_container_pop").hasClass("txt_viewer")){l("#display_preview .viewer_container_pop").css("height",i+"px")}else{l("#display_preview .viewer_container_pop").css("height",i+"px")}D(C)})});l(".figshare_widget").off("click","a.fw-download-trigger").on("click","a.fw-download-trigger",function(I){if(!l(this).parent().hasClass("active")){l(this).parent().addClass("active")}else{l(this).parent().removeClass("active")}return false});l(".fw-cta-download").mouseover(function(){s=true});l(".fw-cta-download").mouseout(function(){s=false});l(".figshare_widget").off("click",".fw-list").on("click",".fw-list",function(){var I=l(this).attr("id").split("_")[1];var J=l("#fig_article_"+I);l(this).toggleClass("active");if(l(".fw-fileset-overlay",J).css("display")!="block"){l(".fw-fileset-overlay",J).fadeIn(440);l(".fw-fileset").jScrollPane({showArrows:true,verticalDragMinHeight:50})}else{l(".fw-fileset-overlay",J).fadeOut(440)}});l(".figshare_widget").off("click",".fw-curtain").on("click",".fw-curtain",function(){l(".fw-list").toggleClass("active");l(".fw-fileset-overlay").fadeOut(440)});l(".figshare_widget").off("click",".fw-cta-enlarge").on("click",".fw-cta-enlarge",function(){var I=parseInt(l(".curent_article_id",l(this).parent()).val());var J=parseInt(l(".curent_file_id",l(this).parent()).val());l("#figshare_enlarge .fw-enlarge-list").html(A[I]);if(n[I].length==1){l("#figshare_enlarge .fw-list-wrap").hide();l("#figshare_enlarge .fw-ep-left").hide();l("#figshare_enlarge .fw-ep-right").hide();l("#figshare_enlarge .fw-enlarge-preview").css({width:"90%","margin-left":"-45%"})}else{l("#figshare_enlarge .fw-list-wrap").show();l("#figshare_enlarge .fw-ep-left").show();l("#figshare_enlarge .fw-ep-right").show();l("#figshare_enlarge .fw-enlarge-preview").css({height:"auto","margin-top":"-"+((G-100)/2)+"px",width:w+"px","margin-left":"-"+(w-r)/2+"px"})}if(r<210){l("#figshare_enlarge .fw-el-thumb").hide()}t(I,J);l("body").css("overflow","hidden");l("#figshare_enlarge").css("width",l(document).width());l("#figshare_enlarge").show();l("#figshare_enlarge .fw-list-wrap").jScrollPane({showArrows:true,verticalDragMinHeight:50})});l("#figshare_enlarge").off("click",".fw-close-enlarge").on("click",".fw-close-enlarge",function(){l("body").css("overflow","auto");l("#figshare_enlarge").css("width",l(document).width());l("#figshare_enlarge").hide()});l("#figshare_enlarge").off("click",".fp-cap-minimize").on("click",".fp-cap-minimize",function(){l("#figshare_enlarge .fw-more-description").show();h();l(".fw-epc-content").css("overflow-y","hidden");return false});l("#figshare_enlarge").off("click",".fw-epc-more").on("click",".fw-epc-more",function(){var I=l("#figshare_enlarge");l(".fw-ep-caption-wrap",I).css({height:l("#figshare_enlarge .fw-ep-caption-wrap").height()+"px"});l(".fw-ep-caption",I).css({bottom:"0",left:"0",position:"absolute","min-height":"115px"});l(".fw-epc-content",I).css({"max-height":l(".fw-enlarge-preview").height()*80/100,"overflow-y":"auto"});l(".fw-more-description",I).hide();l(".fp-cap-minimize",I).show()});l("#figshare_enlarge").off("click",".fw-overlay-curtain").on("click",".fw-overlay-curtain",function(){l(".fw-close-enlarge").trigger("click")});l(".figshare_widget").off("click","a.aj_download_all").on("click","a.aj_download_all",function(){var J=l(this);var I=J.html();var K=parseInt(J.attr("id").split("_")[1]);J.html("Creating archive...");l.getJSON("//figshare.com/secure/download/article_url/"+K,function(L){if(typeof L.responseText!="undefined"){var M=L.responseText}else{var M=c.parseJSON(L)}l("<iframe>",{src:"//figshare.com/secure"+M.download_url}).css("display","none").appendTo("body");J.html(I)});return false})};load_figshare_widget=function(){var I=l(".figshare_widget");if(I.length==0){return false}u();I.each(function(M,L){try{var K=l(this).attr("doi").replace("/","_");l(this).addClass("figshare_file_widget")}catch(M){}var J=0;l.getJSON(H+"/widget/plos/"+K+".json",function(O){if(typeof O.responseText!="undefined"){var P=O.responseText}else{var P=c.parseJSON(O)}if(typeof P=="string"){var P=c.parseJSON(P)}l("#figshare_enlarge").addClass(P.skin);var N=P.article_id;l(L).attr("id","fig_article_"+N);q(N,P)})});m()};load_figshare_widget();l(document).click(function(){if(!s){l(".fw-cta-download").removeClass("active")}});l(document).keydown(function(I){if(I.which==27){I.preventDefault();l(".fw-close-enlarge").trigger("click")}});l(document).keydown(function(I){if(I.keyCode==37||I.keyCode==38){l("#figshare_enlarge .fw-ep-left").trigger("click")}else{if(I.keyCode==39||I.keyCode==40){l("#figshare_enlarge .fw-ep-right").trigger("click")}}})})}})();